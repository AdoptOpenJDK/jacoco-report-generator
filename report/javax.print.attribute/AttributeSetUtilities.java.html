<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>AttributeSetUtilities.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.print.attribute</a> &gt; <span class="el_source">AttributeSetUtilities.java</span></div><h1>AttributeSetUtilities.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2000, 2004, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */


package javax.print.attribute;

import java.io.Serializable;

/**
 * Class AttributeSetUtilities provides static methods for manipulating
 * AttributeSets.
 * &lt;ul&gt;
 * &lt;li&gt;Methods for creating unmodifiable and synchronized views of attribute
 * sets.
 * &lt;li&gt;operations useful for building
 * implementations of interface {@link AttributeSet AttributeSet}
 * &lt;/ul&gt;
 * &lt;P&gt;
 * An &lt;B&gt;unmodifiable view&lt;/B&gt; &lt;I&gt;U&lt;/I&gt; of an AttributeSet &lt;I&gt;S&lt;/I&gt; provides a
 * client with &quot;read-only&quot; access to &lt;I&gt;S&lt;/I&gt;. Query operations on &lt;I&gt;U&lt;/I&gt;
 * &quot;read through&quot; to &lt;I&gt;S&lt;/I&gt;; thus, changes in &lt;I&gt;S&lt;/I&gt; are reflected in
 * &lt;I&gt;U&lt;/I&gt;. However, any attempt to modify &lt;I&gt;U&lt;/I&gt;,
 *  results in an UnmodifiableSetException.
 * The unmodifiable view object &lt;I&gt;U&lt;/I&gt; will be serializable if the
 * attribute set object &lt;I&gt;S&lt;/I&gt; is serializable.
 * &lt;P&gt;
 * A &lt;B&gt;synchronized view&lt;/B&gt; &lt;I&gt;V&lt;/I&gt; of an attribute set &lt;I&gt;S&lt;/I&gt; provides a
 * client with synchronized (multiple thread safe) access to &lt;I&gt;S&lt;/I&gt;. Each
 * operation of &lt;I&gt;V&lt;/I&gt; is synchronized using &lt;I&gt;V&lt;/I&gt; itself as the lock
 * object and then merely invokes the corresponding operation of &lt;I&gt;S&lt;/I&gt;. In
 * order to guarantee mutually exclusive access, it is critical that all
 * access to &lt;I&gt;S&lt;/I&gt; is accomplished through &lt;I&gt;V&lt;/I&gt;. The synchronized view
 * object &lt;I&gt;V&lt;/I&gt; will be serializable if the attribute set object &lt;I&gt;S&lt;/I&gt;
 * is serializable.
 * &lt;P&gt;
 * As mentioned in the package description of javax.print, a null reference
 * parameter to methods is
 * incorrect unless explicitly documented on the method as having a meaningful
 * interpretation.  Usage to the contrary is incorrect coding and may result in
 * a run time exception either immediately
 * or at some later time. IllegalArgumentException and NullPointerException
 * are examples of typical and acceptable run time exceptions for such cases.
 *
 * @author  Alan Kaminsky
 */
public final class AttributeSetUtilities {

    /* Suppress default constructor, ensuring non-instantiability.
     */
<span class="nc" id="L72">    private AttributeSetUtilities() {</span>
<span class="nc" id="L73">    }</span>

    /**
      * @serial include
      */
    private static class UnmodifiableAttributeSet
        implements AttributeSet, Serializable {

        private AttributeSet attrset;

        /* Unmodifiable view of the underlying attribute set.
         */
<span class="nc" id="L85">        public UnmodifiableAttributeSet(AttributeSet attributeSet) {</span>

<span class="nc" id="L87">            attrset = attributeSet;</span>
<span class="nc" id="L88">        }</span>

        public Attribute get(Class&lt;?&gt; key) {
<span class="nc" id="L91">            return attrset.get(key);</span>
        }

        public boolean add(Attribute attribute) {
<span class="nc" id="L95">            throw new UnmodifiableSetException();</span>
        }

        public synchronized boolean remove(Class&lt;?&gt; category) {
<span class="nc" id="L99">            throw new UnmodifiableSetException();</span>
        }

        public boolean remove(Attribute attribute) {
<span class="nc" id="L103">            throw new UnmodifiableSetException();</span>
        }

        public boolean containsKey(Class&lt;?&gt; category) {
<span class="nc" id="L107">            return attrset.containsKey(category);</span>
        }

        public boolean containsValue(Attribute attribute) {
<span class="nc" id="L111">            return attrset.containsValue(attribute);</span>
        }

        public boolean addAll(AttributeSet attributes) {
<span class="nc" id="L115">            throw new UnmodifiableSetException();</span>
        }

        public int size() {
<span class="nc" id="L119">            return attrset.size();</span>
        }

        public Attribute[] toArray() {
<span class="nc" id="L123">            return attrset.toArray();</span>
        }

        public void clear() {
<span class="nc" id="L127">            throw new UnmodifiableSetException();</span>
        }

        public boolean isEmpty() {
<span class="nc" id="L131">            return attrset.isEmpty();</span>
        }

        public boolean equals(Object o) {
<span class="nc" id="L135">            return attrset.equals (o);</span>
        }

        public int hashCode() {
<span class="nc" id="L139">            return attrset.hashCode();</span>
        }

    }

    /**
      * @serial include
      */
    private static class UnmodifiableDocAttributeSet
        extends UnmodifiableAttributeSet
        implements DocAttributeSet, Serializable {

        public UnmodifiableDocAttributeSet(DocAttributeSet attributeSet) {

<span class="nc" id="L153">            super (attributeSet);</span>
<span class="nc" id="L154">        }</span>
    }

    /**
      * @serial include
      */
    private static class UnmodifiablePrintRequestAttributeSet
        extends UnmodifiableAttributeSet
        implements PrintRequestAttributeSet, Serializable
    {
        public UnmodifiablePrintRequestAttributeSet
            (PrintRequestAttributeSet attributeSet) {

<span class="nc" id="L167">            super (attributeSet);</span>
<span class="nc" id="L168">        }</span>
    }

    /**
      * @serial include
      */
    private static class UnmodifiablePrintJobAttributeSet
        extends UnmodifiableAttributeSet
        implements PrintJobAttributeSet, Serializable
    {
        public UnmodifiablePrintJobAttributeSet
            (PrintJobAttributeSet attributeSet) {

<span class="nc" id="L181">            super (attributeSet);</span>
<span class="nc" id="L182">        }</span>
    }

    /**
      * @serial include
      */
    private static class UnmodifiablePrintServiceAttributeSet
        extends UnmodifiableAttributeSet
        implements PrintServiceAttributeSet, Serializable
    {
        public UnmodifiablePrintServiceAttributeSet
            (PrintServiceAttributeSet attributeSet) {

<span class="nc" id="L195">            super (attributeSet);</span>
<span class="nc" id="L196">        }</span>
    }

    /**
     * Creates an unmodifiable view of the given attribute set.
     *
     * @param  attributeSet  Underlying attribute set.
     *
     * @return  Unmodifiable view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null. Null is never a
     */
    public static AttributeSet unmodifiableView(AttributeSet attributeSet) {
<span class="nc bnc" id="L210" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L211">            throw new NullPointerException();</span>
        }

<span class="nc" id="L214">        return new UnmodifiableAttributeSet(attributeSet);</span>
    }

    /**
     * Creates an unmodifiable view of the given doc attribute set.
     *
     * @param  attributeSet  Underlying doc attribute set.
     *
     * @return  Unmodifiable view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static DocAttributeSet unmodifiableView
        (DocAttributeSet attributeSet) {
<span class="nc bnc" id="L229" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L230">            throw new NullPointerException();</span>
        }
<span class="nc" id="L232">        return new UnmodifiableDocAttributeSet(attributeSet);</span>
    }

    /**
     * Creates an unmodifiable view of the given print request attribute set.
     *
     * @param  attributeSet  Underlying print request attribute set.
     *
     * @return  Unmodifiable view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static PrintRequestAttributeSet
        unmodifiableView(PrintRequestAttributeSet attributeSet) {
<span class="nc bnc" id="L247" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L248">            throw new NullPointerException();</span>
        }
<span class="nc" id="L250">        return new UnmodifiablePrintRequestAttributeSet(attributeSet);</span>
    }

    /**
     * Creates an unmodifiable view of the given print job attribute set.
     *
     * @param  attributeSet  Underlying print job attribute set.
     *
     * @return  Unmodifiable view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static PrintJobAttributeSet
        unmodifiableView(PrintJobAttributeSet attributeSet) {
<span class="nc bnc" id="L265" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L266">            throw new NullPointerException();</span>
        }
<span class="nc" id="L268">        return new UnmodifiablePrintJobAttributeSet(attributeSet);</span>
    }

    /**
     * Creates an unmodifiable view of the given print service attribute set.
     *
     * @param  attributeSet  Underlying print service attribute set.
     *
     * @return  Unmodifiable view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static PrintServiceAttributeSet
        unmodifiableView(PrintServiceAttributeSet attributeSet) {
<span class="nc bnc" id="L283" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L284">            throw new NullPointerException();</span>
        }
<span class="nc" id="L286">        return new UnmodifiablePrintServiceAttributeSet (attributeSet);</span>
    }

    /**
      * @serial include
      */
    private static class SynchronizedAttributeSet
                        implements AttributeSet, Serializable {

        private AttributeSet attrset;

<span class="nc" id="L297">        public SynchronizedAttributeSet(AttributeSet attributeSet) {</span>
<span class="nc" id="L298">            attrset = attributeSet;</span>
<span class="nc" id="L299">        }</span>

        public synchronized Attribute get(Class&lt;?&gt; category) {
<span class="nc" id="L302">            return attrset.get(category);</span>
        }

        public synchronized boolean add(Attribute attribute) {
<span class="nc" id="L306">            return attrset.add(attribute);</span>
        }

        public synchronized boolean remove(Class&lt;?&gt; category) {
<span class="nc" id="L310">            return attrset.remove(category);</span>
        }

        public synchronized boolean remove(Attribute attribute) {
<span class="nc" id="L314">            return attrset.remove(attribute);</span>
        }

        public synchronized boolean containsKey(Class&lt;?&gt; category) {
<span class="nc" id="L318">            return attrset.containsKey(category);</span>
        }

        public synchronized boolean containsValue(Attribute attribute) {
<span class="nc" id="L322">            return attrset.containsValue(attribute);</span>
        }

        public synchronized boolean addAll(AttributeSet attributes) {
<span class="nc" id="L326">            return attrset.addAll(attributes);</span>
        }

        public synchronized int size() {
<span class="nc" id="L330">            return attrset.size();</span>
        }

        public synchronized Attribute[] toArray() {
<span class="nc" id="L334">            return attrset.toArray();</span>
        }

        public synchronized void clear() {
<span class="nc" id="L338">            attrset.clear();</span>
<span class="nc" id="L339">        }</span>

        public synchronized boolean isEmpty() {
<span class="nc" id="L342">            return attrset.isEmpty();</span>
        }

        public synchronized boolean equals(Object o) {
<span class="nc" id="L346">            return attrset.equals (o);</span>
        }

        public synchronized int hashCode() {
<span class="nc" id="L350">            return attrset.hashCode();</span>
        }
    }

    /**
      * @serial include
      */
    private static class SynchronizedDocAttributeSet
        extends SynchronizedAttributeSet
        implements DocAttributeSet, Serializable {

        public SynchronizedDocAttributeSet(DocAttributeSet attributeSet) {
<span class="nc" id="L362">            super(attributeSet);</span>
<span class="nc" id="L363">        }</span>
    }

    /**
      * @serial include
      */
    private static class SynchronizedPrintRequestAttributeSet
        extends SynchronizedAttributeSet
        implements PrintRequestAttributeSet, Serializable {

        public SynchronizedPrintRequestAttributeSet
            (PrintRequestAttributeSet attributeSet) {
<span class="nc" id="L375">            super(attributeSet);</span>
<span class="nc" id="L376">        }</span>
    }

    /**
      * @serial include
      */
    private static class SynchronizedPrintJobAttributeSet
        extends SynchronizedAttributeSet
        implements PrintJobAttributeSet, Serializable {

        public SynchronizedPrintJobAttributeSet
            (PrintJobAttributeSet attributeSet) {
<span class="nc" id="L388">            super(attributeSet);</span>
<span class="nc" id="L389">        }</span>
    }

    /**
      * @serial include
      */
    private static class SynchronizedPrintServiceAttributeSet
        extends SynchronizedAttributeSet
        implements PrintServiceAttributeSet, Serializable {
        public SynchronizedPrintServiceAttributeSet
            (PrintServiceAttributeSet attributeSet) {
<span class="nc" id="L400">            super(attributeSet);</span>
<span class="nc" id="L401">        }</span>
    }

    /**
     * Creates a synchronized view of the given attribute set.
     *
     * @param  attributeSet  Underlying attribute set.
     *
     * @return  Synchronized view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static AttributeSet synchronizedView
        (AttributeSet attributeSet) {
<span class="nc bnc" id="L416" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L417">            throw new NullPointerException();</span>
        }
<span class="nc" id="L419">        return new SynchronizedAttributeSet(attributeSet);</span>
    }

    /**
     * Creates a synchronized view of the given doc attribute set.
     *
     * @param  attributeSet  Underlying doc attribute set.
     *
     * @return  Synchronized view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static DocAttributeSet
        synchronizedView(DocAttributeSet attributeSet) {
<span class="nc bnc" id="L434" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L435">            throw new NullPointerException();</span>
        }
<span class="nc" id="L437">        return new SynchronizedDocAttributeSet(attributeSet);</span>
    }

    /**
     * Creates a synchronized view of the given print request attribute set.
     *
     * @param  attributeSet  Underlying print request attribute set.
     *
     * @return  Synchronized view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static PrintRequestAttributeSet
        synchronizedView(PrintRequestAttributeSet attributeSet) {
<span class="nc bnc" id="L452" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L453">            throw new NullPointerException();</span>
        }
<span class="nc" id="L455">        return new SynchronizedPrintRequestAttributeSet(attributeSet);</span>
    }

    /**
     * Creates a synchronized view of the given print job attribute set.
     *
     * @param  attributeSet  Underlying print job attribute set.
     *
     * @return  Synchronized view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     *
     * @exception  NullPointerException
     *     Thrown if &lt;CODE&gt;attributeSet&lt;/CODE&gt; is null.
     */
    public static PrintJobAttributeSet
        synchronizedView(PrintJobAttributeSet attributeSet) {
<span class="nc bnc" id="L470" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L471">            throw new NullPointerException();</span>
        }
<span class="nc" id="L473">        return new SynchronizedPrintJobAttributeSet(attributeSet);</span>
    }

    /**
     * Creates a synchronized view of the given print service attribute set.
     *
     * @param  attributeSet  Underlying print service attribute set.
     *
     * @return  Synchronized view of &lt;CODE&gt;attributeSet&lt;/CODE&gt;.
     */
    public static PrintServiceAttributeSet
        synchronizedView(PrintServiceAttributeSet attributeSet) {
<span class="nc bnc" id="L485" title="All 2 branches missed.">        if (attributeSet == null) {</span>
<span class="nc" id="L486">            throw new NullPointerException();</span>
        }
<span class="nc" id="L488">        return new SynchronizedPrintServiceAttributeSet(attributeSet);</span>
    }


    /**
     * Verify that the given object is a {@link java.lang.Class Class} that
     * implements the given interface, which is assumed to be interface {@link
     * Attribute Attribute} or a subinterface thereof.
     *
     * @param  object     Object to test.
     * @param  interfaceName  Interface the object must implement.
     *
     * @return  If &lt;CODE&gt;object&lt;/CODE&gt; is a {@link java.lang.Class Class}
     *          that implements &lt;CODE&gt;interfaceName&lt;/CODE&gt;,
     *          &lt;CODE&gt;object&lt;/CODE&gt; is returned downcast to type {@link
     *          java.lang.Class Class}; otherwise an exception is thrown.
     *
     * @exception  NullPointerException
     *     (unchecked exception) Thrown if &lt;CODE&gt;object&lt;/CODE&gt; is null.
     * @exception  ClassCastException
     *     (unchecked exception) Thrown if &lt;CODE&gt;object&lt;/CODE&gt; is not a
     *     {@link java.lang.Class Class} that implements
     *     &lt;CODE&gt;interfaceName&lt;/CODE&gt;.
     */
    public static Class&lt;?&gt;
        verifyAttributeCategory(Object object, Class&lt;?&gt; interfaceName) {

<span class="nc" id="L515">        Class result = (Class) object;</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">        if (interfaceName.isAssignableFrom (result)) {</span>
<span class="nc" id="L517">            return result;</span>
        }
        else {
<span class="nc" id="L520">            throw new ClassCastException();</span>
        }
    }

    /**
     * Verify that the given object is an instance of the given interface, which
     * is assumed to be interface {@link Attribute Attribute} or a subinterface
     * thereof.
     *
     * @param  object     Object to test.
     * @param  interfaceName  Interface of which the object must be an instance.
     *
     * @return  If &lt;CODE&gt;object&lt;/CODE&gt; is an instance of
     *          &lt;CODE&gt;interfaceName&lt;/CODE&gt;, &lt;CODE&gt;object&lt;/CODE&gt; is returned
     *          downcast to type {@link Attribute Attribute}; otherwise an
     *          exception is thrown.
     *
     * @exception  NullPointerException
     *     (unchecked exception) Thrown if &lt;CODE&gt;object&lt;/CODE&gt; is null.
     * @exception  ClassCastException
     *     (unchecked exception) Thrown if &lt;CODE&gt;object&lt;/CODE&gt; is not an
     *     instance of &lt;CODE&gt;interfaceName&lt;/CODE&gt;.
     */
    public static Attribute
        verifyAttributeValue(Object object, Class&lt;?&gt; interfaceName) {

<span class="nc bnc" id="L546" title="All 2 branches missed.">        if (object == null) {</span>
<span class="nc" id="L547">            throw new NullPointerException();</span>
        }
<span class="nc bnc" id="L549" title="All 2 branches missed.">        else if (interfaceName.isInstance (object)) {</span>
<span class="nc" id="L550">            return (Attribute) object;</span>
        } else {
<span class="nc" id="L552">            throw new ClassCastException();</span>
        }
    }

    /**
     * Verify that the given attribute category object is equal to the
     * category of the given attribute value object. If so, this method
     * returns doing nothing. If not, this method throws an exception.
     *
     * @param  category   Attribute category to test.
     * @param  attribute  Attribute value to test.
     *
     * @exception  NullPointerException
     *     (unchecked exception) Thrown if the &lt;CODE&gt;category&lt;/CODE&gt; is
     *     null or if the &lt;CODE&gt;attribute&lt;/CODE&gt; is null.
     * @exception  IllegalArgumentException
     *     (unchecked exception) Thrown if the &lt;CODE&gt;category&lt;/CODE&gt; is not
     *     equal to the category of the &lt;CODE&gt;attribute&lt;/CODE&gt;.
     */
    public static void
        verifyCategoryForValue(Class&lt;?&gt; category, Attribute attribute) {

<span class="nc bnc" id="L574" title="All 2 branches missed.">        if (!category.equals (attribute.getCategory())) {</span>
<span class="nc" id="L575">            throw new IllegalArgumentException();</span>
        }
<span class="nc" id="L577">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>