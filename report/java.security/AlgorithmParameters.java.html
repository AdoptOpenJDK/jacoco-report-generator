<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AlgorithmParameters.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.security</a> &gt; <span class="el_source">AlgorithmParameters.java</span></div><h1>AlgorithmParameters.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package java.security;

import java.io.*;
import java.security.spec.AlgorithmParameterSpec;
import java.security.spec.InvalidParameterSpecException;

/**
 * This class is used as an opaque representation of cryptographic parameters.
 *
 * &lt;p&gt;An {@code AlgorithmParameters} object for managing the parameters
 * for a particular algorithm can be obtained by
 * calling one of the {@code getInstance} factory methods
 * (static methods that return instances of a given class).
 *
 * &lt;p&gt;Once an {@code AlgorithmParameters} object is obtained, it must be
 * initialized via a call to {@code init}, using an appropriate parameter
 * specification or parameter encoding.
 *
 * &lt;p&gt;A transparent parameter specification is obtained from an
 * {@code AlgorithmParameters} object via a call to
 * {@code getParameterSpec}, and a byte encoding of the parameters is
 * obtained via a call to {@code getEncoded}.
 *
 * &lt;p&gt; Every implementation of the Java platform is required to support the
 * following standard {@code AlgorithmParameters} algorithms:
 * &lt;ul&gt;
 * &lt;li&gt;{@code AES}&lt;/li&gt;
 * &lt;li&gt;{@code DES}&lt;/li&gt;
 * &lt;li&gt;{@code DESede}&lt;/li&gt;
 * &lt;li&gt;{@code DiffieHellman}&lt;/li&gt;
 * &lt;li&gt;{@code DSA}&lt;/li&gt;
 * &lt;/ul&gt;
 * These algorithms are described in the &lt;a href=
 * &quot;{@docRoot}/../technotes/guides/security/StandardNames.html#AlgorithmParameters&quot;&gt;
 * AlgorithmParameters section&lt;/a&gt; of the
 * Java Cryptography Architecture Standard Algorithm Name Documentation.
 * Consult the release documentation for your implementation to see if any
 * other algorithms are supported.
 *
 * @author Jan Luehe
 *
 *
 * @see java.security.spec.AlgorithmParameterSpec
 * @see java.security.spec.DSAParameterSpec
 * @see KeyPairGenerator
 *
 * @since 1.2
 */

public class AlgorithmParameters {

    // The provider
    private Provider provider;

    // The provider implementation (delegate)
    private AlgorithmParametersSpi paramSpi;

    // The algorithm
    private String algorithm;

    // Has this object been initialized?
<span class="fc" id="L87">    private boolean initialized = false;</span>

    /**
     * Creates an AlgorithmParameters object.
     *
     * @param paramSpi the delegate
     * @param provider the provider
     * @param algorithm the algorithm
     */
    protected AlgorithmParameters(AlgorithmParametersSpi paramSpi,
                                  Provider provider, String algorithm)
<span class="fc" id="L98">    {</span>
<span class="fc" id="L99">        this.paramSpi = paramSpi;</span>
<span class="fc" id="L100">        this.provider = provider;</span>
<span class="fc" id="L101">        this.algorithm = algorithm;</span>
<span class="fc" id="L102">    }</span>

    /**
     * Returns the name of the algorithm associated with this parameter object.
     *
     * @return the algorithm name.
     */
    public final String getAlgorithm() {
<span class="fc" id="L110">        return this.algorithm;</span>
    }

    /**
     * Returns a parameter object for the specified algorithm.
     *
     * &lt;p&gt; This method traverses the list of registered security Providers,
     * starting with the most preferred Provider.
     * A new AlgorithmParameters object encapsulating the
     * AlgorithmParametersSpi implementation from the first
     * Provider that supports the specified algorithm is returned.
     *
     * &lt;p&gt; Note that the list of registered providers may be retrieved via
     * the {@link Security#getProviders() Security.getProviders()} method.
     *
     * &lt;p&gt; The returned parameter object must be initialized via a call to
     * {@code init}, using an appropriate parameter specification or
     * parameter encoding.
     *
     * @param algorithm the name of the algorithm requested.
     * See the AlgorithmParameters section in the &lt;a href=
     * &quot;{@docRoot}/../technotes/guides/security/StandardNames.html#AlgorithmParameters&quot;&gt;
     * Java Cryptography Architecture Standard Algorithm Name Documentation&lt;/a&gt;
     * for information about standard algorithm names.
     *
     * @return the new parameter object.
     *
     * @exception NoSuchAlgorithmException if no Provider supports an
     *          AlgorithmParametersSpi implementation for the
     *          specified algorithm.
     *
     * @see Provider
     */
    public static AlgorithmParameters getInstance(String algorithm)
    throws NoSuchAlgorithmException {
        try {
<span class="fc" id="L146">            Object[] objs = Security.getImpl(algorithm, &quot;AlgorithmParameters&quot;,</span>
                                             (String)null);
<span class="fc" id="L148">            return new AlgorithmParameters((AlgorithmParametersSpi)objs[0],</span>
                                           (Provider)objs[1],
                                           algorithm);
<span class="nc" id="L151">        } catch(NoSuchProviderException e) {</span>
<span class="nc" id="L152">            throw new NoSuchAlgorithmException(algorithm + &quot; not found&quot;);</span>
        }
    }

    /**
     * Returns a parameter object for the specified algorithm.
     *
     * &lt;p&gt; A new AlgorithmParameters object encapsulating the
     * AlgorithmParametersSpi implementation from the specified provider
     * is returned.  The specified provider must be registered
     * in the security provider list.
     *
     * &lt;p&gt; Note that the list of registered providers may be retrieved via
     * the {@link Security#getProviders() Security.getProviders()} method.
     *
     * &lt;p&gt;The returned parameter object must be initialized via a call to
     * {@code init}, using an appropriate parameter specification or
     * parameter encoding.
     *
     * @param algorithm the name of the algorithm requested.
     * See the AlgorithmParameters section in the &lt;a href=
     * &quot;{@docRoot}/../technotes/guides/security/StandardNames.html#AlgorithmParameters&quot;&gt;
     * Java Cryptography Architecture Standard Algorithm Name Documentation&lt;/a&gt;
     * for information about standard algorithm names.
     *
     * @param provider the name of the provider.
     *
     * @return the new parameter object.
     *
     * @exception NoSuchAlgorithmException if an AlgorithmParametersSpi
     *          implementation for the specified algorithm is not
     *          available from the specified provider.
     *
     * @exception NoSuchProviderException if the specified provider is not
     *          registered in the security provider list.
     *
     * @exception IllegalArgumentException if the provider name is null
     *          or empty.
     *
     * @see Provider
     */
    public static AlgorithmParameters getInstance(String algorithm,
                                                  String provider)
        throws NoSuchAlgorithmException, NoSuchProviderException
    {
<span class="pc bpc" id="L197" title="2 of 4 branches missed.">        if (provider == null || provider.length() == 0)</span>
<span class="nc" id="L198">            throw new IllegalArgumentException(&quot;missing provider&quot;);</span>
<span class="fc" id="L199">        Object[] objs = Security.getImpl(algorithm, &quot;AlgorithmParameters&quot;,</span>
                                         provider);
<span class="fc" id="L201">        return new AlgorithmParameters((AlgorithmParametersSpi)objs[0],</span>
                                       (Provider)objs[1],
                                       algorithm);
    }

    /**
     * Returns a parameter object for the specified algorithm.
     *
     * &lt;p&gt; A new AlgorithmParameters object encapsulating the
     * AlgorithmParametersSpi implementation from the specified Provider
     * object is returned.  Note that the specified Provider object
     * does not have to be registered in the provider list.
     *
     * &lt;p&gt;The returned parameter object must be initialized via a call to
     * {@code init}, using an appropriate parameter specification or
     * parameter encoding.
     *
     * @param algorithm the name of the algorithm requested.
     * See the AlgorithmParameters section in the &lt;a href=
     * &quot;{@docRoot}/../technotes/guides/security/StandardNames.html#AlgorithmParameters&quot;&gt;
     * Java Cryptography Architecture Standard Algorithm Name Documentation&lt;/a&gt;
     * for information about standard algorithm names.
     *
     * @param provider the name of the provider.
     *
     * @return the new parameter object.
     *
     * @exception NoSuchAlgorithmException if an AlgorithmParameterGeneratorSpi
     *          implementation for the specified algorithm is not available
     *          from the specified Provider object.
     *
     * @exception IllegalArgumentException if the provider is null.
     *
     * @see Provider
     *
     * @since 1.4
     */
    public static AlgorithmParameters getInstance(String algorithm,
                                                  Provider provider)
        throws NoSuchAlgorithmException
    {
<span class="pc bpc" id="L242" title="1 of 2 branches missed.">        if (provider == null)</span>
<span class="nc" id="L243">            throw new IllegalArgumentException(&quot;missing provider&quot;);</span>
<span class="fc" id="L244">        Object[] objs = Security.getImpl(algorithm, &quot;AlgorithmParameters&quot;,</span>
                                         provider);
<span class="fc" id="L246">        return new AlgorithmParameters((AlgorithmParametersSpi)objs[0],</span>
                                       (Provider)objs[1],
                                       algorithm);
    }

    /**
     * Returns the provider of this parameter object.
     *
     * @return the provider of this parameter object
     */
    public final Provider getProvider() {
<span class="nc" id="L257">        return this.provider;</span>
    }

    /**
     * Initializes this parameter object using the parameters
     * specified in {@code paramSpec}.
     *
     * @param paramSpec the parameter specification.
     *
     * @exception InvalidParameterSpecException if the given parameter
     * specification is inappropriate for the initialization of this parameter
     * object, or if this parameter object has already been initialized.
     */
    public final void init(AlgorithmParameterSpec paramSpec)
        throws InvalidParameterSpecException
    {
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">        if (this.initialized)</span>
<span class="nc" id="L274">            throw new InvalidParameterSpecException(&quot;already initialized&quot;);</span>
<span class="fc" id="L275">        paramSpi.engineInit(paramSpec);</span>
<span class="fc" id="L276">        this.initialized = true;</span>
<span class="fc" id="L277">    }</span>

    /**
     * Imports the specified parameters and decodes them according to the
     * primary decoding format for parameters. The primary decoding
     * format for parameters is ASN.1, if an ASN.1 specification for this type
     * of parameters exists.
     *
     * @param params the encoded parameters.
     *
     * @exception IOException on decoding errors, or if this parameter object
     * has already been initialized.
     */
    public final void init(byte[] params) throws IOException {
<span class="pc bpc" id="L291" title="1 of 2 branches missed.">        if (this.initialized)</span>
<span class="nc" id="L292">            throw new IOException(&quot;already initialized&quot;);</span>
<span class="fc" id="L293">        paramSpi.engineInit(params);</span>
<span class="fc" id="L294">        this.initialized = true;</span>
<span class="fc" id="L295">    }</span>

    /**
     * Imports the parameters from {@code params} and decodes them
     * according to the specified decoding scheme.
     * If {@code format} is null, the
     * primary decoding format for parameters is used. The primary decoding
     * format is ASN.1, if an ASN.1 specification for these parameters
     * exists.
     *
     * @param params the encoded parameters.
     *
     * @param format the name of the decoding scheme.
     *
     * @exception IOException on decoding errors, or if this parameter object
     * has already been initialized.
     */
    public final void init(byte[] params, String format) throws IOException {
<span class="nc bnc" id="L313" title="All 2 branches missed.">        if (this.initialized)</span>
<span class="nc" id="L314">            throw new IOException(&quot;already initialized&quot;);</span>
<span class="nc" id="L315">        paramSpi.engineInit(params, format);</span>
<span class="nc" id="L316">        this.initialized = true;</span>
<span class="nc" id="L317">    }</span>

    /**
     * Returns a (transparent) specification of this parameter object.
     * {@code paramSpec} identifies the specification class in which
     * the parameters should be returned. It could, for example, be
     * {@code DSAParameterSpec.class}, to indicate that the
     * parameters should be returned in an instance of the
     * {@code DSAParameterSpec} class.
     *
     * @param &lt;T&gt; the type of the parameter specification to be returrned
     * @param paramSpec the specification class in which
     * the parameters should be returned.
     *
     * @return the parameter specification.
     *
     * @exception InvalidParameterSpecException if the requested parameter
     * specification is inappropriate for this parameter object, or if this
     * parameter object has not been initialized.
     */
    public final &lt;T extends AlgorithmParameterSpec&gt;
        T getParameterSpec(Class&lt;T&gt; paramSpec)
        throws InvalidParameterSpecException
    {
<span class="pc bpc" id="L341" title="1 of 2 branches missed.">        if (this.initialized == false) {</span>
<span class="nc" id="L342">            throw new InvalidParameterSpecException(&quot;not initialized&quot;);</span>
        }
<span class="fc" id="L344">        return paramSpi.engineGetParameterSpec(paramSpec);</span>
    }

    /**
     * Returns the parameters in their primary encoding format.
     * The primary encoding format for parameters is ASN.1, if an ASN.1
     * specification for this type of parameters exists.
     *
     * @return the parameters encoded using their primary encoding format.
     *
     * @exception IOException on encoding errors, or if this parameter object
     * has not been initialized.
     */
    public final byte[] getEncoded() throws IOException
    {
<span class="pc bpc" id="L359" title="1 of 2 branches missed.">        if (this.initialized == false) {</span>
<span class="nc" id="L360">            throw new IOException(&quot;not initialized&quot;);</span>
        }
<span class="fc" id="L362">        return paramSpi.engineGetEncoded();</span>
    }

    /**
     * Returns the parameters encoded in the specified scheme.
     * If {@code format} is null, the
     * primary encoding format for parameters is used. The primary encoding
     * format is ASN.1, if an ASN.1 specification for these parameters
     * exists.
     *
     * @param format the name of the encoding format.
     *
     * @return the parameters encoded using the specified encoding scheme.
     *
     * @exception IOException on encoding errors, or if this parameter object
     * has not been initialized.
     */
    public final byte[] getEncoded(String format) throws IOException
    {
<span class="nc bnc" id="L381" title="All 2 branches missed.">        if (this.initialized == false) {</span>
<span class="nc" id="L382">            throw new IOException(&quot;not initialized&quot;);</span>
        }
<span class="nc" id="L384">        return paramSpi.engineGetEncoded(format);</span>
    }

    /**
     * Returns a formatted string describing the parameters.
     *
     * @return a formatted string describing the parameters, or null if this
     * parameter object has not been initialized.
     */
    public final String toString() {
<span class="pc bpc" id="L394" title="1 of 2 branches missed.">        if (this.initialized == false) {</span>
<span class="nc" id="L395">            return null;</span>
        }
<span class="fc" id="L397">        return paramSpi.engineToString();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>