<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DefaultLayoutStyle.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">sun.swing</a> &gt; <span class="el_source">DefaultLayoutStyle.java</span></div><h1>DefaultLayoutStyle.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2005, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package sun.swing;

import java.awt.Container;
import java.awt.Insets;
import javax.swing.*;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.border.Border;
import javax.swing.plaf.UIResource;

/**
 * An implementation of &lt;code&gt;LayoutStyle&lt;/code&gt; that returns 6 for related
 * components, otherwise 12.  This class also provides helper methods for
 * subclasses.
 *
 */
<span class="nc bnc" id="L40" title="All 2 branches missed.">public class DefaultLayoutStyle extends LayoutStyle {</span>
<span class="nc" id="L41">    private static final DefaultLayoutStyle INSTANCE =</span>
            new DefaultLayoutStyle();

    public static LayoutStyle getInstance() {
<span class="nc" id="L45">        return INSTANCE;</span>
    }

    @Override
    public int getPreferredGap(JComponent component1, JComponent component2,
            ComponentPlacement type, int position, Container parent) {
<span class="nc bnc" id="L51" title="All 6 branches missed.">        if (component1 == null || component2 == null || type == null) {</span>
<span class="nc" id="L52">            throw new NullPointerException();</span>
        }

<span class="nc" id="L55">        checkPosition(position);</span>

<span class="nc bnc" id="L57" title="All 6 branches missed.">        if (type == ComponentPlacement.INDENT &amp;&amp;</span>
                (position == SwingConstants.EAST ||
                 position == SwingConstants.WEST)) {
<span class="nc" id="L60">            int indent = getIndent(component1, position);</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">            if (indent &gt; 0) {</span>
<span class="nc" id="L62">                return indent;</span>
            }
        }
<span class="nc bnc" id="L65" title="All 2 branches missed.">        return (type == ComponentPlacement.UNRELATED) ? 12 : 6;</span>
    }

    @Override
    public int getContainerGap(JComponent component, int position,
                               Container parent) {
<span class="nc bnc" id="L71" title="All 2 branches missed.">        if (component == null) {</span>
<span class="nc" id="L72">            throw new NullPointerException();</span>
        }
<span class="nc" id="L74">        checkPosition(position);</span>
<span class="nc" id="L75">        return 6;</span>
    }

    /**
     * Returns true if the classes identify a JLabel and a non-JLabel
     * along the horizontal axis.
     */
    protected boolean isLabelAndNonlabel(JComponent c1, JComponent c2,
                                         int position) {
<span class="nc bnc" id="L84" title="All 4 branches missed.">        if (position == SwingConstants.EAST ||</span>
                position == SwingConstants.WEST) {
<span class="nc" id="L86">            boolean c1Label = (c1 instanceof JLabel);</span>
<span class="nc" id="L87">            boolean c2Label = (c2 instanceof JLabel);</span>
<span class="nc bnc" id="L88" title="All 6 branches missed.">            return ((c1Label || c2Label) &amp;&amp; (c1Label != c2Label));</span>
        }
<span class="nc" id="L90">        return false;</span>
    }

    /**
     * For some look and feels check boxs and radio buttons typically
     * don't paint the border, yet they have padding for a border.  Look
     * and feel guidelines generally don't include this space.  Use
     * this method to subtract this space from the specified
     * components.
     *
     * @param source First component
     * @param target Second component
     * @param position Position doing layout along.
     * @param offset Ideal offset, not including border/margin
     * @return offset - border/margin around the component.
     */
    protected int getButtonGap(JComponent source, JComponent target,
                               int position, int offset) {
<span class="nc" id="L108">        offset -= getButtonGap(source, position);</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">        if (offset &gt; 0) {</span>
<span class="nc" id="L110">            offset -= getButtonGap(target, flipDirection(position));</span>
        }
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if (offset &lt; 0) {</span>
<span class="nc" id="L113">            return 0;</span>
        }
<span class="nc" id="L115">        return offset;</span>
    }

    /**
     * For some look and feels check boxs and radio buttons typically
     * don't paint the border, yet they have padding for a border.  Look
     * and feel guidelines generally don't include this space.  Use
     * this method to subtract this space from the specified
     * components.
     *
     * @param source Component
     * @param position Position doing layout along.
     * @param offset Ideal offset, not including border/margin
     * @return offset - border/margin around the component.
     */
    protected int getButtonGap(JComponent source, int position, int offset) {
<span class="nc" id="L131">        offset -= getButtonGap(source, position);</span>
<span class="nc" id="L132">        return Math.max(offset, 0);</span>
    }

    /**
     * If &lt;code&gt;c&lt;/code&gt; is a check box or radio button, and the border is
     * not painted this returns the inset along the specified axis.
     */
    public int getButtonGap(JComponent c, int position) {
<span class="nc" id="L140">        String classID = c.getUIClassID();</span>
<span class="nc bnc" id="L141" title="All 4 branches missed.">        if ((classID == &quot;CheckBoxUI&quot; || classID == &quot;RadioButtonUI&quot;) &amp;&amp;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">                !((AbstractButton)c).isBorderPainted()) {</span>
<span class="nc" id="L143">            Border border = c.getBorder();</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">            if (border instanceof UIResource) {</span>
<span class="nc" id="L145">                return getInset(c, position);</span>
            }
        }
<span class="nc" id="L148">        return 0;</span>
    }

    private void checkPosition(int position) {
<span class="nc bnc" id="L152" title="All 8 branches missed.">        if (position != SwingConstants.NORTH &amp;&amp;</span>
                position != SwingConstants.SOUTH &amp;&amp;
                position != SwingConstants.WEST &amp;&amp;
                position != SwingConstants.EAST) {
<span class="nc" id="L156">            throw new IllegalArgumentException();</span>
        }
<span class="nc" id="L158">    }</span>

    protected int flipDirection(int position) {
<span class="nc bnc" id="L161" title="All 5 branches missed.">        switch(position) {</span>
        case SwingConstants.NORTH:
<span class="nc" id="L163">            return SwingConstants.SOUTH;</span>
        case SwingConstants.SOUTH:
<span class="nc" id="L165">            return SwingConstants.NORTH;</span>
        case SwingConstants.EAST:
<span class="nc" id="L167">            return SwingConstants.WEST;</span>
        case SwingConstants.WEST:
<span class="nc" id="L169">            return SwingConstants.EAST;</span>
        }
<span class="nc bnc" id="L171" title="All 2 branches missed.">        assert false;</span>
<span class="nc" id="L172">        return 0;</span>
    }

    /**
     * Returns the amount to indent the specified component if it's
     * a JCheckBox or JRadioButton.  If the component is not a JCheckBox or
     * JRadioButton, 0 will be returned.
     */
    protected int getIndent(JComponent c, int position) {
<span class="nc" id="L181">        String classID = c.getUIClassID();</span>
<span class="nc bnc" id="L182" title="All 4 branches missed.">        if (classID == &quot;CheckBoxUI&quot; || classID == &quot;RadioButtonUI&quot;) {</span>
<span class="nc" id="L183">            AbstractButton button = (AbstractButton)c;</span>
<span class="nc" id="L184">            Insets insets = c.getInsets();</span>
<span class="nc" id="L185">            Icon icon = getIcon(button);</span>
<span class="nc" id="L186">            int gap = button.getIconTextGap();</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">            if (isLeftAligned(button, position)) {</span>
<span class="nc" id="L188">                return insets.left + icon.getIconWidth() + gap;</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">            } else if (isRightAligned(button, position)) {</span>
<span class="nc" id="L190">                return insets.right + icon.getIconWidth() + gap;</span>
            }
        }
<span class="nc" id="L193">        return 0;</span>
    }

    private Icon getIcon(AbstractButton button) {
<span class="nc" id="L197">        Icon icon = button.getIcon();</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">        if (icon != null) {</span>
<span class="nc" id="L199">            return icon;</span>
        }
<span class="nc" id="L201">        String key = null;</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (button instanceof JCheckBox) {</span>
<span class="nc" id="L203">            key = &quot;CheckBox.icon&quot;;</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">        } else if (button instanceof JRadioButton) {</span>
<span class="nc" id="L205">            key = &quot;RadioButton.icon&quot;;</span>
        }
<span class="nc bnc" id="L207" title="All 2 branches missed.">        if (key != null) {</span>
<span class="nc" id="L208">            Object oIcon = UIManager.get(key);</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">            if (oIcon instanceof Icon) {</span>
<span class="nc" id="L210">                return (Icon)oIcon;</span>
            }
        }
<span class="nc" id="L213">        return null;</span>
    }

    private boolean isLeftAligned(AbstractButton button, int position) {
<span class="nc bnc" id="L217" title="All 2 branches missed.">        if (position == SwingConstants.WEST) {</span>
<span class="nc" id="L218">            boolean ltr = button.getComponentOrientation().isLeftToRight();</span>
<span class="nc" id="L219">            int hAlign = button.getHorizontalAlignment();</span>
<span class="nc bnc" id="L220" title="All 10 branches missed.">            return ((ltr &amp;&amp; (hAlign == SwingConstants.LEFT ||</span>
                             hAlign == SwingConstants.LEADING)) ||
                    (!ltr &amp;&amp; (hAlign == SwingConstants.TRAILING)));
        }
<span class="nc" id="L224">        return false;</span>
    }

    private boolean isRightAligned(AbstractButton button, int position) {
<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (position == SwingConstants.EAST) {</span>
<span class="nc" id="L229">            boolean ltr = button.getComponentOrientation().isLeftToRight();</span>
<span class="nc" id="L230">            int hAlign = button.getHorizontalAlignment();</span>
<span class="nc bnc" id="L231" title="All 10 branches missed.">            return ((ltr &amp;&amp; (hAlign == SwingConstants.RIGHT ||</span>
                             hAlign == SwingConstants.TRAILING)) ||
                    (!ltr &amp;&amp; (hAlign == SwingConstants.LEADING)));
        }
<span class="nc" id="L235">        return false;</span>
    }

    private int getInset(JComponent c, int position) {
<span class="nc" id="L239">        return getInset(c.getInsets(), position);</span>
    }

    private int getInset(Insets insets, int position) {
<span class="nc bnc" id="L243" title="All 2 branches missed.">        if (insets == null) {</span>
<span class="nc" id="L244">            return 0;</span>
        }
<span class="nc bnc" id="L246" title="All 5 branches missed.">        switch(position) {</span>
        case SwingConstants.NORTH:
<span class="nc" id="L248">            return insets.top;</span>
        case SwingConstants.SOUTH:
<span class="nc" id="L250">            return insets.bottom;</span>
        case SwingConstants.EAST:
<span class="nc" id="L252">            return insets.right;</span>
        case SwingConstants.WEST:
<span class="nc" id="L254">            return insets.left;</span>
        }
<span class="nc bnc" id="L256" title="All 2 branches missed.">        assert false;</span>
<span class="nc" id="L257">        return 0;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>