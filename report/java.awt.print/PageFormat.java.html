<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>PageFormat.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.awt.print</a> &gt; <span class="el_source">PageFormat.java</span></div><h1>PageFormat.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package java.awt.print;

import java.awt.geom.AffineTransform;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;

import java.lang.annotation.Native;

/**
 * The &lt;code&gt;PageFormat&lt;/code&gt; class describes the size and
 * orientation of a page to be printed.
 */
public class PageFormat implements Cloneable
{

 /* Class Constants */

    /**
     *  The origin is at the bottom left of the paper with
     *  x running bottom to top and y running left to right.
     *  Note that this is not the Macintosh landscape but
     *  is the Window's and PostScript landscape.
     */
    @Native public static final int LANDSCAPE = 0;

    /**
     *  The origin is at the top left of the paper with
     *  x running to the right and y running down the
     *  paper.
     */
    @Native public static final int PORTRAIT = 1;

    /**
     *  The origin is at the top right of the paper with x
     *  running top to bottom and y running right to left.
     *  Note that this is the Macintosh landscape.
     */
    @Native public static final int REVERSE_LANDSCAPE = 2;

 /* Instance Variables */

    /**
     * A description of the physical piece of paper.
     */
    private Paper mPaper;

    /**
     * The orientation of the current page. This will be
     * one of the constants: PORTRIAT, LANDSCAPE, or
     * REVERSE_LANDSCAPE,
     */
<span class="nc" id="L77">    private int mOrientation = PORTRAIT;</span>

 /* Constructors */

    /**
     * Creates a default, portrait-oriented
     * &lt;code&gt;PageFormat&lt;/code&gt;.
     */
    public PageFormat()
<span class="nc" id="L86">    {</span>
<span class="nc" id="L87">        mPaper = new Paper();</span>
<span class="nc" id="L88">    }</span>

 /* Instance Methods */

    /**
     * Makes a copy of this &lt;code&gt;PageFormat&lt;/code&gt; with the same
     * contents as this &lt;code&gt;PageFormat&lt;/code&gt;.
     * @return a copy of this &lt;code&gt;PageFormat&lt;/code&gt;.
     */
    public Object clone() {
        PageFormat newPage;

        try {
<span class="nc" id="L101">            newPage = (PageFormat) super.clone();</span>
<span class="nc" id="L102">            newPage.mPaper = (Paper)mPaper.clone();</span>

<span class="nc" id="L104">        } catch (CloneNotSupportedException e) {</span>
<span class="nc" id="L105">            e.printStackTrace();</span>
<span class="nc" id="L106">            newPage = null;     // should never happen.</span>
<span class="nc" id="L107">        }</span>

<span class="nc" id="L109">        return newPage;</span>
    }


    /**
     * Returns the width, in 1/72nds of an inch, of the page.
     * This method takes into account the orientation of the
     * page when determining the width.
     * @return the width of the page.
     */
    public double getWidth() {
        double width;
<span class="nc" id="L121">        int orientation = getOrientation();</span>

<span class="nc bnc" id="L123" title="All 2 branches missed.">        if (orientation == PORTRAIT) {</span>
<span class="nc" id="L124">            width = mPaper.getWidth();</span>
        } else {
<span class="nc" id="L126">            width = mPaper.getHeight();</span>
        }

<span class="nc" id="L129">        return width;</span>
    }

    /**
     * Returns the height, in 1/72nds of an inch, of the page.
     * This method takes into account the orientation of the
     * page when determining the height.
     * @return the height of the page.
     */
    public double getHeight() {
        double height;
<span class="nc" id="L140">        int orientation = getOrientation();</span>

<span class="nc bnc" id="L142" title="All 2 branches missed.">        if (orientation == PORTRAIT) {</span>
<span class="nc" id="L143">            height = mPaper.getHeight();</span>
        } else {
<span class="nc" id="L145">            height = mPaper.getWidth();</span>
        }

<span class="nc" id="L148">        return height;</span>
    }

    /**
     * Returns the x coordinate of the upper left point of the
     * imageable area of the &lt;code&gt;Paper&lt;/code&gt; object
     * associated with this &lt;code&gt;PageFormat&lt;/code&gt;.
     * This method takes into account the
     * orientation of the page.
     * @return the x coordinate of the upper left point of the
     * imageable area of the &lt;code&gt;Paper&lt;/code&gt; object
     * associated with this &lt;code&gt;PageFormat&lt;/code&gt;.
     */
    public double getImageableX() {
        double x;

<span class="nc bnc" id="L164" title="All 4 branches missed.">        switch (getOrientation()) {</span>

        case LANDSCAPE:
<span class="nc" id="L167">            x = mPaper.getHeight()</span>
<span class="nc" id="L168">                - (mPaper.getImageableY() + mPaper.getImageableHeight());</span>
<span class="nc" id="L169">            break;</span>

        case PORTRAIT:
<span class="nc" id="L172">            x = mPaper.getImageableX();</span>
<span class="nc" id="L173">            break;</span>

        case REVERSE_LANDSCAPE:
<span class="nc" id="L176">            x = mPaper.getImageableY();</span>
<span class="nc" id="L177">            break;</span>

        default:
            /* This should never happen since it signifies that the
             * PageFormat is in an invalid orientation.
             */
<span class="nc" id="L183">            throw new InternalError(&quot;unrecognized orientation&quot;);</span>

        }

<span class="nc" id="L187">        return x;</span>
    }

    /**
     * Returns the y coordinate of the upper left point of the
     * imageable area of the &lt;code&gt;Paper&lt;/code&gt; object
     * associated with this &lt;code&gt;PageFormat&lt;/code&gt;.
     * This method takes into account the
     * orientation of the page.
     * @return the y coordinate of the upper left point of the
     * imageable area of the &lt;code&gt;Paper&lt;/code&gt; object
     * associated with this &lt;code&gt;PageFormat&lt;/code&gt;.
     */
    public double getImageableY() {
        double y;

<span class="nc bnc" id="L203" title="All 4 branches missed.">        switch (getOrientation()) {</span>

        case LANDSCAPE:
<span class="nc" id="L206">            y = mPaper.getImageableX();</span>
<span class="nc" id="L207">            break;</span>

        case PORTRAIT:
<span class="nc" id="L210">            y = mPaper.getImageableY();</span>
<span class="nc" id="L211">            break;</span>

        case REVERSE_LANDSCAPE:
<span class="nc" id="L214">            y = mPaper.getWidth()</span>
<span class="nc" id="L215">                - (mPaper.getImageableX() + mPaper.getImageableWidth());</span>
<span class="nc" id="L216">            break;</span>

        default:
            /* This should never happen since it signifies that the
             * PageFormat is in an invalid orientation.
             */
<span class="nc" id="L222">            throw new InternalError(&quot;unrecognized orientation&quot;);</span>

        }

<span class="nc" id="L226">        return y;</span>
    }

    /**
     * Returns the width, in 1/72nds of an inch, of the imageable
     * area of the page. This method takes into account the orientation
     * of the page.
     * @return the width of the page.
     */
    public double getImageableWidth() {
        double width;

<span class="nc bnc" id="L238" title="All 2 branches missed.">        if (getOrientation() == PORTRAIT) {</span>
<span class="nc" id="L239">            width = mPaper.getImageableWidth();</span>
        } else {
<span class="nc" id="L241">            width = mPaper.getImageableHeight();</span>
        }

<span class="nc" id="L244">        return width;</span>
    }

    /**
     * Return the height, in 1/72nds of an inch, of the imageable
     * area of the page. This method takes into account the orientation
     * of the page.
     * @return the height of the page.
     */
    public double getImageableHeight() {
        double height;

<span class="nc bnc" id="L256" title="All 2 branches missed.">        if (getOrientation() == PORTRAIT) {</span>
<span class="nc" id="L257">            height = mPaper.getImageableHeight();</span>
        } else {
<span class="nc" id="L259">            height = mPaper.getImageableWidth();</span>
        }

<span class="nc" id="L262">        return height;</span>
    }


    /**
     * Returns a copy of the {@link Paper} object associated
     * with this &lt;code&gt;PageFormat&lt;/code&gt;.  Changes made to the
     * &lt;code&gt;Paper&lt;/code&gt; object returned from this method do not
     * affect the &lt;code&gt;Paper&lt;/code&gt; object of this
     * &lt;code&gt;PageFormat&lt;/code&gt;.  To update the &lt;code&gt;Paper&lt;/code&gt;
     * object of this &lt;code&gt;PageFormat&lt;/code&gt;, create a new
     * &lt;code&gt;Paper&lt;/code&gt; object and set it into this
     * &lt;code&gt;PageFormat&lt;/code&gt; by using the {@link #setPaper(Paper)}
     * method.
     * @return a copy of the &lt;code&gt;Paper&lt;/code&gt; object associated
     *          with this &lt;code&gt;PageFormat&lt;/code&gt;.
     * @see #setPaper
     */
    public Paper getPaper() {
<span class="nc" id="L281">        return (Paper)mPaper.clone();</span>
    }

    /**
     * Sets the &lt;code&gt;Paper&lt;/code&gt; object for this
     * &lt;code&gt;PageFormat&lt;/code&gt;.
     * @param paper the &lt;code&gt;Paper&lt;/code&gt; object to which to set
     * the &lt;code&gt;Paper&lt;/code&gt; object for this &lt;code&gt;PageFormat&lt;/code&gt;.
     * @exception &lt;code&gt;NullPointerException&lt;/code&gt;
     *              a null paper instance was passed as a parameter.
     * @see #getPaper
     */
     public void setPaper(Paper paper) {
<span class="nc" id="L294">         mPaper = (Paper)paper.clone();</span>
<span class="nc" id="L295">     }</span>

    /**
     * Sets the page orientation. &lt;code&gt;orientation&lt;/code&gt; must be
     * one of the constants: PORTRAIT, LANDSCAPE,
     * or REVERSE_LANDSCAPE.
     * @param orientation the new orientation for the page
     * @throws IllegalArgumentException if
     *          an unknown orientation was requested
     * @see #getOrientation
     */
    public void setOrientation(int orientation) throws IllegalArgumentException
    {
<span class="nc bnc" id="L308" title="All 4 branches missed.">        if (0 &lt;= orientation &amp;&amp; orientation &lt;= REVERSE_LANDSCAPE) {</span>
<span class="nc" id="L309">            mOrientation = orientation;</span>
        } else {
<span class="nc" id="L311">            throw new IllegalArgumentException();</span>
        }
<span class="nc" id="L313">    }</span>

    /**
     * Returns the orientation of this &lt;code&gt;PageFormat&lt;/code&gt;.
     * @return this &lt;code&gt;PageFormat&lt;/code&gt; object's orientation.
     * @see #setOrientation
     */
    public int getOrientation() {
<span class="nc" id="L321">        return mOrientation;</span>
    }

    /**
     * Returns a transformation matrix that translates user
     * space rendering to the requested orientation
     * of the page.  The values are placed into the
     * array as
     * {&amp;nbsp;m00,&amp;nbsp;m10,&amp;nbsp;m01,&amp;nbsp;m11,&amp;nbsp;m02,&amp;nbsp;m12} in
     * the form required by the {@link AffineTransform}
     * constructor.
     * @return the matrix used to translate user space rendering
     * to the orientation of the page.
     * @see java.awt.geom.AffineTransform
     */
    public double[] getMatrix() {
<span class="nc" id="L337">        double[] matrix = new double[6];</span>

<span class="nc bnc" id="L339" title="All 4 branches missed.">        switch (mOrientation) {</span>

        case LANDSCAPE:
<span class="nc" id="L342">            matrix[0] =  0;     matrix[1] = -1;</span>
<span class="nc" id="L343">            matrix[2] =  1;     matrix[3] =  0;</span>
<span class="nc" id="L344">            matrix[4] =  0;     matrix[5] =  mPaper.getHeight();</span>
<span class="nc" id="L345">            break;</span>

        case PORTRAIT:
<span class="nc" id="L348">            matrix[0] =  1;     matrix[1] =  0;</span>
<span class="nc" id="L349">            matrix[2] =  0;     matrix[3] =  1;</span>
<span class="nc" id="L350">            matrix[4] =  0;     matrix[5] =  0;</span>
<span class="nc" id="L351">            break;</span>

        case REVERSE_LANDSCAPE:
<span class="nc" id="L354">            matrix[0] =  0;                     matrix[1] =  1;</span>
<span class="nc" id="L355">            matrix[2] = -1;                     matrix[3] =  0;</span>
<span class="nc" id="L356">            matrix[4] =  mPaper.getWidth();     matrix[5] =  0;</span>
<span class="nc" id="L357">            break;</span>

        default:
<span class="nc" id="L360">            throw new IllegalArgumentException();</span>
        }

<span class="nc" id="L363">        return matrix;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>