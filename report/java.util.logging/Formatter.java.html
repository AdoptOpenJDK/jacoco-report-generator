<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>Formatter.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.util.logging</a> &gt; <span class="el_source">Formatter.java</span></div><h1>Formatter.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2000, 2006, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */


package java.util.logging;

/**
 * A Formatter provides support for formatting LogRecords.
 * &lt;p&gt;
 * Typically each logging Handler will have a Formatter associated
 * with it.  The Formatter takes a LogRecord and converts it to
 * a string.
 * &lt;p&gt;
 * Some formatters (such as the XMLFormatter) need to wrap head
 * and tail strings around a set of formatted records. The getHeader
 * and getTail methods can be used to obtain these strings.
 *
 * @since 1.4
 */

public abstract class Formatter {

    /**
     * Construct a new formatter.
     */
<span class="fc" id="L48">    protected Formatter() {</span>
<span class="fc" id="L49">    }</span>

    /**
     * Format the given log record and return the formatted string.
     * &lt;p&gt;
     * The resulting formatted String will normally include a
     * localized and formatted version of the LogRecord's message field.
     * It is recommended to use the {@link Formatter#formatMessage}
     * convenience method to localize and format the message field.
     *
     * @param record the log record to be formatted.
     * @return the formatted log record
     */
    public abstract String format(LogRecord record);


    /**
     * Return the header string for a set of formatted records.
     * &lt;p&gt;
     * This base class returns an empty string, but this may be
     * overridden by subclasses.
     *
     * @param   h  The target handler (can be null)
     * @return  header string
     */
    public String getHead(Handler h) {
<span class="fc" id="L75">        return &quot;&quot;;</span>
    }

    /**
     * Return the tail string for a set of formatted records.
     * &lt;p&gt;
     * This base class returns an empty string, but this may be
     * overridden by subclasses.
     *
     * @param   h  The target handler (can be null)
     * @return  tail string
     */
    public String getTail(Handler h) {
<span class="nc" id="L88">        return &quot;&quot;;</span>
    }


    /**
     * Localize and format the message string from a log record.  This
     * method is provided as a convenience for Formatter subclasses to
     * use when they are performing formatting.
     * &lt;p&gt;
     * The message string is first localized to a format string using
     * the record's ResourceBundle.  (If there is no ResourceBundle,
     * or if the message key is not found, then the key is used as the
     * format string.)  The format String uses java.text style
     * formatting.
     * &lt;ul&gt;
     * &lt;li&gt;If there are no parameters, no formatter is used.
     * &lt;li&gt;Otherwise, if the string contains &quot;{0&quot; then
     *     java.text.MessageFormat  is used to format the string.
     * &lt;li&gt;Otherwise no formatting is performed.
     * &lt;/ul&gt;
     * &lt;p&gt;
     *
     * @param  record  the log record containing the raw message
     * @return   a localized and formatted message
     */
    public synchronized String formatMessage(LogRecord record) {
<span class="fc" id="L114">        String format = record.getMessage();</span>
<span class="fc" id="L115">        java.util.ResourceBundle catalog = record.getResourceBundle();</span>
<span class="fc bfc" id="L116" title="All 2 branches covered.">        if (catalog != null) {</span>
            try {
<span class="fc" id="L118">                format = catalog.getString(record.getMessage());</span>
<span class="fc" id="L119">            } catch (java.util.MissingResourceException ex) {</span>
                // Drop through.  Use record message as format
<span class="fc" id="L121">                format = record.getMessage();</span>
<span class="fc" id="L122">            }</span>
        }
        // Do the formatting.
        try {
<span class="fc" id="L126">            Object parameters[] = record.getParameters();</span>
<span class="pc bpc" id="L127" title="1 of 4 branches missed.">            if (parameters == null || parameters.length == 0) {</span>
                // No parameters.  Just return format string.
<span class="fc" id="L129">                return format;</span>
            }
            // Is it a java.text style format?
            // Ideally we could match with
            // Pattern.compile(&quot;\\{\\d&quot;).matcher(format).find())
            // However the cost is 14% higher, so we cheaply check for
            // 1 of the first 4 parameters
<span class="pc bpc" id="L136" title="3 of 4 branches missed.">            if (format.indexOf(&quot;{0&quot;) &gt;= 0 || format.indexOf(&quot;{1&quot;) &gt;=0 ||</span>
<span class="nc bnc" id="L137" title="All 4 branches missed.">                        format.indexOf(&quot;{2&quot;) &gt;=0|| format.indexOf(&quot;{3&quot;) &gt;=0) {</span>
<span class="fc" id="L138">                return java.text.MessageFormat.format(format, parameters);</span>
            }
<span class="nc" id="L140">            return format;</span>

<span class="nc" id="L142">        } catch (Exception ex) {</span>
            // Formatting failed: use localized format string.
<span class="nc" id="L144">            return format;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>