<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>PrinterStateReasons.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.print.attribute.standard</a> &gt; <span class="el_source">PrinterStateReasons.java</span></div><h1>PrinterStateReasons.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package javax.print.attribute.standard;

import java.util.AbstractSet;
import java.util.Iterator;
import java.util.Map;
import java.util.NoSuchElementException;
import java.util.HashMap;
import java.util.Set;

import javax.print.attribute.Attribute;
import javax.print.attribute.PrintServiceAttribute;

/**
 * Class PrinterStateReasons is a printing attribute class, a set of
 * enumeration values, that provides additional information about the
 * printer's current state, i.e., information that augments the value of the
 * printer's {@link PrinterState PrinterState} attribute.
 * &lt;P&gt;
 * Instances of {@link PrinterStateReason PrinterStateReason} do not appear in
 *  a Print Service's attribute set directly. Rather, a PrinterStateReasons
 * attribute appears in the Print Service's attribute set. The
 * PrinterStateReasons attribute contains zero, one, or more than one {@link
 * PrinterStateReason PrinterStateReason} objects which pertain to the Print
 * Service's status, and each {@link PrinterStateReason PrinterStateReason}
 * object is associated with a {@link Severity Severity} level of REPORT
 *  (least severe), WARNING, or ERROR (most severe). The printer adds a {@link
 * PrinterStateReason PrinterStateReason} object to the Print Service's
 * PrinterStateReasons attribute when the corresponding condition becomes true
 * of the printer, and the printer removes the {@link PrinterStateReason
 * PrinterStateReason} object again when the corresponding condition becomes
 * false, regardless of whether the Print Service's overall
 * {@link PrinterState PrinterState} also changed.
 * &lt;P&gt;
 * Class PrinterStateReasons inherits its implementation from class {@link
 * java.util.HashMap java.util.HashMap}. Each entry in the map consists of a
 * {@link PrinterStateReason PrinterStateReason} object (key) mapping to a
 * {@link Severity Severity} object (value):
 * &lt;P&gt;
 * Unlike most printing attributes which are immutable once constructed, class
 * PrinterStateReasons is designed to be mutable; you can add {@link
 * PrinterStateReason PrinterStateReason} objects to an existing
 * PrinterStateReasons object and remove them again. However, like class
 *  {@link java.util.HashMap java.util.HashMap}, class PrinterStateReasons is
 * not multiple thread safe. If a PrinterStateReasons object will be used by
 * multiple threads, be sure to synchronize its operations (e.g., using a
 * synchronized map view obtained from class {@link java.util.Collections
 * java.util.Collections}).
 * &lt;P&gt;
 * &lt;B&gt;IPP Compatibility:&lt;/B&gt; The string values returned by each individual
 * {@link PrinterStateReason PrinterStateReason} object's and the associated
 * {@link Severity Severity} object's &lt;CODE&gt;toString()&lt;/CODE&gt; methods,
 * concatenated
 * together with a hyphen (&lt;CODE&gt;&quot;-&quot;&lt;/CODE&gt;) in between, gives the IPP keyword
 * value. The category name returned by &lt;CODE&gt;getName()&lt;/CODE&gt; gives the IPP
 * attribute name.
 * &lt;P&gt;
 *
 * @author  Alan Kaminsky
 */
public final class PrinterStateReasons
    extends HashMap&lt;PrinterStateReason,Severity&gt;
    implements PrintServiceAttribute
{

    private static final long serialVersionUID = -3731791085163619457L;

    /**
     * Construct a new, empty printer state reasons attribute; the underlying
     * hash map has the default initial capacity and load factor.
     */
    public PrinterStateReasons() {
<span class="nc" id="L96">        super();</span>
<span class="nc" id="L97">    }</span>

    /**
     * super a new, empty printer state reasons attribute; the underlying
     * hash map has the given initial capacity and the default load factor.
     *
     * @param  initialCapacity  Initial capacity.
     *
     * @throws IllegalArgumentException if the initial capacity is less
     *     than zero.
     */
    public PrinterStateReasons(int initialCapacity) {
<span class="nc" id="L109">        super (initialCapacity);</span>
<span class="nc" id="L110">    }</span>

    /**
     * Construct a new, empty printer state reasons attribute; the underlying
     * hash map has the given initial capacity and load factor.
     *
     * @param  initialCapacity  Initial capacity.
     * @param  loadFactor       Load factor.
     *
     * @throws IllegalArgumentException if the initial capacity is less
     *     than zero.
     */
    public PrinterStateReasons(int initialCapacity, float loadFactor) {
<span class="nc" id="L123">        super (initialCapacity, loadFactor);</span>
<span class="nc" id="L124">    }</span>

    /**
     * Construct a new printer state reasons attribute that contains the same
     * {@link PrinterStateReason PrinterStateReason}-to-{@link Severity
     * Severity} mappings as the given map. The underlying hash map's initial
     * capacity and load factor are as specified in the superclass constructor
     * {@link java.util.HashMap#HashMap(java.util.Map)
     * HashMap(Map)}.
     *
     * @param  map  Map to copy.
     *
     * @exception  NullPointerException
     *     (unchecked exception) Thrown if &lt;CODE&gt;map&lt;/CODE&gt; is null or if any
     *     key or value in &lt;CODE&gt;map&lt;/CODE&gt; is null.
     * @throws  ClassCastException
     *     (unchecked exception) Thrown if any key in &lt;CODE&gt;map&lt;/CODE&gt; is not
     *   an instance of class {@link PrinterStateReason PrinterStateReason} or
     *     if any value in &lt;CODE&gt;map&lt;/CODE&gt; is not an instance of class
     *     {@link Severity Severity}.
     */
    public PrinterStateReasons(Map&lt;PrinterStateReason,Severity&gt; map) {
<span class="nc" id="L146">        this();</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">        for (Map.Entry&lt;PrinterStateReason,Severity&gt; e : map.entrySet())</span>
<span class="nc" id="L148">            put(e.getKey(), e.getValue());</span>
<span class="nc" id="L149">    }</span>

    /**
     * Adds the given printer state reason to this printer state reasons
     * attribute, associating it with the given severity level. If this
     * printer state reasons attribute previously contained a mapping for the
     * given printer state reason, the old value is replaced.
     *
     * @param  reason    Printer state reason. This must be an instance of
     *                    class {@link PrinterStateReason PrinterStateReason}.
     * @param  severity  Severity of the printer state reason. This must be
     *                      an instance of class {@link Severity Severity}.
     *
     * @return  Previous severity associated with the given printer state
     *          reason, or &lt;tt&gt;null&lt;/tt&gt; if the given printer state reason was
     *          not present.
     *
     * @throws  NullPointerException
     *     (unchecked exception) Thrown if &lt;CODE&gt;reason&lt;/CODE&gt; is null or
     *     &lt;CODE&gt;severity&lt;/CODE&gt; is null.
     * @throws  ClassCastException
     *     (unchecked exception) Thrown if &lt;CODE&gt;reason&lt;/CODE&gt; is not an
     *   instance of class {@link PrinterStateReason PrinterStateReason} or if
     *     &lt;CODE&gt;severity&lt;/CODE&gt; is not an instance of class {@link Severity
     *     Severity}.
     * @since 1.5
     */
    public Severity put(PrinterStateReason reason, Severity severity) {
<span class="nc bnc" id="L177" title="All 2 branches missed.">        if (reason == null) {</span>
<span class="nc" id="L178">            throw new NullPointerException(&quot;reason is null&quot;);</span>
        }
<span class="nc bnc" id="L180" title="All 2 branches missed.">        if (severity == null) {</span>
<span class="nc" id="L181">            throw new NullPointerException(&quot;severity is null&quot;);</span>
        }
<span class="nc" id="L183">        return super.put(reason, severity);</span>
    }

    /**
     * Get the printing attribute class which is to be used as the &quot;category&quot;
     * for this printing attribute value.
     * &lt;P&gt;
     * For class PrinterStateReasons, the
     * category is class PrinterStateReasons itself.
     *
     * @return  Printing attribute class (category), an instance of class
     *          {@link java.lang.Class java.lang.Class}.
     */
    public final Class&lt;? extends Attribute&gt; getCategory() {
<span class="nc" id="L197">        return PrinterStateReasons.class;</span>
    }

    /**
     * Get the name of the category of which this attribute value is an
     * instance.
     * &lt;P&gt;
     * For class PrinterStateReasons, the
     * category name is &lt;CODE&gt;&quot;printer-state-reasons&quot;&lt;/CODE&gt;.
     *
     * @return  Attribute category name.
     */
    public final String getName() {
<span class="nc" id="L210">        return &quot;printer-state-reasons&quot;;</span>
    }

    /**
     * Obtain an unmodifiable set view of the individual printer state reason
     * attributes at the given severity level in this PrinterStateReasons
     * attribute. Each element in the set view is a {@link PrinterStateReason
     * PrinterStateReason} object. The only elements in the set view are the
     * {@link PrinterStateReason PrinterStateReason} objects that map to the
     * given severity value. The set view is backed by this
     * PrinterStateReasons attribute, so changes to this PrinterStateReasons
     * attribute are reflected  in the set view.
     * The set view does not support element insertion or
     * removal. The set view's iterator does not support element removal.
     *
     * @param  severity  Severity level.
     *
     * @return  Set view of the individual {@link PrinterStateReason
     *          PrinterStateReason} attributes at the given {@link Severity
     *          Severity} level.
     *
     * @exception  NullPointerException
     *     (unchecked exception) Thrown if &lt;CODE&gt;severity&lt;/CODE&gt; is null.
     */
    public Set&lt;PrinterStateReason&gt; printerStateReasonSet(Severity severity) {
<span class="nc bnc" id="L235" title="All 2 branches missed.">        if (severity == null) {</span>
<span class="nc" id="L236">            throw new NullPointerException(&quot;severity is null&quot;);</span>
        }
<span class="nc" id="L238">        return new PrinterStateReasonSet (severity, entrySet());</span>
    }

    private class PrinterStateReasonSet
        extends AbstractSet&lt;PrinterStateReason&gt;
    {
        private Severity mySeverity;
        private Set myEntrySet;

<span class="nc" id="L247">        public PrinterStateReasonSet(Severity severity, Set entrySet) {</span>
<span class="nc" id="L248">            mySeverity = severity;</span>
<span class="nc" id="L249">            myEntrySet = entrySet;</span>
<span class="nc" id="L250">        }</span>

        public int size() {
<span class="nc" id="L253">            int result = 0;</span>
<span class="nc" id="L254">            Iterator iter = iterator();</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">            while (iter.hasNext()) {</span>
<span class="nc" id="L256">                iter.next();</span>
<span class="nc" id="L257">                ++ result;</span>
            }
<span class="nc" id="L259">            return result;</span>
        }

        public Iterator iterator() {
<span class="nc" id="L263">            return new PrinterStateReasonSetIterator(mySeverity,</span>
<span class="nc" id="L264">                                                     myEntrySet.iterator());</span>
        }
    }

    private class PrinterStateReasonSetIterator implements Iterator {
        private Severity mySeverity;
        private Iterator myIterator;
        private Map.Entry myEntry;

        public PrinterStateReasonSetIterator(Severity severity,
<span class="nc" id="L274">                                             Iterator iterator) {</span>
<span class="nc" id="L275">            mySeverity = severity;</span>
<span class="nc" id="L276">            myIterator = iterator;</span>
<span class="nc" id="L277">            goToNext();</span>
<span class="nc" id="L278">        }</span>

        private void goToNext() {
<span class="nc" id="L281">            myEntry = null;</span>
<span class="nc bnc" id="L282" title="All 4 branches missed.">            while (myEntry == null &amp;&amp; myIterator.hasNext()) {</span>
<span class="nc" id="L283">                myEntry = (Map.Entry) myIterator.next();</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">                if ((Severity) myEntry.getValue() != mySeverity) {</span>
<span class="nc" id="L285">                    myEntry = null;</span>
                }
            }
<span class="nc" id="L288">        }</span>

        public boolean hasNext() {
<span class="nc bnc" id="L291" title="All 2 branches missed.">            return myEntry != null;</span>
        }

        public Object next() {
<span class="nc bnc" id="L295" title="All 2 branches missed.">            if (myEntry == null) {</span>
<span class="nc" id="L296">                throw new NoSuchElementException();</span>
            }
<span class="nc" id="L298">            Object result = myEntry.getKey();</span>
<span class="nc" id="L299">            goToNext();</span>
<span class="nc" id="L300">            return result;</span>
        }

        public void remove() {
<span class="nc" id="L304">            throw new UnsupportedOperationException();</span>
        }
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>