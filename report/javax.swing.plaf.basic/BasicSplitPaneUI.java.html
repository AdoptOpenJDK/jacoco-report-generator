<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>BasicSplitPaneUI.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing.plaf.basic</a> &gt; <span class="el_source">BasicSplitPaneUI.java</span></div><h1>BasicSplitPaneUI.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2011, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */


package javax.swing.plaf.basic;


import sun.swing.DefaultLookup;
import sun.swing.UIAction;
import javax.swing.*;
import javax.swing.border.Border;
import java.awt.*;
import java.awt.event.*;
import java.awt.peer.ComponentPeer;
import java.awt.peer.LightweightPeer;
import java.beans.*;
import java.util.*;
import javax.swing.plaf.SplitPaneUI;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.UIResource;
import sun.swing.SwingUtilities2;


/**
 * A Basic L&amp;amp;F implementation of the SplitPaneUI.
 *
 * @author Scott Violet
 * @author Steve Wilson
 * @author Ralph Kar
 */
<span class="nc" id="L53">public class BasicSplitPaneUI extends SplitPaneUI</span>
{
    /**
     * The divider used for non-continuous layout is added to the split pane
     * with this object.
     */
    protected static final String NON_CONTINUOUS_DIVIDER =
        &quot;nonContinuousDivider&quot;;


    /**
     * How far (relative) the divider does move when it is moved around by
     * the cursor keys on the keyboard.
     */
<span class="nc" id="L67">    protected static int KEYBOARD_DIVIDER_MOVE_OFFSET = 3;</span>


    /**
     * JSplitPane instance this instance is providing
     * the look and feel for.
     */
    protected JSplitPane splitPane;


    /**
     * LayoutManager that is created and placed into the split pane.
     */
    protected BasicHorizontalLayoutManager layoutManager;


    /**
     * Instance of the divider for this JSplitPane.
     */
    protected BasicSplitPaneDivider divider;


    /**
     * Instance of the PropertyChangeListener for this JSplitPane.
     */
    protected PropertyChangeListener propertyChangeListener;


    /**
     * Instance of the FocusListener for this JSplitPane.
     */
    protected FocusListener focusListener;

    private Handler handler;


    /**
     * Keys to use for forward focus traversal when the JComponent is
     * managing focus.
     */
    private Set&lt;KeyStroke&gt; managingFocusForwardTraversalKeys;

    /**
     * Keys to use for backward focus traversal when the JComponent is
     * managing focus.
     */
    private Set&lt;KeyStroke&gt; managingFocusBackwardTraversalKeys;


    /**
     * The size of the divider while the dragging session is valid.
     */
    protected int dividerSize;


    /**
     * Instance for the shadow of the divider when non continuous layout
     * is being used.
     */
    protected Component nonContinuousLayoutDivider;


    /**
     * Set to true in startDragging if any of the children
     * (not including the nonContinuousLayoutDivider) are heavy weights.
     */
    protected boolean draggingHW;


    /**
     * Location of the divider when the dragging session began.
     */
    protected int beginDragDividerLocation;


    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke upKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke downKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke leftKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke rightKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke homeKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke endKey;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected KeyStroke dividerResizeToggleKey;

    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener keyboardUpLeftListener;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener keyboardDownRightListener;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener keyboardHomeListener;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener keyboardEndListener;
    /**
     * As of Java 2 platform v1.3 this previously undocumented field is no
     * longer used.
     * Key bindings are now defined by the LookAndFeel, please refer to
     * the key bindings specification for further details.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener keyboardResizeToggleListener;


    // Private data of the instance
    private int         orientation;
    private int         lastDragLocation;
    private boolean     continuousLayout;
    private boolean     dividerKeyboardResize;
    private boolean     dividerLocationIsSet;  // needed for tracking
                                               // the first occurrence of
                                               // setDividerLocation()
    private Color dividerDraggingColor;
    private boolean rememberPaneSizes;

    // Indicates whether the one of splitpane sides is expanded
<span class="nc" id="L277">    private boolean keepHidden = false;</span>

    /** Indicates that we have painted once. */
    // This is used by the LayoutManager to determine when it should use
    // the divider location provided by the JSplitPane. This is used as there
    // is no way to determine when the layout process has completed.
    boolean             painted;
    /** If true, setDividerLocation does nothing. */
    boolean             ignoreDividerLocationChange;


    /**
     * Creates a new BasicSplitPaneUI instance
     */
    public static ComponentUI createUI(JComponent x) {
<span class="nc" id="L292">        return new BasicSplitPaneUI();</span>
    }

    static void loadActionMap(LazyActionMap map) {
<span class="nc" id="L296">        map.put(new Actions(Actions.NEGATIVE_INCREMENT));</span>
<span class="nc" id="L297">        map.put(new Actions(Actions.POSITIVE_INCREMENT));</span>
<span class="nc" id="L298">        map.put(new Actions(Actions.SELECT_MIN));</span>
<span class="nc" id="L299">        map.put(new Actions(Actions.SELECT_MAX));</span>
<span class="nc" id="L300">        map.put(new Actions(Actions.START_RESIZE));</span>
<span class="nc" id="L301">        map.put(new Actions(Actions.TOGGLE_FOCUS));</span>
<span class="nc" id="L302">        map.put(new Actions(Actions.FOCUS_OUT_FORWARD));</span>
<span class="nc" id="L303">        map.put(new Actions(Actions.FOCUS_OUT_BACKWARD));</span>
<span class="nc" id="L304">    }</span>



    /**
     * Installs the UI.
     */
    public void installUI(JComponent c) {
<span class="nc" id="L312">        splitPane = (JSplitPane) c;</span>
<span class="nc" id="L313">        dividerLocationIsSet = false;</span>
<span class="nc" id="L314">        dividerKeyboardResize = false;</span>
<span class="nc" id="L315">        keepHidden = false;</span>
<span class="nc" id="L316">        installDefaults();</span>
<span class="nc" id="L317">        installListeners();</span>
<span class="nc" id="L318">        installKeyboardActions();</span>
<span class="nc" id="L319">        setLastDragLocation(-1);</span>
<span class="nc" id="L320">    }</span>


    /**
     * Installs the UI defaults.
     */
    protected void installDefaults(){
<span class="nc" id="L327">        LookAndFeel.installBorder(splitPane, &quot;SplitPane.border&quot;);</span>
<span class="nc" id="L328">        LookAndFeel.installColors(splitPane, &quot;SplitPane.background&quot;,</span>
                                  &quot;SplitPane.foreground&quot;);
<span class="nc" id="L330">        LookAndFeel.installProperty(splitPane, &quot;opaque&quot;, Boolean.TRUE);</span>

<span class="nc bnc" id="L332" title="All 2 branches missed.">        if (divider == null) divider = createDefaultDivider();</span>
<span class="nc" id="L333">        divider.setBasicSplitPaneUI(this);</span>

<span class="nc" id="L335">        Border    b = divider.getBorder();</span>

<span class="nc bnc" id="L337" title="All 4 branches missed.">        if (b == null || !(b instanceof UIResource)) {</span>
<span class="nc" id="L338">            divider.setBorder(UIManager.getBorder(&quot;SplitPaneDivider.border&quot;));</span>
        }

<span class="nc" id="L341">        dividerDraggingColor = UIManager.getColor(&quot;SplitPaneDivider.draggingColor&quot;);</span>

<span class="nc" id="L343">        setOrientation(splitPane.getOrientation());</span>

        // note: don't rename this temp variable to dividerSize
        // since it will conflict with &quot;this.dividerSize&quot; field
<span class="nc" id="L347">        Integer temp = (Integer)UIManager.get(&quot;SplitPane.dividerSize&quot;);</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">        LookAndFeel.installProperty(splitPane, &quot;dividerSize&quot;, temp == null? 10: temp);</span>

<span class="nc" id="L350">        divider.setDividerSize(splitPane.getDividerSize());</span>
<span class="nc" id="L351">        dividerSize = divider.getDividerSize();</span>
<span class="nc" id="L352">        splitPane.add(divider, JSplitPane.DIVIDER);</span>

<span class="nc" id="L354">        setContinuousLayout(splitPane.isContinuousLayout());</span>

<span class="nc" id="L356">        resetLayoutManager();</span>

        /* Install the nonContinuousLayoutDivider here to avoid having to
        add/remove everything later. */
<span class="nc bnc" id="L360" title="All 2 branches missed.">        if(nonContinuousLayoutDivider == null) {</span>
<span class="nc" id="L361">            setNonContinuousLayoutDivider(</span>
<span class="nc" id="L362">                                createDefaultNonContinuousLayoutDivider(),</span>
                                true);
        } else {
<span class="nc" id="L365">            setNonContinuousLayoutDivider(nonContinuousLayoutDivider, true);</span>
        }

        // focus forward traversal key
<span class="nc bnc" id="L369" title="All 2 branches missed.">        if (managingFocusForwardTraversalKeys==null) {</span>
<span class="nc" id="L370">            managingFocusForwardTraversalKeys = new HashSet&lt;KeyStroke&gt;();</span>
<span class="nc" id="L371">            managingFocusForwardTraversalKeys.add(</span>
<span class="nc" id="L372">                KeyStroke.getKeyStroke(KeyEvent.VK_TAB, 0));</span>
        }
<span class="nc" id="L374">        splitPane.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,</span>
                                        managingFocusForwardTraversalKeys);
        // focus backward traversal key
<span class="nc bnc" id="L377" title="All 2 branches missed.">        if (managingFocusBackwardTraversalKeys==null) {</span>
<span class="nc" id="L378">            managingFocusBackwardTraversalKeys = new HashSet&lt;KeyStroke&gt;();</span>
<span class="nc" id="L379">            managingFocusBackwardTraversalKeys.add(</span>
<span class="nc" id="L380">                KeyStroke.getKeyStroke(KeyEvent.VK_TAB, InputEvent.SHIFT_MASK));</span>
        }
<span class="nc" id="L382">        splitPane.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS,</span>
                                        managingFocusBackwardTraversalKeys);
<span class="nc" id="L384">    }</span>


    /**
     * Installs the event listeners for the UI.
     */
    protected void installListeners() {
<span class="nc bnc" id="L391" title="All 2 branches missed.">        if ((propertyChangeListener = createPropertyChangeListener()) !=</span>
            null) {
<span class="nc" id="L393">            splitPane.addPropertyChangeListener(propertyChangeListener);</span>
        }

<span class="nc bnc" id="L396" title="All 2 branches missed.">        if ((focusListener = createFocusListener()) != null) {</span>
<span class="nc" id="L397">            splitPane.addFocusListener(focusListener);</span>
        }
<span class="nc" id="L399">    }</span>


    /**
     * Installs the keyboard actions for the UI.
     */
    protected void installKeyboardActions() {
<span class="nc" id="L406">        InputMap km = getInputMap(JComponent.</span>
                                  WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);

<span class="nc" id="L409">        SwingUtilities.replaceUIInputMap(splitPane, JComponent.</span>
                                       WHEN_ANCESTOR_OF_FOCUSED_COMPONENT,
                                       km);
<span class="nc" id="L412">        LazyActionMap.installLazyActionMap(splitPane, BasicSplitPaneUI.class,</span>
                                           &quot;SplitPane.actionMap&quot;);
<span class="nc" id="L414">    }</span>

    InputMap getInputMap(int condition) {
<span class="nc bnc" id="L417" title="All 2 branches missed.">        if (condition == JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT) {</span>
<span class="nc" id="L418">            return (InputMap)DefaultLookup.get(splitPane, this,</span>
                                               &quot;SplitPane.ancestorInputMap&quot;);
        }
<span class="nc" id="L421">        return null;</span>
    }

    /**
     * Uninstalls the UI.
     */
    public void uninstallUI(JComponent c) {
<span class="nc" id="L428">        uninstallKeyboardActions();</span>
<span class="nc" id="L429">        uninstallListeners();</span>
<span class="nc" id="L430">        uninstallDefaults();</span>
<span class="nc" id="L431">        dividerLocationIsSet = false;</span>
<span class="nc" id="L432">        dividerKeyboardResize = false;</span>
<span class="nc" id="L433">        splitPane = null;</span>
<span class="nc" id="L434">    }</span>


    /**
     * Uninstalls the UI defaults.
     */
    protected void uninstallDefaults() {
<span class="nc bnc" id="L441" title="All 2 branches missed.">        if(splitPane.getLayout() == layoutManager) {</span>
<span class="nc" id="L442">            splitPane.setLayout(null);</span>
        }

<span class="nc bnc" id="L445" title="All 2 branches missed.">        if(nonContinuousLayoutDivider != null) {</span>
<span class="nc" id="L446">            splitPane.remove(nonContinuousLayoutDivider);</span>
        }

<span class="nc" id="L449">        LookAndFeel.uninstallBorder(splitPane);</span>

<span class="nc" id="L451">        Border    b = divider.getBorder();</span>

<span class="nc bnc" id="L453" title="All 2 branches missed.">        if (b instanceof UIResource) {</span>
<span class="nc" id="L454">            divider.setBorder(null);</span>
        }

<span class="nc" id="L457">        splitPane.remove(divider);</span>
<span class="nc" id="L458">        divider.setBasicSplitPaneUI(null);</span>
<span class="nc" id="L459">        layoutManager = null;</span>
<span class="nc" id="L460">        divider = null;</span>
<span class="nc" id="L461">        nonContinuousLayoutDivider = null;</span>

<span class="nc" id="L463">        setNonContinuousLayoutDivider(null);</span>

        // sets the focus forward and backward traversal keys to null
        // to restore the defaults
<span class="nc" id="L467">        splitPane.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, null);</span>
<span class="nc" id="L468">        splitPane.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, null);</span>
<span class="nc" id="L469">    }</span>


    /**
     * Uninstalls the event listeners for the UI.
     */
    protected void uninstallListeners() {
<span class="nc bnc" id="L476" title="All 2 branches missed.">        if (propertyChangeListener != null) {</span>
<span class="nc" id="L477">            splitPane.removePropertyChangeListener(propertyChangeListener);</span>
<span class="nc" id="L478">            propertyChangeListener = null;</span>
        }
<span class="nc bnc" id="L480" title="All 2 branches missed.">        if (focusListener != null) {</span>
<span class="nc" id="L481">            splitPane.removeFocusListener(focusListener);</span>
<span class="nc" id="L482">            focusListener = null;</span>
        }

<span class="nc" id="L485">        keyboardUpLeftListener = null;</span>
<span class="nc" id="L486">        keyboardDownRightListener = null;</span>
<span class="nc" id="L487">        keyboardHomeListener = null;</span>
<span class="nc" id="L488">        keyboardEndListener = null;</span>
<span class="nc" id="L489">        keyboardResizeToggleListener = null;</span>
<span class="nc" id="L490">        handler = null;</span>
<span class="nc" id="L491">    }</span>


    /**
     * Uninstalls the keyboard actions for the UI.
     */
    protected void uninstallKeyboardActions() {
<span class="nc" id="L498">        SwingUtilities.replaceUIActionMap(splitPane, null);</span>
<span class="nc" id="L499">        SwingUtilities.replaceUIInputMap(splitPane, JComponent.</span>
                                      WHEN_ANCESTOR_OF_FOCUSED_COMPONENT,
                                      null);
<span class="nc" id="L502">    }</span>


    /**
     * Creates a PropertyChangeListener for the JSplitPane UI.
     */
    protected PropertyChangeListener createPropertyChangeListener() {
<span class="nc" id="L509">        return getHandler();</span>
    }

    private Handler getHandler() {
<span class="nc bnc" id="L513" title="All 2 branches missed.">        if (handler == null) {</span>
<span class="nc" id="L514">            handler = new Handler();</span>
        }
<span class="nc" id="L516">        return handler;</span>
    }


    /**
     * Creates a FocusListener for the JSplitPane UI.
     */
    protected FocusListener createFocusListener() {
<span class="nc" id="L524">        return getHandler();</span>
    }


    /**
     * As of Java 2 platform v1.3 this method is no
     * longer used. Subclassers previously using this method should
     * instead create an Action wrapping the ActionListener, and register
     * that Action by overriding &lt;code&gt;installKeyboardActions&lt;/code&gt; and
     * placing the Action in the SplitPane's ActionMap. Please refer to
     * the key bindings specification for further details.
     * &lt;p&gt;
     * Creates a ActionListener for the JSplitPane UI that listens for
     * specific key presses.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener createKeyboardUpLeftListener() {
<span class="nc" id="L543">        return new KeyboardUpLeftHandler();</span>
    }


    /**
     * As of Java 2 platform v1.3 this method is no
     * longer used. Subclassers previously using this method should
     * instead create an Action wrapping the ActionListener, and register
     * that Action by overriding &lt;code&gt;installKeyboardActions&lt;/code&gt; and
     * placing the Action in the SplitPane's ActionMap. Please refer to
     * the key bindings specification for further details.
     * &lt;p&gt;
     * Creates a ActionListener for the JSplitPane UI that listens for
     * specific key presses.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener createKeyboardDownRightListener() {
<span class="nc" id="L562">        return new KeyboardDownRightHandler();</span>
    }


    /**
     * As of Java 2 platform v1.3 this method is no
     * longer used. Subclassers previously using this method should
     * instead create an Action wrapping the ActionListener, and register
     * that Action by overriding &lt;code&gt;installKeyboardActions&lt;/code&gt; and
     * placing the Action in the SplitPane's ActionMap. Please refer to
     * the key bindings specification for further details.
     * &lt;p&gt;
     * Creates a ActionListener for the JSplitPane UI that listens for
     * specific key presses.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener createKeyboardHomeListener() {
<span class="nc" id="L581">        return new KeyboardHomeHandler();</span>
    }


    /**
     * As of Java 2 platform v1.3 this method is no
     * longer used. Subclassers previously using this method should
     * instead create an Action wrapping the ActionListener, and register
     * that Action by overriding &lt;code&gt;installKeyboardActions&lt;/code&gt; and
     * placing the Action in the SplitPane's ActionMap. Please refer to
     * the key bindings specification for further details.
     * &lt;p&gt;
     * Creates a ActionListener for the JSplitPane UI that listens for
     * specific key presses.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener createKeyboardEndListener() {
<span class="nc" id="L600">        return new KeyboardEndHandler();</span>
    }


    /**
     * As of Java 2 platform v1.3 this method is no
     * longer used. Subclassers previously using this method should
     * instead create an Action wrapping the ActionListener, and register
     * that Action by overriding &lt;code&gt;installKeyboardActions&lt;/code&gt; and
     * placing the Action in the SplitPane's ActionMap. Please refer to
     * the key bindings specification for further details.
     * &lt;p&gt;
     * Creates a ActionListener for the JSplitPane UI that listens for
     * specific key presses.
     *
     * @deprecated As of Java 2 platform v1.3.
     */
    @Deprecated
    protected ActionListener createKeyboardResizeToggleListener() {
<span class="nc" id="L619">        return new KeyboardResizeToggleHandler();</span>
    }


    /**
     * Returns the orientation for the JSplitPane.
     */
    public int getOrientation() {
<span class="nc" id="L627">        return orientation;</span>
    }


    /**
     * Set the orientation for the JSplitPane.
     */
    public void setOrientation(int orientation) {
<span class="nc" id="L635">        this.orientation = orientation;</span>
<span class="nc" id="L636">    }</span>


    /**
     * Determines whether the JSplitPane is set to use a continuous layout.
     */
    public boolean isContinuousLayout() {
<span class="nc" id="L643">        return continuousLayout;</span>
    }


    /**
     * Turn continuous layout on/off.
     */
    public void setContinuousLayout(boolean b) {
<span class="nc" id="L651">        continuousLayout = b;</span>
<span class="nc" id="L652">    }</span>


    /**
     * Returns the last drag location of the JSplitPane.
     */
    public int getLastDragLocation() {
<span class="nc" id="L659">        return lastDragLocation;</span>
    }


    /**
     * Set the last drag location of the JSplitPane.
     */
    public void setLastDragLocation(int l) {
<span class="nc" id="L667">        lastDragLocation = l;</span>
<span class="nc" id="L668">    }</span>

    /**
     * @return increment via keyboard methods.
     */
    int getKeyboardMoveIncrement() {
<span class="nc" id="L674">        return 3;</span>
    }

    /**
     * Implementation of the PropertyChangeListener
     * that the JSplitPane UI uses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L684">    public class PropertyHandler implements PropertyChangeListener</span>
    {
        // NOTE: This class exists only for backward compatibility. All
        // its functionality has been moved into Handler. If you need to add
        // new functionality add it to the Handler, but make sure this
        // class calls into the Handler.

        /**
         * Messaged from the &lt;code&gt;JSplitPane&lt;/code&gt; the receiver is
         * contained in.  May potentially reset the layout manager and cause a
         * &lt;code&gt;validate&lt;/code&gt; to be sent.
         */
        public void propertyChange(PropertyChangeEvent e) {
<span class="nc" id="L697">            getHandler().propertyChange(e);</span>
<span class="nc" id="L698">        }</span>
    }


    /**
     * Implementation of the FocusListener that the JSplitPane UI uses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L708">    public class FocusHandler extends FocusAdapter</span>
    {
        // NOTE: This class exists only for backward compatibility. All
        // its functionality has been moved into Handler. If you need to add
        // new functionality add it to the Handler, but make sure this
        // class calls into the Handler.
        public void focusGained(FocusEvent ev) {
<span class="nc" id="L715">            getHandler().focusGained(ev);</span>
<span class="nc" id="L716">        }</span>

        public void focusLost(FocusEvent ev) {
<span class="nc" id="L719">            getHandler().focusLost(ev);</span>
<span class="nc" id="L720">        }</span>
    }


    /**
     * Implementation of an ActionListener that the JSplitPane UI uses for
     * handling specific key presses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L731">    public class KeyboardUpLeftHandler implements ActionListener</span>
    {
        public void actionPerformed(ActionEvent ev) {
<span class="nc bnc" id="L734" title="All 2 branches missed.">            if (dividerKeyboardResize) {</span>
<span class="nc" id="L735">                splitPane.setDividerLocation(Math.max(0,getDividerLocation</span>
<span class="nc" id="L736">                                  (splitPane) - getKeyboardMoveIncrement()));</span>
            }
<span class="nc" id="L738">        }</span>
    }

    /**
     * Implementation of an ActionListener that the JSplitPane UI uses for
     * handling specific key presses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L748">    public class KeyboardDownRightHandler implements ActionListener</span>
    {
        public void actionPerformed(ActionEvent ev) {
<span class="nc bnc" id="L751" title="All 2 branches missed.">            if (dividerKeyboardResize) {</span>
<span class="nc" id="L752">                splitPane.setDividerLocation(getDividerLocation(splitPane) +</span>
<span class="nc" id="L753">                                             getKeyboardMoveIncrement());</span>
            }
<span class="nc" id="L755">        }</span>
    }


    /**
     * Implementation of an ActionListener that the JSplitPane UI uses for
     * handling specific key presses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L766">    public class KeyboardHomeHandler implements ActionListener</span>
    {
        public void actionPerformed(ActionEvent ev) {
<span class="nc bnc" id="L769" title="All 2 branches missed.">            if (dividerKeyboardResize) {</span>
<span class="nc" id="L770">                splitPane.setDividerLocation(0);</span>
            }
<span class="nc" id="L772">        }</span>
    }


    /**
     * Implementation of an ActionListener that the JSplitPane UI uses for
     * handling specific key presses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L783">    public class KeyboardEndHandler implements ActionListener</span>
    {
        public void actionPerformed(ActionEvent ev) {
<span class="nc bnc" id="L786" title="All 2 branches missed.">            if (dividerKeyboardResize) {</span>
<span class="nc" id="L787">                Insets   insets = splitPane.getInsets();</span>
<span class="nc bnc" id="L788" title="All 2 branches missed.">                int      bottomI = (insets != null) ? insets.bottom : 0;</span>
<span class="nc bnc" id="L789" title="All 2 branches missed.">                int      rightI = (insets != null) ? insets.right : 0;</span>

<span class="nc bnc" id="L791" title="All 2 branches missed.">                if (orientation == JSplitPane.VERTICAL_SPLIT) {</span>
<span class="nc" id="L792">                    splitPane.setDividerLocation(splitPane.getHeight() -</span>
                                       bottomI);
                }
                else {
<span class="nc" id="L796">                    splitPane.setDividerLocation(splitPane.getWidth() -</span>
                                                 rightI);
                }
            }
<span class="nc" id="L800">        }</span>
    }


    /**
     * Implementation of an ActionListener that the JSplitPane UI uses for
     * handling specific key presses.
     * &lt;p&gt;
     * This class should be treated as a &amp;quot;protected&amp;quot; inner class.
     * Instantiate it only within subclasses of BasicSplitPaneUI.
     */
<span class="nc" id="L811">    public class KeyboardResizeToggleHandler implements ActionListener</span>
    {
        public void actionPerformed(ActionEvent ev) {
<span class="nc bnc" id="L814" title="All 2 branches missed.">            if (!dividerKeyboardResize) {</span>
<span class="nc" id="L815">                splitPane.requestFocus();</span>
            }
<span class="nc" id="L817">        }</span>
    }

    /**
     * Returns the divider between the top Components.
     */
    public BasicSplitPaneDivider getDivider() {
<span class="nc" id="L824">        return divider;</span>
    }


    /**
     * Returns the default non continuous layout divider, which is an
     * instance of {@code Canvas} that fills in the background with dark gray.
     */
    protected Component createDefaultNonContinuousLayoutDivider() {
<span class="nc" id="L833">        return new Canvas() {</span>
            public void paint(Graphics g) {
<span class="nc bnc" id="L835" title="All 4 branches missed.">                if(!isContinuousLayout() &amp;&amp; getLastDragLocation() != -1) {</span>
<span class="nc" id="L836">                    Dimension      size = splitPane.getSize();</span>

<span class="nc" id="L838">                    g.setColor(dividerDraggingColor);</span>
<span class="nc bnc" id="L839" title="All 2 branches missed.">                    if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L840">                        g.fillRect(0, 0, dividerSize - 1, size.height - 1);</span>
                    } else {
<span class="nc" id="L842">                        g.fillRect(0, 0, size.width - 1, dividerSize - 1);</span>
                    }
                }
<span class="nc" id="L845">            }</span>
        };
    }


    /**
     * Sets the divider to use when the splitPane is configured to
     * not continuously layout. This divider will only be used during a
     * dragging session. It is recommended that the passed in component
     * be a heavy weight.
     */
    protected void setNonContinuousLayoutDivider(Component newDivider) {
<span class="nc" id="L857">        setNonContinuousLayoutDivider(newDivider, true);</span>
<span class="nc" id="L858">    }</span>


    /**
     * Sets the divider to use.
     */
    protected void setNonContinuousLayoutDivider(Component newDivider,
        boolean rememberSizes) {
<span class="nc" id="L866">        rememberPaneSizes = rememberSizes;</span>
<span class="nc bnc" id="L867" title="All 4 branches missed.">        if(nonContinuousLayoutDivider != null &amp;&amp; splitPane != null) {</span>
<span class="nc" id="L868">            splitPane.remove(nonContinuousLayoutDivider);</span>
        }
<span class="nc" id="L870">        nonContinuousLayoutDivider = newDivider;</span>
<span class="nc" id="L871">    }</span>

    private void addHeavyweightDivider() {
<span class="nc bnc" id="L874" title="All 4 branches missed.">        if(nonContinuousLayoutDivider != null &amp;&amp; splitPane != null) {</span>

            /* Needs to remove all the components and re-add them! YECK! */
            // This is all done so that the nonContinuousLayoutDivider will
            // be drawn on top of the other components, without this, one
            // of the heavyweights will draw over the divider!
<span class="nc" id="L880">            Component             leftC = splitPane.getLeftComponent();</span>
<span class="nc" id="L881">            Component             rightC = splitPane.getRightComponent();</span>
<span class="nc" id="L882">            int                   lastLocation = splitPane.</span>
<span class="nc" id="L883">                                              getDividerLocation();</span>

<span class="nc bnc" id="L885" title="All 2 branches missed.">            if(leftC != null)</span>
<span class="nc" id="L886">                splitPane.setLeftComponent(null);</span>
<span class="nc bnc" id="L887" title="All 2 branches missed.">            if(rightC != null)</span>
<span class="nc" id="L888">                splitPane.setRightComponent(null);</span>
<span class="nc" id="L889">            splitPane.remove(divider);</span>
<span class="nc" id="L890">            splitPane.add(nonContinuousLayoutDivider, BasicSplitPaneUI.</span>
                          NON_CONTINUOUS_DIVIDER,
<span class="nc" id="L892">                          splitPane.getComponentCount());</span>
<span class="nc" id="L893">            splitPane.setLeftComponent(leftC);</span>
<span class="nc" id="L894">            splitPane.setRightComponent(rightC);</span>
<span class="nc" id="L895">            splitPane.add(divider, JSplitPane.DIVIDER);</span>
<span class="nc bnc" id="L896" title="All 2 branches missed.">            if(rememberPaneSizes) {</span>
<span class="nc" id="L897">                splitPane.setDividerLocation(lastLocation);</span>
            }
        }

<span class="nc" id="L901">    }</span>


    /**
     * Returns the divider to use when the splitPane is configured to
     * not continuously layout. This divider will only be used during a
     * dragging session.
     */
    public Component getNonContinuousLayoutDivider() {
<span class="nc" id="L910">        return nonContinuousLayoutDivider;</span>
    }


    /**
     * Returns the splitpane this instance is currently contained
     * in.
     */
    public JSplitPane getSplitPane() {
<span class="nc" id="L919">        return splitPane;</span>
    }


    /**
     * Creates the default divider.
     */
    public BasicSplitPaneDivider createDefaultDivider() {
<span class="nc" id="L927">        return new BasicSplitPaneDivider(this);</span>
    }


    /**
     * Messaged to reset the preferred sizes.
     */
    public void resetToPreferredSizes(JSplitPane jc) {
<span class="nc bnc" id="L935" title="All 2 branches missed.">        if(splitPane != null) {</span>
<span class="nc" id="L936">            layoutManager.resetToPreferredSizes();</span>
<span class="nc" id="L937">            splitPane.revalidate();</span>
<span class="nc" id="L938">            splitPane.repaint();</span>
        }
<span class="nc" id="L940">    }</span>


    /**
     * Sets the location of the divider to location.
     */
    public void setDividerLocation(JSplitPane jc, int location) {
<span class="nc bnc" id="L947" title="All 2 branches missed.">        if (!ignoreDividerLocationChange) {</span>
<span class="nc" id="L948">            dividerLocationIsSet = true;</span>
<span class="nc" id="L949">            splitPane.revalidate();</span>
<span class="nc" id="L950">            splitPane.repaint();</span>

<span class="nc bnc" id="L952" title="All 2 branches missed.">            if (keepHidden) {</span>
<span class="nc" id="L953">                Insets insets = splitPane.getInsets();</span>
<span class="nc" id="L954">                int orientation = splitPane.getOrientation();</span>
<span class="nc bnc" id="L955" title="All 4 branches missed.">                if ((orientation == JSplitPane.VERTICAL_SPLIT &amp;&amp;</span>
                     location != insets.top &amp;&amp;
<span class="nc bnc" id="L957" title="All 6 branches missed.">                     location != splitPane.getHeight()-divider.getHeight()-insets.top) ||</span>
                    (orientation == JSplitPane.HORIZONTAL_SPLIT &amp;&amp;
                     location != insets.left &amp;&amp;
<span class="nc bnc" id="L960" title="All 2 branches missed.">                     location != splitPane.getWidth()-divider.getWidth()-insets.left)) {</span>
<span class="nc" id="L961">                    setKeepHidden(false);</span>
                }
<span class="nc" id="L963">            }</span>
        }
        else {
<span class="nc" id="L966">            ignoreDividerLocationChange = false;</span>
        }
<span class="nc" id="L968">    }</span>


    /**
     * Returns the location of the divider, which may differ from what
     * the splitpane thinks the location of the divider is.
     */
    public int getDividerLocation(JSplitPane jc) {
<span class="nc bnc" id="L976" title="All 2 branches missed.">        if(orientation == JSplitPane.HORIZONTAL_SPLIT)</span>
<span class="nc" id="L977">            return divider.getLocation().x;</span>
<span class="nc" id="L978">        return divider.getLocation().y;</span>
    }


    /**
     * Gets the minimum location of the divider.
     */
    public int getMinimumDividerLocation(JSplitPane jc) {
<span class="nc" id="L986">        int       minLoc = 0;</span>
<span class="nc" id="L987">        Component leftC = splitPane.getLeftComponent();</span>

<span class="nc bnc" id="L989" title="All 4 branches missed.">        if ((leftC != null) &amp;&amp; (leftC.isVisible())) {</span>
<span class="nc" id="L990">            Insets    insets = splitPane.getInsets();</span>
<span class="nc" id="L991">            Dimension minSize = leftC.getMinimumSize();</span>
<span class="nc bnc" id="L992" title="All 2 branches missed.">            if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L993">                minLoc = minSize.width;</span>
            } else {
<span class="nc" id="L995">                minLoc = minSize.height;</span>
            }
<span class="nc bnc" id="L997" title="All 2 branches missed.">            if(insets != null) {</span>
<span class="nc bnc" id="L998" title="All 2 branches missed.">                if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L999">                    minLoc += insets.left;</span>
                } else {
<span class="nc" id="L1001">                    minLoc += insets.top;</span>
                }
            }
        }
<span class="nc" id="L1005">        return minLoc;</span>
    }


    /**
     * Gets the maximum location of the divider.
     */
    public int getMaximumDividerLocation(JSplitPane jc) {
<span class="nc" id="L1013">        Dimension splitPaneSize = splitPane.getSize();</span>
<span class="nc" id="L1014">        int       maxLoc = 0;</span>
<span class="nc" id="L1015">        Component rightC = splitPane.getRightComponent();</span>

<span class="nc bnc" id="L1017" title="All 2 branches missed.">        if (rightC != null) {</span>
<span class="nc" id="L1018">            Insets    insets = splitPane.getInsets();</span>
<span class="nc" id="L1019">            Dimension minSize = new Dimension(0, 0);</span>
<span class="nc bnc" id="L1020" title="All 2 branches missed.">            if (rightC.isVisible()) {</span>
<span class="nc" id="L1021">                minSize = rightC.getMinimumSize();</span>
            }
<span class="nc bnc" id="L1023" title="All 2 branches missed.">            if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1024">                maxLoc = splitPaneSize.width - minSize.width;</span>
            } else {
<span class="nc" id="L1026">                maxLoc = splitPaneSize.height - minSize.height;</span>
            }
<span class="nc" id="L1028">            maxLoc -= dividerSize;</span>
<span class="nc bnc" id="L1029" title="All 2 branches missed.">            if(insets != null) {</span>
<span class="nc bnc" id="L1030" title="All 2 branches missed.">                if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1031">                    maxLoc -= insets.right;</span>
                } else {
<span class="nc" id="L1033">                    maxLoc -= insets.top;</span>
                }
            }
        }
<span class="nc" id="L1037">        return Math.max(getMinimumDividerLocation(splitPane), maxLoc);</span>
    }


    /**
     * Called when the specified split pane has finished painting
     * its children.
     */
    public void finishedPaintingChildren(JSplitPane sp, Graphics g) {
<span class="nc bnc" id="L1046" title="All 4 branches missed.">        if(sp == splitPane &amp;&amp; getLastDragLocation() != -1 &amp;&amp;</span>
<span class="nc bnc" id="L1047" title="All 4 branches missed.">           !isContinuousLayout() &amp;&amp; !draggingHW) {</span>
<span class="nc" id="L1048">            Dimension      size = splitPane.getSize();</span>

<span class="nc" id="L1050">            g.setColor(dividerDraggingColor);</span>
<span class="nc bnc" id="L1051" title="All 2 branches missed.">            if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1052">                g.fillRect(getLastDragLocation(), 0, dividerSize - 1,</span>
                           size.height - 1);
            } else {
<span class="nc" id="L1055">                g.fillRect(0, lastDragLocation, size.width - 1,</span>
                           dividerSize - 1);
            }
        }
<span class="nc" id="L1059">    }</span>


    /**
     * {@inheritDoc}
     */
    public void paint(Graphics g, JComponent jc) {
<span class="nc bnc" id="L1066" title="All 4 branches missed.">        if (!painted &amp;&amp; splitPane.getDividerLocation()&lt;0) {</span>
<span class="nc" id="L1067">            ignoreDividerLocationChange = true;</span>
<span class="nc" id="L1068">            splitPane.setDividerLocation(getDividerLocation(splitPane));</span>
        }
<span class="nc" id="L1070">        painted = true;</span>
<span class="nc" id="L1071">    }</span>


    /**
     * Returns the preferred size for the passed in component,
     * This is passed off to the current layout manager.
     */
    public Dimension getPreferredSize(JComponent jc) {
<span class="nc bnc" id="L1079" title="All 2 branches missed.">        if(splitPane != null)</span>
<span class="nc" id="L1080">            return layoutManager.preferredLayoutSize(splitPane);</span>
<span class="nc" id="L1081">        return new Dimension(0, 0);</span>
    }


    /**
     * Returns the minimum size for the passed in component,
     * This is passed off to the current layout manager.
     */
    public Dimension getMinimumSize(JComponent jc) {
<span class="nc bnc" id="L1090" title="All 2 branches missed.">        if(splitPane != null)</span>
<span class="nc" id="L1091">            return layoutManager.minimumLayoutSize(splitPane);</span>
<span class="nc" id="L1092">        return new Dimension(0, 0);</span>
    }


    /**
     * Returns the maximum size for the passed in component,
     * This is passed off to the current layout manager.
     */
    public Dimension getMaximumSize(JComponent jc) {
<span class="nc bnc" id="L1101" title="All 2 branches missed.">        if(splitPane != null)</span>
<span class="nc" id="L1102">            return layoutManager.maximumLayoutSize(splitPane);</span>
<span class="nc" id="L1103">        return new Dimension(0, 0);</span>
    }


    /**
     * Returns the insets. The insets are returned from the border insets
     * of the current border.
     */
    public Insets getInsets(JComponent jc) {
<span class="nc" id="L1112">        return null;</span>
    }


    /**
     * Resets the layout manager based on orientation and messages it
     * with invalidateLayout to pull in appropriate Components.
     */
    protected void resetLayoutManager() {
<span class="nc bnc" id="L1121" title="All 2 branches missed.">        if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1122">            layoutManager = new BasicHorizontalLayoutManager(0);</span>
        } else {
<span class="nc" id="L1124">            layoutManager = new BasicHorizontalLayoutManager(1);</span>
        }
<span class="nc" id="L1126">        splitPane.setLayout(layoutManager);</span>
<span class="nc" id="L1127">        layoutManager.updateComponents();</span>
<span class="nc" id="L1128">        splitPane.revalidate();</span>
<span class="nc" id="L1129">        splitPane.repaint();</span>
<span class="nc" id="L1130">    }</span>

    /**
     * Set the value to indicate if one of the splitpane sides is expanded.
     */
    void setKeepHidden(boolean keepHidden) {
<span class="nc" id="L1136">        this.keepHidden = keepHidden;</span>
<span class="nc" id="L1137">    }</span>

    /**
     * The value returned indicates if one of the splitpane sides is expanded.
     * @return true if one of the splitpane sides is expanded, false otherwise.
     */
    private boolean getKeepHidden() {
<span class="nc" id="L1144">        return keepHidden;</span>
    }

    /**
     * Should be messaged before the dragging session starts, resets
     * lastDragLocation and dividerSize.
     */
    protected void startDragging() {
<span class="nc" id="L1152">        Component       leftC = splitPane.getLeftComponent();</span>
<span class="nc" id="L1153">        Component       rightC = splitPane.getRightComponent();</span>
        ComponentPeer   cPeer;

<span class="nc" id="L1156">        beginDragDividerLocation = getDividerLocation(splitPane);</span>
<span class="nc" id="L1157">        draggingHW = false;</span>
<span class="nc bnc" id="L1158" title="All 6 branches missed.">        if(leftC != null &amp;&amp; (cPeer = leftC.getPeer()) != null &amp;&amp;</span>
           !(cPeer instanceof LightweightPeer)) {
<span class="nc" id="L1160">            draggingHW = true;</span>
<span class="nc bnc" id="L1161" title="All 6 branches missed.">        } else if(rightC != null &amp;&amp; (cPeer = rightC.getPeer()) != null</span>
                  &amp;&amp; !(cPeer instanceof LightweightPeer)) {
<span class="nc" id="L1163">            draggingHW = true;</span>
        }
<span class="nc bnc" id="L1165" title="All 2 branches missed.">        if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1166">            setLastDragLocation(divider.getBounds().x);</span>
<span class="nc" id="L1167">            dividerSize = divider.getSize().width;</span>
<span class="nc bnc" id="L1168" title="All 4 branches missed.">            if(!isContinuousLayout() &amp;&amp; draggingHW) {</span>
<span class="nc" id="L1169">                nonContinuousLayoutDivider.setBounds</span>
<span class="nc" id="L1170">                        (getLastDragLocation(), 0, dividerSize,</span>
<span class="nc" id="L1171">                         splitPane.getHeight());</span>
<span class="nc" id="L1172">                      addHeavyweightDivider();</span>
            }
        } else {
<span class="nc" id="L1175">            setLastDragLocation(divider.getBounds().y);</span>
<span class="nc" id="L1176">            dividerSize = divider.getSize().height;</span>
<span class="nc bnc" id="L1177" title="All 4 branches missed.">            if(!isContinuousLayout() &amp;&amp; draggingHW) {</span>
<span class="nc" id="L1178">                nonContinuousLayoutDivider.setBounds</span>
<span class="nc" id="L1179">                        (0, getLastDragLocation(), splitPane.getWidth(),</span>
                         dividerSize);
<span class="nc" id="L1181">                      addHeavyweightDivider();</span>
            }
        }
<span class="nc" id="L1184">    }</span>


    /**
     * Messaged during a dragging session to move the divider to the
     * passed in location. If continuousLayout is true the location is
     * reset and the splitPane validated.
     */
    protected void dragDividerTo(int location) {
<span class="nc bnc" id="L1193" title="All 2 branches missed.">        if(getLastDragLocation() != location) {</span>
<span class="nc bnc" id="L1194" title="All 2 branches missed.">            if(isContinuousLayout()) {</span>
<span class="nc" id="L1195">                splitPane.setDividerLocation(location);</span>
<span class="nc" id="L1196">                setLastDragLocation(location);</span>
            } else {
<span class="nc" id="L1198">                int lastLoc = getLastDragLocation();</span>

<span class="nc" id="L1200">                setLastDragLocation(location);</span>
<span class="nc bnc" id="L1201" title="All 2 branches missed.">                if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc bnc" id="L1202" title="All 2 branches missed.">                    if(draggingHW) {</span>
<span class="nc" id="L1203">                        nonContinuousLayoutDivider.setLocation(</span>
<span class="nc" id="L1204">                            getLastDragLocation(), 0);</span>
                    } else {
<span class="nc" id="L1206">                        int   splitHeight = splitPane.getHeight();</span>
<span class="nc" id="L1207">                        splitPane.repaint(lastLoc, 0, dividerSize,</span>
                                          splitHeight);
<span class="nc" id="L1209">                        splitPane.repaint(location, 0, dividerSize,</span>
                                          splitHeight);
<span class="nc" id="L1211">                    }</span>
                } else {
<span class="nc bnc" id="L1213" title="All 2 branches missed.">                    if(draggingHW) {</span>
<span class="nc" id="L1214">                        nonContinuousLayoutDivider.setLocation(0,</span>
<span class="nc" id="L1215">                            getLastDragLocation());</span>
                    } else {
<span class="nc" id="L1217">                        int    splitWidth = splitPane.getWidth();</span>

<span class="nc" id="L1219">                        splitPane.repaint(0, lastLoc, splitWidth,</span>
                                          dividerSize);
<span class="nc" id="L1221">                        splitPane.repaint(0, location, splitWidth,</span>
                                          dividerSize);
                    }
                }
            }
        }
<span class="nc" id="L1227">    }</span>


    /**
     * Messaged to finish the dragging session. If not continuous display
     * the dividers location will be reset.
     */
    protected void finishDraggingTo(int location) {
<span class="nc" id="L1235">        dragDividerTo(location);</span>
<span class="nc" id="L1236">        setLastDragLocation(-1);</span>
<span class="nc bnc" id="L1237" title="All 2 branches missed.">        if(!isContinuousLayout()) {</span>
<span class="nc" id="L1238">            Component   leftC = splitPane.getLeftComponent();</span>
<span class="nc" id="L1239">            Rectangle   leftBounds = leftC.getBounds();</span>

<span class="nc bnc" id="L1241" title="All 2 branches missed.">            if (draggingHW) {</span>
<span class="nc bnc" id="L1242" title="All 2 branches missed.">                if(orientation == JSplitPane.HORIZONTAL_SPLIT) {</span>
<span class="nc" id="L1243">                    nonContinuousLayoutDivider.setLocation(-dividerSize, 0);</span>
                }
                else {
<span class="nc" id="L1246">                    nonContinuousLayoutDivider.setLocation(0, -dividerSize);</span>
                }
<span class="nc" id="L1248">                splitPane.remove(nonContinuousLayoutDivider);</span>
            }
<span class="nc" id="L1250">            splitPane.setDividerLocation(location);</span>
        }
<span class="nc" id="L1252">    }</span>


    /**
     * As of Java 2 platform v1.3 this method is no longer used. Instead
     * you should set the border on the divider.
     * &lt;p&gt;
     * Returns the width of one side of the divider border.
     *
     * @deprecated As of Java 2 platform v1.3, instead set the border on the
     * divider.
     */
    @Deprecated
    protected int getDividerBorderSize() {
<span class="nc" id="L1266">        return 1;</span>
    }


    /**
     * LayoutManager for JSplitPanes that have an orientation of
     * HORIZONTAL_SPLIT.
     */
    public class BasicHorizontalLayoutManager implements LayoutManager2
    {
        /* left, right, divider. (in this exact order) */
        protected int[]         sizes;
        protected Component[]   components;
        /** Size of the splitpane the last time laid out. */
        private int             lastSplitPaneSize;
        /** True if resetToPreferredSizes has been invoked. */
        private boolean         doReset;
        /** Axis, 0 for horizontal, or 1 for veritcal. */
        private int             axis;


        BasicHorizontalLayoutManager() {
<span class="nc" id="L1288">            this(0);</span>
<span class="nc" id="L1289">        }</span>

<span class="nc" id="L1291">        BasicHorizontalLayoutManager(int axis) {</span>
<span class="nc" id="L1292">            this.axis = axis;</span>
<span class="nc" id="L1293">            components = new Component[3];</span>
<span class="nc" id="L1294">            components[0] = components[1] = components[2] = null;</span>
<span class="nc" id="L1295">            sizes = new int[3];</span>
<span class="nc" id="L1296">        }</span>

        //
        // LayoutManager
        //

        /**
         * Does the actual layout.
         */
        public void layoutContainer(Container container) {
<span class="nc" id="L1306">            Dimension   containerSize = container.getSize();</span>

            // If the splitpane has a zero size then no op out of here.
            // If we execute this function now, we're going to cause ourselves
            // much grief.
<span class="nc bnc" id="L1311" title="All 4 branches missed.">            if (containerSize.height &lt;= 0 || containerSize.width &lt;= 0 ) {</span>
<span class="nc" id="L1312">                lastSplitPaneSize = 0;</span>
<span class="nc" id="L1313">                return;</span>
            }

<span class="nc" id="L1316">            int         spDividerLocation = splitPane.getDividerLocation();</span>
<span class="nc" id="L1317">            Insets      insets = splitPane.getInsets();</span>
<span class="nc" id="L1318">            int         availableSize = getAvailableSize(containerSize,</span>
                                                         insets);
<span class="nc" id="L1320">            int         newSize = getSizeForPrimaryAxis(containerSize);</span>
<span class="nc" id="L1321">            int         beginLocation = getDividerLocation(splitPane);</span>
<span class="nc" id="L1322">            int         dOffset = getSizeForPrimaryAxis(insets, true);</span>
<span class="nc bnc" id="L1323" title="All 2 branches missed.">            Dimension   dSize = (components[2] == null) ? null :</span>
<span class="nc" id="L1324">                                 components[2].getPreferredSize();</span>

<span class="nc bnc" id="L1326" title="All 6 branches missed.">            if ((doReset &amp;&amp; !dividerLocationIsSet) || spDividerLocation &lt; 0) {</span>
<span class="nc" id="L1327">                resetToPreferredSizes(availableSize);</span>
            }
<span class="nc bnc" id="L1329" title="All 8 branches missed.">            else if (lastSplitPaneSize &lt;= 0 ||</span>
                     availableSize == lastSplitPaneSize || !painted ||
                     (dSize != null &amp;&amp;
<span class="nc bnc" id="L1332" title="All 2 branches missed.">                      getSizeForPrimaryAxis(dSize) != sizes[2])) {</span>
<span class="nc bnc" id="L1333" title="All 2 branches missed.">                if (dSize != null) {</span>
<span class="nc" id="L1334">                    sizes[2] = getSizeForPrimaryAxis(dSize);</span>
                }
                else {
<span class="nc" id="L1337">                    sizes[2] = 0;</span>
                }
<span class="nc" id="L1339">                setDividerLocation(spDividerLocation - dOffset, availableSize);</span>
<span class="nc" id="L1340">                dividerLocationIsSet = false;</span>
            }
<span class="nc bnc" id="L1342" title="All 2 branches missed.">            else if (availableSize != lastSplitPaneSize) {</span>
<span class="nc" id="L1343">                distributeSpace(availableSize - lastSplitPaneSize,</span>
<span class="nc" id="L1344">                                getKeepHidden());</span>
            }
<span class="nc" id="L1346">            doReset = false;</span>
<span class="nc" id="L1347">            dividerLocationIsSet = false;</span>
<span class="nc" id="L1348">            lastSplitPaneSize = availableSize;</span>

            // Reset the bounds of each component
<span class="nc" id="L1351">            int nextLocation = getInitialLocation(insets);</span>
<span class="nc" id="L1352">            int counter = 0;</span>

<span class="nc bnc" id="L1354" title="All 2 branches missed.">            while (counter &lt; 3) {</span>
<span class="nc bnc" id="L1355" title="All 2 branches missed.">                if (components[counter] != null &amp;&amp;</span>
<span class="nc bnc" id="L1356" title="All 2 branches missed.">                    components[counter].isVisible()) {</span>
<span class="nc" id="L1357">                    setComponentToSize(components[counter], sizes[counter],</span>
                                       nextLocation, insets, containerSize);
<span class="nc" id="L1359">                    nextLocation += sizes[counter];</span>
                }
<span class="nc bnc" id="L1361" title="All 4 branches missed.">                switch (counter) {</span>
                case 0:
<span class="nc" id="L1363">                    counter = 2;</span>
<span class="nc" id="L1364">                    break;</span>
                case 2:
<span class="nc" id="L1366">                    counter = 1;</span>
<span class="nc" id="L1367">                    break;</span>
                case 1:
<span class="nc" id="L1369">                    counter = 3;</span>
<span class="nc" id="L1370">                    break;</span>
                }
            }
<span class="nc bnc" id="L1373" title="All 2 branches missed.">            if (painted) {</span>
                // This is tricky, there is never a good time for us
                // to push the value to the splitpane, painted appears to
                // the best time to do it. What is really needed is
                // notification that layout has completed.
<span class="nc" id="L1378">                int      newLocation = getDividerLocation(splitPane);</span>

<span class="nc bnc" id="L1380" title="All 2 branches missed.">                if (newLocation != (spDividerLocation - dOffset)) {</span>
<span class="nc" id="L1381">                    int  lastLocation = splitPane.getLastDividerLocation();</span>

<span class="nc" id="L1383">                    ignoreDividerLocationChange = true;</span>
                    try {
<span class="nc" id="L1385">                        splitPane.setDividerLocation(newLocation);</span>
                        // This is not always needed, but is rather tricky
                        // to determine when... The case this is needed for
                        // is if the user sets the divider location to some
                        // bogus value, say 0, and the actual value is 1, the
                        // call to setDividerLocation(1) will preserve the
                        // old value of 0, when we really want the divider
                        // location value  before the call. This is needed for
                        // the one touch buttons.
<span class="nc" id="L1394">                        splitPane.setLastDividerLocation(lastLocation);</span>
                    } finally {
<span class="nc" id="L1396">                        ignoreDividerLocationChange = false;</span>
<span class="nc" id="L1397">                    }</span>
                }
            }
<span class="nc" id="L1400">        }</span>


        /**
         * Adds the component at place.  Place must be one of
         * JSplitPane.LEFT, RIGHT, TOP, BOTTOM, or null (for the
         * divider).
         */
        public void addLayoutComponent(String place, Component component) {
<span class="nc" id="L1409">            boolean isValid = true;</span>

<span class="nc bnc" id="L1411" title="All 2 branches missed.">            if(place != null) {</span>
<span class="nc bnc" id="L1412" title="All 2 branches missed.">                if(place.equals(JSplitPane.DIVIDER)) {</span>
                    /* Divider. */
<span class="nc" id="L1414">                    components[2] = component;</span>
<span class="nc" id="L1415">                    sizes[2] = getSizeForPrimaryAxis(component.</span>
<span class="nc" id="L1416">                                                     getPreferredSize());</span>
<span class="nc bnc" id="L1417" title="All 2 branches missed.">                } else if(place.equals(JSplitPane.LEFT) ||</span>
<span class="nc bnc" id="L1418" title="All 2 branches missed.">                          place.equals(JSplitPane.TOP)) {</span>
<span class="nc" id="L1419">                    components[0] = component;</span>
<span class="nc" id="L1420">                    sizes[0] = 0;</span>
<span class="nc bnc" id="L1421" title="All 2 branches missed.">                } else if(place.equals(JSplitPane.RIGHT) ||</span>
<span class="nc bnc" id="L1422" title="All 2 branches missed.">                          place.equals(JSplitPane.BOTTOM)) {</span>
<span class="nc" id="L1423">                    components[1] = component;</span>
<span class="nc" id="L1424">                    sizes[1] = 0;</span>
<span class="nc bnc" id="L1425" title="All 2 branches missed.">                } else if(!place.equals(</span>
                                    BasicSplitPaneUI.NON_CONTINUOUS_DIVIDER))
<span class="nc" id="L1427">                    isValid = false;</span>
            } else {
<span class="nc" id="L1429">                isValid = false;</span>
            }
<span class="nc bnc" id="L1431" title="All 2 branches missed.">            if(!isValid)</span>
<span class="nc" id="L1432">                throw new IllegalArgumentException(&quot;cannot add to layout: &quot; +</span>
                    &quot;unknown constraint: &quot; +
                    place);
<span class="nc" id="L1435">            doReset = true;</span>
<span class="nc" id="L1436">        }</span>


        /**
         * Returns the minimum size needed to contain the children.
         * The width is the sum of all the children's min widths and
         * the height is the largest of the children's minimum heights.
         */
        public Dimension minimumLayoutSize(Container container) {
<span class="nc" id="L1445">            int         minPrimary = 0;</span>
<span class="nc" id="L1446">            int         minSecondary = 0;</span>
<span class="nc" id="L1447">            Insets      insets = splitPane.getInsets();</span>

<span class="nc bnc" id="L1449" title="All 2 branches missed.">            for (int counter=0; counter&lt;3; counter++) {</span>
<span class="nc bnc" id="L1450" title="All 2 branches missed.">                if(components[counter] != null) {</span>
<span class="nc" id="L1451">                    Dimension   minSize = components[counter].getMinimumSize();</span>
<span class="nc" id="L1452">                    int         secSize = getSizeForSecondaryAxis(minSize);</span>

<span class="nc" id="L1454">                    minPrimary += getSizeForPrimaryAxis(minSize);</span>
<span class="nc bnc" id="L1455" title="All 2 branches missed.">                    if(secSize &gt; minSecondary)</span>
<span class="nc" id="L1456">                        minSecondary = secSize;</span>
                }
            }
<span class="nc bnc" id="L1459" title="All 2 branches missed.">            if(insets != null) {</span>
<span class="nc" id="L1460">                minPrimary += getSizeForPrimaryAxis(insets, true) +</span>
<span class="nc" id="L1461">                              getSizeForPrimaryAxis(insets, false);</span>
<span class="nc" id="L1462">                minSecondary += getSizeForSecondaryAxis(insets, true) +</span>
<span class="nc" id="L1463">                              getSizeForSecondaryAxis(insets, false);</span>
            }
<span class="nc bnc" id="L1465" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc" id="L1466">                return new Dimension(minPrimary, minSecondary);</span>
            }
<span class="nc" id="L1468">            return new Dimension(minSecondary, minPrimary);</span>
        }


        /**
         * Returns the preferred size needed to contain the children.
         * The width is the sum of all the preferred widths of the children and
         * the height is the largest preferred height of the children.
         */
        public Dimension preferredLayoutSize(Container container) {
<span class="nc" id="L1478">            int         prePrimary = 0;</span>
<span class="nc" id="L1479">            int         preSecondary = 0;</span>
<span class="nc" id="L1480">            Insets      insets = splitPane.getInsets();</span>

<span class="nc bnc" id="L1482" title="All 2 branches missed.">            for(int counter = 0; counter &lt; 3; counter++) {</span>
<span class="nc bnc" id="L1483" title="All 2 branches missed.">                if(components[counter] != null) {</span>
<span class="nc" id="L1484">                    Dimension   preSize = components[counter].</span>
<span class="nc" id="L1485">                                          getPreferredSize();</span>
<span class="nc" id="L1486">                    int         secSize = getSizeForSecondaryAxis(preSize);</span>

<span class="nc" id="L1488">                    prePrimary += getSizeForPrimaryAxis(preSize);</span>
<span class="nc bnc" id="L1489" title="All 2 branches missed.">                    if(secSize &gt; preSecondary)</span>
<span class="nc" id="L1490">                        preSecondary = secSize;</span>
                }
            }
<span class="nc bnc" id="L1493" title="All 2 branches missed.">            if(insets != null) {</span>
<span class="nc" id="L1494">                prePrimary += getSizeForPrimaryAxis(insets, true) +</span>
<span class="nc" id="L1495">                              getSizeForPrimaryAxis(insets, false);</span>
<span class="nc" id="L1496">                preSecondary += getSizeForSecondaryAxis(insets, true) +</span>
<span class="nc" id="L1497">                              getSizeForSecondaryAxis(insets, false);</span>
            }
<span class="nc bnc" id="L1499" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc" id="L1500">                return new Dimension(prePrimary, preSecondary);</span>
            }
<span class="nc" id="L1502">            return new Dimension(preSecondary, prePrimary);</span>
        }


        /**
         * Removes the specified component from our knowledge.
         */
        public void removeLayoutComponent(Component component) {
<span class="nc bnc" id="L1510" title="All 2 branches missed.">            for(int counter = 0; counter &lt; 3; counter++) {</span>
<span class="nc bnc" id="L1511" title="All 2 branches missed.">                if(components[counter] == component) {</span>
<span class="nc" id="L1512">                    components[counter] = null;</span>
<span class="nc" id="L1513">                    sizes[counter] = 0;</span>
<span class="nc" id="L1514">                    doReset = true;</span>
                }
            }
<span class="nc" id="L1517">        }</span>


        //
        // LayoutManager2
        //


        /**
         * Adds the specified component to the layout, using the specified
         * constraint object.
         * @param comp the component to be added
         * @param constraints  where/how the component is added to the layout.
         */
        public void addLayoutComponent(Component comp, Object constraints) {
<span class="nc bnc" id="L1532" title="All 4 branches missed.">            if ((constraints == null) || (constraints instanceof String)) {</span>
<span class="nc" id="L1533">                addLayoutComponent((String)constraints, comp);</span>
            } else {
<span class="nc" id="L1535">                throw new IllegalArgumentException(&quot;cannot add to layout: &quot; +</span>
                                                   &quot;constraint must be a &quot; +
                                                   &quot;string (or null)&quot;);
            }
<span class="nc" id="L1539">        }</span>


        /**
         * Returns the alignment along the x axis.  This specifies how
         * the component would like to be aligned relative to other
         * components.  The value should be a number between 0 and 1
         * where 0 represents alignment along the origin, 1 is aligned
         * the furthest away from the origin, 0.5 is centered, etc.
         */
        public float getLayoutAlignmentX(Container target) {
<span class="nc" id="L1550">            return 0.0f;</span>
        }


        /**
         * Returns the alignment along the y axis.  This specifies how
         * the component would like to be aligned relative to other
         * components.  The value should be a number between 0 and 1
         * where 0 represents alignment along the origin, 1 is aligned
         * the furthest away from the origin, 0.5 is centered, etc.
         */
        public float getLayoutAlignmentY(Container target) {
<span class="nc" id="L1562">            return 0.0f;</span>
        }


        /**
         * Does nothing. If the developer really wants to change the
         * size of one of the views JSplitPane.resetToPreferredSizes should
         * be messaged.
         */
        public void invalidateLayout(Container c) {
<span class="nc" id="L1572">        }</span>


        /**
         * Returns the maximum layout size, which is Integer.MAX_VALUE
         * in both directions.
         */
        public Dimension maximumLayoutSize(Container target) {
<span class="nc" id="L1580">            return new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE);</span>
        }


        //
        // New methods.
        //

        /**
         * Marks the receiver so that the next time this instance is
         * laid out it'll ask for the preferred sizes.
         */
        public void resetToPreferredSizes() {
<span class="nc" id="L1593">            doReset = true;</span>
<span class="nc" id="L1594">        }</span>

        /**
         * Resets the size of the Component at the passed in location.
         */
        protected void resetSizeAt(int index) {
<span class="nc" id="L1600">            sizes[index] = 0;</span>
<span class="nc" id="L1601">            doReset = true;</span>
<span class="nc" id="L1602">        }</span>


        /**
         * Sets the sizes to &lt;code&gt;newSizes&lt;/code&gt;.
         */
        protected void setSizes(int[] newSizes) {
<span class="nc" id="L1609">            System.arraycopy(newSizes, 0, sizes, 0, 3);</span>
<span class="nc" id="L1610">        }</span>


        /**
         * Returns the sizes of the components.
         */
        protected int[] getSizes() {
<span class="nc" id="L1617">            int[]         retSizes = new int[3];</span>

<span class="nc" id="L1619">            System.arraycopy(sizes, 0, retSizes, 0, 3);</span>
<span class="nc" id="L1620">            return retSizes;</span>
        }


        /**
         * Returns the width of the passed in Components preferred size.
         */
        protected int getPreferredSizeOfComponent(Component c) {
<span class="nc" id="L1628">            return getSizeForPrimaryAxis(c.getPreferredSize());</span>
        }


        /**
         * Returns the width of the passed in Components minimum size.
         */
        int getMinimumSizeOfComponent(Component c) {
<span class="nc" id="L1636">            return getSizeForPrimaryAxis(c.getMinimumSize());</span>
        }


        /**
         * Returns the width of the passed in component.
         */
        protected int getSizeOfComponent(Component c) {
<span class="nc" id="L1644">            return getSizeForPrimaryAxis(c.getSize());</span>
        }


        /**
         * Returns the available width based on the container size and
         * Insets.
         */
        protected int getAvailableSize(Dimension containerSize,
                                       Insets insets) {
<span class="nc bnc" id="L1654" title="All 2 branches missed.">            if(insets == null)</span>
<span class="nc" id="L1655">                return getSizeForPrimaryAxis(containerSize);</span>
<span class="nc" id="L1656">            return (getSizeForPrimaryAxis(containerSize) -</span>
<span class="nc" id="L1657">                    (getSizeForPrimaryAxis(insets, true) +</span>
<span class="nc" id="L1658">                     getSizeForPrimaryAxis(insets, false)));</span>
        }


        /**
         * Returns the left inset, unless the Insets are null in which case
         * 0 is returned.
         */
        protected int getInitialLocation(Insets insets) {
<span class="nc bnc" id="L1667" title="All 2 branches missed.">            if(insets != null)</span>
<span class="nc" id="L1668">                return getSizeForPrimaryAxis(insets, true);</span>
<span class="nc" id="L1669">            return 0;</span>
        }


        /**
         * Sets the width of the component c to be size, placing its
         * x location at location, y to the insets.top and height
         * to the containersize.height less the top and bottom insets.
         */
        protected void setComponentToSize(Component c, int size,
                                          int location, Insets insets,
                                          Dimension containerSize) {
<span class="nc bnc" id="L1681" title="All 2 branches missed.">            if(insets != null) {</span>
<span class="nc bnc" id="L1682" title="All 2 branches missed.">                if (axis == 0) {</span>
<span class="nc" id="L1683">                    c.setBounds(location, insets.top, size,</span>
                                containerSize.height -
                                (insets.top + insets.bottom));
                }
                else {
<span class="nc" id="L1688">                    c.setBounds(insets.left, location, containerSize.width -</span>
                                (insets.left + insets.right), size);
                }
            }
            else {
<span class="nc bnc" id="L1693" title="All 2 branches missed.">                if (axis == 0) {</span>
<span class="nc" id="L1694">                    c.setBounds(location, 0, size, containerSize.height);</span>
                }
                else {
<span class="nc" id="L1697">                    c.setBounds(0, location, containerSize.width, size);</span>
                }
            }
<span class="nc" id="L1700">        }</span>

        /**
         * If the axis == 0, the width is returned, otherwise the height.
         */
        int getSizeForPrimaryAxis(Dimension size) {
<span class="nc bnc" id="L1706" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc" id="L1707">                return size.width;</span>
            }
<span class="nc" id="L1709">            return size.height;</span>
        }

        /**
         * If the axis == 0, the width is returned, otherwise the height.
         */
        int getSizeForSecondaryAxis(Dimension size) {
<span class="nc bnc" id="L1716" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc" id="L1717">                return size.height;</span>
            }
<span class="nc" id="L1719">            return size.width;</span>
        }

        /**
         * Returns a particular value of the inset identified by the
         * axis and &lt;code&gt;isTop&lt;/code&gt;&lt;p&gt;
         *   axis isTop
         *    0    true    - left
         *    0    false   - right
         *    1    true    - top
         *    1    false   - bottom
         */
        int getSizeForPrimaryAxis(Insets insets, boolean isTop) {
<span class="nc bnc" id="L1732" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc bnc" id="L1733" title="All 2 branches missed.">                if (isTop) {</span>
<span class="nc" id="L1734">                    return insets.left;</span>
                }
<span class="nc" id="L1736">                return insets.right;</span>
            }
<span class="nc bnc" id="L1738" title="All 2 branches missed.">            if (isTop) {</span>
<span class="nc" id="L1739">                return insets.top;</span>
            }
<span class="nc" id="L1741">            return insets.bottom;</span>
        }

        /**
         * Returns a particular value of the inset identified by the
         * axis and &lt;code&gt;isTop&lt;/code&gt;&lt;p&gt;
         *   axis isTop
         *    0    true    - left
         *    0    false   - right
         *    1    true    - top
         *    1    false   - bottom
         */
        int getSizeForSecondaryAxis(Insets insets, boolean isTop) {
<span class="nc bnc" id="L1754" title="All 2 branches missed.">            if (axis == 0) {</span>
<span class="nc bnc" id="L1755" title="All 2 branches missed.">                if (isTop) {</span>
<span class="nc" id="L1756">                    return insets.top;</span>
                }
<span class="nc" id="L1758">                return insets.bottom;</span>
            }
<span class="nc bnc" id="L1760" title="All 2 branches missed.">            if (isTop) {</span>
<span class="nc" id="L1761">                return insets.left;</span>
            }
<span class="nc" id="L1763">            return insets.right;</span>
        }

        /**
         * Determines the components. This should be called whenever
         * a new instance of this is installed into an existing
         * SplitPane.
         */
        protected void updateComponents() {
            Component comp;

<span class="nc" id="L1774">            comp = splitPane.getLeftComponent();</span>
<span class="nc bnc" id="L1775" title="All 2 branches missed.">            if(components[0] != comp) {</span>
<span class="nc" id="L1776">                components[0] = comp;</span>
<span class="nc bnc" id="L1777" title="All 2 branches missed.">                if(comp == null) {</span>
<span class="nc" id="L1778">                    sizes[0] = 0;</span>
                } else {
<span class="nc" id="L1780">                    sizes[0] = -1;</span>
                }
            }

<span class="nc" id="L1784">            comp = splitPane.getRightComponent();</span>
<span class="nc bnc" id="L1785" title="All 2 branches missed.">            if(components[1] != comp) {</span>
<span class="nc" id="L1786">                components[1] = comp;</span>
<span class="nc bnc" id="L1787" title="All 2 branches missed.">                if(comp == null) {</span>
<span class="nc" id="L1788">                    sizes[1] = 0;</span>
                } else {
<span class="nc" id="L1790">                    sizes[1] = -1;</span>
                }
            }

            /* Find the divider. */
<span class="nc" id="L1795">            Component[] children = splitPane.getComponents();</span>
<span class="nc" id="L1796">            Component   oldDivider = components[2];</span>

<span class="nc" id="L1798">            components[2] = null;</span>
<span class="nc bnc" id="L1799" title="All 2 branches missed.">            for(int counter = children.length - 1; counter &gt;= 0; counter--) {</span>
<span class="nc bnc" id="L1800" title="All 6 branches missed.">                if(children[counter] != components[0] &amp;&amp;</span>
                   children[counter] != components[1] &amp;&amp;
                   children[counter] != nonContinuousLayoutDivider) {
<span class="nc bnc" id="L1803" title="All 2 branches missed.">                    if(oldDivider != children[counter]) {</span>
<span class="nc" id="L1804">                        components[2] = children[counter];</span>
                    } else {
<span class="nc" id="L1806">                        components[2] = oldDivider;</span>
                    }
<span class="nc" id="L1808">                    break;</span>
                }
            }
<span class="nc bnc" id="L1811" title="All 2 branches missed.">            if(components[2] == null) {</span>
<span class="nc" id="L1812">                sizes[2] = 0;</span>
            }
            else {
<span class="nc" id="L1815">                sizes[2] = getSizeForPrimaryAxis(components[2].getPreferredSize());</span>
            }
<span class="nc" id="L1817">        }</span>

        /**
         * Resets the size of the first component to &lt;code&gt;leftSize&lt;/code&gt;,
         * and the right component to the remainder of the space.
         */
        void setDividerLocation(int leftSize, int availableSize) {
<span class="nc bnc" id="L1824" title="All 2 branches missed.">            boolean          lValid = (components[0] != null &amp;&amp;</span>
<span class="nc bnc" id="L1825" title="All 2 branches missed.">                                       components[0].isVisible());</span>
<span class="nc bnc" id="L1826" title="All 2 branches missed.">            boolean          rValid = (components[1] != null &amp;&amp;</span>
<span class="nc bnc" id="L1827" title="All 2 branches missed.">                                       components[1].isVisible());</span>
<span class="nc bnc" id="L1828" title="All 2 branches missed.">            boolean          dValid = (components[2] != null &amp;&amp;</span>
<span class="nc bnc" id="L1829" title="All 2 branches missed.">                                       components[2].isVisible());</span>
<span class="nc" id="L1830">            int              max = availableSize;</span>

<span class="nc bnc" id="L1832" title="All 2 branches missed.">            if (dValid) {</span>
<span class="nc" id="L1833">                max -= sizes[2];</span>
            }
<span class="nc" id="L1835">            leftSize = Math.max(0, Math.min(leftSize, max));</span>
<span class="nc bnc" id="L1836" title="All 2 branches missed.">            if (lValid) {</span>
<span class="nc bnc" id="L1837" title="All 2 branches missed.">                if (rValid) {</span>
<span class="nc" id="L1838">                    sizes[0] = leftSize;</span>
<span class="nc" id="L1839">                    sizes[1] = max - leftSize;</span>
                }
                else {
<span class="nc" id="L1842">                    sizes[0] = max;</span>
<span class="nc" id="L1843">                    sizes[1] = 0;</span>
                }
            }
<span class="nc bnc" id="L1846" title="All 2 branches missed.">            else if (rValid) {</span>
<span class="nc" id="L1847">                sizes[1] = max;</span>
<span class="nc" id="L1848">                sizes[0] = 0;</span>
            }
<span class="nc" id="L1850">        }</span>

        /**
         * Returns an array of the minimum sizes of the components.
         */
        int[] getPreferredSizes() {
<span class="nc" id="L1856">            int[]         retValue = new int[3];</span>

<span class="nc bnc" id="L1858" title="All 2 branches missed.">            for (int counter = 0; counter &lt; 3; counter++) {</span>
<span class="nc bnc" id="L1859" title="All 2 branches missed.">                if (components[counter] != null &amp;&amp;</span>
<span class="nc bnc" id="L1860" title="All 2 branches missed.">                    components[counter].isVisible()) {</span>
<span class="nc" id="L1861">                    retValue[counter] = getPreferredSizeOfComponent</span>
<span class="nc" id="L1862">                                        (components[counter]);</span>
                }
                else {
<span class="nc" id="L1865">                    retValue[counter] = -1;</span>
                }
            }
<span class="nc" id="L1868">            return retValue;</span>
        }

        /**
         * Returns an array of the minimum sizes of the components.
         */
        int[] getMinimumSizes() {
<span class="nc" id="L1875">            int[]         retValue = new int[3];</span>

<span class="nc bnc" id="L1877" title="All 2 branches missed.">            for (int counter = 0; counter &lt; 2; counter++) {</span>
<span class="nc bnc" id="L1878" title="All 2 branches missed.">                if (components[counter] != null &amp;&amp;</span>
<span class="nc bnc" id="L1879" title="All 2 branches missed.">                    components[counter].isVisible()) {</span>
<span class="nc" id="L1880">                    retValue[counter] = getMinimumSizeOfComponent</span>
<span class="nc" id="L1881">                                        (components[counter]);</span>
                }
                else {
<span class="nc" id="L1884">                    retValue[counter] = -1;</span>
                }
            }
<span class="nc bnc" id="L1887" title="All 2 branches missed.">            retValue[2] = (components[2] != null) ?</span>
<span class="nc" id="L1888">                getMinimumSizeOfComponent(components[2]) : -1;</span>
<span class="nc" id="L1889">            return retValue;</span>
        }

        /**
         * Resets the components to their preferred sizes.
         */
        void resetToPreferredSizes(int availableSize) {
            // Set the sizes to the preferred sizes (if fits), otherwise
            // set to min sizes and distribute any extra space.
<span class="nc" id="L1898">            int[]       testSizes = getPreferredSizes();</span>
<span class="nc" id="L1899">            int         totalSize = 0;</span>

<span class="nc bnc" id="L1901" title="All 2 branches missed.">            for (int counter = 0; counter &lt; 3; counter++) {</span>
<span class="nc bnc" id="L1902" title="All 2 branches missed.">                if (testSizes[counter] != -1) {</span>
<span class="nc" id="L1903">                    totalSize += testSizes[counter];</span>
                }
            }
<span class="nc bnc" id="L1906" title="All 2 branches missed.">            if (totalSize &gt; availableSize) {</span>
<span class="nc" id="L1907">                testSizes = getMinimumSizes();</span>

<span class="nc" id="L1909">                totalSize = 0;</span>
<span class="nc bnc" id="L1910" title="All 2 branches missed.">                for (int counter = 0; counter &lt; 3; counter++) {</span>
<span class="nc bnc" id="L1911" title="All 2 branches missed.">                    if (testSizes[counter] != -1) {</span>
<span class="nc" id="L1912">                        totalSize += testSizes[counter];</span>
                    }
                }
            }
<span class="nc" id="L1916">            setSizes(testSizes);</span>
<span class="nc" id="L1917">            distributeSpace(availableSize - totalSize, false);</span>
<span class="nc" id="L1918">        }</span>

        /**
         * Distributes &lt;code&gt;space&lt;/code&gt; between the two components
         * (divider won't get any extra space) based on the weighting. This
         * attempts to honor the min size of the components.
         *
         * @param keepHidden if true and one of the components is 0x0
         *                   it gets none of the extra space
         */
        void distributeSpace(int space, boolean keepHidden) {
<span class="nc bnc" id="L1929" title="All 2 branches missed.">            boolean          lValid = (components[0] != null &amp;&amp;</span>
<span class="nc bnc" id="L1930" title="All 2 branches missed.">                                       components[0].isVisible());</span>
<span class="nc bnc" id="L1931" title="All 2 branches missed.">            boolean          rValid = (components[1] != null &amp;&amp;</span>
<span class="nc bnc" id="L1932" title="All 2 branches missed.">                                       components[1].isVisible());</span>

<span class="nc bnc" id="L1934" title="All 2 branches missed.">            if (keepHidden) {</span>
<span class="nc bnc" id="L1935" title="All 4 branches missed.">                if (lValid &amp;&amp; getSizeForPrimaryAxis(</span>
<span class="nc" id="L1936">                                 components[0].getSize()) == 0) {</span>
<span class="nc" id="L1937">                    lValid = false;</span>
<span class="nc bnc" id="L1938" title="All 4 branches missed.">                    if (rValid &amp;&amp; getSizeForPrimaryAxis(</span>
<span class="nc" id="L1939">                                     components[1].getSize()) == 0) {</span>
                        // Both aren't valid, force them both to be valid
<span class="nc" id="L1941">                        lValid = true;</span>
                    }
                }
<span class="nc bnc" id="L1944" title="All 4 branches missed.">                else if (rValid &amp;&amp; getSizeForPrimaryAxis(</span>
<span class="nc" id="L1945">                                   components[1].getSize()) == 0) {</span>
<span class="nc" id="L1946">                    rValid = false;</span>
                }
            }
<span class="nc bnc" id="L1949" title="All 4 branches missed.">            if (lValid &amp;&amp; rValid) {</span>
<span class="nc" id="L1950">                double        weight = splitPane.getResizeWeight();</span>
<span class="nc" id="L1951">                int           lExtra = (int)(weight * (double)space);</span>
<span class="nc" id="L1952">                int           rExtra = (space - lExtra);</span>

<span class="nc" id="L1954">                sizes[0] += lExtra;</span>
<span class="nc" id="L1955">                sizes[1] += rExtra;</span>

<span class="nc" id="L1957">                int           lMin = getMinimumSizeOfComponent(components[0]);</span>
<span class="nc" id="L1958">                int           rMin = getMinimumSizeOfComponent(components[1]);</span>
<span class="nc bnc" id="L1959" title="All 2 branches missed.">                boolean       lMinValid = (sizes[0] &gt;= lMin);</span>
<span class="nc bnc" id="L1960" title="All 2 branches missed.">                boolean       rMinValid = (sizes[1] &gt;= rMin);</span>

<span class="nc bnc" id="L1962" title="All 4 branches missed.">                if (!lMinValid &amp;&amp; !rMinValid) {</span>
<span class="nc bnc" id="L1963" title="All 2 branches missed.">                    if (sizes[0] &lt; 0) {</span>
<span class="nc" id="L1964">                        sizes[1] += sizes[0];</span>
<span class="nc" id="L1965">                        sizes[0] = 0;</span>
                    }
<span class="nc bnc" id="L1967" title="All 2 branches missed.">                    else if (sizes[1] &lt; 0) {</span>
<span class="nc" id="L1968">                        sizes[0] += sizes[1];</span>
<span class="nc" id="L1969">                        sizes[1] = 0;</span>
                    }
                }
<span class="nc bnc" id="L1972" title="All 2 branches missed.">                else if (!lMinValid) {</span>
<span class="nc bnc" id="L1973" title="All 2 branches missed.">                    if (sizes[1] - (lMin - sizes[0]) &lt; rMin) {</span>
                        // both below min, just make sure &gt; 0
<span class="nc bnc" id="L1975" title="All 2 branches missed.">                        if (sizes[0] &lt; 0) {</span>
<span class="nc" id="L1976">                            sizes[1] += sizes[0];</span>
<span class="nc" id="L1977">                            sizes[0] = 0;</span>
                        }
                    }
                    else {
<span class="nc" id="L1981">                        sizes[1] -= (lMin - sizes[0]);</span>
<span class="nc" id="L1982">                        sizes[0] = lMin;</span>
                    }
                }
<span class="nc bnc" id="L1985" title="All 2 branches missed.">                else if (!rMinValid) {</span>
<span class="nc bnc" id="L1986" title="All 2 branches missed.">                    if (sizes[0] - (rMin - sizes[1]) &lt; lMin) {</span>
                        // both below min, just make sure &gt; 0
<span class="nc bnc" id="L1988" title="All 2 branches missed.">                        if (sizes[1] &lt; 0) {</span>
<span class="nc" id="L1989">                            sizes[0] += sizes[1];</span>
<span class="nc" id="L1990">                            sizes[1] = 0;</span>
                        }
                    }
                    else {
<span class="nc" id="L1994">                        sizes[0] -= (rMin - sizes[1]);</span>
<span class="nc" id="L1995">                        sizes[1] = rMin;</span>
                    }
                }
<span class="nc bnc" id="L1998" title="All 2 branches missed.">                if (sizes[0] &lt; 0) {</span>
<span class="nc" id="L1999">                    sizes[0] = 0;</span>
                }
<span class="nc bnc" id="L2001" title="All 2 branches missed.">                if (sizes[1] &lt; 0) {</span>
<span class="nc" id="L2002">                    sizes[1] = 0;</span>
                }
<span class="nc" id="L2004">            }</span>
<span class="nc bnc" id="L2005" title="All 2 branches missed.">            else if (lValid) {</span>
<span class="nc" id="L2006">                sizes[0] = Math.max(0, sizes[0] + space);</span>
            }
<span class="nc bnc" id="L2008" title="All 2 branches missed.">            else if (rValid) {</span>
<span class="nc" id="L2009">                sizes[1] = Math.max(0, sizes[1] + space);</span>
            }
<span class="nc" id="L2011">        }</span>
    }


    /**
     * LayoutManager used for JSplitPanes with an orientation of
     * VERTICAL_SPLIT.
     * &lt;p&gt;
     */
    public class BasicVerticalLayoutManager extends
            BasicHorizontalLayoutManager
    {
<span class="nc" id="L2023">        public BasicVerticalLayoutManager() {</span>
<span class="nc" id="L2024">            super(1);</span>
<span class="nc" id="L2025">        }</span>
    }


<span class="nc" id="L2029">    private class Handler implements FocusListener, PropertyChangeListener {</span>
        //
        // PropertyChangeListener
        //
        /**
         * Messaged from the &lt;code&gt;JSplitPane&lt;/code&gt; the receiver is
         * contained in.  May potentially reset the layout manager and cause a
         * &lt;code&gt;validate&lt;/code&gt; to be sent.
         */
        public void propertyChange(PropertyChangeEvent e) {
<span class="nc bnc" id="L2039" title="All 2 branches missed.">            if(e.getSource() == splitPane) {</span>
<span class="nc" id="L2040">                String changeName = e.getPropertyName();</span>

<span class="nc bnc" id="L2042" title="All 2 branches missed.">                if(changeName == JSplitPane.ORIENTATION_PROPERTY) {</span>
<span class="nc" id="L2043">                    orientation = splitPane.getOrientation();</span>
<span class="nc" id="L2044">                    resetLayoutManager();</span>
<span class="nc bnc" id="L2045" title="All 2 branches missed.">                } else if(changeName == JSplitPane.CONTINUOUS_LAYOUT_PROPERTY){</span>
<span class="nc" id="L2046">                    setContinuousLayout(splitPane.isContinuousLayout());</span>
<span class="nc bnc" id="L2047" title="All 2 branches missed.">                    if(!isContinuousLayout()) {</span>
<span class="nc bnc" id="L2048" title="All 2 branches missed.">                        if(nonContinuousLayoutDivider == null) {</span>
<span class="nc" id="L2049">                            setNonContinuousLayoutDivider(</span>
<span class="nc" id="L2050">                                createDefaultNonContinuousLayoutDivider(),</span>
                                true);
<span class="nc bnc" id="L2052" title="All 2 branches missed.">                        } else if(nonContinuousLayoutDivider.getParent() ==</span>
                                  null) {
<span class="nc" id="L2054">                            setNonContinuousLayoutDivider(</span>
                                nonContinuousLayoutDivider,
                                true);
                        }
                    }
<span class="nc bnc" id="L2059" title="All 2 branches missed.">                } else if(changeName == JSplitPane.DIVIDER_SIZE_PROPERTY){</span>
<span class="nc" id="L2060">                    divider.setDividerSize(splitPane.getDividerSize());</span>
<span class="nc" id="L2061">                    dividerSize = divider.getDividerSize();</span>
<span class="nc" id="L2062">                    splitPane.revalidate();</span>
<span class="nc" id="L2063">                    splitPane.repaint();</span>
                }
            }
<span class="nc" id="L2066">        }</span>

        //
        // FocusListener
        //
        public void focusGained(FocusEvent ev) {
<span class="nc" id="L2072">            dividerKeyboardResize = true;</span>
<span class="nc" id="L2073">            splitPane.repaint();</span>
<span class="nc" id="L2074">        }</span>

        public void focusLost(FocusEvent ev) {
<span class="nc" id="L2077">            dividerKeyboardResize = false;</span>
<span class="nc" id="L2078">            splitPane.repaint();</span>
<span class="nc" id="L2079">        }</span>
    }


<span class="nc" id="L2083">    private static class Actions extends UIAction {</span>
        private static final String NEGATIVE_INCREMENT = &quot;negativeIncrement&quot;;
        private static final String POSITIVE_INCREMENT = &quot;positiveIncrement&quot;;
        private static final String SELECT_MIN = &quot;selectMin&quot;;
        private static final String SELECT_MAX = &quot;selectMax&quot;;
        private static final String START_RESIZE = &quot;startResize&quot;;
        private static final String TOGGLE_FOCUS = &quot;toggleFocus&quot;;
        private static final String FOCUS_OUT_FORWARD = &quot;focusOutForward&quot;;
        private static final String FOCUS_OUT_BACKWARD = &quot;focusOutBackward&quot;;

        Actions(String key) {
<span class="nc" id="L2094">            super(key);</span>
<span class="nc" id="L2095">        }</span>

        public void actionPerformed(ActionEvent ev) {
<span class="nc" id="L2098">            JSplitPane splitPane = (JSplitPane)ev.getSource();</span>
<span class="nc" id="L2099">            BasicSplitPaneUI ui = (BasicSplitPaneUI)BasicLookAndFeel.</span>
<span class="nc" id="L2100">                      getUIOfType(splitPane.getUI(), BasicSplitPaneUI.class);</span>

<span class="nc bnc" id="L2102" title="All 2 branches missed.">            if (ui == null) {</span>
<span class="nc" id="L2103">                return;</span>
            }
<span class="nc" id="L2105">            String key = getName();</span>
<span class="nc bnc" id="L2106" title="All 2 branches missed.">            if (key == NEGATIVE_INCREMENT) {</span>
<span class="nc bnc" id="L2107" title="All 2 branches missed.">                if (ui.dividerKeyboardResize) {</span>
<span class="nc" id="L2108">                    splitPane.setDividerLocation(Math.max(</span>
                              0, ui.getDividerLocation
<span class="nc" id="L2110">                              (splitPane) - ui.getKeyboardMoveIncrement()));</span>
                }
            }
<span class="nc bnc" id="L2113" title="All 2 branches missed.">            else if (key == POSITIVE_INCREMENT) {</span>
<span class="nc bnc" id="L2114" title="All 2 branches missed.">                if (ui.dividerKeyboardResize) {</span>
<span class="nc" id="L2115">                    splitPane.setDividerLocation(</span>
<span class="nc" id="L2116">                        ui.getDividerLocation(splitPane) +</span>
<span class="nc" id="L2117">                        ui.getKeyboardMoveIncrement());</span>
                }
            }
<span class="nc bnc" id="L2120" title="All 2 branches missed.">            else if (key == SELECT_MIN) {</span>
<span class="nc bnc" id="L2121" title="All 2 branches missed.">                if (ui.dividerKeyboardResize) {</span>
<span class="nc" id="L2122">                    splitPane.setDividerLocation(0);</span>
                }
            }
<span class="nc bnc" id="L2125" title="All 2 branches missed.">            else if (key == SELECT_MAX) {</span>
<span class="nc bnc" id="L2126" title="All 2 branches missed.">                if (ui.dividerKeyboardResize) {</span>
<span class="nc" id="L2127">                    Insets   insets = splitPane.getInsets();</span>
<span class="nc bnc" id="L2128" title="All 2 branches missed.">                    int      bottomI = (insets != null) ? insets.bottom : 0;</span>
<span class="nc bnc" id="L2129" title="All 2 branches missed.">                    int      rightI = (insets != null) ? insets.right : 0;</span>

<span class="nc bnc" id="L2131" title="All 2 branches missed.">                    if (ui.orientation == JSplitPane.VERTICAL_SPLIT) {</span>
<span class="nc" id="L2132">                        splitPane.setDividerLocation(splitPane.getHeight() -</span>
                                                     bottomI);
                    }
                    else {
<span class="nc" id="L2136">                        splitPane.setDividerLocation(splitPane.getWidth() -</span>
                                                     rightI);
                    }
<span class="nc" id="L2139">                }</span>
            }
<span class="nc bnc" id="L2141" title="All 2 branches missed.">            else if (key == START_RESIZE) {</span>
<span class="nc bnc" id="L2142" title="All 2 branches missed.">                if (!ui.dividerKeyboardResize) {</span>
<span class="nc" id="L2143">                    splitPane.requestFocus();</span>
                } else {
<span class="nc" id="L2145">                    JSplitPane parentSplitPane =</span>
<span class="nc" id="L2146">                        (JSplitPane)SwingUtilities.getAncestorOfClass(</span>
                                         JSplitPane.class, splitPane);
<span class="nc bnc" id="L2148" title="All 2 branches missed.">                    if (parentSplitPane!=null) {</span>
<span class="nc" id="L2149">                        parentSplitPane.requestFocus();</span>
                    }
<span class="nc" id="L2151">                }</span>
            }
<span class="nc bnc" id="L2153" title="All 2 branches missed.">            else if (key == TOGGLE_FOCUS) {</span>
<span class="nc" id="L2154">                toggleFocus(splitPane);</span>
            }
<span class="nc bnc" id="L2156" title="All 2 branches missed.">            else if (key == FOCUS_OUT_FORWARD) {</span>
<span class="nc" id="L2157">                moveFocus(splitPane, 1);</span>
            }
<span class="nc bnc" id="L2159" title="All 2 branches missed.">            else if (key == FOCUS_OUT_BACKWARD) {</span>
<span class="nc" id="L2160">                moveFocus(splitPane, -1);</span>
            }
<span class="nc" id="L2162">        }</span>

        private void moveFocus(JSplitPane splitPane, int direction) {
<span class="nc" id="L2165">            Container rootAncestor = splitPane.getFocusCycleRootAncestor();</span>
<span class="nc" id="L2166">            FocusTraversalPolicy policy = rootAncestor.getFocusTraversalPolicy();</span>
<span class="nc bnc" id="L2167" title="All 2 branches missed.">            Component focusOn = (direction &gt; 0) ?</span>
<span class="nc" id="L2168">                policy.getComponentAfter(rootAncestor, splitPane) :</span>
<span class="nc" id="L2169">                policy.getComponentBefore(rootAncestor, splitPane);</span>
<span class="nc" id="L2170">            HashSet&lt;Component&gt; focusFrom = new HashSet&lt;Component&gt;();</span>
<span class="nc bnc" id="L2171" title="All 2 branches missed.">            if (splitPane.isAncestorOf(focusOn)) {</span>
                do {
<span class="nc" id="L2173">                    focusFrom.add(focusOn);</span>
<span class="nc" id="L2174">                    rootAncestor = focusOn.getFocusCycleRootAncestor();</span>
<span class="nc" id="L2175">                    policy = rootAncestor.getFocusTraversalPolicy();</span>
<span class="nc bnc" id="L2176" title="All 2 branches missed.">                    focusOn = (direction &gt; 0) ?</span>
<span class="nc" id="L2177">                        policy.getComponentAfter(rootAncestor, focusOn) :</span>
<span class="nc" id="L2178">                        policy.getComponentBefore(rootAncestor, focusOn);</span>
<span class="nc bnc" id="L2179" title="All 2 branches missed.">                } while (splitPane.isAncestorOf(focusOn) &amp;&amp;</span>
<span class="nc bnc" id="L2180" title="All 2 branches missed.">                         !focusFrom.contains(focusOn));</span>
            }
<span class="nc bnc" id="L2182" title="All 4 branches missed.">            if ( focusOn!=null &amp;&amp; !splitPane.isAncestorOf(focusOn) ) {</span>
<span class="nc" id="L2183">                focusOn.requestFocus();</span>
            }
<span class="nc" id="L2185">        }</span>

        private void toggleFocus(JSplitPane splitPane) {
<span class="nc" id="L2188">            Component left = splitPane.getLeftComponent();</span>
<span class="nc" id="L2189">            Component right = splitPane.getRightComponent();</span>

            KeyboardFocusManager manager =
<span class="nc" id="L2192">                KeyboardFocusManager.getCurrentKeyboardFocusManager();</span>
<span class="nc" id="L2193">            Component focus = manager.getFocusOwner();</span>
<span class="nc" id="L2194">            Component focusOn = getNextSide(splitPane, focus);</span>
<span class="nc bnc" id="L2195" title="All 2 branches missed.">            if (focusOn != null) {</span>
                // don't change the focus if the new focused component belongs
                // to the same splitpane and the same side
<span class="nc bnc" id="L2198" title="All 2 branches missed.">                if ( focus!=null &amp;&amp;</span>
<span class="nc bnc" id="L2199" title="All 2 branches missed.">                     ( (SwingUtilities.isDescendingFrom(focus, left) &amp;&amp;</span>
<span class="nc bnc" id="L2200" title="All 2 branches missed.">                        SwingUtilities.isDescendingFrom(focusOn, left)) ||</span>
<span class="nc bnc" id="L2201" title="All 2 branches missed.">                       (SwingUtilities.isDescendingFrom(focus, right) &amp;&amp;</span>
<span class="nc bnc" id="L2202" title="All 2 branches missed.">                        SwingUtilities.isDescendingFrom(focusOn, right)) ) ) {</span>
<span class="nc" id="L2203">                    return;</span>
                }
<span class="nc" id="L2205">                SwingUtilities2.compositeRequestFocus(focusOn);</span>
            }
<span class="nc" id="L2207">        }</span>

        private Component getNextSide(JSplitPane splitPane, Component focus) {
<span class="nc" id="L2210">            Component left = splitPane.getLeftComponent();</span>
<span class="nc" id="L2211">            Component right = splitPane.getRightComponent();</span>
            Component next;
<span class="nc bnc" id="L2213" title="All 6 branches missed.">            if (focus!=null &amp;&amp; SwingUtilities.isDescendingFrom(focus, left) &amp;&amp;</span>
                right!=null) {
<span class="nc" id="L2215">                next = getFirstAvailableComponent(right);</span>
<span class="nc bnc" id="L2216" title="All 2 branches missed.">                if (next != null) {</span>
<span class="nc" id="L2217">                    return next;</span>
                }
            }
<span class="nc" id="L2220">            JSplitPane parentSplitPane = (JSplitPane)SwingUtilities.getAncestorOfClass(JSplitPane.class, splitPane);</span>
<span class="nc bnc" id="L2221" title="All 2 branches missed.">            if (parentSplitPane!=null) {</span>
                // focus next side of the parent split pane
<span class="nc" id="L2223">                next = getNextSide(parentSplitPane, focus);</span>
            } else {
<span class="nc" id="L2225">                next = getFirstAvailableComponent(left);</span>
<span class="nc bnc" id="L2226" title="All 2 branches missed.">                if (next == null) {</span>
<span class="nc" id="L2227">                    next = getFirstAvailableComponent(right);</span>
                }
            }
<span class="nc" id="L2230">            return next;</span>
        }

        private Component getFirstAvailableComponent(Component c) {
<span class="nc bnc" id="L2234" title="All 4 branches missed.">            if (c!=null &amp;&amp; c instanceof JSplitPane) {</span>
<span class="nc" id="L2235">                JSplitPane sp = (JSplitPane)c;</span>
<span class="nc" id="L2236">                Component left = getFirstAvailableComponent(sp.getLeftComponent());</span>
<span class="nc bnc" id="L2237" title="All 2 branches missed.">                if (left != null) {</span>
<span class="nc" id="L2238">                    c = left;</span>
                } else {
<span class="nc" id="L2240">                    c = getFirstAvailableComponent(sp.getRightComponent());</span>
                }
            }
<span class="nc" id="L2243">            return c;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>