<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>InitialContext.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.naming</a> &gt; <span class="el_source">InitialContext.java</span></div><h1>InitialContext.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1999, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.naming;

import java.util.Hashtable;
import javax.naming.spi.NamingManager;
import com.sun.naming.internal.ResourceManager;

/**
 * This class is the starting context for performing naming operations.
 *&lt;p&gt;
 * All naming operations are relative to a context.
 * The initial context implements the Context interface and
 * provides the starting point for resolution of names.
 *&lt;p&gt;
 * &lt;a name=ENVIRONMENT&gt;&lt;/a&gt;
 * When the initial context is constructed, its environment
 * is initialized with properties defined in the environment parameter
 * passed to the constructor, and in any
 * &lt;a href=Context.html#RESOURCEFILES&gt;application resource files&lt;/a&gt;.
 * In addition, a small number of standard JNDI properties may
 * be specified as system properties or as applet parameters
 * (through the use of {@link Context#APPLET}).
 * These special properties are listed in the field detail sections of the
 * &lt;a href=Context.html#field_detail&gt;&lt;tt&gt;Context&lt;/tt&gt;&lt;/a&gt; and
 * &lt;a href=ldap/LdapContext.html#field_detail&gt;&lt;tt&gt;LdapContext&lt;/tt&gt;&lt;/a&gt;
 * interface documentation.
 *&lt;p&gt;
 * JNDI determines each property's value by merging
 * the values from the following two sources, in order:
 * &lt;ol&gt;
 * &lt;li&gt;
 * The first occurrence of the property from the constructor's
 * environment parameter and (for appropriate properties) the applet
 * parameters and system properties.
 * &lt;li&gt;
 * The application resource files (&lt;tt&gt;jndi.properties&lt;/tt&gt;).
 * &lt;/ol&gt;
 * For each property found in both of these two sources, or in
 * more than one application resource file, the property's value
 * is determined as follows.  If the property is
 * one of the standard JNDI properties that specify a list of JNDI
 * factories (see &lt;a href=Context.html#LISTPROPS&gt;&lt;tt&gt;Context&lt;/tt&gt;&lt;/a&gt;),
 * all of the values are
 * concatenated into a single colon-separated list.  For other
 * properties, only the first value found is used.
 *
 *&lt;p&gt;
 * The initial context implementation is determined at runtime.
 * The default policy uses the environment property
 * &quot;{@link Context#INITIAL_CONTEXT_FACTORY java.naming.factory.initial}&quot;,
 * which contains the class name of the initial context factory.
 * An exception to this policy is made when resolving URL strings, as described
 * below.
 *&lt;p&gt;
 * When a URL string (a &lt;tt&gt;String&lt;/tt&gt; of the form
 * &lt;em&gt;scheme_id:rest_of_name&lt;/em&gt;) is passed as a name parameter to
 * any method, a URL context factory for handling that scheme is
 * located and used to resolve the URL.  If no such factory is found,
 * the initial context specified by
 * &lt;tt&gt;&quot;java.naming.factory.initial&quot;&lt;/tt&gt; is used.  Similarly, when a
 * &lt;tt&gt;CompositeName&lt;/tt&gt; object whose first component is a URL string is
 * passed as a name parameter to any method, a URL context factory is
 * located and used to resolve the first name component.
 * See {@link NamingManager#getURLContext
 * &lt;tt&gt;NamingManager.getURLContext()&lt;/tt&gt;} for a description of how URL
 * context factories are located.
 *&lt;p&gt;
 * This default policy of locating the initial context and URL context
 * factories may be overridden
 * by calling
 * &lt;tt&gt;NamingManager.setInitialContextFactoryBuilder()&lt;/tt&gt;.
 *&lt;p&gt;
 * NoInitialContextException is thrown when an initial context cannot
 * be instantiated. This exception can be thrown during any interaction
 * with the InitialContext, not only when the InitialContext is constructed.
 * For example, the implementation of the initial context might lazily
 * retrieve the context only when actual methods are invoked on it.
 * The application should not have any dependency on when the existence
 * of an initial context is determined.
 *&lt;p&gt;
 * When the environment property &quot;java.naming.factory.initial&quot; is
 * non-null, the InitialContext constructor will attempt to create the
 * initial context specified therein. At that time, the initial context factory
 * involved might throw an exception if a problem is encountered. However,
 * it is provider implementation-dependent when it verifies and indicates
 * to the users of the initial context any environment property- or
 * connection- related problems. It can do so lazily--delaying until
 * an operation is performed on the context, or eagerly, at the time
 * the context is constructed.
 *&lt;p&gt;
 * An InitialContext instance is not synchronized against concurrent
 * access by multiple threads. Multiple threads each manipulating a
 * different InitialContext instance need not synchronize.
 * Threads that need to access a single InitialContext instance
 * concurrently should synchronize amongst themselves and provide the
 * necessary locking.
 *
 * @author Rosanna Lee
 * @author Scott Seligman
 *
 * @see Context
 * @see NamingManager#setInitialContextFactoryBuilder
 *      NamingManager.setInitialContextFactoryBuilder
 * @since JNDI 1.1 / Java 2 Platform, Standard Edition, v 1.3
 */

public class InitialContext implements Context {

    /**
     * The environment associated with this InitialContext.
     * It is initialized to null and is updated by the constructor
     * that accepts an environment or by the &lt;tt&gt;init()&lt;/tt&gt; method.
     * @see #addToEnvironment
     * @see #removeFromEnvironment
     * @see #getEnvironment
     */
<span class="fc" id="L141">    protected Hashtable&lt;Object,Object&gt; myProps = null;</span>

    /**
     * Field holding the result of calling NamingManager.getInitialContext().
     * It is set by getDefaultInitCtx() the first time getDefaultInitCtx()
     * is called. Subsequent invocations of getDefaultInitCtx() return
     * the value of defaultInitCtx.
     * @see #getDefaultInitCtx
     */
<span class="fc" id="L150">    protected Context defaultInitCtx = null;</span>

    /**
     * Field indicating whether the initial context has been obtained
     * by calling NamingManager.getInitialContext().
     * If true, its result is in &lt;code&gt;defaultInitCtx&lt;/code&gt;.
     */
<span class="fc" id="L157">    protected boolean gotDefault = false;</span>

    /**
     * Constructs an initial context with the option of not
     * initializing it.  This may be used by a constructor in
     * a subclass when the value of the environment parameter
     * is not yet known at the time the &lt;tt&gt;InitialContext&lt;/tt&gt;
     * constructor is called.  The subclass's constructor will
     * call this constructor, compute the value of the environment,
     * and then call &lt;tt&gt;init()&lt;/tt&gt; before returning.
     *
     * @param lazy
     *          true means do not initialize the initial context; false
     *          is equivalent to calling &lt;tt&gt;new InitialContext()&lt;/tt&gt;
     * @throws  NamingException if a naming exception is encountered
     *
     * @see #init(Hashtable)
     * @since 1.3
     */
<span class="fc" id="L176">    protected InitialContext(boolean lazy) throws NamingException {</span>
<span class="pc bpc" id="L177" title="1 of 2 branches missed.">        if (!lazy) {</span>
<span class="nc" id="L178">            init(null);</span>
        }
<span class="fc" id="L180">    }</span>

    /**
     * Constructs an initial context.
     * No environment properties are supplied.
     * Equivalent to &lt;tt&gt;new InitialContext(null)&lt;/tt&gt;.
     *
     * @throws  NamingException if a naming exception is encountered
     *
     * @see #InitialContext(Hashtable)
     */
<span class="fc" id="L191">    public InitialContext() throws NamingException {</span>
<span class="fc" id="L192">        init(null);</span>
<span class="fc" id="L193">    }</span>

    /**
     * Constructs an initial context using the supplied environment.
     * Environment properties are discussed in the class description.
     *
     * &lt;p&gt; This constructor will not modify &lt;tt&gt;environment&lt;/tt&gt;
     * or save a reference to it, but may save a clone.
     * Caller should not modify mutable keys and values in
     * &lt;tt&gt;environment&lt;/tt&gt; after it has been passed to the constructor.
     *
     * @param environment
     *          environment used to create the initial context.
     *          Null indicates an empty environment.
     *
     * @throws  NamingException if a naming exception is encountered
     */
    public InitialContext(Hashtable&lt;?,?&gt; environment)
        throws NamingException
<span class="fc" id="L212">    {</span>
<span class="pc bpc" id="L213" title="1 of 2 branches missed.">        if (environment != null) {</span>
<span class="fc" id="L214">            environment = (Hashtable)environment.clone();</span>
        }
<span class="fc" id="L216">        init(environment);</span>
<span class="fc" id="L217">    }</span>

    /**
     * Initializes the initial context using the supplied environment.
     * Environment properties are discussed in the class description.
     *
     * &lt;p&gt; This method will modify &lt;tt&gt;environment&lt;/tt&gt; and save
     * a reference to it.  The caller may no longer modify it.
     *
     * @param environment
     *          environment used to create the initial context.
     *          Null indicates an empty environment.
     *
     * @throws  NamingException if a naming exception is encountered
     *
     * @see #InitialContext(boolean)
     * @since 1.3
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    protected void init(Hashtable&lt;?,?&gt; environment)
        throws NamingException
    {
<span class="fc" id="L239">        myProps = (Hashtable&lt;Object,Object&gt;)</span>
<span class="fc" id="L240">                ResourceManager.getInitialEnvironment(environment);</span>

<span class="fc bfc" id="L242" title="All 2 branches covered.">        if (myProps.get(Context.INITIAL_CONTEXT_FACTORY) != null) {</span>
            // user has specified initial context factory; try to get it
<span class="fc" id="L244">            getDefaultInitCtx();</span>
        }
<span class="fc" id="L246">    }</span>

    /**
     * A static method to retrieve the named object.
     * This is a shortcut method equivalent to invoking:
     * &lt;p&gt;
     * &lt;code&gt;
     *        InitialContext ic = new InitialContext();
     *        Object obj = ic.lookup();
     * &lt;/code&gt;
     * &lt;p&gt; If &lt;tt&gt;name&lt;/tt&gt; is empty, returns a new instance of this context
     * (which represents the same naming context as this context, but its
     * environment may be modified independently and it may be accessed
     * concurrently).
     *
     * @param &lt;T&gt; the type of the returned object
     * @param name
     *          the name of the object to look up
     * @return  the object bound to &lt;tt&gt;name&lt;/tt&gt;
     * @throws  NamingException if a naming exception is encountered
     *
     * @see #doLookup(String)
     * @see #lookup(Name)
     * @since 1.6
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public static &lt;T&gt; T doLookup(Name name)
        throws NamingException {
<span class="nc" id="L274">        return (T) (new InitialContext()).lookup(name);</span>
    }

   /**
     * A static method to retrieve the named object.
     * See {@link #doLookup(Name)} for details.
     * @param &lt;T&gt; the type of the returned object
     * @param name
     *          the name of the object to look up
     * @return  the object bound to &lt;tt&gt;name&lt;/tt&gt;
     * @throws  NamingException if a naming exception is encountered
     * @since 1.6
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public static &lt;T&gt; T doLookup(String name)
        throws NamingException {
<span class="nc" id="L290">        return (T) (new InitialContext()).lookup(name);</span>
    }

    private static String getURLScheme(String str) {
<span class="fc" id="L294">        int colon_posn = str.indexOf(':');</span>
<span class="fc" id="L295">        int slash_posn = str.indexOf('/');</span>

<span class="pc bpc" id="L297" title="2 of 6 branches missed.">        if (colon_posn &gt; 0 &amp;&amp; (slash_posn == -1 || colon_posn &lt; slash_posn))</span>
<span class="fc" id="L298">            return str.substring(0, colon_posn);</span>
<span class="fc" id="L299">        return null;</span>
    }

    /**
     * Retrieves the initial context by calling
     * &lt;code&gt;NamingManager.getInitialContext()&lt;/code&gt;
     * and cache it in defaultInitCtx.
     * Set &lt;code&gt;gotDefault&lt;/code&gt; so that we know we've tried this before.
     * @return The non-null cached initial context.
     * @exception NoInitialContextException If cannot find an initial context.
     * @exception NamingException If a naming exception was encountered.
     */
    protected Context getDefaultInitCtx() throws NamingException{
<span class="fc bfc" id="L312" title="All 2 branches covered.">        if (!gotDefault) {</span>
<span class="fc" id="L313">            defaultInitCtx = NamingManager.getInitialContext(myProps);</span>
<span class="fc" id="L314">            gotDefault = true;</span>
        }
<span class="pc bpc" id="L316" title="1 of 2 branches missed.">        if (defaultInitCtx == null)</span>
<span class="nc" id="L317">            throw new NoInitialContextException();</span>

<span class="fc" id="L319">        return defaultInitCtx;</span>
    }

    /**
     * Retrieves a context for resolving the string name &lt;code&gt;name&lt;/code&gt;.
     * If &lt;code&gt;name&lt;/code&gt; name is a URL string, then attempt
     * to find a URL context for it. If none is found, or if
     * &lt;code&gt;name&lt;/code&gt; is not a URL string, then return
     * &lt;code&gt;getDefaultInitCtx()&lt;/code&gt;.
     *&lt;p&gt;
     * See getURLOrDefaultInitCtx(Name) for description
     * of how a subclass should use this method.
     * @param name The non-null name for which to get the context.
     * @return A URL context for &lt;code&gt;name&lt;/code&gt; or the cached
     *         initial context. The result cannot be null.
     * @exception NoInitialContextException If cannot find an initial context.
     * @exception NamingException In a naming exception is encountered.
     * @see javax.naming.spi.NamingManager#getURLContext
     */
    protected Context getURLOrDefaultInitCtx(String name)
        throws NamingException {
<span class="pc bpc" id="L340" title="1 of 2 branches missed.">        if (NamingManager.hasInitialContextFactoryBuilder()) {</span>
<span class="nc" id="L341">            return getDefaultInitCtx();</span>
        }
<span class="fc" id="L343">        String scheme = getURLScheme(name);</span>
<span class="fc bfc" id="L344" title="All 2 branches covered.">        if (scheme != null) {</span>
<span class="fc" id="L345">            Context ctx = NamingManager.getURLContext(scheme, myProps);</span>
<span class="pc bpc" id="L346" title="1 of 2 branches missed.">            if (ctx != null) {</span>
<span class="fc" id="L347">                return ctx;</span>
            }
        }
<span class="fc" id="L350">        return getDefaultInitCtx();</span>
    }

    /**
     * Retrieves a context for resolving &lt;code&gt;name&lt;/code&gt;.
     * If the first component of &lt;code&gt;name&lt;/code&gt; name is a URL string,
     * then attempt to find a URL context for it. If none is found, or if
     * the first component of &lt;code&gt;name&lt;/code&gt; is not a URL string,
     * then return &lt;code&gt;getDefaultInitCtx()&lt;/code&gt;.
     *&lt;p&gt;
     * When creating a subclass of InitialContext, use this method as
     * follows.
     * Define a new method that uses this method to get an initial
     * context of the desired subclass.
     * &lt;blockquote&gt;&lt;pre&gt;
     * protected XXXContext getURLOrDefaultInitXXXCtx(Name name)
     * throws NamingException {
     *  Context answer = getURLOrDefaultInitCtx(name);
     *  if (!(answer instanceof XXXContext)) {
     *    if (answer == null) {
     *      throw new NoInitialContextException();
     *    } else {
     *      throw new NotContextException(&quot;Not an XXXContext&quot;);
     *    }
     *  }
     *  return (XXXContext)answer;
     * }
     * &lt;/pre&gt;&lt;/blockquote&gt;
     * When providing implementations for the new methods in the subclass,
     * use this newly defined method to get the initial context.
     * &lt;blockquote&gt;&lt;pre&gt;
     * public Object XXXMethod1(Name name, ...) {
     *  throws NamingException {
     *    return getURLOrDefaultInitXXXCtx(name).XXXMethod1(name, ...);
     * }
     * &lt;/pre&gt;&lt;/blockquote&gt;
     *
     * @param name The non-null name for which to get the context.
     * @return A URL context for &lt;code&gt;name&lt;/code&gt; or the cached
     *         initial context. The result cannot be null.
     * @exception NoInitialContextException If cannot find an initial context.
     * @exception NamingException In a naming exception is encountered.
     *
     * @see javax.naming.spi.NamingManager#getURLContext
     */
    protected Context getURLOrDefaultInitCtx(Name name)
        throws NamingException {
<span class="nc bnc" id="L397" title="All 2 branches missed.">        if (NamingManager.hasInitialContextFactoryBuilder()) {</span>
<span class="nc" id="L398">            return getDefaultInitCtx();</span>
        }
<span class="nc bnc" id="L400" title="All 2 branches missed.">        if (name.size() &gt; 0) {</span>
<span class="nc" id="L401">            String first = name.get(0);</span>
<span class="nc" id="L402">            String scheme = getURLScheme(first);</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">            if (scheme != null) {</span>
<span class="nc" id="L404">                Context ctx = NamingManager.getURLContext(scheme, myProps);</span>
<span class="nc bnc" id="L405" title="All 2 branches missed.">                if (ctx != null) {</span>
<span class="nc" id="L406">                    return ctx;</span>
                }
            }
        }
<span class="nc" id="L410">        return getDefaultInitCtx();</span>
    }

// Context methods
// Most Javadoc is deferred to the Context interface.

    public Object lookup(String name) throws NamingException {
<span class="fc" id="L417">        return getURLOrDefaultInitCtx(name).lookup(name);</span>
    }

    public Object lookup(Name name) throws NamingException {
<span class="nc" id="L421">        return getURLOrDefaultInitCtx(name).lookup(name);</span>
    }

    public void bind(String name, Object obj) throws NamingException {
<span class="nc" id="L425">        getURLOrDefaultInitCtx(name).bind(name, obj);</span>
<span class="nc" id="L426">    }</span>

    public void bind(Name name, Object obj) throws NamingException {
<span class="nc" id="L429">        getURLOrDefaultInitCtx(name).bind(name, obj);</span>
<span class="nc" id="L430">    }</span>

    public void rebind(String name, Object obj) throws NamingException {
<span class="nc" id="L433">        getURLOrDefaultInitCtx(name).rebind(name, obj);</span>
<span class="nc" id="L434">    }</span>

    public void rebind(Name name, Object obj) throws NamingException {
<span class="nc" id="L437">        getURLOrDefaultInitCtx(name).rebind(name, obj);</span>
<span class="nc" id="L438">    }</span>

    public void unbind(String name) throws NamingException  {
<span class="nc" id="L441">        getURLOrDefaultInitCtx(name).unbind(name);</span>
<span class="nc" id="L442">    }</span>

    public void unbind(Name name) throws NamingException  {
<span class="nc" id="L445">        getURLOrDefaultInitCtx(name).unbind(name);</span>
<span class="nc" id="L446">    }</span>

    public void rename(String oldName, String newName) throws NamingException {
<span class="nc" id="L449">        getURLOrDefaultInitCtx(oldName).rename(oldName, newName);</span>
<span class="nc" id="L450">    }</span>

    public void rename(Name oldName, Name newName)
        throws NamingException
    {
<span class="nc" id="L455">        getURLOrDefaultInitCtx(oldName).rename(oldName, newName);</span>
<span class="nc" id="L456">    }</span>

    public NamingEnumeration&lt;NameClassPair&gt; list(String name)
        throws NamingException
    {
<span class="nc" id="L461">        return (getURLOrDefaultInitCtx(name).list(name));</span>
    }

    public NamingEnumeration&lt;NameClassPair&gt; list(Name name)
        throws NamingException
    {
<span class="nc" id="L467">        return (getURLOrDefaultInitCtx(name).list(name));</span>
    }

    public NamingEnumeration&lt;Binding&gt; listBindings(String name)
            throws NamingException  {
<span class="nc" id="L472">        return getURLOrDefaultInitCtx(name).listBindings(name);</span>
    }

    public NamingEnumeration&lt;Binding&gt; listBindings(Name name)
            throws NamingException  {
<span class="nc" id="L477">        return getURLOrDefaultInitCtx(name).listBindings(name);</span>
    }

    public void destroySubcontext(String name) throws NamingException  {
<span class="nc" id="L481">        getURLOrDefaultInitCtx(name).destroySubcontext(name);</span>
<span class="nc" id="L482">    }</span>

    public void destroySubcontext(Name name) throws NamingException  {
<span class="nc" id="L485">        getURLOrDefaultInitCtx(name).destroySubcontext(name);</span>
<span class="nc" id="L486">    }</span>

    public Context createSubcontext(String name) throws NamingException  {
<span class="nc" id="L489">        return getURLOrDefaultInitCtx(name).createSubcontext(name);</span>
    }

    public Context createSubcontext(Name name) throws NamingException  {
<span class="nc" id="L493">        return getURLOrDefaultInitCtx(name).createSubcontext(name);</span>
    }

    public Object lookupLink(String name) throws NamingException  {
<span class="nc" id="L497">        return getURLOrDefaultInitCtx(name).lookupLink(name);</span>
    }

    public Object lookupLink(Name name) throws NamingException {
<span class="nc" id="L501">        return getURLOrDefaultInitCtx(name).lookupLink(name);</span>
    }

    public NameParser getNameParser(String name) throws NamingException {
<span class="nc" id="L505">        return getURLOrDefaultInitCtx(name).getNameParser(name);</span>
    }

    public NameParser getNameParser(Name name) throws NamingException {
<span class="nc" id="L509">        return getURLOrDefaultInitCtx(name).getNameParser(name);</span>
    }

    /**
     * Composes the name of this context with a name relative to
     * this context.
     * Since an initial context may never be named relative
     * to any context other than itself, the value of the
     * &lt;tt&gt;prefix&lt;/tt&gt; parameter must be an empty name (&lt;tt&gt;&quot;&quot;&lt;/tt&gt;).
     */
    public String composeName(String name, String prefix)
            throws NamingException {
<span class="nc" id="L521">        return name;</span>
    }

    /**
     * Composes the name of this context with a name relative to
     * this context.
     * Since an initial context may never be named relative
     * to any context other than itself, the value of the
     * &lt;tt&gt;prefix&lt;/tt&gt; parameter must be an empty name.
     */
    public Name composeName(Name name, Name prefix)
        throws NamingException
    {
<span class="nc" id="L534">        return (Name)name.clone();</span>
    }

    public Object addToEnvironment(String propName, Object propVal)
            throws NamingException {
<span class="nc" id="L539">        myProps.put(propName, propVal);</span>
<span class="nc" id="L540">        return getDefaultInitCtx().addToEnvironment(propName, propVal);</span>
    }

    public Object removeFromEnvironment(String propName)
            throws NamingException {
<span class="nc" id="L545">        myProps.remove(propName);</span>
<span class="nc" id="L546">        return getDefaultInitCtx().removeFromEnvironment(propName);</span>
    }

    public Hashtable&lt;?,?&gt; getEnvironment() throws NamingException {
<span class="nc" id="L550">        return getDefaultInitCtx().getEnvironment();</span>
    }

    public void close() throws NamingException {
<span class="fc" id="L554">        myProps = null;</span>
<span class="pc bpc" id="L555" title="1 of 2 branches missed.">        if (defaultInitCtx != null) {</span>
<span class="fc" id="L556">            defaultInitCtx.close();</span>
<span class="fc" id="L557">            defaultInitCtx = null;</span>
        }
<span class="fc" id="L559">        gotDefault = false;</span>
<span class="fc" id="L560">    }</span>

    public String getNameInNamespace() throws NamingException {
<span class="nc" id="L563">        return getDefaultInitCtx().getNameInNamespace();</span>
    }
};
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>