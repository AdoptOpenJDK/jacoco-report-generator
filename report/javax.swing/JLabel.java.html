<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>JLabel.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">JLabel.java</span></div><h1>JLabel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2009, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing;

import java.awt.Component;
import java.awt.Font;
import java.awt.Image;
import java.awt.*;
import java.text.*;
import java.awt.geom.*;
import java.beans.Transient;

import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;
import java.io.IOException;

import javax.swing.plaf.LabelUI;
import javax.accessibility.*;
import javax.swing.text.*;
import javax.swing.text.html.*;
import javax.swing.plaf.basic.*;
import java.util.*;


/**
 * A display area for a short text string or an image,
 * or both.
 * A label does not react to input events.
 * As a result, it cannot get the keyboard focus.
 * A label can, however, display a keyboard alternative
 * as a convenience for a nearby component
 * that has a keyboard alternative but can't display it.
 * &lt;p&gt;
 * A &lt;code&gt;JLabel&lt;/code&gt; object can display
 * either text, an image, or both.
 * You can specify where in the label's display area
 * the label's contents are aligned
 * by setting the vertical and horizontal alignment.
 * By default, labels are vertically centered
 * in their display area.
 * Text-only labels are leading edge aligned, by default;
 * image-only labels are horizontally centered, by default.
 * &lt;p&gt;
 * You can also specify the position of the text
 * relative to the image.
 * By default, text is on the trailing edge of the image,
 * with the text and image vertically aligned.
 * &lt;p&gt;
 * A label's leading and trailing edge are determined from the value of its
 * {@link java.awt.ComponentOrientation} property.  At present, the default
 * ComponentOrientation setting maps the leading edge to left and the trailing
 * edge to right.
 *
 * &lt;p&gt;
 * Finally, you can use the &lt;code&gt;setIconTextGap&lt;/code&gt; method
 * to specify how many pixels
 * should appear between the text and the image.
 * The default is 4 pixels.
 * &lt;p&gt;
 * See &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/label.html&quot;&gt;How to Use Labels&lt;/a&gt;
 * in &lt;em&gt;The Java Tutorial&lt;/em&gt;
 * for further documentation.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt; Swing is not thread safe. For more
 * information see &lt;a
 * href=&quot;package-summary.html#threading&quot;&gt;Swing's Threading
 * Policy&lt;/a&gt;.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @beaninfo
 *   attribute: isContainer false
 * description: A component that displays a short string and an icon.
 *
 * @author Hans Muller
 */
@SuppressWarnings(&quot;serial&quot;)
public class JLabel extends JComponent implements SwingConstants, Accessible
{
    /**
     * @see #getUIClassID
     * @see #readObject
     */
    private static final String uiClassID = &quot;LabelUI&quot;;

<span class="nc" id="L116">    private int mnemonic = '\0';</span>
<span class="nc" id="L117">    private int mnemonicIndex = -1;</span>

<span class="nc" id="L119">    private String text = &quot;&quot;;         // &quot;&quot; rather than null, for BeanBox</span>
<span class="nc" id="L120">    private Icon defaultIcon = null;</span>
<span class="nc" id="L121">    private Icon disabledIcon = null;</span>
<span class="nc" id="L122">    private boolean disabledIconSet = false;</span>

<span class="nc" id="L124">    private int verticalAlignment = CENTER;</span>
<span class="nc" id="L125">    private int horizontalAlignment = LEADING;</span>
<span class="nc" id="L126">    private int verticalTextPosition = CENTER;</span>
<span class="nc" id="L127">    private int horizontalTextPosition = TRAILING;</span>
<span class="nc" id="L128">    private int iconTextGap = 4;</span>

<span class="nc" id="L130">    protected Component labelFor = null;</span>

    /**
     * Client property key used to determine what label is labeling the
     * component.  This is generally not used by labels, but is instead
     * used by components such as text areas that are being labeled by
     * labels.  When the labelFor property of a label is set, it will
     * automatically set the LABELED_BY_PROPERTY of the component being
     * labelled.
     *
     * @see #setLabelFor
     */
    static final String LABELED_BY_PROPERTY = &quot;labeledBy&quot;;

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with the specified
     * text, image, and horizontal alignment.
     * The label is centered vertically in its display area.
     * The text is on the trailing edge of the image.
     *
     * @param text  The text to be displayed by the label.
     * @param icon  The image to be displayed by the label.
     * @param horizontalAlignment  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     */
<span class="nc" id="L160">    public JLabel(String text, Icon icon, int horizontalAlignment) {</span>
<span class="nc" id="L161">        setText(text);</span>
<span class="nc" id="L162">        setIcon(icon);</span>
<span class="nc" id="L163">        setHorizontalAlignment(horizontalAlignment);</span>
<span class="nc" id="L164">        updateUI();</span>
<span class="nc" id="L165">        setAlignmentX(LEFT_ALIGNMENT);</span>
<span class="nc" id="L166">    }</span>

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with the specified
     * text and horizontal alignment.
     * The label is centered vertically in its display area.
     *
     * @param text  The text to be displayed by the label.
     * @param horizontalAlignment  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     */
    public JLabel(String text, int horizontalAlignment) {
<span class="nc" id="L183">        this(text, null, horizontalAlignment);</span>
<span class="nc" id="L184">    }</span>

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with the specified text.
     * The label is aligned against the leading edge of its display area,
     * and centered vertically.
     *
     * @param text  The text to be displayed by the label.
     */
    public JLabel(String text) {
<span class="nc" id="L194">        this(text, null, LEADING);</span>
<span class="nc" id="L195">    }</span>

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with the specified
     * image and horizontal alignment.
     * The label is centered vertically in its display area.
     *
     * @param image  The image to be displayed by the label.
     * @param horizontalAlignment  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     */
    public JLabel(Icon image, int horizontalAlignment) {
<span class="nc" id="L212">        this(null, image, horizontalAlignment);</span>
<span class="nc" id="L213">    }</span>

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with the specified image.
     * The label is centered vertically and horizontally
     * in its display area.
     *
     * @param image  The image to be displayed by the label.
     */
    public JLabel(Icon image) {
<span class="nc" id="L223">        this(null, image, CENTER);</span>
<span class="nc" id="L224">    }</span>

    /**
     * Creates a &lt;code&gt;JLabel&lt;/code&gt; instance with
     * no image and with an empty string for the title.
     * The label is centered vertically
     * in its display area.
     * The label's contents, once set, will be displayed on the leading edge
     * of the label's display area.
     */
    public JLabel() {
<span class="nc" id="L235">        this(&quot;&quot;, null, LEADING);</span>
<span class="nc" id="L236">    }</span>


    /**
     * Returns the L&amp;amp;F object that renders this component.
     *
     * @return LabelUI object
     */
    public LabelUI getUI() {
<span class="nc" id="L245">        return (LabelUI)ui;</span>
    }


    /**
     * Sets the L&amp;amp;F object that renders this component.
     *
     * @param ui  the LabelUI L&amp;amp;F object
     * @see UIDefaults#getUI
     * @beaninfo
     *        bound: true
     *       hidden: true
     *    attribute: visualUpdate true
     *  description: The UI object that implements the Component's LookAndFeel.
     */
    public void setUI(LabelUI ui) {
<span class="nc" id="L261">        super.setUI(ui);</span>
        // disabled icon is generated by LF so it should be unset here
<span class="nc bnc" id="L263" title="All 4 branches missed.">        if (!disabledIconSet &amp;&amp; disabledIcon != null) {</span>
<span class="nc" id="L264">            setDisabledIcon(null);</span>
        }
<span class="nc" id="L266">    }</span>


    /**
     * Resets the UI property to a value from the current look and feel.
     *
     * @see JComponent#updateUI
     */
    public void updateUI() {
<span class="nc" id="L275">        setUI((LabelUI)UIManager.getUI(this));</span>
<span class="nc" id="L276">    }</span>


    /**
     * Returns a string that specifies the name of the l&amp;amp;f class
     * that renders this component.
     *
     * @return String &quot;LabelUI&quot;
     *
     * @see JComponent#getUIClassID
     * @see UIDefaults#getUI
     */
    public String getUIClassID() {
<span class="nc" id="L289">        return uiClassID;</span>
    }


    /**
     * Returns the text string that the label displays.
     *
     * @return a String
     * @see #setText
     */
    public String getText() {
<span class="nc" id="L300">        return text;</span>
    }


    /**
     * Defines the single line of text this component will display.  If
     * the value of text is null or empty string, nothing is displayed.
     * &lt;p&gt;
     * The default value of this property is null.
     * &lt;p&gt;
     * This is a JavaBeans bound property.
     *
     * @see #setVerticalTextPosition
     * @see #setHorizontalTextPosition
     * @see #setIcon
     * @beaninfo
     *    preferred: true
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Defines the single line of text this component will display.
     */
    public void setText(String text) {

<span class="nc" id="L323">        String oldAccessibleName = null;</span>
<span class="nc bnc" id="L324" title="All 2 branches missed.">        if (accessibleContext != null) {</span>
<span class="nc" id="L325">            oldAccessibleName = accessibleContext.getAccessibleName();</span>
        }

<span class="nc" id="L328">        String oldValue = this.text;</span>
<span class="nc" id="L329">        this.text = text;</span>
<span class="nc" id="L330">        firePropertyChange(&quot;text&quot;, oldValue, text);</span>

<span class="nc" id="L332">        setDisplayedMnemonicIndex(</span>
<span class="nc" id="L333">                      SwingUtilities.findDisplayedMnemonicIndex(</span>
<span class="nc" id="L334">                                          text, getDisplayedMnemonic()));</span>

<span class="nc bnc" id="L336" title="All 2 branches missed.">        if ((accessibleContext != null)</span>
<span class="nc bnc" id="L337" title="All 2 branches missed.">            &amp;&amp; (accessibleContext.getAccessibleName() != oldAccessibleName)) {</span>
<span class="nc" id="L338">                accessibleContext.firePropertyChange(</span>
                        AccessibleContext.ACCESSIBLE_VISIBLE_DATA_PROPERTY,
                        oldAccessibleName,
<span class="nc" id="L341">                        accessibleContext.getAccessibleName());</span>
        }
<span class="nc bnc" id="L343" title="All 6 branches missed.">        if (text == null || oldValue == null || !text.equals(oldValue)) {</span>
<span class="nc" id="L344">            revalidate();</span>
<span class="nc" id="L345">            repaint();</span>
        }
<span class="nc" id="L347">    }</span>


    /**
     * Returns the graphic image (glyph, icon) that the label displays.
     *
     * @return an Icon
     * @see #setIcon
     */
    public Icon getIcon() {
<span class="nc" id="L357">        return defaultIcon;</span>
    }

    /**
     * Defines the icon this component will display.  If
     * the value of icon is null, nothing is displayed.
     * &lt;p&gt;
     * The default value of this property is null.
     * &lt;p&gt;
     * This is a JavaBeans bound property.
     *
     * @see #setVerticalTextPosition
     * @see #setHorizontalTextPosition
     * @see #getIcon
     * @beaninfo
     *    preferred: true
     *        bound: true
     *    attribute: visualUpdate true
     *  description: The icon this component will display.
     */
    public void setIcon(Icon icon) {
<span class="nc" id="L378">        Icon oldValue = defaultIcon;</span>
<span class="nc" id="L379">        defaultIcon = icon;</span>

        /* If the default icon has really changed and we had
         * generated the disabled icon for this component
         * (in other words, setDisabledIcon() was never called), then
         * clear the disabledIcon field.
         */
<span class="nc bnc" id="L386" title="All 4 branches missed.">        if ((defaultIcon != oldValue) &amp;&amp; !disabledIconSet) {</span>
<span class="nc" id="L387">            disabledIcon = null;</span>
        }

<span class="nc" id="L390">        firePropertyChange(&quot;icon&quot;, oldValue, defaultIcon);</span>

<span class="nc bnc" id="L392" title="All 4 branches missed.">        if ((accessibleContext != null) &amp;&amp; (oldValue != defaultIcon)) {</span>
<span class="nc" id="L393">                accessibleContext.firePropertyChange(</span>
                        AccessibleContext.ACCESSIBLE_VISIBLE_DATA_PROPERTY,
                        oldValue, defaultIcon);
        }

        /* If the default icon has changed and the new one is
         * a different size, then revalidate.   Repaint if the
         * default icon has changed.
         */
<span class="nc bnc" id="L402" title="All 2 branches missed.">        if (defaultIcon != oldValue) {</span>
<span class="nc bnc" id="L403" title="All 4 branches missed.">            if ((defaultIcon == null) ||</span>
                (oldValue == null) ||
<span class="nc bnc" id="L405" title="All 2 branches missed.">                (defaultIcon.getIconWidth() != oldValue.getIconWidth()) ||</span>
<span class="nc bnc" id="L406" title="All 2 branches missed.">                (defaultIcon.getIconHeight() != oldValue.getIconHeight())) {</span>
<span class="nc" id="L407">                revalidate();</span>
            }
<span class="nc" id="L409">            repaint();</span>
        }
<span class="nc" id="L411">    }</span>


    /**
     * Returns the icon used by the label when it's disabled.
     * If no disabled icon has been set this will forward the call to
     * the look and feel to construct an appropriate disabled Icon.
     * &lt;p&gt;
     * Some look and feels might not render the disabled Icon, in which
     * case they will ignore this.
     *
     * @return the &lt;code&gt;disabledIcon&lt;/code&gt; property
     * @see #setDisabledIcon
     * @see javax.swing.LookAndFeel#getDisabledIcon
     * @see ImageIcon
     */
    @Transient
    public Icon getDisabledIcon() {
<span class="nc bnc" id="L429" title="All 6 branches missed.">        if (!disabledIconSet &amp;&amp; disabledIcon == null &amp;&amp; defaultIcon != null) {</span>
<span class="nc" id="L430">            disabledIcon = UIManager.getLookAndFeel().getDisabledIcon(this, defaultIcon);</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">            if (disabledIcon != null) {</span>
<span class="nc" id="L432">                firePropertyChange(&quot;disabledIcon&quot;, null, disabledIcon);</span>
            }
        }
<span class="nc" id="L435">        return disabledIcon;</span>
    }


    /**
     * Set the icon to be displayed if this JLabel is &quot;disabled&quot;
     * (JLabel.setEnabled(false)).
     * &lt;p&gt;
     * The default value of this property is null.
     *
     * @param disabledIcon the Icon to display when the component is disabled
     * @see #getDisabledIcon
     * @see #setEnabled
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: The icon to display if the label is disabled.
     */
    public void setDisabledIcon(Icon disabledIcon) {
<span class="nc" id="L454">        Icon oldValue = this.disabledIcon;</span>
<span class="nc" id="L455">        this.disabledIcon = disabledIcon;</span>
<span class="nc bnc" id="L456" title="All 2 branches missed.">        disabledIconSet = (disabledIcon != null);</span>
<span class="nc" id="L457">        firePropertyChange(&quot;disabledIcon&quot;, oldValue, disabledIcon);</span>
<span class="nc bnc" id="L458" title="All 2 branches missed.">        if (disabledIcon != oldValue) {</span>
<span class="nc bnc" id="L459" title="All 4 branches missed.">            if (disabledIcon == null || oldValue == null ||</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">                disabledIcon.getIconWidth() != oldValue.getIconWidth() ||</span>
<span class="nc bnc" id="L461" title="All 2 branches missed.">                disabledIcon.getIconHeight() != oldValue.getIconHeight()) {</span>
<span class="nc" id="L462">                revalidate();</span>
            }
<span class="nc bnc" id="L464" title="All 2 branches missed.">            if (!isEnabled()) {</span>
<span class="nc" id="L465">                repaint();</span>
            }
        }
<span class="nc" id="L468">    }</span>


    /**
     * Specify a keycode that indicates a mnemonic key.
     * This property is used when the label is part of a larger component.
     * If the labelFor property of the label is not null, the label will
     * call the requestFocus method of the component specified by the
     * labelFor property when the mnemonic is activated.
     *
     * @see #getLabelFor
     * @see #setLabelFor
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: The mnemonic keycode.
     */
    public void setDisplayedMnemonic(int key) {
<span class="nc" id="L486">        int oldKey = mnemonic;</span>
<span class="nc" id="L487">        mnemonic = key;</span>
<span class="nc" id="L488">        firePropertyChange(&quot;displayedMnemonic&quot;, oldKey, mnemonic);</span>

<span class="nc" id="L490">        setDisplayedMnemonicIndex(</span>
<span class="nc" id="L491">            SwingUtilities.findDisplayedMnemonicIndex(getText(), mnemonic));</span>

<span class="nc bnc" id="L493" title="All 2 branches missed.">        if (key != oldKey) {</span>
<span class="nc" id="L494">            revalidate();</span>
<span class="nc" id="L495">            repaint();</span>
        }
<span class="nc" id="L497">    }</span>


    /**
     * Specifies the displayedMnemonic as a char value.
     *
     * @param aChar  a char specifying the mnemonic to display
     * @see #setDisplayedMnemonic(int)
     */
    public void setDisplayedMnemonic(char aChar) {
<span class="nc" id="L507">        int vk = java.awt.event.KeyEvent.getExtendedKeyCodeForChar(aChar);</span>
<span class="nc bnc" id="L508" title="All 2 branches missed.">        if (vk != java.awt.event.KeyEvent.VK_UNDEFINED) {</span>
<span class="nc" id="L509">            setDisplayedMnemonic(vk);</span>
        }
<span class="nc" id="L511">    }</span>


    /**
     * Return the keycode that indicates a mnemonic key.
     * This property is used when the label is part of a larger component.
     * If the labelFor property of the label is not null, the label will
     * call the requestFocus method of the component specified by the
     * labelFor property when the mnemonic is activated.
     *
     * @return int value for the mnemonic key
     *
     * @see #getLabelFor
     * @see #setLabelFor
     */
    public int getDisplayedMnemonic() {
<span class="nc" id="L527">        return mnemonic;</span>
    }

    /**
     * Provides a hint to the look and feel as to which character in the
     * text should be decorated to represent the mnemonic. Not all look and
     * feels may support this. A value of -1 indicates either there is no
     * mnemonic, the mnemonic character is not contained in the string, or
     * the developer does not wish the mnemonic to be displayed.
     * &lt;p&gt;
     * The value of this is updated as the properties relating to the
     * mnemonic change (such as the mnemonic itself, the text...).
     * You should only ever have to call this if
     * you do not wish the default character to be underlined. For example, if
     * the text was 'Save As', with a mnemonic of 'a', and you wanted the 'A'
     * to be decorated, as 'Save &lt;u&gt;A&lt;/u&gt;s', you would have to invoke
     * &lt;code&gt;setDisplayedMnemonicIndex(5)&lt;/code&gt; after invoking
     * &lt;code&gt;setDisplayedMnemonic(KeyEvent.VK_A)&lt;/code&gt;.
     *
     * @since 1.4
     * @param index Index into the String to underline
     * @exception IllegalArgumentException will be thrown if &lt;code&gt;index&lt;/code&gt;
     *            is &amp;gt;= length of the text, or &amp;lt; -1
     *
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: the index into the String to draw the keyboard character
     *               mnemonic at
     */
    public void setDisplayedMnemonicIndex(int index)
                                             throws IllegalArgumentException {
<span class="nc" id="L559">        int oldValue = mnemonicIndex;</span>
<span class="nc bnc" id="L560" title="All 2 branches missed.">        if (index == -1) {</span>
<span class="nc" id="L561">            mnemonicIndex = -1;</span>
        } else {
<span class="nc" id="L563">            String text = getText();</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">            int textLength = (text == null) ? 0 : text.length();</span>
<span class="nc bnc" id="L565" title="All 4 branches missed.">            if (index &lt; -1 || index &gt;= textLength) {  // index out of range</span>
<span class="nc" id="L566">                throw new IllegalArgumentException(&quot;index == &quot; + index);</span>
            }
        }
<span class="nc" id="L569">        mnemonicIndex = index;</span>
<span class="nc" id="L570">        firePropertyChange(&quot;displayedMnemonicIndex&quot;, oldValue, index);</span>
<span class="nc bnc" id="L571" title="All 2 branches missed.">        if (index != oldValue) {</span>
<span class="nc" id="L572">            revalidate();</span>
<span class="nc" id="L573">            repaint();</span>
        }
<span class="nc" id="L575">    }</span>

    /**
     * Returns the character, as an index, that the look and feel should
     * provide decoration for as representing the mnemonic character.
     *
     * @since 1.4
     * @return index representing mnemonic character
     * @see #setDisplayedMnemonicIndex
     */
    public int getDisplayedMnemonicIndex() {
<span class="nc" id="L586">        return mnemonicIndex;</span>
    }

    /**
     * Verify that key is a legal value for the horizontalAlignment properties.
     *
     * @param key the property value to check
     * @param message the IllegalArgumentException detail message
     * @exception IllegalArgumentException if key isn't LEFT, CENTER, RIGHT,
     * LEADING or TRAILING.
     * @see #setHorizontalTextPosition
     * @see #setHorizontalAlignment
     */
    protected int checkHorizontalKey(int key, String message) {
<span class="nc bnc" id="L600" title="All 10 branches missed.">        if ((key == LEFT) ||</span>
            (key == CENTER) ||
            (key == RIGHT) ||
            (key == LEADING) ||
            (key == TRAILING)) {
<span class="nc" id="L605">            return key;</span>
        }
        else {
<span class="nc" id="L608">            throw new IllegalArgumentException(message);</span>
        }
    }


    /**
     * Verify that key is a legal value for the
     * verticalAlignment or verticalTextPosition properties.
     *
     * @param key the property value to check
     * @param message the IllegalArgumentException detail message
     * @exception IllegalArgumentException if key isn't TOP, CENTER, or BOTTOM.
     * @see #setVerticalAlignment
     * @see #setVerticalTextPosition
     */
    protected int checkVerticalKey(int key, String message) {
<span class="nc bnc" id="L624" title="All 6 branches missed.">        if ((key == TOP) || (key == CENTER) || (key == BOTTOM)) {</span>
<span class="nc" id="L625">            return key;</span>
        }
        else {
<span class="nc" id="L628">            throw new IllegalArgumentException(message);</span>
        }
    }


    /**
     * Returns the amount of space between the text and the icon
     * displayed in this label.
     *
     * @return an int equal to the number of pixels between the text
     *         and the icon.
     * @see #setIconTextGap
     */
    public int getIconTextGap() {
<span class="nc" id="L642">        return iconTextGap;</span>
    }


    /**
     * If both the icon and text properties are set, this property
     * defines the space between them.
     * &lt;p&gt;
     * The default value of this property is 4 pixels.
     * &lt;p&gt;
     * This is a JavaBeans bound property.
     *
     * @see #getIconTextGap
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: If both the icon and text properties are set, this
     *               property defines the space between them.
     */
    public void setIconTextGap(int iconTextGap) {
<span class="nc" id="L662">        int oldValue = this.iconTextGap;</span>
<span class="nc" id="L663">        this.iconTextGap = iconTextGap;</span>
<span class="nc" id="L664">        firePropertyChange(&quot;iconTextGap&quot;, oldValue, iconTextGap);</span>
<span class="nc bnc" id="L665" title="All 2 branches missed.">        if (iconTextGap != oldValue) {</span>
<span class="nc" id="L666">            revalidate();</span>
<span class="nc" id="L667">            repaint();</span>
        }
<span class="nc" id="L669">    }</span>



    /**
     * Returns the alignment of the label's contents along the Y axis.
     *
     * @return   The value of the verticalAlignment property, one of the
     *           following constants defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;TOP&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;, or
     *           &lt;code&gt;BOTTOM&lt;/code&gt;.
     *
     * @see SwingConstants
     * @see #setVerticalAlignment
     */
    public int getVerticalAlignment() {
<span class="nc" id="L686">        return verticalAlignment;</span>
    }


    /**
     * Sets the alignment of the label's contents along the Y axis.
     * &lt;p&gt;
     * The default value of this property is CENTER.
     *
     * @param alignment One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;TOP&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt; (the default), or
     *           &lt;code&gt;BOTTOM&lt;/code&gt;.
     *
     * @see SwingConstants
     * @see #getVerticalAlignment
     * @beaninfo
     *        bound: true
     *         enum: TOP    SwingConstants.TOP
     *               CENTER SwingConstants.CENTER
     *               BOTTOM SwingConstants.BOTTOM
     *    attribute: visualUpdate true
     *  description: The alignment of the label's contents along the Y axis.
     */
    public void setVerticalAlignment(int alignment) {
<span class="nc bnc" id="L712" title="All 2 branches missed.">        if (alignment == verticalAlignment) return;</span>
<span class="nc" id="L713">        int oldValue = verticalAlignment;</span>
<span class="nc" id="L714">        verticalAlignment = checkVerticalKey(alignment, &quot;verticalAlignment&quot;);</span>
<span class="nc" id="L715">        firePropertyChange(&quot;verticalAlignment&quot;, oldValue, verticalAlignment);</span>
<span class="nc" id="L716">        repaint();</span>
<span class="nc" id="L717">    }</span>


    /**
     * Returns the alignment of the label's contents along the X axis.
     *
     * @return   The value of the horizontalAlignment property, one of the
     *           following constants defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     *
     * @see #setHorizontalAlignment
     * @see SwingConstants
     */
    public int getHorizontalAlignment() {
<span class="nc" id="L735">        return horizontalAlignment;</span>
    }

    /**
     * Sets the alignment of the label's contents along the X axis.
     * &lt;p&gt;
     * This is a JavaBeans bound property.
     *
     * @param alignment  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt; (the default for image-only labels),
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; (the default for text-only labels) or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     *
     * @see SwingConstants
     * @see #getHorizontalAlignment
     * @beaninfo
     *        bound: true
     *         enum: LEFT     SwingConstants.LEFT
     *               CENTER   SwingConstants.CENTER
     *               RIGHT    SwingConstants.RIGHT
     *               LEADING  SwingConstants.LEADING
     *               TRAILING SwingConstants.TRAILING
     *    attribute: visualUpdate true
     *  description: The alignment of the label's content along the X axis.
     */
    public void setHorizontalAlignment(int alignment) {
<span class="nc bnc" id="L764" title="All 2 branches missed.">        if (alignment == horizontalAlignment) return;</span>
<span class="nc" id="L765">        int oldValue = horizontalAlignment;</span>
<span class="nc" id="L766">        horizontalAlignment = checkHorizontalKey(alignment,</span>
                                                 &quot;horizontalAlignment&quot;);
<span class="nc" id="L768">        firePropertyChange(&quot;horizontalAlignment&quot;,</span>
                           oldValue, horizontalAlignment);
<span class="nc" id="L770">        repaint();</span>
<span class="nc" id="L771">    }</span>


    /**
     * Returns the vertical position of the label's text,
     * relative to its image.
     *
     * @return   One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;TOP&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;, or
     *           &lt;code&gt;BOTTOM&lt;/code&gt;.
     *
     * @see #setVerticalTextPosition
     * @see SwingConstants
     */
    public int getVerticalTextPosition() {
<span class="nc" id="L788">        return verticalTextPosition;</span>
    }


    /**
     * Sets the vertical position of the label's text,
     * relative to its image.
     * &lt;p&gt;
     * The default value of this property is CENTER.
     * &lt;p&gt;
     * This is a JavaBeans bound property.
     *
     * @param textPosition  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;TOP&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt; (the default), or
     *           &lt;code&gt;BOTTOM&lt;/code&gt;.
     *
     * @see SwingConstants
     * @see #getVerticalTextPosition
     * @beaninfo
     *        bound: true
     *         enum: TOP    SwingConstants.TOP
     *               CENTER SwingConstants.CENTER
     *               BOTTOM SwingConstants.BOTTOM
     *       expert: true
     *    attribute: visualUpdate true
     *  description: The vertical position of the text relative to it's image.
     */
    public void setVerticalTextPosition(int textPosition) {
<span class="nc bnc" id="L818" title="All 2 branches missed.">        if (textPosition == verticalTextPosition) return;</span>
<span class="nc" id="L819">        int old = verticalTextPosition;</span>
<span class="nc" id="L820">        verticalTextPosition = checkVerticalKey(textPosition,</span>
                                                &quot;verticalTextPosition&quot;);
<span class="nc" id="L822">        firePropertyChange(&quot;verticalTextPosition&quot;, old, verticalTextPosition);</span>
<span class="nc" id="L823">        revalidate();</span>
<span class="nc" id="L824">        repaint();</span>
<span class="nc" id="L825">    }</span>


    /**
     * Returns the horizontal position of the label's text,
     * relative to its image.
     *
     * @return   One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt; or
     *           &lt;code&gt;TRAILING&lt;/code&gt;.
     *
     * @see SwingConstants
     */
    public int getHorizontalTextPosition() {
<span class="nc" id="L843">        return horizontalTextPosition;</span>
    }


    /**
     * Sets the horizontal position of the label's text,
     * relative to its image.
     *
     * @param textPosition  One of the following constants
     *           defined in &lt;code&gt;SwingConstants&lt;/code&gt;:
     *           &lt;code&gt;LEFT&lt;/code&gt;,
     *           &lt;code&gt;CENTER&lt;/code&gt;,
     *           &lt;code&gt;RIGHT&lt;/code&gt;,
     *           &lt;code&gt;LEADING&lt;/code&gt;, or
     *           &lt;code&gt;TRAILING&lt;/code&gt; (the default).
     * @exception IllegalArgumentException
     *
     * @see SwingConstants
     * @beaninfo
     *       expert: true
     *        bound: true
     *         enum: LEFT     SwingConstants.LEFT
     *               CENTER   SwingConstants.CENTER
     *               RIGHT    SwingConstants.RIGHT
     *               LEADING  SwingConstants.LEADING
     *               TRAILING SwingConstants.TRAILING
     *    attribute: visualUpdate true
     *  description: The horizontal position of the label's text,
     *               relative to its image.
     */
    public void setHorizontalTextPosition(int textPosition) {
<span class="nc" id="L874">        int old = horizontalTextPosition;</span>
<span class="nc" id="L875">        this.horizontalTextPosition = checkHorizontalKey(textPosition,</span>
                                                &quot;horizontalTextPosition&quot;);
<span class="nc" id="L877">        firePropertyChange(&quot;horizontalTextPosition&quot;,</span>
                           old, horizontalTextPosition);
<span class="nc" id="L879">        revalidate();</span>
<span class="nc" id="L880">        repaint();</span>
<span class="nc" id="L881">    }</span>


    /**
     * This is overridden to return false if the current Icon's Image is
     * not equal to the passed in Image &lt;code&gt;img&lt;/code&gt;.
     *
     * @see     java.awt.image.ImageObserver
     * @see     java.awt.Component#imageUpdate(java.awt.Image, int, int, int, int, int)
     */
    public boolean imageUpdate(Image img, int infoflags,
                               int x, int y, int w, int h) {
        // Don't use getDisabledIcon, will trigger creation of icon if icon
        // not set.
<span class="nc bnc" id="L895" title="All 2 branches missed.">        if (!isShowing() ||</span>
<span class="nc bnc" id="L896" title="All 2 branches missed.">            !SwingUtilities.doesIconReferenceImage(getIcon(), img) &amp;&amp;</span>
<span class="nc bnc" id="L897" title="All 2 branches missed.">            !SwingUtilities.doesIconReferenceImage(disabledIcon, img)) {</span>

<span class="nc" id="L899">            return false;</span>
        }
<span class="nc" id="L901">        return super.imageUpdate(img, infoflags, x, y, w, h);</span>
    }


    /**
     * See readObject() and writeObject() in JComponent for more
     * information about serialization in Swing.
     */
    private void writeObject(ObjectOutputStream s) throws IOException {
<span class="nc" id="L910">        s.defaultWriteObject();</span>
<span class="nc bnc" id="L911" title="All 2 branches missed.">        if (getUIClassID().equals(uiClassID)) {</span>
<span class="nc" id="L912">            byte count = JComponent.getWriteObjCounter(this);</span>
<span class="nc" id="L913">            JComponent.setWriteObjCounter(this, --count);</span>
<span class="nc bnc" id="L914" title="All 4 branches missed.">            if (count == 0 &amp;&amp; ui != null) {</span>
<span class="nc" id="L915">                ui.installUI(this);</span>
            }
        }
<span class="nc" id="L918">    }</span>


    /**
     * Returns a string representation of this JLabel. This method
     * is intended to be used only for debugging purposes, and the
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not
     * be &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  a string representation of this JLabel.
     */
    protected String paramString() {
<span class="nc bnc" id="L931" title="All 2 branches missed.">        String textString = (text != null ?</span>
                             text : &quot;&quot;);
<span class="nc bnc" id="L933" title="All 4 branches missed.">        String defaultIconString = ((defaultIcon != null)</span>
                                    &amp;&amp; (defaultIcon != this)  ?
<span class="nc" id="L935">                                    defaultIcon.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L936" title="All 4 branches missed.">        String disabledIconString = ((disabledIcon != null)</span>
                                     &amp;&amp; (disabledIcon != this) ?
<span class="nc" id="L938">                                     disabledIcon.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L939" title="All 2 branches missed.">        String labelForString = (labelFor  != null ?</span>
<span class="nc" id="L940">                                 labelFor.toString() : &quot;&quot;);</span>
        String verticalAlignmentString;
<span class="nc bnc" id="L942" title="All 2 branches missed.">        if (verticalAlignment == TOP) {</span>
<span class="nc" id="L943">            verticalAlignmentString = &quot;TOP&quot;;</span>
<span class="nc bnc" id="L944" title="All 2 branches missed.">        } else if (verticalAlignment == CENTER) {</span>
<span class="nc" id="L945">            verticalAlignmentString = &quot;CENTER&quot;;</span>
<span class="nc bnc" id="L946" title="All 2 branches missed.">        } else if (verticalAlignment == BOTTOM) {</span>
<span class="nc" id="L947">            verticalAlignmentString = &quot;BOTTOM&quot;;</span>
<span class="nc" id="L948">        } else verticalAlignmentString = &quot;&quot;;</span>
        String horizontalAlignmentString;
<span class="nc bnc" id="L950" title="All 2 branches missed.">        if (horizontalAlignment == LEFT) {</span>
<span class="nc" id="L951">            horizontalAlignmentString = &quot;LEFT&quot;;</span>
<span class="nc bnc" id="L952" title="All 2 branches missed.">        } else if (horizontalAlignment == CENTER) {</span>
<span class="nc" id="L953">            horizontalAlignmentString = &quot;CENTER&quot;;</span>
<span class="nc bnc" id="L954" title="All 2 branches missed.">        } else if (horizontalAlignment == RIGHT) {</span>
<span class="nc" id="L955">            horizontalAlignmentString = &quot;RIGHT&quot;;</span>
<span class="nc bnc" id="L956" title="All 2 branches missed.">        } else if (horizontalAlignment == LEADING) {</span>
<span class="nc" id="L957">            horizontalAlignmentString = &quot;LEADING&quot;;</span>
<span class="nc bnc" id="L958" title="All 2 branches missed.">        } else if (horizontalAlignment == TRAILING) {</span>
<span class="nc" id="L959">            horizontalAlignmentString = &quot;TRAILING&quot;;</span>
<span class="nc" id="L960">        } else horizontalAlignmentString = &quot;&quot;;</span>
        String verticalTextPositionString;
<span class="nc bnc" id="L962" title="All 2 branches missed.">        if (verticalTextPosition == TOP) {</span>
<span class="nc" id="L963">            verticalTextPositionString = &quot;TOP&quot;;</span>
<span class="nc bnc" id="L964" title="All 2 branches missed.">        } else if (verticalTextPosition == CENTER) {</span>
<span class="nc" id="L965">            verticalTextPositionString = &quot;CENTER&quot;;</span>
<span class="nc bnc" id="L966" title="All 2 branches missed.">        } else if (verticalTextPosition == BOTTOM) {</span>
<span class="nc" id="L967">            verticalTextPositionString = &quot;BOTTOM&quot;;</span>
<span class="nc" id="L968">        } else verticalTextPositionString = &quot;&quot;;</span>
        String horizontalTextPositionString;
<span class="nc bnc" id="L970" title="All 2 branches missed.">        if (horizontalTextPosition == LEFT) {</span>
<span class="nc" id="L971">            horizontalTextPositionString = &quot;LEFT&quot;;</span>
<span class="nc bnc" id="L972" title="All 2 branches missed.">        } else if (horizontalTextPosition == CENTER) {</span>
<span class="nc" id="L973">            horizontalTextPositionString = &quot;CENTER&quot;;</span>
<span class="nc bnc" id="L974" title="All 2 branches missed.">        } else if (horizontalTextPosition == RIGHT) {</span>
<span class="nc" id="L975">            horizontalTextPositionString = &quot;RIGHT&quot;;</span>
<span class="nc bnc" id="L976" title="All 2 branches missed.">        } else if (horizontalTextPosition == LEADING) {</span>
<span class="nc" id="L977">            horizontalTextPositionString = &quot;LEADING&quot;;</span>
<span class="nc bnc" id="L978" title="All 2 branches missed.">        } else if (horizontalTextPosition == TRAILING) {</span>
<span class="nc" id="L979">            horizontalTextPositionString = &quot;TRAILING&quot;;</span>
<span class="nc" id="L980">        } else horizontalTextPositionString = &quot;&quot;;</span>

<span class="nc" id="L982">        return super.paramString() +</span>
        &quot;,defaultIcon=&quot; + defaultIconString +
        &quot;,disabledIcon=&quot; + disabledIconString +
        &quot;,horizontalAlignment=&quot; + horizontalAlignmentString +
        &quot;,horizontalTextPosition=&quot; + horizontalTextPositionString +
        &quot;,iconTextGap=&quot; + iconTextGap +
        &quot;,labelFor=&quot; + labelForString +
        &quot;,text=&quot; + textString +
        &quot;,verticalAlignment=&quot; + verticalAlignmentString +
        &quot;,verticalTextPosition=&quot; + verticalTextPositionString;
    }

    /**
     * --- Accessibility Support ---
     */

    /**
     * Get the component this is labelling.
     *
     * @return the Component this is labelling.  Can be null if this
     * does not label a Component.  If the displayedMnemonic
     * property is set and the labelFor property is also set, the label
     * will call the requestFocus method of the component specified by the
     * labelFor property when the mnemonic is activated.
     *
     * @see #getDisplayedMnemonic
     * @see #setDisplayedMnemonic
     */
    public Component getLabelFor() {
<span class="nc" id="L1011">        return labelFor;</span>
    }

    /**
     * Set the component this is labelling.  Can be null if this does not
     * label a Component.  If the displayedMnemonic property is set
     * and the labelFor property is also set, the label will
     * call the requestFocus method of the component specified by the
     * labelFor property when the mnemonic is activated.
     *
     * @param c  the Component this label is for, or null if the label is
     *           not the label for a component
     *
     * @see #getDisplayedMnemonic
     * @see #setDisplayedMnemonic
     *
     * @beaninfo
     *        bound: true
     *  description: The component this is labelling.
     */
    public void setLabelFor(Component c) {
<span class="nc" id="L1032">        Component oldC = labelFor;</span>
<span class="nc" id="L1033">        labelFor = c;</span>
<span class="nc" id="L1034">        firePropertyChange(&quot;labelFor&quot;, oldC, c);</span>

<span class="nc bnc" id="L1036" title="All 2 branches missed.">        if (oldC instanceof JComponent) {</span>
<span class="nc" id="L1037">            ((JComponent)oldC).putClientProperty(LABELED_BY_PROPERTY, null);</span>
        }
<span class="nc bnc" id="L1039" title="All 2 branches missed.">        if (c instanceof JComponent) {</span>
<span class="nc" id="L1040">            ((JComponent)c).putClientProperty(LABELED_BY_PROPERTY, this);</span>
        }
<span class="nc" id="L1042">    }</span>

    /**
     * Get the AccessibleContext of this object
     *
     * @return the AccessibleContext of this object
     * @beaninfo
     *       expert: true
     *  description: The AccessibleContext associated with this Label.
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L1053" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L1054">            accessibleContext = new AccessibleJLabel();</span>
        }
<span class="nc" id="L1056">        return accessibleContext;</span>
    }

    /**
     * The class used to obtain the accessible role for this object.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
    @SuppressWarnings(&quot;serial&quot;)
<span class="nc" id="L1072">    protected class AccessibleJLabel extends AccessibleJComponent</span>
        implements AccessibleText, AccessibleExtendedComponent {

        /**
         * Get the accessible name of this object.
         *
         * @return the localized name of the object -- can be null if this
         * object does not have a name
         * @see AccessibleContext#setAccessibleName
         */
        public String getAccessibleName() {
<span class="nc" id="L1083">            String name = accessibleName;</span>

<span class="nc bnc" id="L1085" title="All 2 branches missed.">            if (name == null) {</span>
<span class="nc" id="L1086">                name = (String)getClientProperty(AccessibleContext.ACCESSIBLE_NAME_PROPERTY);</span>
            }
<span class="nc bnc" id="L1088" title="All 2 branches missed.">            if (name == null) {</span>
<span class="nc" id="L1089">                name = JLabel.this.getText();</span>
            }
<span class="nc bnc" id="L1091" title="All 2 branches missed.">            if (name == null) {</span>
<span class="nc" id="L1092">                name = super.getAccessibleName();</span>
            }
<span class="nc" id="L1094">            return name;</span>
        }

        /**
         * Get the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the
         * object
         * @see AccessibleRole
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc" id="L1105">            return AccessibleRole.LABEL;</span>
        }

        /**
         * Get the AccessibleIcons associated with this object if one
         * or more exist.  Otherwise return null.
         * @since 1.3
         */
        public AccessibleIcon [] getAccessibleIcon() {
<span class="nc" id="L1114">            Icon icon = getIcon();</span>
<span class="nc bnc" id="L1115" title="All 2 branches missed.">            if (icon instanceof Accessible) {</span>
<span class="nc" id="L1116">                AccessibleContext ac =</span>
<span class="nc" id="L1117">                ((Accessible)icon).getAccessibleContext();</span>
<span class="nc bnc" id="L1118" title="All 4 branches missed.">                if (ac != null &amp;&amp; ac instanceof AccessibleIcon) {</span>
<span class="nc" id="L1119">                    return new AccessibleIcon[] { (AccessibleIcon)ac };</span>
                }
            }
<span class="nc" id="L1122">            return null;</span>
        }

        /**
         * Get the AccessibleRelationSet associated with this object if one
         * exists.  Otherwise return null.
         * @see AccessibleRelation
         * @since 1.3
         */
        public AccessibleRelationSet getAccessibleRelationSet() {
            // Check where the AccessibleContext's relation
            // set already contains a LABEL_FOR relation.
<span class="nc" id="L1134">            AccessibleRelationSet relationSet</span>
<span class="nc" id="L1135">                = super.getAccessibleRelationSet();</span>

<span class="nc bnc" id="L1137" title="All 2 branches missed.">            if (!relationSet.contains(AccessibleRelation.LABEL_FOR)) {</span>
<span class="nc" id="L1138">                Component c = JLabel.this.getLabelFor();</span>
<span class="nc bnc" id="L1139" title="All 2 branches missed.">                if (c != null) {</span>
<span class="nc" id="L1140">                    AccessibleRelation relation</span>
                        = new AccessibleRelation(AccessibleRelation.LABEL_FOR);
<span class="nc" id="L1142">                    relation.setTarget(c);</span>
<span class="nc" id="L1143">                    relationSet.add(relation);</span>
                }
            }
<span class="nc" id="L1146">            return relationSet;</span>
        }


        /* AccessibleText ---------- */

        public AccessibleText getAccessibleText() {
<span class="nc" id="L1153">            View view = (View)JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1154" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1155">                return this;</span>
            } else {
<span class="nc" id="L1157">                return null;</span>
            }
        }

        /**
         * Given a point in local coordinates, return the zero-based index
         * of the character under that Point.  If the point is invalid,
         * this method returns -1.
         *
         * @param p the Point in local coordinates
         * @return the zero-based index of the character under Point p; if
         * Point is invalid returns -1.
         * @since 1.3
         */
        public int getIndexAtPoint(Point p) {
<span class="nc" id="L1172">            View view = (View) JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1173" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1174">                Rectangle r = getTextRectangle();</span>
<span class="nc bnc" id="L1175" title="All 2 branches missed.">                if (r == null) {</span>
<span class="nc" id="L1176">                    return -1;</span>
                }
<span class="nc" id="L1178">                Rectangle2D.Float shape =</span>
                    new Rectangle2D.Float(r.x, r.y, r.width, r.height);
<span class="nc" id="L1180">                Position.Bias bias[] = new Position.Bias[1];</span>
<span class="nc" id="L1181">                return view.viewToModel(p.x, p.y, shape, bias);</span>
            } else {
<span class="nc" id="L1183">                return -1;</span>
            }
        }

        /**
         * Returns the bounding box of the character at the given
         * index in the string.  The bounds are returned in local
         * coordinates. If the index is invalid, &lt;code&gt;null&lt;/code&gt; is returned.
         *
         * @param i the index into the String
         * @return the screen coordinates of the character's bounding box.
         * If the index is invalid, &lt;code&gt;null&lt;/code&gt; is returned.
         * @since 1.3
         */
        public Rectangle getCharacterBounds(int i) {
<span class="nc" id="L1198">            View view = (View) JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1199" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1200">                Rectangle r = getTextRectangle();</span>
<span class="nc bnc" id="L1201" title="All 2 branches missed.">        if (r == null) {</span>
<span class="nc" id="L1202">            return null;</span>
        }
<span class="nc" id="L1204">                Rectangle2D.Float shape =</span>
                    new Rectangle2D.Float(r.x, r.y, r.width, r.height);
                try {
<span class="nc" id="L1207">                    Shape charShape =</span>
<span class="nc" id="L1208">                        view.modelToView(i, shape, Position.Bias.Forward);</span>
<span class="nc" id="L1209">                    return charShape.getBounds();</span>
<span class="nc" id="L1210">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1211">                    return null;</span>
                }
            } else {
<span class="nc" id="L1214">                return null;</span>
            }
        }

        /**
         * Return the number of characters (valid indicies)
         *
         * @return the number of characters
         * @since 1.3
         */
        public int getCharCount() {
<span class="nc" id="L1225">            View view = (View) JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1226" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1227">                Document d = view.getDocument();</span>
<span class="nc bnc" id="L1228" title="All 2 branches missed.">                if (d instanceof StyledDocument) {</span>
<span class="nc" id="L1229">                    StyledDocument doc = (StyledDocument)d;</span>
<span class="nc" id="L1230">                    return doc.getLength();</span>
                }
            }
<span class="nc" id="L1233">            return accessibleContext.getAccessibleName().length();</span>
        }

        /**
         * Return the zero-based offset of the caret.
         *
         * Note: That to the right of the caret will have the same index
         * value as the offset (the caret is between two characters).
         * @return the zero-based offset of the caret.
         * @since 1.3
         */
        public int getCaretPosition() {
            // There is no caret.
<span class="nc" id="L1246">            return -1;</span>
        }

        /**
         * Returns the String at a given index.
         *
         * @param part the AccessibleText.CHARACTER, AccessibleText.WORD,
         * or AccessibleText.SENTENCE to retrieve
         * @param index an index within the text &amp;gt;= 0
         * @return the letter, word, or sentence,
         *   null for an invalid index or part
         * @since 1.3
         */
        public String getAtIndex(int part, int index) {
<span class="nc bnc" id="L1260" title="All 4 branches missed.">            if (index &lt; 0 || index &gt;= getCharCount()) {</span>
<span class="nc" id="L1261">                return null;</span>
            }
<span class="nc bnc" id="L1263" title="All 4 branches missed.">            switch (part) {</span>
            case AccessibleText.CHARACTER:
                try {
<span class="nc" id="L1266">                    return getText(index, 1);</span>
<span class="nc" id="L1267">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1268">                    return null;</span>
                }
            case AccessibleText.WORD:
                try {
<span class="nc" id="L1272">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1273">                    BreakIterator words = BreakIterator.getWordInstance(getLocale());</span>
<span class="nc" id="L1274">                    words.setText(s);</span>
<span class="nc" id="L1275">                    int end = words.following(index);</span>
<span class="nc" id="L1276">                    return s.substring(words.previous(), end);</span>
<span class="nc" id="L1277">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1278">                    return null;</span>
                }
            case AccessibleText.SENTENCE:
                try {
<span class="nc" id="L1282">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1283">                    BreakIterator sentence =</span>
<span class="nc" id="L1284">                        BreakIterator.getSentenceInstance(getLocale());</span>
<span class="nc" id="L1285">                    sentence.setText(s);</span>
<span class="nc" id="L1286">                    int end = sentence.following(index);</span>
<span class="nc" id="L1287">                    return s.substring(sentence.previous(), end);</span>
<span class="nc" id="L1288">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1289">                    return null;</span>
                }
            default:
<span class="nc" id="L1292">                return null;</span>
            }
        }

        /**
         * Returns the String after a given index.
         *
         * @param part the AccessibleText.CHARACTER, AccessibleText.WORD,
         * or AccessibleText.SENTENCE to retrieve
         * @param index an index within the text &amp;gt;= 0
         * @return the letter, word, or sentence, null for an invalid
         *  index or part
         * @since 1.3
         */
        public String getAfterIndex(int part, int index) {
<span class="nc bnc" id="L1307" title="All 4 branches missed.">            if (index &lt; 0 || index &gt;= getCharCount()) {</span>
<span class="nc" id="L1308">                return null;</span>
            }
<span class="nc bnc" id="L1310" title="All 4 branches missed.">            switch (part) {</span>
            case AccessibleText.CHARACTER:
<span class="nc bnc" id="L1312" title="All 2 branches missed.">                if (index+1 &gt;= getCharCount()) {</span>
<span class="nc" id="L1313">                   return null;</span>
                }
                try {
<span class="nc" id="L1316">                    return getText(index+1, 1);</span>
<span class="nc" id="L1317">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1318">                    return null;</span>
                }
            case AccessibleText.WORD:
                try {
<span class="nc" id="L1322">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1323">                    BreakIterator words = BreakIterator.getWordInstance(getLocale());</span>
<span class="nc" id="L1324">                    words.setText(s);</span>
<span class="nc" id="L1325">                    int start = words.following(index);</span>
<span class="nc bnc" id="L1326" title="All 4 branches missed.">                    if (start == BreakIterator.DONE || start &gt;= s.length()) {</span>
<span class="nc" id="L1327">                        return null;</span>
                    }
<span class="nc" id="L1329">                    int end = words.following(start);</span>
<span class="nc bnc" id="L1330" title="All 4 branches missed.">                    if (end == BreakIterator.DONE || end &gt;= s.length()) {</span>
<span class="nc" id="L1331">                        return null;</span>
                    }
<span class="nc" id="L1333">                    return s.substring(start, end);</span>
<span class="nc" id="L1334">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1335">                    return null;</span>
                }
            case AccessibleText.SENTENCE:
                try {
<span class="nc" id="L1339">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1340">                    BreakIterator sentence =</span>
<span class="nc" id="L1341">                        BreakIterator.getSentenceInstance(getLocale());</span>
<span class="nc" id="L1342">                    sentence.setText(s);</span>
<span class="nc" id="L1343">                    int start = sentence.following(index);</span>
<span class="nc bnc" id="L1344" title="All 4 branches missed.">                    if (start == BreakIterator.DONE || start &gt; s.length()) {</span>
<span class="nc" id="L1345">                        return null;</span>
                    }
<span class="nc" id="L1347">                    int end = sentence.following(start);</span>
<span class="nc bnc" id="L1348" title="All 4 branches missed.">                    if (end == BreakIterator.DONE || end &gt; s.length()) {</span>
<span class="nc" id="L1349">                        return null;</span>
                    }
<span class="nc" id="L1351">                    return s.substring(start, end);</span>
<span class="nc" id="L1352">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1353">                    return null;</span>
                }
            default:
<span class="nc" id="L1356">                return null;</span>
            }
        }

        /**
         * Returns the String before a given index.
         *
         * @param part the AccessibleText.CHARACTER, AccessibleText.WORD,
         *   or AccessibleText.SENTENCE to retrieve
         * @param index an index within the text &amp;gt;= 0
         * @return the letter, word, or sentence, null for an invalid index
         *  or part
         * @since 1.3
         */
        public String getBeforeIndex(int part, int index) {
<span class="nc bnc" id="L1371" title="All 4 branches missed.">            if (index &lt; 0 || index &gt; getCharCount()-1) {</span>
<span class="nc" id="L1372">                return null;</span>
            }
<span class="nc bnc" id="L1374" title="All 4 branches missed.">            switch (part) {</span>
            case AccessibleText.CHARACTER:
<span class="nc bnc" id="L1376" title="All 2 branches missed.">                if (index == 0) {</span>
<span class="nc" id="L1377">                    return null;</span>
                }
                try {
<span class="nc" id="L1380">                    return getText(index-1, 1);</span>
<span class="nc" id="L1381">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1382">                    return null;</span>
                }
            case AccessibleText.WORD:
                try {
<span class="nc" id="L1386">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1387">                    BreakIterator words = BreakIterator.getWordInstance(getLocale());</span>
<span class="nc" id="L1388">                    words.setText(s);</span>
<span class="nc" id="L1389">                    int end = words.following(index);</span>
<span class="nc" id="L1390">                    end = words.previous();</span>
<span class="nc" id="L1391">                    int start = words.previous();</span>
<span class="nc bnc" id="L1392" title="All 2 branches missed.">                    if (start == BreakIterator.DONE) {</span>
<span class="nc" id="L1393">                        return null;</span>
                    }
<span class="nc" id="L1395">                    return s.substring(start, end);</span>
<span class="nc" id="L1396">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1397">                    return null;</span>
                }
            case AccessibleText.SENTENCE:
                try {
<span class="nc" id="L1401">                    String s = getText(0, getCharCount());</span>
<span class="nc" id="L1402">                    BreakIterator sentence =</span>
<span class="nc" id="L1403">                        BreakIterator.getSentenceInstance(getLocale());</span>
<span class="nc" id="L1404">                    sentence.setText(s);</span>
<span class="nc" id="L1405">                    int end = sentence.following(index);</span>
<span class="nc" id="L1406">                    end = sentence.previous();</span>
<span class="nc" id="L1407">                    int start = sentence.previous();</span>
<span class="nc bnc" id="L1408" title="All 2 branches missed.">                    if (start == BreakIterator.DONE) {</span>
<span class="nc" id="L1409">                        return null;</span>
                    }
<span class="nc" id="L1411">                    return s.substring(start, end);</span>
<span class="nc" id="L1412">                } catch (BadLocationException e) {</span>
<span class="nc" id="L1413">                    return null;</span>
                }
            default:
<span class="nc" id="L1416">                return null;</span>
            }
        }

        /**
         * Return the AttributeSet for a given character at a given index
         *
         * @param i the zero-based index into the text
         * @return the AttributeSet of the character
         * @since 1.3
         */
        public AttributeSet getCharacterAttribute(int i) {
<span class="nc" id="L1428">            View view = (View) JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1429" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1430">                Document d = view.getDocument();</span>
<span class="nc bnc" id="L1431" title="All 2 branches missed.">                if (d instanceof StyledDocument) {</span>
<span class="nc" id="L1432">                    StyledDocument doc = (StyledDocument)d;</span>
<span class="nc" id="L1433">                    Element elem = doc.getCharacterElement(i);</span>
<span class="nc bnc" id="L1434" title="All 2 branches missed.">                    if (elem != null) {</span>
<span class="nc" id="L1435">                        return elem.getAttributes();</span>
                    }
                }
            }
<span class="nc" id="L1439">            return null;</span>
        }

        /**
         * Returns the start offset within the selected text.
         * If there is no selection, but there is
         * a caret, the start and end offsets will be the same.
         *
         * @return the index into the text of the start of the selection
         * @since 1.3
         */
        public int getSelectionStart() {
            // Text cannot be selected.
<span class="nc" id="L1452">            return -1;</span>
        }

        /**
         * Returns the end offset within the selected text.
         * If there is no selection, but there is
         * a caret, the start and end offsets will be the same.
         *
         * @return the index into the text of the end of the selection
         * @since 1.3
         */
        public int getSelectionEnd() {
            // Text cannot be selected.
<span class="nc" id="L1465">            return -1;</span>
        }

        /**
         * Returns the portion of the text that is selected.
         *
         * @return the String portion of the text that is selected
         * @since 1.3
         */
        public String getSelectedText() {
            // Text cannot be selected.
<span class="nc" id="L1476">            return null;</span>
        }

        /*
         * Returns the text substring starting at the specified
         * offset with the specified length.
         */
        private String getText(int offset, int length)
            throws BadLocationException {

<span class="nc" id="L1486">            View view = (View) JLabel.this.getClientProperty(&quot;html&quot;);</span>
<span class="nc bnc" id="L1487" title="All 2 branches missed.">            if (view != null) {</span>
<span class="nc" id="L1488">                Document d = view.getDocument();</span>
<span class="nc bnc" id="L1489" title="All 2 branches missed.">                if (d instanceof StyledDocument) {</span>
<span class="nc" id="L1490">                    StyledDocument doc = (StyledDocument)d;</span>
<span class="nc" id="L1491">                    return doc.getText(offset, length);</span>
                }
            }
<span class="nc" id="L1494">            return null;</span>
        }

        /*
         * Returns the bounding rectangle for the component text.
         */
        private Rectangle getTextRectangle() {

<span class="nc" id="L1502">            String text = JLabel.this.getText();</span>
<span class="nc bnc" id="L1503" title="All 2 branches missed.">            Icon icon = (JLabel.this.isEnabled()) ? JLabel.this.getIcon() : JLabel.this.getDisabledIcon();</span>

<span class="nc bnc" id="L1505" title="All 4 branches missed.">            if ((icon == null) &amp;&amp; (text == null)) {</span>
<span class="nc" id="L1506">                return null;</span>
            }

<span class="nc" id="L1509">            Rectangle paintIconR = new Rectangle();</span>
<span class="nc" id="L1510">            Rectangle paintTextR = new Rectangle();</span>
<span class="nc" id="L1511">            Rectangle paintViewR = new Rectangle();</span>
<span class="nc" id="L1512">            Insets paintViewInsets = new Insets(0, 0, 0, 0);</span>

<span class="nc" id="L1514">            paintViewInsets = JLabel.this.getInsets(paintViewInsets);</span>
<span class="nc" id="L1515">            paintViewR.x = paintViewInsets.left;</span>
<span class="nc" id="L1516">            paintViewR.y = paintViewInsets.top;</span>
<span class="nc" id="L1517">            paintViewR.width = JLabel.this.getWidth() - (paintViewInsets.left + paintViewInsets.right);</span>
<span class="nc" id="L1518">            paintViewR.height = JLabel.this.getHeight() - (paintViewInsets.top + paintViewInsets.bottom);</span>

<span class="nc" id="L1520">            String clippedText = SwingUtilities.layoutCompoundLabel(</span>
                (JComponent)JLabel.this,
<span class="nc" id="L1522">                getFontMetrics(getFont()),</span>
                text,
                icon,
<span class="nc" id="L1525">                JLabel.this.getVerticalAlignment(),</span>
<span class="nc" id="L1526">                JLabel.this.getHorizontalAlignment(),</span>
<span class="nc" id="L1527">                JLabel.this.getVerticalTextPosition(),</span>
<span class="nc" id="L1528">                JLabel.this.getHorizontalTextPosition(),</span>
                paintViewR,
                paintIconR,
                paintTextR,
<span class="nc" id="L1532">                JLabel.this.getIconTextGap());</span>

<span class="nc" id="L1534">            return paintTextR;</span>
        }

        // ----- AccessibleExtendedComponent

        /**
         * Returns the AccessibleExtendedComponent
         *
         * @return the AccessibleExtendedComponent
         */
        AccessibleExtendedComponent getAccessibleExtendedComponent() {
<span class="nc" id="L1545">            return this;</span>
        }

        /**
         * Returns the tool tip text
         *
         * @return the tool tip text, if supported, of the object;
         * otherwise, null
         * @since 1.4
         */
        public String getToolTipText() {
<span class="nc" id="L1556">            return JLabel.this.getToolTipText();</span>
        }

        /**
         * Returns the titled border text
         *
         * @return the titled border text, if supported, of the object;
         * otherwise, null
         * @since 1.4
         */
        public String getTitledBorderText() {
<span class="nc" id="L1567">            return super.getTitledBorderText();</span>
        }

        /**
         * Returns key bindings associated with this object
         *
         * @return the key bindings, if supported, of the object;
         * otherwise, null
         * @see AccessibleKeyBinding
         * @since 1.4
         */
        public AccessibleKeyBinding getAccessibleKeyBinding() {
<span class="nc" id="L1579">            int mnemonic = JLabel.this.getDisplayedMnemonic();</span>
<span class="nc bnc" id="L1580" title="All 2 branches missed.">            if (mnemonic == 0) {</span>
<span class="nc" id="L1581">                return null;</span>
            }
<span class="nc" id="L1583">            return new LabelKeyBinding(mnemonic);</span>
        }

<span class="nc" id="L1586">        class LabelKeyBinding implements AccessibleKeyBinding {</span>
            int mnemonic;

<span class="nc" id="L1589">            LabelKeyBinding(int mnemonic) {</span>
<span class="nc" id="L1590">                this.mnemonic = mnemonic;</span>
<span class="nc" id="L1591">            }</span>

            /**
             * Returns the number of key bindings for this object
             *
             * @return the zero-based number of key bindings for this object
             */
            public int getAccessibleKeyBindingCount() {
<span class="nc" id="L1599">                return 1;</span>
            }

            /**
             * Returns a key binding for this object.  The value returned is an
             * java.lang.Object which must be cast to appropriate type depending
             * on the underlying implementation of the key.  For example, if the
             * Object returned is a javax.swing.KeyStroke, the user of this
             * method should do the following:
             * &lt;nf&gt;&lt;code&gt;
             * Component c = &lt;get the component that has the key bindings&gt;
             * AccessibleContext ac = c.getAccessibleContext();
             * AccessibleKeyBinding akb = ac.getAccessibleKeyBinding();
             * for (int i = 0; i &lt; akb.getAccessibleKeyBindingCount(); i++) {
             *     Object o = akb.getAccessibleKeyBinding(i);
             *     if (o instanceof javax.swing.KeyStroke) {
             *         javax.swing.KeyStroke keyStroke = (javax.swing.KeyStroke)o;
             *         &lt;do something with the key binding&gt;
             *     }
             * }
             * &lt;/code&gt;&lt;/nf&gt;
             *
             * @param i zero-based index of the key bindings
             * @return a javax.lang.Object which specifies the key binding
             * @exception IllegalArgumentException if the index is
             * out of bounds
             * @see #getAccessibleKeyBindingCount
             */
            public java.lang.Object getAccessibleKeyBinding(int i) {
<span class="nc bnc" id="L1628" title="All 2 branches missed.">                if (i != 0) {</span>
<span class="nc" id="L1629">                    throw new IllegalArgumentException();</span>
                }
<span class="nc" id="L1631">                return KeyStroke.getKeyStroke(mnemonic, 0);</span>
            }
        }

    }  // AccessibleJComponent
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>