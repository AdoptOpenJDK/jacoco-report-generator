<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>JProgressBar.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">JProgressBar.java</span></div><h1>JProgressBar.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing;

import java.awt.Color;
import java.awt.Graphics;

import java.text.Format;
import java.text.NumberFormat;

import java.io.Serializable;
import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;
import java.io.IOException;

import javax.swing.event.*;
import javax.accessibility.*;
import javax.swing.plaf.ProgressBarUI;


/**
 * A component that visually displays the progress of some task.  As the task
 * progresses towards completion, the progress bar displays the
 * task's percentage of completion.
 * This percentage is typically represented visually by a rectangle which
 * starts out empty and gradually becomes filled in as the task progresses.
 * In addition, the progress bar can display a textual representation of this
 * percentage.
 * &lt;p&gt;
 * {@code JProgressBar} uses a {@code BoundedRangeModel} as its data model,
 * with the {@code value} property representing the &quot;current&quot; state of the task,
 * and the {@code minimum} and {@code maximum} properties representing the
 * beginning and end points, respectively.
 * &lt;p&gt;
 * To indicate that a task of unknown length is executing,
 * you can put a progress bar into indeterminate mode.
 * While the bar is in indeterminate mode,
 * it animates constantly to show that work is occurring.
 * As soon as you can determine the task's length and amount of progress,
 * you should update the progress bar's value
 * and switch it back to determinate mode.
 *
 * &lt;p&gt;
 *
 * Here is an example of creating a progress bar,
 * where &lt;code&gt;task&lt;/code&gt; is an object (representing some piece of work)
 * which returns information about the progress of the task:
 *
 *&lt;pre&gt;
 *progressBar = new JProgressBar(0, task.getLengthOfTask());
 *progressBar.setValue(0);
 *progressBar.setStringPainted(true);
 *&lt;/pre&gt;
 *
 * Here is an example of querying the current state of the task, and using
 * the returned value to update the progress bar:
 *
 *&lt;pre&gt;
 *progressBar.setValue(task.getCurrent());
 *&lt;/pre&gt;
 *
 * Here is an example of putting a progress bar into
 * indeterminate mode,
 * and then switching back to determinate mode
 * once the length of the task is known:
 *
 *&lt;pre&gt;
 *progressBar = new JProgressBar();
 *&lt;em&gt;...//when the task of (initially) unknown length begins:&lt;/em&gt;
 *progressBar.setIndeterminate(true);
 *&lt;em&gt;...//do some work; get length of task...&lt;/em&gt;
 *progressBar.setMaximum(newLength);
 *progressBar.setValue(newValue);
 *progressBar.setIndeterminate(false);
 *&lt;/pre&gt;
 *
 * &lt;p&gt;
 *
 * For complete examples and further documentation see
 * &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html&quot; target=&quot;_top&quot;&gt;How to Monitor Progress&lt;/a&gt;,
 * a section in &lt;em&gt;The Java Tutorial.&lt;/em&gt;
 *
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt; Swing is not thread safe. For more
 * information see &lt;a
 * href=&quot;package-summary.html#threading&quot;&gt;Swing's Threading
 * Policy&lt;/a&gt;.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @see javax.swing.plaf.basic.BasicProgressBarUI
 * @see javax.swing.BoundedRangeModel
 * @see javax.swing.SwingWorker
 *
 * @beaninfo
 *      attribute: isContainer false
 *    description: A component that displays an integer value.
 *
 * @author Michael C. Albers
 * @author Kathy Walrath
 */
public class JProgressBar extends JComponent implements SwingConstants, Accessible
{
    /**
     * @see #getUIClassID
     */
    private static final String uiClassID = &quot;ProgressBarUI&quot;;

    /**
     * Whether the progress bar is horizontal or vertical.
     * The default is &lt;code&gt;HORIZONTAL&lt;/code&gt;.
     *
     * @see #setOrientation
     */
    protected int orientation;

    /**
     * Whether to display a border around the progress bar.
     * The default is &lt;code&gt;true&lt;/code&gt;.
     *
     * @see #setBorderPainted
     */
    protected boolean paintBorder;

    /**
     * The object that holds the data for the progress bar.
     *
     * @see #setModel
     */
    protected BoundedRangeModel model;

    /**
     * An optional string that can be displayed on the progress bar.
     * The default is &lt;code&gt;null&lt;/code&gt;. Setting this to a non-&lt;code&gt;null&lt;/code&gt;
     * value does not imply that the string will be displayed.
     * To display the string, {@code paintString} must be {@code true}.
     *
     * @see #setString
     * @see #setStringPainted
     */
    protected String progressString;

    /**
     * Whether to display a string of text on the progress bar.
     * The default is &lt;code&gt;false&lt;/code&gt;.
     * Setting this to &lt;code&gt;true&lt;/code&gt; causes a textual
     * display of the progress to be rendered on the progress bar. If
     * the &lt;code&gt;progressString&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;,
     * the percentage of completion is displayed on the progress bar.
     * Otherwise, the &lt;code&gt;progressString&lt;/code&gt; is
     * rendered on the progress bar.
     *
     * @see #setStringPainted
     * @see #setString
     */
    protected boolean paintString;

    /**
     * The default minimum for a progress bar is 0.
     */
    static final private int defaultMinimum = 0;
    /**
     * The default maximum for a progress bar is 100.
     */
    static final private int defaultMaximum = 100;
    /**
     * The default orientation for a progress bar is &lt;code&gt;HORIZONTAL&lt;/code&gt;.
     */
    static final private int defaultOrientation = HORIZONTAL;

    /**
     * Only one &lt;code&gt;ChangeEvent&lt;/code&gt; is needed per instance since the
     * event's only interesting property is the immutable source, which
     * is the progress bar.
     * The event is lazily created the first time that an
     * event notification is fired.
     *
     * @see #fireStateChanged
     */
<span class="nc" id="L210">    protected transient ChangeEvent changeEvent = null;</span>

    /**
     * Listens for change events sent by the progress bar's model,
     * redispatching them
     * to change-event listeners registered upon
     * this progress bar.
     *
     * @see #createChangeListener
     */
<span class="nc" id="L220">    protected ChangeListener changeListener = null;</span>

    /**
     * Format used when displaying percent complete.
     */
    private transient Format format;

    /**
     * Whether the progress bar is indeterminate (&lt;code&gt;true&lt;/code&gt;) or
     * normal (&lt;code&gt;false&lt;/code&gt;); the default is &lt;code&gt;false&lt;/code&gt;.
     *
     * @see #setIndeterminate
     * @since 1.4
     */
    private boolean indeterminate;


   /**
     * Creates a horizontal progress bar
     * that displays a border but no progress string.
     * The initial and minimum values are 0,
     * and the maximum is 100.
     *
     * @see #setOrientation
     * @see #setBorderPainted
     * @see #setStringPainted
     * @see #setString
     * @see #setIndeterminate
     */
    public JProgressBar()
    {
<span class="nc" id="L251">        this(defaultOrientation);</span>
<span class="nc" id="L252">    }</span>

   /**
     * Creates a progress bar with the specified orientation,
     * which can be
     * either {@code SwingConstants.VERTICAL} or
     * {@code SwingConstants.HORIZONTAL}.
     * By default, a border is painted but a progress string is not.
     * The initial and minimum values are 0,
     * and the maximum is 100.
     *
     * @param orient  the desired orientation of the progress bar
     * @throws IllegalArgumentException if {@code orient} is an illegal value
     *
     * @see #setOrientation
     * @see #setBorderPainted
     * @see #setStringPainted
     * @see #setString
     * @see #setIndeterminate
     */
    public JProgressBar(int orient)
    {
<span class="nc" id="L274">        this(orient, defaultMinimum, defaultMaximum);</span>
<span class="nc" id="L275">    }</span>


    /**
     * Creates a horizontal progress bar
     * with the specified minimum and maximum.
     * Sets the initial value of the progress bar to the specified minimum.
     * By default, a border is painted but a progress string is not.
     * &lt;p&gt;
     * The &lt;code&gt;BoundedRangeModel&lt;/code&gt; that holds the progress bar's data
     * handles any issues that may arise from improperly setting the
     * minimum, initial, and maximum values on the progress bar.
     * See the {@code BoundedRangeModel} documentation for details.
     *
     * @param min  the minimum value of the progress bar
     * @param max  the maximum value of the progress bar
     *
     * @see BoundedRangeModel
     * @see #setOrientation
     * @see #setBorderPainted
     * @see #setStringPainted
     * @see #setString
     * @see #setIndeterminate
     */
    public JProgressBar(int min, int max)
    {
<span class="nc" id="L301">        this(defaultOrientation, min, max);</span>
<span class="nc" id="L302">    }</span>


    /**
     * Creates a progress bar using the specified orientation,
     * minimum, and maximum.
     * By default, a border is painted but a progress string is not.
     * Sets the initial value of the progress bar to the specified minimum.
     * &lt;p&gt;
     * The &lt;code&gt;BoundedRangeModel&lt;/code&gt; that holds the progress bar's data
     * handles any issues that may arise from improperly setting the
     * minimum, initial, and maximum values on the progress bar.
     * See the {@code BoundedRangeModel} documentation for details.
     *
     * @param orient  the desired orientation of the progress bar
     * @param min  the minimum value of the progress bar
     * @param max  the maximum value of the progress bar
     * @throws IllegalArgumentException if {@code orient} is an illegal value
     *
     * @see BoundedRangeModel
     * @see #setOrientation
     * @see #setBorderPainted
     * @see #setStringPainted
     * @see #setString
     * @see #setIndeterminate
     */
    public JProgressBar(int orient, int min, int max)
<span class="nc" id="L329">    {</span>
        // Creating the model this way is a bit simplistic, but
        //  I believe that it is the the most common usage of this
        //  component - it's what people will expect.
<span class="nc" id="L333">        setModel(new DefaultBoundedRangeModel(min, 0, min, max));</span>
<span class="nc" id="L334">        updateUI();</span>

<span class="nc" id="L336">        setOrientation(orient);      // documented with set/getOrientation()</span>
<span class="nc" id="L337">        setBorderPainted(true);      // documented with is/setBorderPainted()</span>
<span class="nc" id="L338">        setStringPainted(false);     // see setStringPainted</span>
<span class="nc" id="L339">        setString(null);             // see getString</span>
<span class="nc" id="L340">        setIndeterminate(false);     // see setIndeterminate</span>
<span class="nc" id="L341">    }</span>


    /**
     * Creates a horizontal progress bar
     * that uses the specified model
     * to hold the progress bar's data.
     * By default, a border is painted but a progress string is not.
     *
     * @param newModel  the data model for the progress bar
     *
     * @see #setOrientation
     * @see #setBorderPainted
     * @see #setStringPainted
     * @see #setString
     * @see #setIndeterminate
     */
    public JProgressBar(BoundedRangeModel newModel)
<span class="nc" id="L359">    {</span>
<span class="nc" id="L360">        setModel(newModel);</span>
<span class="nc" id="L361">        updateUI();</span>

<span class="nc" id="L363">        setOrientation(defaultOrientation);  // see setOrientation()</span>
<span class="nc" id="L364">        setBorderPainted(true);              // see setBorderPainted()</span>
<span class="nc" id="L365">        setStringPainted(false);             // see setStringPainted</span>
<span class="nc" id="L366">        setString(null);                     // see getString</span>
<span class="nc" id="L367">        setIndeterminate(false);             // see setIndeterminate</span>
<span class="nc" id="L368">    }</span>


    /**
     * Returns {@code SwingConstants.VERTICAL} or
     * {@code SwingConstants.HORIZONTAL}, depending on the orientation
     * of the progress bar. The default orientation is
     * {@code SwingConstants.HORIZONTAL}.
     *
     * @return &lt;code&gt;HORIZONTAL&lt;/code&gt; or &lt;code&gt;VERTICAL&lt;/code&gt;
     * @see #setOrientation
     */
    public int getOrientation() {
<span class="nc" id="L381">        return orientation;</span>
    }


   /**
     * Sets the progress bar's orientation to &lt;code&gt;newOrientation&lt;/code&gt;,
     * which must be {@code SwingConstants.VERTICAL} or
     * {@code SwingConstants.HORIZONTAL}. The default orientation
     * is {@code SwingConstants.HORIZONTAL}.
     *
     * @param  newOrientation  &lt;code&gt;HORIZONTAL&lt;/code&gt; or &lt;code&gt;VERTICAL&lt;/code&gt;
     * @exception      IllegalArgumentException    if &lt;code&gt;newOrientation&lt;/code&gt;
     *                                              is an illegal value
     * @see #getOrientation
     *
     * @beaninfo
     *    preferred: true
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Set the progress bar's orientation.
     */
    public void setOrientation(int newOrientation) {
<span class="nc bnc" id="L403" title="All 2 branches missed.">        if (orientation != newOrientation) {</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">            switch (newOrientation) {</span>
            case VERTICAL:
            case HORIZONTAL:
<span class="nc" id="L407">                int oldOrientation = orientation;</span>
<span class="nc" id="L408">                orientation = newOrientation;</span>
<span class="nc" id="L409">                firePropertyChange(&quot;orientation&quot;, oldOrientation, newOrientation);</span>
<span class="nc bnc" id="L410" title="All 2 branches missed.">                if (accessibleContext != null) {</span>
<span class="nc bnc" id="L411" title="All 4 branches missed.">                    accessibleContext.firePropertyChange(</span>
                            AccessibleContext.ACCESSIBLE_STATE_PROPERTY,
                            ((oldOrientation == VERTICAL)
                             ? AccessibleState.VERTICAL
                             : AccessibleState.HORIZONTAL),
                            ((orientation == VERTICAL)
                             ? AccessibleState.VERTICAL
                             : AccessibleState.HORIZONTAL));
                }
                break;
            default:
<span class="nc" id="L422">                throw new IllegalArgumentException(newOrientation +</span>
                                             &quot; is not a legal orientation&quot;);
            }
<span class="nc" id="L425">            revalidate();</span>
        }
<span class="nc" id="L427">    }</span>


    /**
     * Returns the value of the &lt;code&gt;stringPainted&lt;/code&gt; property.
     *
     * @return the value of the &lt;code&gt;stringPainted&lt;/code&gt; property
     * @see    #setStringPainted
     * @see    #setString
     */
    public boolean isStringPainted() {
<span class="nc" id="L438">        return paintString;</span>
    }


    /**
     * Sets the value of the &lt;code&gt;stringPainted&lt;/code&gt; property,
     * which determines whether the progress bar
     * should render a progress string.
     * The default is &lt;code&gt;false&lt;/code&gt;, meaning
     * no string is painted.
     * Some look and feels might not support progress strings
     * or might support them only when the progress bar is in determinate mode.
     *
     * @param   b       &lt;code&gt;true&lt;/code&gt; if the progress bar should render a string
     * @see     #isStringPainted
     * @see     #setString
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Whether the progress bar should render a string.
     */
    public void setStringPainted(boolean b) {
        //PENDING: specify that string not painted when in indeterminate mode?
        //         or just leave that to the L&amp;F?
<span class="nc" id="L462">        boolean oldValue = paintString;</span>
<span class="nc" id="L463">        paintString = b;</span>
<span class="nc" id="L464">        firePropertyChange(&quot;stringPainted&quot;, oldValue, paintString);</span>
<span class="nc bnc" id="L465" title="All 2 branches missed.">        if (paintString != oldValue) {</span>
<span class="nc" id="L466">            revalidate();</span>
<span class="nc" id="L467">            repaint();</span>
        }
<span class="nc" id="L469">    }</span>


    /**
     * Returns a {@code String} representation of the current progress.
     * By default, this returns a simple percentage {@code String} based on
     * the value returned from {@code getPercentComplete}.  An example
     * would be the &quot;42%&quot;.  You can change this by calling {@code setString}.
     *
     * @return the value of the progress string, or a simple percentage string
     *         if the progress string is {@code null}
     * @see    #setString
     */
    public String getString(){
<span class="nc bnc" id="L483" title="All 2 branches missed.">        if (progressString != null) {</span>
<span class="nc" id="L484">            return progressString;</span>
        } else {
<span class="nc bnc" id="L486" title="All 2 branches missed.">            if (format == null) {</span>
<span class="nc" id="L487">                format = NumberFormat.getPercentInstance();</span>
            }
<span class="nc" id="L489">            return format.format(new Double(getPercentComplete()));</span>
        }
    }

    /**
     * Sets the value of the progress string. By default,
     * this string is &lt;code&gt;null&lt;/code&gt;, implying the built-in behavior of
     * using a simple percent string.
     * If you have provided a custom progress string and want to revert to
     * the built-in behavior, set the string back to &lt;code&gt;null&lt;/code&gt;.
     * &lt;p&gt;
     * The progress string is painted only if
     * the &lt;code&gt;isStringPainted&lt;/code&gt; method returns &lt;code&gt;true&lt;/code&gt;.
     *
     * @param  s       the value of the progress string
     * @see    #getString
     * @see    #setStringPainted
     * @see    #isStringPainted
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Specifies the progress string to paint
     */
    public void setString(String s){
<span class="nc" id="L513">        String oldValue = progressString;</span>
<span class="nc" id="L514">        progressString = s;</span>
<span class="nc" id="L515">        firePropertyChange(&quot;string&quot;, oldValue, progressString);</span>
<span class="nc bnc" id="L516" title="All 6 branches missed.">        if (progressString == null || oldValue == null || !progressString.equals(oldValue)) {</span>
<span class="nc" id="L517">            repaint();</span>
        }
<span class="nc" id="L519">    }</span>

    /**
     * Returns the percent complete for the progress bar.
     * Note that this number is between 0.0 and 1.0.
     *
     * @return the percent complete for this progress bar
     */
    public double getPercentComplete() {
<span class="nc" id="L528">        long span = model.getMaximum() - model.getMinimum();</span>
<span class="nc" id="L529">        double currentValue = model.getValue();</span>
<span class="nc" id="L530">        double pc = (currentValue - model.getMinimum()) / span;</span>
<span class="nc" id="L531">        return pc;</span>
    }

    /**
     * Returns the &lt;code&gt;borderPainted&lt;/code&gt; property.
     *
     * @return the value of the &lt;code&gt;borderPainted&lt;/code&gt; property
     * @see    #setBorderPainted
     * @beaninfo
     *  description: Does the progress bar paint its border
     */
    public boolean isBorderPainted() {
<span class="nc" id="L543">        return paintBorder;</span>
    }

    /**
     * Sets the &lt;code&gt;borderPainted&lt;/code&gt; property, which is
     * &lt;code&gt;true&lt;/code&gt; if the progress bar should paint its border.
     * The default value for this property is &lt;code&gt;true&lt;/code&gt;.
     * Some look and feels might not implement painted borders;
     * they will ignore this property.
     *
     * @param   b       &lt;code&gt;true&lt;/code&gt; if the progress bar
     *                  should paint its border;
     *                  otherwise, &lt;code&gt;false&lt;/code&gt;
     * @see     #isBorderPainted
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Whether the progress bar should paint its border.
     */
    public void setBorderPainted(boolean b) {
<span class="nc" id="L563">        boolean oldValue = paintBorder;</span>
<span class="nc" id="L564">        paintBorder = b;</span>
<span class="nc" id="L565">        firePropertyChange(&quot;borderPainted&quot;, oldValue, paintBorder);</span>
<span class="nc bnc" id="L566" title="All 2 branches missed.">        if (paintBorder != oldValue) {</span>
<span class="nc" id="L567">            repaint();</span>
        }
<span class="nc" id="L569">    }</span>

    /**
     * Paints the progress bar's border if the &lt;code&gt;borderPainted&lt;/code&gt;
     * property is &lt;code&gt;true&lt;/code&gt;.
     *
     * @param g  the &lt;code&gt;Graphics&lt;/code&gt; context within which to paint the border
     * @see #paint
     * @see #setBorder
     * @see #isBorderPainted
     * @see #setBorderPainted
     */
    protected void paintBorder(Graphics g) {
<span class="nc bnc" id="L582" title="All 2 branches missed.">        if (isBorderPainted()) {</span>
<span class="nc" id="L583">            super.paintBorder(g);</span>
        }
<span class="nc" id="L585">    }</span>


    /**
     * Returns the look-and-feel object that renders this component.
     *
     * @return the &lt;code&gt;ProgressBarUI&lt;/code&gt; object that renders this component
     */
    public ProgressBarUI getUI() {
<span class="nc" id="L594">        return (ProgressBarUI)ui;</span>
    }

    /**
     * Sets the look-and-feel object that renders this component.
     *
     * @param ui  a &lt;code&gt;ProgressBarUI&lt;/code&gt; object
     * @see UIDefaults#getUI
     * @beaninfo
     *        bound: true
     *       hidden: true
     *    attribute: visualUpdate true
     *  description: The UI object that implements the Component's LookAndFeel.
     */
    public void setUI(ProgressBarUI ui) {
<span class="nc" id="L609">        super.setUI(ui);</span>
<span class="nc" id="L610">    }</span>


    /**
     * Resets the UI property to a value from the current look and feel.
     *
     * @see JComponent#updateUI
     */
    public void updateUI() {
<span class="nc" id="L619">        setUI((ProgressBarUI)UIManager.getUI(this));</span>
<span class="nc" id="L620">    }</span>


    /**
     * Returns the name of the look-and-feel class that renders this component.
     *
     * @return the string &quot;ProgressBarUI&quot;
     * @see JComponent#getUIClassID
     * @see UIDefaults#getUI
     * @beaninfo
     *        expert: true
     *   description: A string that specifies the name of the look-and-feel class.
     */
    public String getUIClassID() {
<span class="nc" id="L634">        return uiClassID;</span>
    }


    /* We pass each Change event to the listeners with the
     * the progress bar as the event source.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
<span class="nc" id="L650">    private class ModelListener implements ChangeListener, Serializable {</span>
        public void stateChanged(ChangeEvent e) {
<span class="nc" id="L652">            fireStateChanged();</span>
<span class="nc" id="L653">        }</span>
    }

    /**
     * Subclasses that want to handle change events
     * from the model differently
     * can override this to return
     * an instance of a custom &lt;code&gt;ChangeListener&lt;/code&gt; implementation.
     * The default {@code ChangeListener} simply calls the
     * {@code fireStateChanged} method to forward {@code ChangeEvent}s
     * to the {@code ChangeListener}s that have been added directly to the
     * progress bar.
     *
     * @see #changeListener
     * @see #fireStateChanged
     * @see javax.swing.event.ChangeListener
     * @see javax.swing.BoundedRangeModel
     */
    protected ChangeListener createChangeListener() {
<span class="nc" id="L672">        return new ModelListener();</span>
    }

    /**
     * Adds the specified &lt;code&gt;ChangeListener&lt;/code&gt; to the progress bar.
     *
     * @param l the &lt;code&gt;ChangeListener&lt;/code&gt; to add
     */
    public void addChangeListener(ChangeListener l) {
<span class="nc" id="L681">        listenerList.add(ChangeListener.class, l);</span>
<span class="nc" id="L682">    }</span>

    /**
     * Removes a &lt;code&gt;ChangeListener&lt;/code&gt; from the progress bar.
     *
     * @param l the &lt;code&gt;ChangeListener&lt;/code&gt; to remove
     */
    public void removeChangeListener(ChangeListener l) {
<span class="nc" id="L690">        listenerList.remove(ChangeListener.class, l);</span>
<span class="nc" id="L691">    }</span>

    /**
     * Returns an array of all the &lt;code&gt;ChangeListener&lt;/code&gt;s added
     * to this progress bar with &lt;code&gt;addChangeListener&lt;/code&gt;.
     *
     * @return all of the &lt;code&gt;ChangeListener&lt;/code&gt;s added or an empty
     *         array if no listeners have been added
     * @since 1.4
     */
    public ChangeListener[] getChangeListeners() {
<span class="nc" id="L702">        return listenerList.getListeners(ChangeListener.class);</span>
    }

    /**
     * Send a {@code ChangeEvent}, whose source is this {@code JProgressBar}, to
     * all {@code ChangeListener}s that have registered interest in
     * {@code ChangeEvent}s.
     * This method is called each time a {@code ChangeEvent} is received from
     * the model.
     * &lt;p&gt;
     *
     * The event instance is created if necessary, and stored in
     * {@code changeEvent}.
     *
     * @see #addChangeListener
     * @see EventListenerList
     */
    protected void fireStateChanged() {
        // Guaranteed to return a non-null array
<span class="nc" id="L721">        Object[] listeners = listenerList.getListenerList();</span>
        // Process the listeners last to first, notifying
        // those that are interested in this event
<span class="nc bnc" id="L724" title="All 2 branches missed.">        for (int i = listeners.length-2; i&gt;=0; i-=2) {</span>
<span class="nc bnc" id="L725" title="All 2 branches missed.">            if (listeners[i]==ChangeListener.class) {</span>
                // Lazily create the event:
<span class="nc bnc" id="L727" title="All 2 branches missed.">                if (changeEvent == null)</span>
<span class="nc" id="L728">                    changeEvent = new ChangeEvent(this);</span>
<span class="nc" id="L729">                ((ChangeListener)listeners[i+1]).stateChanged(changeEvent);</span>
            }
        }
<span class="nc" id="L732">    }</span>

    /**
     * Returns the data model used by this progress bar.
     *
     * @return the &lt;code&gt;BoundedRangeModel&lt;/code&gt; currently in use
     * @see #setModel
     * @see    BoundedRangeModel
     */
    public BoundedRangeModel getModel() {
<span class="nc" id="L742">        return model;</span>
    }

    /**
     * Sets the data model used by the &lt;code&gt;JProgressBar&lt;/code&gt;.
     * Note that the {@code BoundedRangeModel}'s {@code extent} is not used,
     * and is set to {@code 0}.
     *
     * @param  newModel the &lt;code&gt;BoundedRangeModel&lt;/code&gt; to use
     *
     * @beaninfo
     *    expert: true
     * description: The data model used by the JProgressBar.
     */
    public void setModel(BoundedRangeModel newModel) {
        // PENDING(???) setting the same model to multiple bars is broken; listeners
<span class="nc" id="L758">        BoundedRangeModel oldModel = getModel();</span>

<span class="nc bnc" id="L760" title="All 2 branches missed.">        if (newModel != oldModel) {</span>
<span class="nc bnc" id="L761" title="All 2 branches missed.">            if (oldModel != null) {</span>
<span class="nc" id="L762">                oldModel.removeChangeListener(changeListener);</span>
<span class="nc" id="L763">                changeListener = null;</span>
            }

<span class="nc" id="L766">            model = newModel;</span>

<span class="nc bnc" id="L768" title="All 2 branches missed.">            if (newModel != null) {</span>
<span class="nc" id="L769">                changeListener = createChangeListener();</span>
<span class="nc" id="L770">                newModel.addChangeListener(changeListener);</span>
            }

<span class="nc bnc" id="L773" title="All 2 branches missed.">            if (accessibleContext != null) {</span>
<span class="nc bnc" id="L774" title="All 2 branches missed.">                accessibleContext.firePropertyChange(</span>
                        AccessibleContext.ACCESSIBLE_VALUE_PROPERTY,
                        (oldModel== null
<span class="nc bnc" id="L777" title="All 2 branches missed.">                         ? null : Integer.valueOf(oldModel.getValue())),</span>
                        (newModel== null
<span class="nc" id="L779">                         ? null : Integer.valueOf(newModel.getValue())));</span>
            }

<span class="nc bnc" id="L782" title="All 2 branches missed.">            if (model != null) {</span>
<span class="nc" id="L783">                model.setExtent(0);</span>
            }
<span class="nc" id="L785">            repaint();</span>
        }
<span class="nc" id="L787">    }</span>


    /* All of the model methods are implemented by delegation. */

    /**
     * Returns the progress bar's current {@code value}
     * from the &lt;code&gt;BoundedRangeModel&lt;/code&gt;.
     * The value is always between the
     * minimum and maximum values, inclusive.
     *
     * @return  the current value of the progress bar
     * @see     #setValue
     * @see     BoundedRangeModel#getValue
     */
<span class="nc" id="L802">    public int getValue() { return getModel().getValue(); }</span>

    /**
     * Returns the progress bar's {@code minimum} value
     * from the &lt;code&gt;BoundedRangeModel&lt;/code&gt;.
     *
     * @return  the progress bar's minimum value
     * @see     #setMinimum
     * @see     BoundedRangeModel#getMinimum
     */
<span class="nc" id="L812">    public int getMinimum() { return getModel().getMinimum(); }</span>

    /**
     * Returns the progress bar's {@code maximum} value
     * from the &lt;code&gt;BoundedRangeModel&lt;/code&gt;.
     *
     * @return  the progress bar's maximum value
     * @see     #setMaximum
     * @see     BoundedRangeModel#getMaximum
     */
<span class="nc" id="L822">    public int getMaximum() { return getModel().getMaximum(); }</span>

    /**
     * Sets the progress bar's current value to {@code n}.  This method
     * forwards the new value to the model.
     * &lt;p&gt;
     * The data model (an instance of {@code BoundedRangeModel})
     * handles any mathematical
     * issues arising from assigning faulty values.  See the
     * {@code BoundedRangeModel} documentation for details.
     * &lt;p&gt;
     * If the new value is different from the previous value,
     * all change listeners are notified.
     *
     * @param   n       the new value
     * @see     #getValue
     * @see     #addChangeListener
     * @see     BoundedRangeModel#setValue
     * @beaninfo
     *    preferred: true
     *  description: The progress bar's current value.
     */
    public void setValue(int n) {
<span class="nc" id="L845">        BoundedRangeModel brm = getModel();</span>
<span class="nc" id="L846">        int oldValue = brm.getValue();</span>
<span class="nc" id="L847">        brm.setValue(n);</span>

<span class="nc bnc" id="L849" title="All 2 branches missed.">        if (accessibleContext != null) {</span>
<span class="nc" id="L850">            accessibleContext.firePropertyChange(</span>
                    AccessibleContext.ACCESSIBLE_VALUE_PROPERTY,
<span class="nc" id="L852">                    Integer.valueOf(oldValue),</span>
<span class="nc" id="L853">                    Integer.valueOf(brm.getValue()));</span>
        }
<span class="nc" id="L855">    }</span>

    /**
     * Sets the progress bar's minimum value
     * (stored in the progress bar's data model) to &lt;code&gt;n&lt;/code&gt;.
     * &lt;p&gt;
     * The data model (a &lt;code&gt;BoundedRangeModel&lt;/code&gt; instance)
     * handles any mathematical
     * issues arising from assigning faulty values.
     * See the {@code BoundedRangeModel} documentation for details.
     * &lt;p&gt;
     * If the minimum value is different from the previous minimum,
     * all change listeners are notified.
     *
     * @param  n       the new minimum
     * @see    #getMinimum
     * @see    #addChangeListener
     * @see    BoundedRangeModel#setMinimum
     * @beaninfo
     *  preferred: true
     * description: The progress bar's minimum value.
     */
<span class="nc" id="L877">    public void setMinimum(int n) { getModel().setMinimum(n); }</span>

    /**
     * Sets the progress bar's maximum value
     * (stored in the progress bar's data model) to &lt;code&gt;n&lt;/code&gt;.
     * &lt;p&gt;
     * The underlying &lt;code&gt;BoundedRangeModel&lt;/code&gt; handles any mathematical
     * issues arising from assigning faulty values.
     * See the {@code BoundedRangeModel} documentation for details.
     * &lt;p&gt;
     * If the maximum value is different from the previous maximum,
     * all change listeners are notified.
     *
     * @param  n       the new maximum
     * @see    #getMaximum
     * @see    #addChangeListener
     * @see    BoundedRangeModel#setMaximum
     * @beaninfo
     *    preferred: true
     *  description: The progress bar's maximum value.
     */
<span class="nc" id="L898">    public void setMaximum(int n) { getModel().setMaximum(n); }</span>

    /**
     * Sets the &lt;code&gt;indeterminate&lt;/code&gt; property of the progress bar,
     * which determines whether the progress bar is in determinate
     * or indeterminate mode.
     * An indeterminate progress bar continuously displays animation
     * indicating that an operation of unknown length is occurring.
     * By default, this property is &lt;code&gt;false&lt;/code&gt;.
     * Some look and feels might not support indeterminate progress bars;
     * they will ignore this property.
     *
     * &lt;p&gt;
     *
     * See
     * &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html&quot; target=&quot;_top&quot;&gt;How to Monitor Progress&lt;/a&gt;
     * for examples of using indeterminate progress bars.
     *
     * @param newValue  &lt;code&gt;true&lt;/code&gt; if the progress bar
     *                  should change to indeterminate mode;
     *                  &lt;code&gt;false&lt;/code&gt; if it should revert to normal.
     *
     * @see #isIndeterminate
     * @see javax.swing.plaf.basic.BasicProgressBarUI
     *
     * @since 1.4
     *
     * @beaninfo
     *        bound: true
     *    attribute: visualUpdate true
     *  description: Set whether the progress bar is indeterminate (true)
     *               or normal (false).
     */
    public void setIndeterminate(boolean newValue) {
<span class="nc" id="L932">        boolean oldValue = indeterminate;</span>
<span class="nc" id="L933">        indeterminate = newValue;</span>
<span class="nc" id="L934">        firePropertyChange(&quot;indeterminate&quot;, oldValue, indeterminate);</span>
<span class="nc" id="L935">    }</span>

    /**
     * Returns the value of the &lt;code&gt;indeterminate&lt;/code&gt; property.
     *
     * @return the value of the &lt;code&gt;indeterminate&lt;/code&gt; property
     * @see    #setIndeterminate
     *
     * @since 1.4
     *
     * @beaninfo
     *  description: Is the progress bar indeterminate (true)
     *               or normal (false)?
     */
    public boolean isIndeterminate() {
<span class="nc" id="L950">        return indeterminate;</span>
    }


    /**
     * See readObject() and writeObject() in JComponent for more
     * information about serialization in Swing.
     */
    private void writeObject(ObjectOutputStream s) throws IOException {
<span class="nc" id="L959">        s.defaultWriteObject();</span>
<span class="nc bnc" id="L960" title="All 2 branches missed.">        if (getUIClassID().equals(uiClassID)) {</span>
<span class="nc" id="L961">            byte count = JComponent.getWriteObjCounter(this);</span>
<span class="nc" id="L962">            JComponent.setWriteObjCounter(this, --count);</span>
<span class="nc bnc" id="L963" title="All 4 branches missed.">            if (count == 0 &amp;&amp; ui != null) {</span>
<span class="nc" id="L964">                ui.installUI(this);</span>
            }
        }
<span class="nc" id="L967">    }</span>


    /**
     * Returns a string representation of this &lt;code&gt;JProgressBar&lt;/code&gt;.
     * This method is intended to be used only for debugging purposes. The
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not
     * be &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  a string representation of this &lt;code&gt;JProgressBar&lt;/code&gt;
     */
    protected String paramString() {
<span class="nc bnc" id="L980" title="All 2 branches missed.">        String orientationString = (orientation == HORIZONTAL ?</span>
                                    &quot;HORIZONTAL&quot; : &quot;VERTICAL&quot;);
<span class="nc bnc" id="L982" title="All 2 branches missed.">        String paintBorderString = (paintBorder ?</span>
                                    &quot;true&quot; : &quot;false&quot;);
<span class="nc bnc" id="L984" title="All 2 branches missed.">        String progressStringString = (progressString != null ?</span>
                                       progressString : &quot;&quot;);
<span class="nc bnc" id="L986" title="All 2 branches missed.">        String paintStringString = (paintString ?</span>
                                    &quot;true&quot; : &quot;false&quot;);
<span class="nc bnc" id="L988" title="All 2 branches missed.">        String indeterminateString = (indeterminate ?</span>
                                    &quot;true&quot; : &quot;false&quot;);

<span class="nc" id="L991">        return super.paramString() +</span>
        &quot;,orientation=&quot; + orientationString +
        &quot;,paintBorder=&quot; + paintBorderString +
        &quot;,paintString=&quot; + paintStringString +
        &quot;,progressString=&quot; + progressStringString +
        &quot;,indeterminateString=&quot; + indeterminateString;
    }

/////////////////
// Accessibility support
////////////////

    /**
     * Gets the &lt;code&gt;AccessibleContext&lt;/code&gt; associated with this
     * &lt;code&gt;JProgressBar&lt;/code&gt;. For progress bars, the
     * &lt;code&gt;AccessibleContext&lt;/code&gt; takes the form of an
     * &lt;code&gt;AccessibleJProgressBar&lt;/code&gt;.
     * A new &lt;code&gt;AccessibleJProgressBar&lt;/code&gt; instance is created if necessary.
     *
     * @return an &lt;code&gt;AccessibleJProgressBar&lt;/code&gt; that serves as the
     *         &lt;code&gt;AccessibleContext&lt;/code&gt; of this &lt;code&gt;JProgressBar&lt;/code&gt;
     * @beaninfo
     *       expert: true
     *  description: The AccessibleContext associated with this ProgressBar.
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L1017" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L1018">            accessibleContext = new AccessibleJProgressBar();</span>
        }
<span class="nc" id="L1020">        return accessibleContext;</span>
    }

    /**
     * This class implements accessibility support for the
     * &lt;code&gt;JProgressBar&lt;/code&gt; class.  It provides an implementation of the
     * Java Accessibility API appropriate to progress bar user-interface
     * elements.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
<span class="nc" id="L1038">    protected class AccessibleJProgressBar extends AccessibleJComponent</span>
        implements AccessibleValue {

        /**
         * Gets the state set of this object.
         *
         * @return an instance of AccessibleState containing the current state
         * of the object
         * @see AccessibleState
         */
        public AccessibleStateSet getAccessibleStateSet() {
<span class="nc" id="L1049">            AccessibleStateSet states = super.getAccessibleStateSet();</span>
<span class="nc bnc" id="L1050" title="All 2 branches missed.">            if (getModel().getValueIsAdjusting()) {</span>
<span class="nc" id="L1051">                states.add(AccessibleState.BUSY);</span>
            }
<span class="nc bnc" id="L1053" title="All 2 branches missed.">            if (getOrientation() == VERTICAL) {</span>
<span class="nc" id="L1054">                states.add(AccessibleState.VERTICAL);</span>
            } else {
<span class="nc" id="L1056">                states.add(AccessibleState.HORIZONTAL);</span>
            }
<span class="nc" id="L1058">            return states;</span>
        }

        /**
         * Gets the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the
         * object
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc" id="L1068">            return AccessibleRole.PROGRESS_BAR;</span>
        }

        /**
         * Gets the &lt;code&gt;AccessibleValue&lt;/code&gt; associated with this object.  In the
         * implementation of the Java Accessibility API for this class,
         * returns this object, which is responsible for implementing the
         * &lt;code&gt;AccessibleValue&lt;/code&gt; interface on behalf of itself.
         *
         * @return this object
         */
        public AccessibleValue getAccessibleValue() {
<span class="nc" id="L1080">            return this;</span>
        }

        /**
         * Gets the accessible value of this object.
         *
         * @return the current value of this object
         */
        public Number getCurrentAccessibleValue() {
<span class="nc" id="L1089">            return Integer.valueOf(getValue());</span>
        }

        /**
         * Sets the value of this object as a &lt;code&gt;Number&lt;/code&gt;.
         *
         * @return &lt;code&gt;true&lt;/code&gt; if the value was set
         */
        public boolean setCurrentAccessibleValue(Number n) {
            // TIGER- 4422535
<span class="nc bnc" id="L1099" title="All 2 branches missed.">            if (n == null) {</span>
<span class="nc" id="L1100">                return false;</span>
            }
<span class="nc" id="L1102">            setValue(n.intValue());</span>
<span class="nc" id="L1103">            return true;</span>
        }

        /**
         * Gets the minimum accessible value of this object.
         *
         * @return the minimum value of this object
         */
        public Number getMinimumAccessibleValue() {
<span class="nc" id="L1112">            return Integer.valueOf(getMinimum());</span>
        }

        /**
         * Gets the maximum accessible value of this object.
         *
         * @return the maximum value of this object
         */
        public Number getMaximumAccessibleValue() {
            // TIGER - 4422362
<span class="nc" id="L1122">            return Integer.valueOf(model.getMaximum() - model.getExtent());</span>
        }

    } // AccessibleJProgressBar
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>