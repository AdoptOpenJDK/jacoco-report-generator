<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>SpinnerListModel.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">SpinnerListModel.java</span></div><h1>SpinnerListModel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2000, 2004, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing;

import java.util.*;
import java.io.Serializable;


/**
 * A simple implementation of &lt;code&gt;SpinnerModel&lt;/code&gt; whose
 * values are defined by an array or a &lt;code&gt;List&lt;/code&gt;.
 * For example to create a model defined by
 * an array of the names of the days of the week:
 * &lt;pre&gt;
 * String[] days = new DateFormatSymbols().getWeekdays();
 * SpinnerModel model = new SpinnerListModel(Arrays.asList(days).subList(1, 8));
 * &lt;/pre&gt;
 * This class only stores a reference to the array or &lt;code&gt;List&lt;/code&gt;
 * so if an element of the underlying sequence changes, it's up
 * to the application to notify the &lt;code&gt;ChangeListeners&lt;/code&gt; by calling
 * &lt;code&gt;fireStateChanged&lt;/code&gt;.
 * &lt;p&gt;
 * This model inherits a &lt;code&gt;ChangeListener&lt;/code&gt;.
 * The &lt;code&gt;ChangeListener&lt;/code&gt;s are notified whenever the
 * model's &lt;code&gt;value&lt;/code&gt; or &lt;code&gt;list&lt;/code&gt; properties changes.
 *
 * @see JSpinner
 * @see SpinnerModel
 * @see AbstractSpinnerModel
 * @see SpinnerNumberModel
 * @see SpinnerDateModel
 *
 * @author Hans Muller
 * @since 1.4
 */
public class SpinnerListModel extends AbstractSpinnerModel implements Serializable
{
    private List list;
    private int index;


    /**
     * Constructs a &lt;code&gt;SpinnerModel&lt;/code&gt; whose sequence of
     * values is defined by the specified &lt;code&gt;List&lt;/code&gt;.
     * The initial value (&lt;i&gt;current element&lt;/i&gt;)
     * of the model will be &lt;code&gt;values.get(0)&lt;/code&gt;.
     * If &lt;code&gt;values&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt; or has zero
     * size, an &lt;code&gt;IllegalArugmentException&lt;/code&gt; is thrown.
     *
     * @param values the sequence this model represents
     * @throws IllegalArgumentException if &lt;code&gt;values&lt;/code&gt; is
     *    &lt;code&gt;null&lt;/code&gt; or zero size
     */
<span class="nc" id="L77">    public SpinnerListModel(List&lt;?&gt; values) {</span>
<span class="nc bnc" id="L78" title="All 4 branches missed.">        if (values == null || values.size() == 0) {</span>
<span class="nc" id="L79">            throw new IllegalArgumentException(&quot;SpinnerListModel(List) expects non-null non-empty List&quot;);</span>
        }
<span class="nc" id="L81">        this.list = values;</span>
<span class="nc" id="L82">        this.index = 0;</span>
<span class="nc" id="L83">    }</span>


    /**
     * Constructs a &lt;code&gt;SpinnerModel&lt;/code&gt; whose sequence of values
     * is defined by the specified array.  The initial value of the model
     * will be &lt;code&gt;values[0]&lt;/code&gt;.  If &lt;code&gt;values&lt;/code&gt; is
     * &lt;code&gt;null&lt;/code&gt; or has zero length, an
     * &lt;code&gt;IllegalArgumentException&lt;/code&gt; is thrown.
     *
     * @param values the sequence this model represents
     * @throws IllegalArgumentException if &lt;code&gt;values&lt;/code&gt; is
     *    &lt;code&gt;null&lt;/code&gt; or zero length
     */
<span class="nc" id="L97">    public SpinnerListModel(Object[] values) {</span>
<span class="nc bnc" id="L98" title="All 4 branches missed.">        if (values == null || values.length == 0) {</span>
<span class="nc" id="L99">            throw new IllegalArgumentException(&quot;SpinnerListModel(Object[]) expects non-null non-empty Object[]&quot;);</span>
        }
<span class="nc" id="L101">        this.list = Arrays.asList(values);</span>
<span class="nc" id="L102">        this.index = 0;</span>
<span class="nc" id="L103">    }</span>


    /**
     * Constructs an effectively empty &lt;code&gt;SpinnerListModel&lt;/code&gt;.
     * The model's list will contain a single
     * &lt;code&gt;&quot;empty&quot;&lt;/code&gt; string element.
     */
    public SpinnerListModel() {
<span class="nc" id="L112">        this(new Object[]{&quot;empty&quot;});</span>
<span class="nc" id="L113">    }</span>


    /**
     * Returns the &lt;code&gt;List&lt;/code&gt; that defines the sequence for this model.
     *
     * @return the value of the &lt;code&gt;list&lt;/code&gt; property
     * @see #setList
     */
    public List&lt;?&gt; getList() {
<span class="nc" id="L123">        return list;</span>
    }


    /**
     * Changes the list that defines this sequence and resets the index
     * of the models &lt;code&gt;value&lt;/code&gt; to zero.  Note that &lt;code&gt;list&lt;/code&gt;
     * is not copied, the model just stores a reference to it.
     * &lt;p&gt;
     * This method fires a &lt;code&gt;ChangeEvent&lt;/code&gt; if &lt;code&gt;list&lt;/code&gt; is
     * not equal to the current list.
     *
     * @param list the sequence that this model represents
     * @throws IllegalArgumentException if &lt;code&gt;list&lt;/code&gt; is
     *    &lt;code&gt;null&lt;/code&gt; or zero length
     * @see #getList
     */
    public void setList(List&lt;?&gt; list) {
<span class="nc bnc" id="L141" title="All 4 branches missed.">        if ((list == null) || (list.size() == 0)) {</span>
<span class="nc" id="L142">            throw new IllegalArgumentException(&quot;invalid list&quot;);</span>
        }
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if (!list.equals(this.list)) {</span>
<span class="nc" id="L145">            this.list = list;</span>
<span class="nc" id="L146">            index = 0;</span>
<span class="nc" id="L147">            fireStateChanged();</span>
        }
<span class="nc" id="L149">    }</span>


    /**
     * Returns the current element of the sequence.
     *
     * @return the &lt;code&gt;value&lt;/code&gt; property
     * @see SpinnerModel#getValue
     * @see #setValue
     */
    public Object getValue() {
<span class="nc" id="L160">        return list.get(index);</span>
    }


    /**
     * Changes the current element of the sequence and notifies
     * &lt;code&gt;ChangeListeners&lt;/code&gt;.  If the specified
     * value is not equal to an element of the underlying sequence
     * then an &lt;code&gt;IllegalArgumentException&lt;/code&gt; is thrown.
     * In the following example the &lt;code&gt;setValue&lt;/code&gt; call
     * would cause an exception to be thrown:
     * &lt;pre&gt;
     * String[] values = {&quot;one&quot;, &quot;two&quot;, &quot;free&quot;, &quot;four&quot;};
     * SpinnerModel model = new SpinnerListModel(values);
     * model.setValue(&quot;TWO&quot;);
     * &lt;/pre&gt;
     *
     * @param elt the sequence element that will be model's current value
     * @throws IllegalArgumentException if the specified value isn't allowed
     * @see SpinnerModel#setValue
     * @see #getValue
     */
    public void setValue(Object elt) {
<span class="nc" id="L183">        int index = list.indexOf(elt);</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">        if (index == -1) {</span>
<span class="nc" id="L185">            throw new IllegalArgumentException(&quot;invalid sequence element&quot;);</span>
        }
<span class="nc bnc" id="L187" title="All 2 branches missed.">        else if (index != this.index) {</span>
<span class="nc" id="L188">            this.index = index;</span>
<span class="nc" id="L189">            fireStateChanged();</span>
        }
<span class="nc" id="L191">    }</span>


    /**
     * Returns the next legal value of the underlying sequence or
     * &lt;code&gt;null&lt;/code&gt; if value is already the last element.
     *
     * @return the next legal value of the underlying sequence or
     *     &lt;code&gt;null&lt;/code&gt; if value is already the last element
     * @see SpinnerModel#getNextValue
     * @see #getPreviousValue
     */
    public Object getNextValue() {
<span class="nc bnc" id="L204" title="All 2 branches missed.">        return (index &gt;= (list.size() - 1)) ? null : list.get(index + 1);</span>
    }


    /**
     * Returns the previous element of the underlying sequence or
     * &lt;code&gt;null&lt;/code&gt; if value is already the first element.
     *
     * @return the previous element of the underlying sequence or
     *     &lt;code&gt;null&lt;/code&gt; if value is already the first element
     * @see SpinnerModel#getPreviousValue
     * @see #getNextValue
     */
    public Object getPreviousValue() {
<span class="nc bnc" id="L218" title="All 2 branches missed.">        return (index &lt;= 0) ? null : list.get(index - 1);</span>
    }


    /**
     * Returns the next object that starts with &lt;code&gt;substring&lt;/code&gt;.
     *
     * @param substring the string to be matched
     * @return the match
     */
    Object findNextMatch(String substring) {
<span class="nc" id="L229">        int max = list.size();</span>

<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (max == 0) {</span>
<span class="nc" id="L232">            return null;</span>
        }
<span class="nc" id="L234">        int counter = index;</span>

        do {
<span class="nc" id="L237">            Object value = list.get(counter);</span>
<span class="nc" id="L238">            String string = value.toString();</span>

<span class="nc bnc" id="L240" title="All 4 branches missed.">            if (string != null &amp;&amp; string.startsWith(substring)) {</span>
<span class="nc" id="L241">                return value;</span>
            }
<span class="nc" id="L243">            counter = (counter + 1) % max;</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">        } while (counter != index);</span>
<span class="nc" id="L245">        return null;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>