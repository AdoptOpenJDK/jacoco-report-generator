<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>JScrollPane.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">JScrollPane.java</span></div><h1>JScrollPane.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing;

import javax.swing.plaf.*;
import javax.swing.border.*;
import javax.swing.event.*;
import javax.accessibility.*;

import java.awt.Component;
import java.awt.ComponentOrientation;
import java.awt.Rectangle;
import java.awt.Insets;
import java.awt.LayoutManager;
import java.awt.Point;

import java.io.ObjectOutputStream;
import java.io.IOException;

import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.Transient;

/**
 * Provides a scrollable view of a lightweight component.
 * A &lt;code&gt;JScrollPane&lt;/code&gt; manages a viewport, optional
 * vertical and horizontal scroll bars, and optional row and
 * column heading viewports.
 * You can find task-oriented documentation of &lt;code&gt;JScrollPane&lt;/code&gt; in
 *  &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html&quot;&gt;How to Use Scroll Panes&lt;/a&gt;,
 * a section in &lt;em&gt;The Java Tutorial&lt;/em&gt;.  Note that
 * &lt;code&gt;JScrollPane&lt;/code&gt; does not support heavyweight components.
 * &lt;p&gt;
 * &lt;TABLE STYLE=&quot;FLOAT:RIGHT&quot; BORDER=&quot;0&quot; SUMMARY=&quot;layout&quot;&gt;
 *    &lt;TR&gt;
 *    &lt;TD ALIGN=&quot;CENTER&quot;&gt;
 *      &lt;P STYLE=&quot;TEXT-ALIGN:CENTER&quot;&gt;&lt;IMG SRC=&quot;doc-files/JScrollPane-1.gif&quot;
 *      alt=&quot;The following text describes this image.&quot;
 *      WIDTH=&quot;256&quot; HEIGHT=&quot;248&quot; STYLE=&quot;FLOAT:BOTTOM; BORDER:0px&quot;&gt;
 *    &lt;/TD&gt;
 *    &lt;/TR&gt;
 * &lt;/TABLE&gt;
 * The &lt;code&gt;JViewport&lt;/code&gt; provides a window,
 * or &amp;quot;viewport&amp;quot; onto a data
 * source -- for example, a text file. That data source is the
 * &amp;quot;scrollable client&amp;quot; (aka data model) displayed by the
 * &lt;code&gt;JViewport&lt;/code&gt; view.
 * A &lt;code&gt;JScrollPane&lt;/code&gt; basically consists of &lt;code&gt;JScrollBar&lt;/code&gt;s,
 * a &lt;code&gt;JViewport&lt;/code&gt;, and the wiring between them,
 * as shown in the diagram at right.
 * &lt;p&gt;
 * In addition to the scroll bars and viewport,
 * a &lt;code&gt;JScrollPane&lt;/code&gt; can have a
 * column header and a row header. Each of these is a
 * &lt;code&gt;JViewport&lt;/code&gt; object that
 * you specify with &lt;code&gt;setRowHeaderView&lt;/code&gt;,
 * and &lt;code&gt;setColumnHeaderView&lt;/code&gt;.
 * The column header viewport automatically scrolls left and right, tracking
 * the left-right scrolling of the main viewport.
 * (It never scrolls vertically, however.)
 * The row header acts in a similar fashion.
 * &lt;p&gt;
 * Where two scroll bars meet, the row header meets the column header,
 * or a scroll bar meets one of the headers, both components stop short
 * of the corner, leaving a rectangular space which is, by default, empty.
 * These spaces can potentially exist in any number of the four corners.
 * In the previous diagram, the top right space is present and identified
 * by the label &quot;corner component&quot;.
 * &lt;p&gt;
 * Any number of these empty spaces can be replaced by using the
 * &lt;code&gt;setCorner&lt;/code&gt; method to add a component to a particular corner.
 * (Note: The same component cannot be added to multiple corners.)
 * This is useful if there's
 * some extra decoration or function you'd like to add to the scroll pane.
 * The size of each corner component is entirely determined by the size of the
 * headers and/or scroll bars that surround it.
 * &lt;p&gt;
 * A corner component will only be visible if there is an empty space in that
 * corner for it to exist in. For example, consider a component set into the
 * top right corner of a scroll pane with a column header. If the scroll pane's
 * vertical scrollbar is not present, perhaps because the view component hasn't
 * grown large enough to require it, then the corner component will not be
 * shown (since there is no empty space in that corner created by the meeting
 * of the header and vertical scroll bar). Forcing the scroll bar to always be
 * shown, using
 * &lt;code&gt;setVerticalScrollBarPolicy(VERTICAL_SCROLLBAR_ALWAYS)&lt;/code&gt;,
 * will ensure that the space for the corner component always exists.
 * &lt;p&gt;
 * To add a border around the main viewport,
 * you can use &lt;code&gt;setViewportBorder&lt;/code&gt;.
 * (Of course, you can also add a border around the whole scroll pane using
 * &lt;code&gt;setBorder&lt;/code&gt;.)
 * &lt;p&gt;
 * A common operation to want to do is to set the background color that will
 * be used if the main viewport view is smaller than the viewport, or is
 * not opaque. This can be accomplished by setting the background color
 * of the viewport, via &lt;code&gt;scrollPane.getViewport().setBackground()&lt;/code&gt;.
 * The reason for setting the color of the viewport and not the scrollpane
 * is that by default &lt;code&gt;JViewport&lt;/code&gt; is opaque
 * which, among other things, means it will completely fill
 * in its background using its background color.  Therefore when
 * &lt;code&gt;JScrollPane&lt;/code&gt; draws its background the viewport will
 * usually draw over it.
 * &lt;p&gt;
 * By default &lt;code&gt;JScrollPane&lt;/code&gt; uses &lt;code&gt;ScrollPaneLayout&lt;/code&gt;
 * to handle the layout of its child Components. &lt;code&gt;ScrollPaneLayout&lt;/code&gt;
 * determines the size to make the viewport view in one of two ways:
 * &lt;ol&gt;
 *   &lt;li&gt;If the view implements &lt;code&gt;Scrollable&lt;/code&gt;
 *       a combination of &lt;code&gt;getPreferredScrollableViewportSize&lt;/code&gt;,
 *       &lt;code&gt;getScrollableTracksViewportWidth&lt;/code&gt; and
 *       &lt;code&gt;getScrollableTracksViewportHeight&lt;/code&gt;is used, otherwise
 *   &lt;li&gt;&lt;code&gt;getPreferredSize&lt;/code&gt; is used.
 * &lt;/ol&gt;
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt; Swing is not thread safe. For more
 * information see &lt;a
 * href=&quot;package-summary.html#threading&quot;&gt;Swing's Threading
 * Policy&lt;/a&gt;.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @see JScrollBar
 * @see JViewport
 * @see ScrollPaneLayout
 * @see Scrollable
 * @see Component#getPreferredSize
 * @see #setViewportView
 * @see #setRowHeaderView
 * @see #setColumnHeaderView
 * @see #setCorner
 * @see #setViewportBorder
 *
 * @beaninfo
 *     attribute: isContainer true
 *     attribute: containerDelegate getViewport
 *   description: A specialized container that manages a viewport, optional scrollbars and headers
 *
 * @author Hans Muller
 */
public class JScrollPane extends JComponent implements ScrollPaneConstants, Accessible
{
    private Border viewportBorder;

    /**
     * @see #getUIClassID
     * @see #readObject
     */
    private static final String uiClassID = &quot;ScrollPaneUI&quot;;

    /**
     * The display policy for the vertical scrollbar.
     * The default is
     * &lt;code&gt;ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED&lt;/code&gt;.
     * @see #setVerticalScrollBarPolicy
     */
<span class="nc" id="L187">    protected int verticalScrollBarPolicy = VERTICAL_SCROLLBAR_AS_NEEDED;</span>


    /**
     * The display policy for the horizontal scrollbar.
     * The default is
     * &lt;code&gt;ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED&lt;/code&gt;.
     * @see #setHorizontalScrollBarPolicy
     */
<span class="nc" id="L196">    protected int horizontalScrollBarPolicy = HORIZONTAL_SCROLLBAR_AS_NEEDED;</span>


    /**
     * The scrollpane's viewport child.  Default is an empty
     * &lt;code&gt;JViewport&lt;/code&gt;.
     * @see #setViewport
     */
    protected JViewport viewport;


    /**
     * The scrollpane's vertical scrollbar child.
     * Default is a &lt;code&gt;JScrollBar&lt;/code&gt;.
     * @see #setVerticalScrollBar
     */
    protected JScrollBar verticalScrollBar;


    /**
     * The scrollpane's horizontal scrollbar child.
     * Default is a &lt;code&gt;JScrollBar&lt;/code&gt;.
     * @see #setHorizontalScrollBar
     */
    protected JScrollBar horizontalScrollBar;


    /**
     * The row header child.  Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setRowHeader
     */
    protected JViewport rowHeader;


    /**
     * The column header child.  Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setColumnHeader
     */
    protected JViewport columnHeader;


    /**
     * The component to display in the lower left corner.
     * Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setCorner
     */
    protected Component lowerLeft;


    /**
     * The component to display in the lower right corner.
     * Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setCorner
     */
    protected Component lowerRight;


    /**
     * The component to display in the upper left corner.
     * Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setCorner
     */
    protected Component upperLeft;


    /**
     * The component to display in the upper right corner.
     * Default is &lt;code&gt;null&lt;/code&gt;.
     * @see #setCorner
     */
    protected Component upperRight;

    /*
     * State flag for mouse wheel scrolling
     */
<span class="nc" id="L271">    private boolean wheelScrollState = true;</span>

    /**
     * Creates a &lt;code&gt;JScrollPane&lt;/code&gt; that displays the view
     * component in a viewport
     * whose view position can be controlled with a pair of scrollbars.
     * The scrollbar policies specify when the scrollbars are displayed,
     * For example, if &lt;code&gt;vsbPolicy&lt;/code&gt; is
     * &lt;code&gt;VERTICAL_SCROLLBAR_AS_NEEDED&lt;/code&gt;
     * then the vertical scrollbar only appears if the view doesn't fit
     * vertically. The available policy settings are listed at
     * {@link #setVerticalScrollBarPolicy} and
     * {@link #setHorizontalScrollBarPolicy}.
     *
     * @see #setViewportView
     *
     * @param view the component to display in the scrollpanes viewport
     * @param vsbPolicy an integer that specifies the vertical
     *          scrollbar policy
     * @param hsbPolicy an integer that specifies the horizontal
     *          scrollbar policy
     */
    public JScrollPane(Component view, int vsbPolicy, int hsbPolicy)
<span class="nc" id="L294">    {</span>
<span class="nc" id="L295">        setLayout(new ScrollPaneLayout.UIResource());</span>
<span class="nc" id="L296">        setVerticalScrollBarPolicy(vsbPolicy);</span>
<span class="nc" id="L297">        setHorizontalScrollBarPolicy(hsbPolicy);</span>
<span class="nc" id="L298">        setViewport(createViewport());</span>
<span class="nc" id="L299">        setVerticalScrollBar(createVerticalScrollBar());</span>
<span class="nc" id="L300">        setHorizontalScrollBar(createHorizontalScrollBar());</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">        if (view != null) {</span>
<span class="nc" id="L302">            setViewportView(view);</span>
        }
<span class="nc" id="L304">        setUIProperty(&quot;opaque&quot;,true);</span>
<span class="nc" id="L305">        updateUI();</span>

<span class="nc bnc" id="L307" title="All 2 branches missed.">        if (!this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L308">            viewport.setViewPosition(new Point(Integer.MAX_VALUE, 0));</span>
        }
<span class="nc" id="L310">    }</span>


    /**
     * Creates a &lt;code&gt;JScrollPane&lt;/code&gt; that displays the
     * contents of the specified
     * component, where both horizontal and vertical scrollbars appear
     * whenever the component's contents are larger than the view.
     *
     * @see #setViewportView
     * @param view the component to display in the scrollpane's viewport
     */
    public JScrollPane(Component view) {
<span class="nc" id="L323">        this(view, VERTICAL_SCROLLBAR_AS_NEEDED, HORIZONTAL_SCROLLBAR_AS_NEEDED);</span>
<span class="nc" id="L324">    }</span>


    /**
     * Creates an empty (no viewport view) &lt;code&gt;JScrollPane&lt;/code&gt;
     * with specified
     * scrollbar policies. The available policy settings are listed at
     * {@link #setVerticalScrollBarPolicy} and
     * {@link #setHorizontalScrollBarPolicy}.
     *
     * @see #setViewportView
     *
     * @param vsbPolicy an integer that specifies the vertical
     *          scrollbar policy
     * @param hsbPolicy an integer that specifies the horizontal
     *          scrollbar policy
     */
    public JScrollPane(int vsbPolicy, int hsbPolicy) {
<span class="nc" id="L342">        this(null, vsbPolicy, hsbPolicy);</span>
<span class="nc" id="L343">    }</span>


    /**
     * Creates an empty (no viewport view) &lt;code&gt;JScrollPane&lt;/code&gt;
     * where both horizontal and vertical scrollbars appear when needed.
     */
    public JScrollPane() {
<span class="nc" id="L351">        this(null, VERTICAL_SCROLLBAR_AS_NEEDED, HORIZONTAL_SCROLLBAR_AS_NEEDED);</span>
<span class="nc" id="L352">    }</span>


    /**
     * Returns the look and feel (L&amp;amp;F) object that renders this component.
     *
     * @return the &lt;code&gt;ScrollPaneUI&lt;/code&gt; object that renders this
     *                          component
     * @see #setUI
     * @beaninfo
     *        bound: true
     *       hidden: true
     *    attribute: visualUpdate true
     *  description: The UI object that implements the Component's LookAndFeel.
     */
    public ScrollPaneUI getUI() {
<span class="nc" id="L368">        return (ScrollPaneUI)ui;</span>
    }


    /**
     * Sets the &lt;code&gt;ScrollPaneUI&lt;/code&gt; object that provides the
     * look and feel (L&amp;amp;F) for this component.
     *
     * @param ui the &lt;code&gt;ScrollPaneUI&lt;/code&gt; L&amp;amp;F object
     * @see #getUI
     */
    public void setUI(ScrollPaneUI ui) {
<span class="nc" id="L380">        super.setUI(ui);</span>
<span class="nc" id="L381">    }</span>


    /**
     * Replaces the current &lt;code&gt;ScrollPaneUI&lt;/code&gt; object with a version
     * from the current default look and feel.
     * To be called when the default look and feel changes.
     *
     * @see JComponent#updateUI
     * @see UIManager#getUI
     */
    public void updateUI() {
<span class="nc" id="L393">        setUI((ScrollPaneUI)UIManager.getUI(this));</span>
<span class="nc" id="L394">    }</span>


    /**
     * Returns the suffix used to construct the name of the L&amp;amp;F class used to
     * render this component.
     *
     * @return the string &quot;ScrollPaneUI&quot;
     * @see JComponent#getUIClassID
     * @see UIDefaults#getUI
     *
     * @beaninfo
     *    hidden: true
     */
    public String getUIClassID() {
<span class="nc" id="L409">        return uiClassID;</span>
    }



    /**
     * Sets the layout manager for this &lt;code&gt;JScrollPane&lt;/code&gt;.
     * This method overrides &lt;code&gt;setLayout&lt;/code&gt; in
     * &lt;code&gt;java.awt.Container&lt;/code&gt; to ensure that only
     * &lt;code&gt;LayoutManager&lt;/code&gt;s which
     * are subclasses of &lt;code&gt;ScrollPaneLayout&lt;/code&gt; can be used in a
     * &lt;code&gt;JScrollPane&lt;/code&gt;. If &lt;code&gt;layout&lt;/code&gt; is non-null, this
     * will invoke &lt;code&gt;syncWithScrollPane&lt;/code&gt; on it.
     *
     * @param layout the specified layout manager
     * @exception ClassCastException if layout is not a
     *                  &lt;code&gt;ScrollPaneLayout&lt;/code&gt;
     * @see java.awt.Container#getLayout
     * @see java.awt.Container#setLayout
     *
     * @beaninfo
     *    hidden: true
     */
    public void setLayout(LayoutManager layout) {
<span class="nc bnc" id="L433" title="All 2 branches missed.">        if (layout instanceof ScrollPaneLayout) {</span>
<span class="nc" id="L434">            super.setLayout(layout);</span>
<span class="nc" id="L435">            ((ScrollPaneLayout)layout).syncWithScrollPane(this);</span>
        }
<span class="nc bnc" id="L437" title="All 2 branches missed.">        else if (layout == null) {</span>
<span class="nc" id="L438">            super.setLayout(layout);</span>
        }
        else {
<span class="nc" id="L441">            String s = &quot;layout of JScrollPane must be a ScrollPaneLayout&quot;;</span>
<span class="nc" id="L442">            throw new ClassCastException(s);</span>
        }
<span class="nc" id="L444">    }</span>

    /**
     * Overridden to return true so that any calls to &lt;code&gt;revalidate&lt;/code&gt;
     * on any descendants of this &lt;code&gt;JScrollPane&lt;/code&gt; will cause the
     * entire tree beginning with this &lt;code&gt;JScrollPane&lt;/code&gt; to be
     * validated.
     *
     * @return true
     * @see java.awt.Container#validate
     * @see JComponent#revalidate
     * @see JComponent#isValidateRoot
     * @see java.awt.Container#isValidateRoot
     *
     * @beaninfo
     *    hidden: true
     */
    @Override
    public boolean isValidateRoot() {
<span class="nc" id="L463">        return true;</span>
    }


    /**
     * Returns the vertical scroll bar policy value.
     * @return the &lt;code&gt;verticalScrollBarPolicy&lt;/code&gt; property
     * @see #setVerticalScrollBarPolicy
     */
    public int getVerticalScrollBarPolicy() {
<span class="nc" id="L473">        return verticalScrollBarPolicy;</span>
    }


    /**
     * Determines when the vertical scrollbar appears in the scrollpane.
     * Legal values are:
     * &lt;ul&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED&lt;/code&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER&lt;/code&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS&lt;/code&gt;
     * &lt;/ul&gt;
     *
     * @param policy one of the three values listed above
     * @exception IllegalArgumentException if &lt;code&gt;policy&lt;/code&gt;
     *                          is not one of the legal values shown above
     * @see #getVerticalScrollBarPolicy
     *
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The scrollpane vertical scrollbar policy
     *        enum: VERTICAL_SCROLLBAR_AS_NEEDED ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED
     *              VERTICAL_SCROLLBAR_NEVER ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER
     *              VERTICAL_SCROLLBAR_ALWAYS ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS
     */
    public void setVerticalScrollBarPolicy(int policy) {
<span class="nc bnc" id="L500" title="All 2 branches missed.">        switch (policy) {</span>
        case VERTICAL_SCROLLBAR_AS_NEEDED:
        case VERTICAL_SCROLLBAR_NEVER:
        case VERTICAL_SCROLLBAR_ALWAYS:
<span class="nc" id="L504">                break;</span>
        default:
<span class="nc" id="L506">            throw new IllegalArgumentException(&quot;invalid verticalScrollBarPolicy&quot;);</span>
        }
<span class="nc" id="L508">        int old = verticalScrollBarPolicy;</span>
<span class="nc" id="L509">        verticalScrollBarPolicy = policy;</span>
<span class="nc" id="L510">        firePropertyChange(&quot;verticalScrollBarPolicy&quot;, old, policy);</span>
<span class="nc" id="L511">        revalidate();</span>
<span class="nc" id="L512">        repaint();</span>
<span class="nc" id="L513">    }</span>


    /**
     * Returns the horizontal scroll bar policy value.
     * @return the &lt;code&gt;horizontalScrollBarPolicy&lt;/code&gt; property
     * @see #setHorizontalScrollBarPolicy
     */
    public int getHorizontalScrollBarPolicy() {
<span class="nc" id="L522">        return horizontalScrollBarPolicy;</span>
    }


    /**
     * Determines when the horizontal scrollbar appears in the scrollpane.
     * The options are:&lt;ul&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED&lt;/code&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER&lt;/code&gt;
     * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS&lt;/code&gt;
     * &lt;/ul&gt;
     *
     * @param policy one of the three values listed above
     * @exception IllegalArgumentException if &lt;code&gt;policy&lt;/code&gt;
     *                          is not one of the legal values shown above
     * @see #getHorizontalScrollBarPolicy
     *
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The scrollpane scrollbar policy
     *        enum: HORIZONTAL_SCROLLBAR_AS_NEEDED ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED
     *              HORIZONTAL_SCROLLBAR_NEVER ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER
     *              HORIZONTAL_SCROLLBAR_ALWAYS ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS
     */
    public void setHorizontalScrollBarPolicy(int policy) {
<span class="nc bnc" id="L548" title="All 2 branches missed.">        switch (policy) {</span>
        case HORIZONTAL_SCROLLBAR_AS_NEEDED:
        case HORIZONTAL_SCROLLBAR_NEVER:
        case HORIZONTAL_SCROLLBAR_ALWAYS:
<span class="nc" id="L552">                break;</span>
        default:
<span class="nc" id="L554">            throw new IllegalArgumentException(&quot;invalid horizontalScrollBarPolicy&quot;);</span>
        }
<span class="nc" id="L556">        int old = horizontalScrollBarPolicy;</span>
<span class="nc" id="L557">        horizontalScrollBarPolicy = policy;</span>
<span class="nc" id="L558">        firePropertyChange(&quot;horizontalScrollBarPolicy&quot;, old, policy);</span>
<span class="nc" id="L559">        revalidate();</span>
<span class="nc" id="L560">        repaint();</span>
<span class="nc" id="L561">    }</span>


    /**
     * Returns the &lt;code&gt;Border&lt;/code&gt; object that surrounds the viewport.
     *
     * @return the &lt;code&gt;viewportBorder&lt;/code&gt; property
     * @see #setViewportBorder
     */
    public Border getViewportBorder() {
<span class="nc" id="L571">        return viewportBorder;</span>
    }


    /**
     * Adds a border around the viewport.  Note that the border isn't
     * set on the viewport directly, &lt;code&gt;JViewport&lt;/code&gt; doesn't support
     * the &lt;code&gt;JComponent&lt;/code&gt; border property.
     * Similarly setting the &lt;code&gt;JScrollPane&lt;/code&gt;s
     * viewport doesn't affect the &lt;code&gt;viewportBorder&lt;/code&gt; property.
     * &lt;p&gt;
     * The default value of this property is computed by the look
     * and feel implementation.
     *
     * @param viewportBorder the border to be added
     * @see #getViewportBorder
     * @see #setViewport
     *
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The border around the viewport.
     */
    public void setViewportBorder(Border viewportBorder) {
<span class="nc" id="L595">        Border oldValue = this.viewportBorder;</span>
<span class="nc" id="L596">        this.viewportBorder = viewportBorder;</span>
<span class="nc" id="L597">        firePropertyChange(&quot;viewportBorder&quot;, oldValue, viewportBorder);</span>
<span class="nc" id="L598">    }</span>


    /**
     * Returns the bounds of the viewport's border.
     *
     * @return a &lt;code&gt;Rectangle&lt;/code&gt; object specifying the viewport border
     */
    public Rectangle getViewportBorderBounds()
    {
<span class="nc" id="L608">        Rectangle borderR = new Rectangle(getSize());</span>

<span class="nc" id="L610">        Insets insets = getInsets();</span>
<span class="nc" id="L611">        borderR.x = insets.left;</span>
<span class="nc" id="L612">        borderR.y = insets.top;</span>
<span class="nc" id="L613">        borderR.width -= insets.left + insets.right;</span>
<span class="nc" id="L614">        borderR.height -= insets.top + insets.bottom;</span>

<span class="nc" id="L616">        boolean leftToRight = SwingUtilities.isLeftToRight(this);</span>

        /* If there's a visible column header remove the space it
         * needs from the top of borderR.
         */

<span class="nc" id="L622">        JViewport colHead = getColumnHeader();</span>
<span class="nc bnc" id="L623" title="All 4 branches missed.">        if ((colHead != null) &amp;&amp; (colHead.isVisible())) {</span>
<span class="nc" id="L624">            int colHeadHeight = colHead.getHeight();</span>
<span class="nc" id="L625">            borderR.y += colHeadHeight;</span>
<span class="nc" id="L626">            borderR.height -= colHeadHeight;</span>
        }

        /* If there's a visible row header remove the space it needs
         * from the left of borderR.
         */

<span class="nc" id="L633">        JViewport rowHead = getRowHeader();</span>
<span class="nc bnc" id="L634" title="All 4 branches missed.">        if ((rowHead != null) &amp;&amp; (rowHead.isVisible())) {</span>
<span class="nc" id="L635">            int rowHeadWidth = rowHead.getWidth();</span>
<span class="nc bnc" id="L636" title="All 2 branches missed.">            if ( leftToRight ) {</span>
<span class="nc" id="L637">                borderR.x += rowHeadWidth;</span>
            }
<span class="nc" id="L639">            borderR.width -= rowHeadWidth;</span>
        }

        /* If there's a visible vertical scrollbar remove the space it needs
         * from the width of borderR.
         */
<span class="nc" id="L645">        JScrollBar vsb = getVerticalScrollBar();</span>
<span class="nc bnc" id="L646" title="All 4 branches missed.">        if ((vsb != null) &amp;&amp; (vsb.isVisible())) {</span>
<span class="nc" id="L647">            int vsbWidth = vsb.getWidth();</span>
<span class="nc bnc" id="L648" title="All 2 branches missed.">            if ( !leftToRight ) {</span>
<span class="nc" id="L649">                borderR.x += vsbWidth;</span>
            }
<span class="nc" id="L651">            borderR.width -= vsbWidth;</span>
        }

        /* If there's a visible horizontal scrollbar remove the space it needs
         * from the height of borderR.
         */
<span class="nc" id="L657">        JScrollBar hsb = getHorizontalScrollBar();</span>
<span class="nc bnc" id="L658" title="All 4 branches missed.">        if ((hsb != null) &amp;&amp; (hsb.isVisible())) {</span>
<span class="nc" id="L659">            borderR.height -= hsb.getHeight();</span>
        }

<span class="nc" id="L662">        return borderR;</span>
    }


    /**
     * By default &lt;code&gt;JScrollPane&lt;/code&gt; creates scrollbars
     * that are instances
     * of this class.  &lt;code&gt;Scrollbar&lt;/code&gt; overrides the
     * &lt;code&gt;getUnitIncrement&lt;/code&gt; and &lt;code&gt;getBlockIncrement&lt;/code&gt;
     * methods so that, if the viewport's view is a &lt;code&gt;Scrollable&lt;/code&gt;,
     * the view is asked to compute these values. Unless
     * the unit/block increment have been explicitly set.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     *
     * @see Scrollable
     * @see JScrollPane#createVerticalScrollBar
     * @see JScrollPane#createHorizontalScrollBar
     */
    protected class ScrollBar extends JScrollBar implements UIResource
    {
        /**
         * Set to true when the unit increment has been explicitly set.
         * If this is false the viewport's view is obtained and if it
         * is an instance of &lt;code&gt;Scrollable&lt;/code&gt; the unit increment
         * from it is used.
         */
        private boolean unitIncrementSet;
        /**
         * Set to true when the block increment has been explicitly set.
         * If this is false the viewport's view is obtained and if it
         * is an instance of &lt;code&gt;Scrollable&lt;/code&gt; the block increment
         * from it is used.
         */
        private boolean blockIncrementSet;

        /**
         * Creates a scrollbar with the specified orientation.
         * The options are:
         * &lt;ul&gt;
         * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.VERTICAL&lt;/code&gt;
         * &lt;li&gt;&lt;code&gt;ScrollPaneConstants.HORIZONTAL&lt;/code&gt;
         * &lt;/ul&gt;
         *
         * @param orientation  an integer specifying one of the legal
         *      orientation values shown above
         * @since 1.4
         */
<span class="nc" id="L717">        public ScrollBar(int orientation) {</span>
<span class="nc" id="L718">            super(orientation);</span>
<span class="nc" id="L719">            this.putClientProperty(&quot;JScrollBar.fastWheelScrolling&quot;,</span>
                                   Boolean.TRUE);
<span class="nc" id="L721">        }</span>

        /**
         * Messages super to set the value, and resets the
         * &lt;code&gt;unitIncrementSet&lt;/code&gt; instance variable to true.
         *
         * @param unitIncrement the new unit increment value, in pixels
         */
        public void setUnitIncrement(int unitIncrement) {
<span class="nc" id="L730">            unitIncrementSet = true;</span>
<span class="nc" id="L731">            this.putClientProperty(&quot;JScrollBar.fastWheelScrolling&quot;, null);</span>
<span class="nc" id="L732">            super.setUnitIncrement(unitIncrement);</span>
<span class="nc" id="L733">        }</span>

        /**
         * Computes the unit increment for scrolling if the viewport's
         * view is a &lt;code&gt;Scrollable&lt;/code&gt; object.
         * Otherwise return &lt;code&gt;super.getUnitIncrement&lt;/code&gt;.
         *
         * @param direction less than zero to scroll up/left,
         *      greater than zero for down/right
         * @return an integer, in pixels, containing the unit increment
         * @see Scrollable#getScrollableUnitIncrement
         */
        public int getUnitIncrement(int direction) {
<span class="nc" id="L746">            JViewport vp = getViewport();</span>
<span class="nc bnc" id="L747" title="All 4 branches missed.">            if (!unitIncrementSet &amp;&amp; (vp != null) &amp;&amp;</span>
<span class="nc bnc" id="L748" title="All 2 branches missed.">                (vp.getView() instanceof Scrollable)) {</span>
<span class="nc" id="L749">                Scrollable view = (Scrollable)(vp.getView());</span>
<span class="nc" id="L750">                Rectangle vr = vp.getViewRect();</span>
<span class="nc" id="L751">                return view.getScrollableUnitIncrement(vr, getOrientation(), direction);</span>
            }
            else {
<span class="nc" id="L754">                return super.getUnitIncrement(direction);</span>
            }
        }

        /**
         * Messages super to set the value, and resets the
         * &lt;code&gt;blockIncrementSet&lt;/code&gt; instance variable to true.
         *
         * @param blockIncrement the new block increment value, in pixels
         */
        public void setBlockIncrement(int blockIncrement) {
<span class="nc" id="L765">            blockIncrementSet = true;</span>
<span class="nc" id="L766">            this.putClientProperty(&quot;JScrollBar.fastWheelScrolling&quot;, null);</span>
<span class="nc" id="L767">            super.setBlockIncrement(blockIncrement);</span>
<span class="nc" id="L768">        }</span>

        /**
         * Computes the block increment for scrolling if the viewport's
         * view is a &lt;code&gt;Scrollable&lt;/code&gt; object.  Otherwise
         * the &lt;code&gt;blockIncrement&lt;/code&gt; equals the viewport's width
         * or height.  If there's no viewport return
         * &lt;code&gt;super.getBlockIncrement&lt;/code&gt;.
         *
         * @param direction less than zero to scroll up/left,
         *      greater than zero for down/right
         * @return an integer, in pixels, containing the block increment
         * @see Scrollable#getScrollableBlockIncrement
         */
        public int getBlockIncrement(int direction) {
<span class="nc" id="L783">            JViewport vp = getViewport();</span>
<span class="nc bnc" id="L784" title="All 4 branches missed.">            if (blockIncrementSet || vp == null) {</span>
<span class="nc" id="L785">                return super.getBlockIncrement(direction);</span>
            }
<span class="nc bnc" id="L787" title="All 2 branches missed.">            else if (vp.getView() instanceof Scrollable) {</span>
<span class="nc" id="L788">                Scrollable view = (Scrollable)(vp.getView());</span>
<span class="nc" id="L789">                Rectangle vr = vp.getViewRect();</span>
<span class="nc" id="L790">                return view.getScrollableBlockIncrement(vr, getOrientation(), direction);</span>
            }
<span class="nc bnc" id="L792" title="All 2 branches missed.">            else if (getOrientation() == VERTICAL) {</span>
<span class="nc" id="L793">                return vp.getExtentSize().height;</span>
            }
            else {
<span class="nc" id="L796">                return vp.getExtentSize().width;</span>
            }
        }

    }


    /**
     * Returns a &lt;code&gt;JScrollPane.ScrollBar&lt;/code&gt; by default.
     * Subclasses may override this method to force &lt;code&gt;ScrollPaneUI&lt;/code&gt;
     * implementations to use a &lt;code&gt;JScrollBar&lt;/code&gt; subclass.
     * Used by &lt;code&gt;ScrollPaneUI&lt;/code&gt; implementations to
     * create the horizontal scrollbar.
     *
     * @return a &lt;code&gt;JScrollBar&lt;/code&gt; with a horizontal orientation
     * @see JScrollBar
     */
    public JScrollBar createHorizontalScrollBar() {
<span class="nc" id="L814">        return new ScrollBar(JScrollBar.HORIZONTAL);</span>
    }


    /**
     * Returns the horizontal scroll bar that controls the viewport's
     * horizontal view position.
     *
     * @return the &lt;code&gt;horizontalScrollBar&lt;/code&gt; property
     * @see #setHorizontalScrollBar
     */
    @Transient
    public JScrollBar getHorizontalScrollBar() {
<span class="nc" id="L827">        return horizontalScrollBar;</span>
    }


    /**
     * Adds the scrollbar that controls the viewport's horizontal view
     * position to the scrollpane.
     * This is usually unnecessary, as &lt;code&gt;JScrollPane&lt;/code&gt; creates
     * horizontal and vertical scrollbars by default.
     *
     * @param horizontalScrollBar the horizontal scrollbar to be added
     * @see #createHorizontalScrollBar
     * @see #getHorizontalScrollBar
     *
     * @beaninfo
     *        expert: true
     *         bound: true
     *   description: The horizontal scrollbar.
     */
    public void setHorizontalScrollBar(JScrollBar horizontalScrollBar) {
<span class="nc" id="L847">        JScrollBar old = getHorizontalScrollBar();</span>
<span class="nc" id="L848">        this.horizontalScrollBar = horizontalScrollBar;</span>
<span class="nc bnc" id="L849" title="All 2 branches missed.">        if (horizontalScrollBar != null) {</span>
<span class="nc" id="L850">            add(horizontalScrollBar, HORIZONTAL_SCROLLBAR);</span>
        }
<span class="nc bnc" id="L852" title="All 2 branches missed.">        else if (old != null) {</span>
<span class="nc" id="L853">            remove(old);</span>
        }
<span class="nc" id="L855">        firePropertyChange(&quot;horizontalScrollBar&quot;, old, horizontalScrollBar);</span>

<span class="nc" id="L857">        revalidate();</span>
<span class="nc" id="L858">        repaint();</span>
<span class="nc" id="L859">    }</span>


    /**
     * Returns a &lt;code&gt;JScrollPane.ScrollBar&lt;/code&gt; by default.  Subclasses
     * may override this method to force &lt;code&gt;ScrollPaneUI&lt;/code&gt;
     * implementations to use a &lt;code&gt;JScrollBar&lt;/code&gt; subclass.
     * Used by &lt;code&gt;ScrollPaneUI&lt;/code&gt; implementations to create the
     * vertical scrollbar.
     *
     * @return a &lt;code&gt;JScrollBar&lt;/code&gt; with a vertical orientation
     * @see JScrollBar
     */
    public JScrollBar createVerticalScrollBar() {
<span class="nc" id="L873">        return new ScrollBar(JScrollBar.VERTICAL);</span>
    }


    /**
     * Returns the vertical scroll bar that controls the viewports
     * vertical view position.
     *
     * @return the &lt;code&gt;verticalScrollBar&lt;/code&gt; property
     * @see #setVerticalScrollBar
     */
    @Transient
    public JScrollBar getVerticalScrollBar() {
<span class="nc" id="L886">        return verticalScrollBar;</span>
    }


    /**
     * Adds the scrollbar that controls the viewports vertical view position
     * to the scrollpane.  This is usually unnecessary,
     * as &lt;code&gt;JScrollPane&lt;/code&gt; creates vertical and
     * horizontal scrollbars by default.
     *
     * @param verticalScrollBar the new vertical scrollbar to be added
     * @see #createVerticalScrollBar
     * @see #getVerticalScrollBar
     *
     * @beaninfo
     *        expert: true
     *         bound: true
     *   description: The vertical scrollbar.
     */
    public void setVerticalScrollBar(JScrollBar verticalScrollBar) {
<span class="nc" id="L906">        JScrollBar old = getVerticalScrollBar();</span>
<span class="nc" id="L907">        this.verticalScrollBar = verticalScrollBar;</span>
<span class="nc" id="L908">        add(verticalScrollBar, VERTICAL_SCROLLBAR);</span>
<span class="nc" id="L909">        firePropertyChange(&quot;verticalScrollBar&quot;, old, verticalScrollBar);</span>

<span class="nc" id="L911">        revalidate();</span>
<span class="nc" id="L912">        repaint();</span>
<span class="nc" id="L913">    }</span>


    /**
     * Returns a new &lt;code&gt;JViewport&lt;/code&gt; by default.
     * Used to create the
     * viewport (as needed) in &lt;code&gt;setViewportView&lt;/code&gt;,
     * &lt;code&gt;setRowHeaderView&lt;/code&gt;, and &lt;code&gt;setColumnHeaderView&lt;/code&gt;.
     * Subclasses may override this method to return a subclass of
     * &lt;code&gt;JViewport&lt;/code&gt;.
     *
     * @return a new &lt;code&gt;JViewport&lt;/code&gt;
     */
    protected JViewport createViewport() {
<span class="nc" id="L927">        return new JViewport();</span>
    }


    /**
     * Returns the current &lt;code&gt;JViewport&lt;/code&gt;.
     *
     * @see #setViewport
     * @return the &lt;code&gt;viewport&lt;/code&gt; property
     */
    public JViewport getViewport() {
<span class="nc" id="L938">        return viewport;</span>
    }


    /**
     * Removes the old viewport (if there is one); forces the
     * viewPosition of the new viewport to be in the +x,+y quadrant;
     * syncs up the row and column headers (if there are any) with the
     * new viewport; and finally syncs the scrollbars and
     * headers with the new viewport.
     * &lt;p&gt;
     * Most applications will find it more convenient to use
     * &lt;code&gt;setViewportView&lt;/code&gt;
     * to add a viewport and a view to the scrollpane.
     *
     * @param viewport the new viewport to be used; if viewport is
     *          &lt;code&gt;null&lt;/code&gt;, the old viewport is still removed
     *          and the new viewport is set to &lt;code&gt;null&lt;/code&gt;
     * @see #createViewport
     * @see #getViewport
     * @see #setViewportView
     *
     * @beaninfo
     *       expert: true
     *        bound: true
     *    attribute: visualUpdate true
     *  description: The viewport child for this scrollpane
     *
     */
    public void setViewport(JViewport viewport) {
<span class="nc" id="L968">        JViewport old = getViewport();</span>
<span class="nc" id="L969">        this.viewport = viewport;</span>
<span class="nc bnc" id="L970" title="All 2 branches missed.">        if (viewport != null) {</span>
<span class="nc" id="L971">            add(viewport, VIEWPORT);</span>
        }
<span class="nc bnc" id="L973" title="All 2 branches missed.">        else if (old != null) {</span>
<span class="nc" id="L974">            remove(old);</span>
        }
<span class="nc" id="L976">        firePropertyChange(&quot;viewport&quot;, old, viewport);</span>

<span class="nc bnc" id="L978" title="All 2 branches missed.">        if (accessibleContext != null) {</span>
<span class="nc" id="L979">            ((AccessibleJScrollPane)accessibleContext).resetViewPort();</span>
        }

<span class="nc" id="L982">        revalidate();</span>
<span class="nc" id="L983">        repaint();</span>
<span class="nc" id="L984">    }</span>


    /**
     * Creates a viewport if necessary and then sets its view.  Applications
     * that don't provide the view directly to the &lt;code&gt;JScrollPane&lt;/code&gt;
     * constructor
     * should use this method to specify the scrollable child that's going
     * to be displayed in the scrollpane. For example:
     * &lt;pre&gt;
     * JScrollPane scrollpane = new JScrollPane();
     * scrollpane.setViewportView(myBigComponentToScroll);
     * &lt;/pre&gt;
     * Applications should not add children directly to the scrollpane.
     *
     * @param view the component to add to the viewport
     * @see #setViewport
     * @see JViewport#setView
     */
    public void setViewportView(Component view) {
<span class="nc bnc" id="L1004" title="All 2 branches missed.">        if (getViewport() == null) {</span>
<span class="nc" id="L1005">            setViewport(createViewport());</span>
        }
<span class="nc" id="L1007">        getViewport().setView(view);</span>
<span class="nc" id="L1008">    }</span>



    /**
     * Returns the row header.
     * @return the &lt;code&gt;rowHeader&lt;/code&gt; property
     * @see #setRowHeader
     */
    @Transient
    public JViewport getRowHeader() {
<span class="nc" id="L1019">        return rowHeader;</span>
    }


    /**
     * Removes the old rowHeader, if it exists; if the new rowHeader
     * isn't &lt;code&gt;null&lt;/code&gt;, syncs the y coordinate of its
     * viewPosition with
     * the viewport (if there is one) and then adds it to the scroll pane.
     * &lt;p&gt;
     * Most applications will find it more convenient to use
     * &lt;code&gt;setRowHeaderView&lt;/code&gt;
     * to add a row header component and its viewport to the scroll pane.
     *
     * @param rowHeader the new row header to be used; if &lt;code&gt;null&lt;/code&gt;
     *          the old row header is still removed and the new rowHeader
     *          is set to &lt;code&gt;null&lt;/code&gt;
     * @see #getRowHeader
     * @see #setRowHeaderView
     *
     * @beaninfo
     *        bound: true
     *       expert: true
     *  description: The row header child for this scrollpane
     */
    public void setRowHeader(JViewport rowHeader) {
<span class="nc" id="L1045">        JViewport old = getRowHeader();</span>
<span class="nc" id="L1046">        this.rowHeader = rowHeader;</span>
<span class="nc bnc" id="L1047" title="All 2 branches missed.">        if (rowHeader != null) {</span>
<span class="nc" id="L1048">            add(rowHeader, ROW_HEADER);</span>
        }
<span class="nc bnc" id="L1050" title="All 2 branches missed.">        else if (old != null) {</span>
<span class="nc" id="L1051">            remove(old);</span>
        }
<span class="nc" id="L1053">        firePropertyChange(&quot;rowHeader&quot;, old, rowHeader);</span>
<span class="nc" id="L1054">        revalidate();</span>
<span class="nc" id="L1055">        repaint();</span>
<span class="nc" id="L1056">    }</span>


    /**
     * Creates a row-header viewport if necessary, sets
     * its view and then adds the row-header viewport
     * to the scrollpane.  For example:
     * &lt;pre&gt;
     * JScrollPane scrollpane = new JScrollPane();
     * scrollpane.setViewportView(myBigComponentToScroll);
     * scrollpane.setRowHeaderView(myBigComponentsRowHeader);
     * &lt;/pre&gt;
     *
     * @see #setRowHeader
     * @see JViewport#setView
     * @param view the component to display as the row header
     */
    public void setRowHeaderView(Component view) {
<span class="nc bnc" id="L1074" title="All 2 branches missed.">        if (getRowHeader() == null) {</span>
<span class="nc" id="L1075">            setRowHeader(createViewport());</span>
        }
<span class="nc" id="L1077">        getRowHeader().setView(view);</span>
<span class="nc" id="L1078">    }</span>



    /**
     * Returns the column header.
     * @return the &lt;code&gt;columnHeader&lt;/code&gt; property
     * @see #setColumnHeader
     */
    @Transient
    public JViewport getColumnHeader() {
<span class="nc" id="L1089">        return columnHeader;</span>
    }


    /**
     * Removes the old columnHeader, if it exists; if the new columnHeader
     * isn't &lt;code&gt;null&lt;/code&gt;, syncs the x coordinate of its viewPosition
     * with the viewport (if there is one) and then adds it to the scroll pane.
     * &lt;p&gt;
     * Most applications will find it more convenient to use
     * &lt;code&gt;setColumnHeaderView&lt;/code&gt;
     * to add a column header component and its viewport to the scroll pane.
     *
     * @see #getColumnHeader
     * @see #setColumnHeaderView
     *
     * @beaninfo
     *        bound: true
     *  description: The column header child for this scrollpane
     *    attribute: visualUpdate true
     */
    public void setColumnHeader(JViewport columnHeader) {
<span class="nc" id="L1111">        JViewport old = getColumnHeader();</span>
<span class="nc" id="L1112">        this.columnHeader = columnHeader;</span>
<span class="nc bnc" id="L1113" title="All 2 branches missed.">        if (columnHeader != null) {</span>
<span class="nc" id="L1114">            add(columnHeader, COLUMN_HEADER);</span>
        }
<span class="nc bnc" id="L1116" title="All 2 branches missed.">        else if (old != null) {</span>
<span class="nc" id="L1117">            remove(old);</span>
        }
<span class="nc" id="L1119">        firePropertyChange(&quot;columnHeader&quot;, old, columnHeader);</span>

<span class="nc" id="L1121">        revalidate();</span>
<span class="nc" id="L1122">        repaint();</span>
<span class="nc" id="L1123">    }</span>



    /**
     * Creates a column-header viewport if necessary, sets
     * its view, and then adds the column-header viewport
     * to the scrollpane.  For example:
     * &lt;pre&gt;
     * JScrollPane scrollpane = new JScrollPane();
     * scrollpane.setViewportView(myBigComponentToScroll);
     * scrollpane.setColumnHeaderView(myBigComponentsColumnHeader);
     * &lt;/pre&gt;
     *
     * @see #setColumnHeader
     * @see JViewport#setView
     *
     * @param view the component to display as the column header
     */
    public void setColumnHeaderView(Component view) {
<span class="nc bnc" id="L1143" title="All 2 branches missed.">        if (getColumnHeader() == null) {</span>
<span class="nc" id="L1144">            setColumnHeader(createViewport());</span>
        }
<span class="nc" id="L1146">        getColumnHeader().setView(view);</span>
<span class="nc" id="L1147">    }</span>


    /**
     * Returns the component at the specified corner. The
     * &lt;code&gt;key&lt;/code&gt; value specifying the corner is one of:
     * &lt;ul&gt;
     * &lt;li&gt;ScrollPaneConstants.LOWER_LEFT_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_RIGHT_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_LEFT_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_RIGHT_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_LEADING_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_TRAILING_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_LEADING_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_TRAILING_CORNER
     * &lt;/ul&gt;
     *
     * @param key one of the values as shown above
     * @return the corner component (which may be &lt;code&gt;null&lt;/code&gt;)
     *         identified by the given key, or &lt;code&gt;null&lt;/code&gt;
     *         if the key is invalid
     * @see #setCorner
     */
    public Component getCorner(String key) {
<span class="nc" id="L1171">        boolean isLeftToRight = getComponentOrientation().isLeftToRight();</span>
<span class="nc bnc" id="L1172" title="All 2 branches missed.">        if (key.equals(LOWER_LEADING_CORNER)) {</span>
<span class="nc bnc" id="L1173" title="All 2 branches missed.">            key = isLeftToRight ? LOWER_LEFT_CORNER : LOWER_RIGHT_CORNER;</span>
<span class="nc bnc" id="L1174" title="All 2 branches missed.">        } else if (key.equals(LOWER_TRAILING_CORNER)) {</span>
<span class="nc bnc" id="L1175" title="All 2 branches missed.">            key = isLeftToRight ? LOWER_RIGHT_CORNER : LOWER_LEFT_CORNER;</span>
<span class="nc bnc" id="L1176" title="All 2 branches missed.">        } else if (key.equals(UPPER_LEADING_CORNER)) {</span>
<span class="nc bnc" id="L1177" title="All 2 branches missed.">            key = isLeftToRight ? UPPER_LEFT_CORNER : UPPER_RIGHT_CORNER;</span>
<span class="nc bnc" id="L1178" title="All 2 branches missed.">        } else if (key.equals(UPPER_TRAILING_CORNER)) {</span>
<span class="nc bnc" id="L1179" title="All 2 branches missed.">            key = isLeftToRight ? UPPER_RIGHT_CORNER : UPPER_LEFT_CORNER;</span>
        }
<span class="nc bnc" id="L1181" title="All 2 branches missed.">        if (key.equals(LOWER_LEFT_CORNER)) {</span>
<span class="nc" id="L1182">            return lowerLeft;</span>
        }
<span class="nc bnc" id="L1184" title="All 2 branches missed.">        else if (key.equals(LOWER_RIGHT_CORNER)) {</span>
<span class="nc" id="L1185">            return lowerRight;</span>
        }
<span class="nc bnc" id="L1187" title="All 2 branches missed.">        else if (key.equals(UPPER_LEFT_CORNER)) {</span>
<span class="nc" id="L1188">            return upperLeft;</span>
        }
<span class="nc bnc" id="L1190" title="All 2 branches missed.">        else if (key.equals(UPPER_RIGHT_CORNER)) {</span>
<span class="nc" id="L1191">            return upperRight;</span>
        }
        else {
<span class="nc" id="L1194">            return null;</span>
        }
    }


    /**
     * Adds a child that will appear in one of the scroll panes
     * corners, if there's room.   For example with both scrollbars
     * showing (on the right and bottom edges of the scrollpane)
     * the lower left corner component will be shown in the space
     * between ends of the two scrollbars. Legal values for
     * the &lt;b&gt;key&lt;/b&gt; are:
     * &lt;ul&gt;
     * &lt;li&gt;ScrollPaneConstants.LOWER_LEFT_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_RIGHT_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_LEFT_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_RIGHT_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_LEADING_CORNER
     * &lt;li&gt;ScrollPaneConstants.LOWER_TRAILING_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_LEADING_CORNER
     * &lt;li&gt;ScrollPaneConstants.UPPER_TRAILING_CORNER
     * &lt;/ul&gt;
     * &lt;p&gt;
     * Although &quot;corner&quot; doesn't match any beans property
     * signature, &lt;code&gt;PropertyChange&lt;/code&gt; events are generated with the
     * property name set to the corner key.
     *
     * @param key identifies which corner the component will appear in
     * @param corner one of the following components:
     * &lt;ul&gt;
     * &lt;li&gt;lowerLeft
     * &lt;li&gt;lowerRight
     * &lt;li&gt;upperLeft
     * &lt;li&gt;upperRight
     * &lt;/ul&gt;
     * @exception IllegalArgumentException if corner key is invalid
     */
    public void setCorner(String key, Component corner)
    {
        Component old;
<span class="nc" id="L1234">        boolean isLeftToRight = getComponentOrientation().isLeftToRight();</span>
<span class="nc bnc" id="L1235" title="All 2 branches missed.">        if (key.equals(LOWER_LEADING_CORNER)) {</span>
<span class="nc bnc" id="L1236" title="All 2 branches missed.">            key = isLeftToRight ? LOWER_LEFT_CORNER : LOWER_RIGHT_CORNER;</span>
<span class="nc bnc" id="L1237" title="All 2 branches missed.">        } else if (key.equals(LOWER_TRAILING_CORNER)) {</span>
<span class="nc bnc" id="L1238" title="All 2 branches missed.">            key = isLeftToRight ? LOWER_RIGHT_CORNER : LOWER_LEFT_CORNER;</span>
<span class="nc bnc" id="L1239" title="All 2 branches missed.">        } else if (key.equals(UPPER_LEADING_CORNER)) {</span>
<span class="nc bnc" id="L1240" title="All 2 branches missed.">            key = isLeftToRight ? UPPER_LEFT_CORNER : UPPER_RIGHT_CORNER;</span>
<span class="nc bnc" id="L1241" title="All 2 branches missed.">        } else if (key.equals(UPPER_TRAILING_CORNER)) {</span>
<span class="nc bnc" id="L1242" title="All 2 branches missed.">            key = isLeftToRight ? UPPER_RIGHT_CORNER : UPPER_LEFT_CORNER;</span>
        }
<span class="nc bnc" id="L1244" title="All 2 branches missed.">        if (key.equals(LOWER_LEFT_CORNER)) {</span>
<span class="nc" id="L1245">            old = lowerLeft;</span>
<span class="nc" id="L1246">            lowerLeft = corner;</span>
        }
<span class="nc bnc" id="L1248" title="All 2 branches missed.">        else if (key.equals(LOWER_RIGHT_CORNER)) {</span>
<span class="nc" id="L1249">            old = lowerRight;</span>
<span class="nc" id="L1250">            lowerRight = corner;</span>
        }
<span class="nc bnc" id="L1252" title="All 2 branches missed.">        else if (key.equals(UPPER_LEFT_CORNER)) {</span>
<span class="nc" id="L1253">            old = upperLeft;</span>
<span class="nc" id="L1254">            upperLeft = corner;</span>
        }
<span class="nc bnc" id="L1256" title="All 2 branches missed.">        else if (key.equals(UPPER_RIGHT_CORNER)) {</span>
<span class="nc" id="L1257">            old = upperRight;</span>
<span class="nc" id="L1258">            upperRight = corner;</span>
        }
        else {
<span class="nc" id="L1261">            throw new IllegalArgumentException(&quot;invalid corner key&quot;);</span>
        }
<span class="nc bnc" id="L1263" title="All 2 branches missed.">        if (old != null) {</span>
<span class="nc" id="L1264">            remove(old);</span>
        }
<span class="nc bnc" id="L1266" title="All 2 branches missed.">        if (corner != null) {</span>
<span class="nc" id="L1267">            add(corner, key);</span>
        }
<span class="nc" id="L1269">        firePropertyChange(key, old, corner);</span>
<span class="nc" id="L1270">        revalidate();</span>
<span class="nc" id="L1271">        repaint();</span>
<span class="nc" id="L1272">    }</span>

    /**
     * Sets the orientation for the vertical and horizontal
     * scrollbars as determined by the
     * &lt;code&gt;ComponentOrientation&lt;/code&gt; argument.
     *
     * @param  co one of the following values:
     * &lt;ul&gt;
     * &lt;li&gt;java.awt.ComponentOrientation.LEFT_TO_RIGHT
     * &lt;li&gt;java.awt.ComponentOrientation.RIGHT_TO_LEFT
     * &lt;li&gt;java.awt.ComponentOrientation.UNKNOWN
     * &lt;/ul&gt;
     * @see java.awt.ComponentOrientation
     */
    public void setComponentOrientation( ComponentOrientation co ) {
<span class="nc" id="L1288">        super.setComponentOrientation( co );</span>
<span class="nc bnc" id="L1289" title="All 2 branches missed.">        if( verticalScrollBar != null )</span>
<span class="nc" id="L1290">            verticalScrollBar.setComponentOrientation( co );</span>
<span class="nc bnc" id="L1291" title="All 2 branches missed.">        if( horizontalScrollBar != null )</span>
<span class="nc" id="L1292">            horizontalScrollBar.setComponentOrientation( co );</span>
<span class="nc" id="L1293">    }</span>

    /**
     * Indicates whether or not scrolling will take place in response to the
     * mouse wheel.  Wheel scrolling is enabled by default.
     *
     * @see #setWheelScrollingEnabled
     * @since 1.4
     * @beaninfo
     *       bound: true
     * description: Flag for enabling/disabling mouse wheel scrolling
     */
<span class="nc" id="L1305">    public boolean isWheelScrollingEnabled() {return wheelScrollState;}</span>

    /**
     * Enables/disables scrolling in response to movement of the mouse wheel.
     * Wheel scrolling is enabled by default.
     *
     * @param handleWheel   &lt;code&gt;true&lt;/code&gt; if scrolling should be done
     *                      automatically for a MouseWheelEvent,
     *                      &lt;code&gt;false&lt;/code&gt; otherwise.
     * @see #isWheelScrollingEnabled
     * @see java.awt.event.MouseWheelEvent
     * @see java.awt.event.MouseWheelListener
     * @since 1.4
     * @beaninfo
     *       bound: true
     * description: Flag for enabling/disabling mouse wheel scrolling
     */
    public void setWheelScrollingEnabled(boolean handleWheel) {
<span class="nc" id="L1323">        boolean old = wheelScrollState;</span>
<span class="nc" id="L1324">        wheelScrollState = handleWheel;</span>
<span class="nc" id="L1325">        firePropertyChange(&quot;wheelScrollingEnabled&quot;, old, handleWheel);</span>
<span class="nc" id="L1326">    }</span>

    /**
     * See &lt;code&gt;readObject&lt;/code&gt; and &lt;code&gt;writeObject&lt;/code&gt; in
     * &lt;code&gt;JComponent&lt;/code&gt; for more
     * information about serialization in Swing.
     */
    private void writeObject(ObjectOutputStream s) throws IOException {
<span class="nc" id="L1334">        s.defaultWriteObject();</span>
<span class="nc bnc" id="L1335" title="All 2 branches missed.">        if (getUIClassID().equals(uiClassID)) {</span>
<span class="nc" id="L1336">            byte count = JComponent.getWriteObjCounter(this);</span>
<span class="nc" id="L1337">            JComponent.setWriteObjCounter(this, --count);</span>
<span class="nc bnc" id="L1338" title="All 4 branches missed.">            if (count == 0 &amp;&amp; ui != null) {</span>
<span class="nc" id="L1339">                ui.installUI(this);</span>
            }
        }
<span class="nc" id="L1342">    }</span>


    /**
     * Returns a string representation of this &lt;code&gt;JScrollPane&lt;/code&gt;.
     * This method
     * is intended to be used only for debugging purposes, and the
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not
     * be &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  a string representation of this &lt;code&gt;JScrollPane&lt;/code&gt;.
     */
    protected String paramString() {
<span class="nc bnc" id="L1356" title="All 2 branches missed.">        String viewportBorderString = (viewportBorder != null ?</span>
<span class="nc" id="L1357">                                       viewportBorder.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1358" title="All 2 branches missed.">        String viewportString = (viewport != null ?</span>
<span class="nc" id="L1359">                                 viewport.toString() : &quot;&quot;);</span>
        String verticalScrollBarPolicyString;
<span class="nc bnc" id="L1361" title="All 2 branches missed.">        if (verticalScrollBarPolicy == VERTICAL_SCROLLBAR_AS_NEEDED) {</span>
<span class="nc" id="L1362">            verticalScrollBarPolicyString = &quot;VERTICAL_SCROLLBAR_AS_NEEDED&quot;;</span>
<span class="nc bnc" id="L1363" title="All 2 branches missed.">        } else if (verticalScrollBarPolicy == VERTICAL_SCROLLBAR_NEVER) {</span>
<span class="nc" id="L1364">            verticalScrollBarPolicyString = &quot;VERTICAL_SCROLLBAR_NEVER&quot;;</span>
<span class="nc bnc" id="L1365" title="All 2 branches missed.">        } else if (verticalScrollBarPolicy == VERTICAL_SCROLLBAR_ALWAYS) {</span>
<span class="nc" id="L1366">            verticalScrollBarPolicyString = &quot;VERTICAL_SCROLLBAR_ALWAYS&quot;;</span>
<span class="nc" id="L1367">        } else verticalScrollBarPolicyString = &quot;&quot;;</span>
        String horizontalScrollBarPolicyString;
<span class="nc bnc" id="L1369" title="All 2 branches missed.">        if (horizontalScrollBarPolicy == HORIZONTAL_SCROLLBAR_AS_NEEDED) {</span>
<span class="nc" id="L1370">            horizontalScrollBarPolicyString = &quot;HORIZONTAL_SCROLLBAR_AS_NEEDED&quot;;</span>
<span class="nc bnc" id="L1371" title="All 2 branches missed.">        } else if (horizontalScrollBarPolicy == HORIZONTAL_SCROLLBAR_NEVER) {</span>
<span class="nc" id="L1372">            horizontalScrollBarPolicyString = &quot;HORIZONTAL_SCROLLBAR_NEVER&quot;;</span>
<span class="nc bnc" id="L1373" title="All 2 branches missed.">        } else if (horizontalScrollBarPolicy == HORIZONTAL_SCROLLBAR_ALWAYS) {</span>
<span class="nc" id="L1374">            horizontalScrollBarPolicyString = &quot;HORIZONTAL_SCROLLBAR_ALWAYS&quot;;</span>
<span class="nc" id="L1375">        } else horizontalScrollBarPolicyString = &quot;&quot;;</span>
<span class="nc bnc" id="L1376" title="All 2 branches missed.">        String horizontalScrollBarString = (horizontalScrollBar != null ?</span>
<span class="nc" id="L1377">                                            horizontalScrollBar.toString()</span>
                                            : &quot;&quot;);
<span class="nc bnc" id="L1379" title="All 2 branches missed.">        String verticalScrollBarString = (verticalScrollBar != null ?</span>
<span class="nc" id="L1380">                                          verticalScrollBar.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1381" title="All 2 branches missed.">        String columnHeaderString = (columnHeader != null ?</span>
<span class="nc" id="L1382">                                     columnHeader.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1383" title="All 2 branches missed.">        String rowHeaderString = (rowHeader != null ?</span>
<span class="nc" id="L1384">                                  rowHeader.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1385" title="All 2 branches missed.">        String lowerLeftString = (lowerLeft != null ?</span>
<span class="nc" id="L1386">                                  lowerLeft.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1387" title="All 2 branches missed.">        String lowerRightString = (lowerRight != null ?</span>
<span class="nc" id="L1388">                                  lowerRight.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1389" title="All 2 branches missed.">        String upperLeftString = (upperLeft != null ?</span>
<span class="nc" id="L1390">                                  upperLeft.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L1391" title="All 2 branches missed.">        String upperRightString = (upperRight != null ?</span>
<span class="nc" id="L1392">                                  upperRight.toString() : &quot;&quot;);</span>

<span class="nc" id="L1394">        return super.paramString() +</span>
        &quot;,columnHeader=&quot; + columnHeaderString +
        &quot;,horizontalScrollBar=&quot; + horizontalScrollBarString +
        &quot;,horizontalScrollBarPolicy=&quot; + horizontalScrollBarPolicyString +
        &quot;,lowerLeft=&quot; + lowerLeftString +
        &quot;,lowerRight=&quot; + lowerRightString +
        &quot;,rowHeader=&quot; + rowHeaderString +
        &quot;,upperLeft=&quot; + upperLeftString +
        &quot;,upperRight=&quot; + upperRightString +
        &quot;,verticalScrollBar=&quot; + verticalScrollBarString +
        &quot;,verticalScrollBarPolicy=&quot; + verticalScrollBarPolicyString +
        &quot;,viewport=&quot; + viewportString +
        &quot;,viewportBorder=&quot; + viewportBorderString;
    }

/////////////////
// Accessibility support
////////////////

    /**
     * Gets the AccessibleContext associated with this JScrollPane.
     * For scroll panes, the AccessibleContext takes the form of an
     * AccessibleJScrollPane.
     * A new AccessibleJScrollPane instance is created if necessary.
     *
     * @return an AccessibleJScrollPane that serves as the
     *         AccessibleContext of this JScrollPane
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L1423" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L1424">            accessibleContext = new AccessibleJScrollPane();</span>
        }
<span class="nc" id="L1426">        return accessibleContext;</span>
    }

    /**
     * This class implements accessibility support for the
     * &lt;code&gt;JScrollPane&lt;/code&gt; class.  It provides an implementation of the
     * Java Accessibility API appropriate to scroll pane user-interface
     * elements.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
    protected class AccessibleJScrollPane extends AccessibleJComponent
        implements ChangeListener, PropertyChangeListener {

<span class="nc" id="L1447">        protected JViewport viewPort = null;</span>

        /*
         * Resets the viewport ChangeListener and PropertyChangeListener
         */
        public void resetViewPort() {
<span class="nc bnc" id="L1453" title="All 2 branches missed.">            if (viewPort != null) {</span>
<span class="nc" id="L1454">                viewPort.removeChangeListener(this);</span>
<span class="nc" id="L1455">                viewPort.removePropertyChangeListener(this);</span>
            }
<span class="nc" id="L1457">            viewPort = JScrollPane.this.getViewport();</span>
<span class="nc bnc" id="L1458" title="All 2 branches missed.">            if (viewPort != null) {</span>
<span class="nc" id="L1459">                viewPort.addChangeListener(this);</span>
<span class="nc" id="L1460">                viewPort.addPropertyChangeListener(this);</span>
            }
<span class="nc" id="L1462">        }</span>

        /**
         * AccessibleJScrollPane constructor
         */
<span class="nc" id="L1467">        public AccessibleJScrollPane() {</span>
<span class="nc" id="L1468">            super();</span>

<span class="nc" id="L1470">            resetViewPort();</span>

            // initialize the AccessibleRelationSets for the JScrollPane
            // and JScrollBar(s)
<span class="nc" id="L1474">            JScrollBar scrollBar = getHorizontalScrollBar();</span>
<span class="nc bnc" id="L1475" title="All 2 branches missed.">            if (scrollBar != null) {</span>
<span class="nc" id="L1476">                setScrollBarRelations(scrollBar);</span>
            }
<span class="nc" id="L1478">            scrollBar = getVerticalScrollBar();</span>
<span class="nc bnc" id="L1479" title="All 2 branches missed.">            if (scrollBar != null) {</span>
<span class="nc" id="L1480">                setScrollBarRelations(scrollBar);</span>
            }
<span class="nc" id="L1482">        }</span>

        /**
         * Get the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the
         * object
         * @see AccessibleRole
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc" id="L1492">            return AccessibleRole.SCROLL_PANE;</span>
        }

        /**
         * Invoked when the target of the listener has changed its state.
         *
         * @param e  a &lt;code&gt;ChangeEvent&lt;/code&gt; object. Must not be null.
         *
         * @throws NullPointerException if the parameter is null.
         */
        public void stateChanged(ChangeEvent e) {
<span class="nc bnc" id="L1503" title="All 2 branches missed.">            if (e == null) {</span>
<span class="nc" id="L1504">                throw new NullPointerException();</span>
            }
<span class="nc" id="L1506">            firePropertyChange(ACCESSIBLE_VISIBLE_DATA_PROPERTY,</span>
<span class="nc" id="L1507">                               Boolean.valueOf(false),</span>
<span class="nc" id="L1508">                               Boolean.valueOf(true));</span>
<span class="nc" id="L1509">        }</span>

        /**
         * This method gets called when a bound property is changed.
         * @param e A &lt;code&gt;PropertyChangeEvent&lt;/code&gt; object describing
         * the event source and the property that has changed. Must not be null.
         *
         * @throws NullPointerException if the parameter is null.
         * @since 1.5
         */
        public void propertyChange(PropertyChangeEvent e) {
<span class="nc" id="L1520">            String propertyName = e.getPropertyName();</span>
<span class="nc bnc" id="L1521" title="All 4 branches missed.">            if (propertyName == &quot;horizontalScrollBar&quot; ||</span>
                propertyName == &quot;verticalScrollBar&quot;) {

<span class="nc bnc" id="L1524" title="All 2 branches missed.">                if (e.getNewValue() instanceof JScrollBar) {</span>
<span class="nc" id="L1525">                    setScrollBarRelations((JScrollBar)e.getNewValue());</span>
                }
            }
<span class="nc" id="L1528">        }</span>


        /*
         * Sets the CONTROLLER_FOR and CONTROLLED_BY AccessibleRelations for
         * the JScrollPane and JScrollBar. JScrollBar must not be null.
         */
        void setScrollBarRelations(JScrollBar scrollBar) {
            /*
             * The JScrollBar is a CONTROLLER_FOR the JScrollPane.
             * The JScrollPane is CONTROLLED_BY the JScrollBar.
             */
<span class="nc" id="L1540">            AccessibleRelation controlledBy =</span>
                new AccessibleRelation(AccessibleRelation.CONTROLLED_BY,
                                       scrollBar);
<span class="nc" id="L1543">            AccessibleRelation controllerFor =</span>
                new AccessibleRelation(AccessibleRelation.CONTROLLER_FOR,
                                       JScrollPane.this);

            // set the relation set for the scroll bar
<span class="nc" id="L1548">            AccessibleContext ac = scrollBar.getAccessibleContext();</span>
<span class="nc" id="L1549">            ac.getAccessibleRelationSet().add(controllerFor);</span>

            // set the relation set for the scroll pane
<span class="nc" id="L1552">            getAccessibleRelationSet().add(controlledBy);</span>
<span class="nc" id="L1553">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>