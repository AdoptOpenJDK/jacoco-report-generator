<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>KeyStroke.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">KeyStroke.java</span></div><h1>KeyStroke.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2009, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package javax.swing;

import java.awt.AWTKeyStroke;
import java.awt.event.KeyEvent;

/**
 * A KeyStroke represents a key action on the keyboard, or equivalent input
 * device. KeyStrokes can correspond to only a press or release of a particular
 * key, just as KEY_PRESSED and KEY_RELEASED KeyEvents do; alternately, they
 * can correspond to typing a specific Java character, just as KEY_TYPED
 * KeyEvents do. In all cases, KeyStrokes can specify modifiers (alt, shift,
 * control, meta, altGraph, or a combination thereof) which must be present during the
 * action for an exact match.
 * &lt;p&gt;
 * KeyStrokes are used to define high-level (semantic) action events. Instead
 * of trapping every keystroke and throwing away the ones you are not
 * interested in, those keystrokes you care about automatically initiate
 * actions on the Components with which they are registered.
 * &lt;p&gt;
 * KeyStrokes are immutable, and are intended to be unique. Client code cannot
 * create a KeyStroke; a variant of &lt;code&gt;getKeyStroke&lt;/code&gt; must be used
 * instead. These factory methods allow the KeyStroke implementation to cache
 * and share instances efficiently.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @see javax.swing.text.Keymap
 * @see #getKeyStroke
 *
 * @author Arnaud Weber
 * @author David Mendenhall
 */
public class KeyStroke extends AWTKeyStroke {

    /**
     * Serial Version ID.
     */
    private static final long serialVersionUID = -9060180771037902530L;

<span class="nc" id="L71">    private KeyStroke() {</span>
<span class="nc" id="L72">    }</span>
    private KeyStroke(char keyChar, int keyCode, int modifiers,
                      boolean onKeyRelease) {
<span class="nc" id="L75">        super(keyChar, keyCode, modifiers, onKeyRelease);</span>
<span class="nc" id="L76">    }</span>

    /**
     * Returns a shared instance of a &lt;code&gt;KeyStroke&lt;/code&gt;
     * that represents a &lt;code&gt;KEY_TYPED&lt;/code&gt; event for the
     * specified character.
     *
     * @param keyChar the character value for a keyboard key
     * @return a KeyStroke object for that key
     */
    public static KeyStroke getKeyStroke(char keyChar) {
<span class="nc" id="L87">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L88">            registerSubclass(KeyStroke.class);</span>
<span class="nc" id="L89">            return (KeyStroke)getAWTKeyStroke(keyChar);</span>
<span class="nc" id="L90">        }</span>
    }

    /**
     * Returns an instance of a KeyStroke, specifying whether the key is
     * considered to be activated when it is pressed or released. Unlike all
     * other factory methods in this class, the instances returned by this
     * method are not necessarily cached or shared.
     *
     * @param keyChar the character value for a keyboard key
     * @param onKeyRelease &lt;code&gt;true&lt;/code&gt; if this KeyStroke corresponds to a
     *        key release; &lt;code&gt;false&lt;/code&gt; otherwise.
     * @return a KeyStroke object for that key
     * @deprecated use getKeyStroke(char)
     */
    @Deprecated
    public static KeyStroke getKeyStroke(char keyChar, boolean onKeyRelease) {
<span class="nc" id="L107">        return new KeyStroke(keyChar, KeyEvent.VK_UNDEFINED, 0, onKeyRelease);</span>
    }

    /**
     * Returns a shared instance of a {@code KeyStroke}
     * that represents a {@code KEY_TYPED} event for the
     * specified Character object and a
      * set of modifiers. Note that the first parameter is of type Character
     * rather than char. This is to avoid inadvertent clashes with calls to
     * &lt;code&gt;getKeyStroke(int keyCode, int modifiers)&lt;/code&gt;.
     *
     * The modifiers consist of any combination of following:&lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_DOWN_MASK
     * &lt;/ul&gt;
     * The old modifiers listed below also can be used, but they are
     * mapped to _DOWN_ modifiers. &lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_MASK
     * &lt;/ul&gt;
     * also can be used, but they are mapped to _DOWN_ modifiers.
     *
     * Since these numbers are all different powers of two, any combination of
     * them is an integer in which each bit represents a different modifier
     * key. Use 0 to specify no modifiers.
     *
     * @param keyChar the Character object for a keyboard character
     * @param modifiers a bitwise-ored combination of any modifiers
     * @return an KeyStroke object for that key
     * @throws IllegalArgumentException if keyChar is null
     *
     * @see java.awt.event.InputEvent
     * @since 1.3
     */
    public static KeyStroke getKeyStroke(Character keyChar, int modifiers) {
<span class="nc" id="L148">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L149">            registerSubclass(KeyStroke.class);</span>
<span class="nc" id="L150">            return (KeyStroke)getAWTKeyStroke(keyChar, modifiers);</span>
<span class="nc" id="L151">        }</span>
    }

    /**
     * Returns a shared instance of a KeyStroke, given a numeric key code and a
     * set of modifiers, specifying whether the key is activated when it is
     * pressed or released.
     * &lt;p&gt;
     * The &quot;virtual key&quot; constants defined in java.awt.event.KeyEvent can be
     * used to specify the key code. For example:&lt;ul&gt;
     * &lt;li&gt;java.awt.event.KeyEvent.VK_ENTER
     * &lt;li&gt;java.awt.event.KeyEvent.VK_TAB
     * &lt;li&gt;java.awt.event.KeyEvent.VK_SPACE
     * &lt;/ul&gt;
     * Alternatively, the key code may be obtained by calling
     * &lt;code&gt;java.awt.event.KeyEvent.getExtendedKeyCodeForChar&lt;/code&gt;.
     *
     * The modifiers consist of any combination of:&lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_DOWN_MASK
     * &lt;/ul&gt;
     * The old modifiers &lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_MASK
     * &lt;/ul&gt;
     * also can be used, but they are mapped to _DOWN_ modifiers.
     *
     * Since these numbers are all different powers of two, any combination of
     * them is an integer in which each bit represents a different modifier
     * key. Use 0 to specify no modifiers.
     *
     * @param keyCode an int specifying the numeric code for a keyboard key
     * @param modifiers a bitwise-ored combination of any modifiers
     * @param onKeyRelease &lt;code&gt;true&lt;/code&gt; if the KeyStroke should represent
     *        a key release; &lt;code&gt;false&lt;/code&gt; otherwise.
     * @return a KeyStroke object for that key
     *
     * @see java.awt.event.KeyEvent
     * @see java.awt.event.InputEvent
     */
    public static KeyStroke getKeyStroke(int keyCode, int modifiers,
                                         boolean onKeyRelease) {
<span class="nc" id="L199">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L200">            registerSubclass(KeyStroke.class);</span>
<span class="nc" id="L201">            return (KeyStroke)getAWTKeyStroke(keyCode, modifiers,</span>
                                              onKeyRelease);
<span class="nc" id="L203">        }</span>
    }

    /**
     * Returns a shared instance of a KeyStroke, given a numeric key code and a
     * set of modifiers. The returned KeyStroke will correspond to a key press.
     * &lt;p&gt;
     * The &quot;virtual key&quot; constants defined in java.awt.event.KeyEvent can be
     * used to specify the key code. For example:&lt;ul&gt;
     * &lt;li&gt;java.awt.event.KeyEvent.VK_ENTER
     * &lt;li&gt;java.awt.event.KeyEvent.VK_TAB
     * &lt;li&gt;java.awt.event.KeyEvent.VK_SPACE
     * &lt;/ul&gt;
     * Alternatively, the key code may be obtained by calling
     * &lt;code&gt;java.awt.event.KeyEvent.getExtendedKeyCodeForChar&lt;/code&gt;.
     *
     * The modifiers consist of any combination of:&lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_DOWN_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_DOWN_MASK
     * &lt;/ul&gt;
     * The old modifiers &lt;ul&gt;
     * &lt;li&gt;java.awt.event.InputEvent.SHIFT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.CTRL_MASK
     * &lt;li&gt;java.awt.event.InputEvent.META_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_MASK
     * &lt;li&gt;java.awt.event.InputEvent.ALT_GRAPH_MASK
     * &lt;/ul&gt;
     * also can be used, but they are mapped to _DOWN_ modifiers.
     *
     * Since these numbers are all different powers of two, any combination of
     * them is an integer in which each bit represents a different modifier
     * key. Use 0 to specify no modifiers.
     *
     * @param keyCode an int specifying the numeric code for a keyboard key
     * @param modifiers a bitwise-ored combination of any modifiers
     * @return a KeyStroke object for that key
     *
     * @see java.awt.event.KeyEvent
     * @see java.awt.event.InputEvent
     */
    public static KeyStroke getKeyStroke(int keyCode, int modifiers) {
<span class="nc" id="L247">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L248">            registerSubclass(KeyStroke.class);</span>
<span class="nc" id="L249">            return (KeyStroke)getAWTKeyStroke(keyCode, modifiers);</span>
<span class="nc" id="L250">        }</span>
    }

    /**
     * Returns a KeyStroke which represents the stroke which generated a given
     * KeyEvent.
     * &lt;p&gt;
     * This method obtains the keyChar from a KeyTyped event, and the keyCode
     * from a KeyPressed or KeyReleased event. The KeyEvent modifiers are
     * obtained for all three types of KeyEvent.
     *
     * @param anEvent the KeyEvent from which to obtain the KeyStroke
     * @throws NullPointerException if &lt;code&gt;anEvent&lt;/code&gt; is null
     * @return the KeyStroke that precipitated the event
     */
    public static KeyStroke getKeyStrokeForEvent(KeyEvent anEvent) {
<span class="nc" id="L266">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L267">            registerSubclass(KeyStroke.class);</span>
<span class="nc" id="L268">            return (KeyStroke)getAWTKeyStrokeForEvent(anEvent);</span>
<span class="nc" id="L269">        }</span>
    }

    /**
     * Parses a string and returns a &lt;code&gt;KeyStroke&lt;/code&gt;.
     * The string must have the following syntax:
     * &lt;pre&gt;
     *    &amp;lt;modifiers&amp;gt;* (&amp;lt;typedID&amp;gt; | &amp;lt;pressedReleasedID&amp;gt;)
     *
     *    modifiers := shift | control | ctrl | meta | alt | altGraph
     *    typedID := typed &amp;lt;typedKey&amp;gt;
     *    typedKey := string of length 1 giving Unicode character.
     *    pressedReleasedID := (pressed | released) key
     *    key := KeyEvent key code name, i.e. the name following &quot;VK_&quot;.
     * &lt;/pre&gt;
     * If typed, pressed or released is not specified, pressed is assumed. Here
     * are some examples:
     * &lt;pre&gt;
     *     &quot;INSERT&quot; =&amp;gt; getKeyStroke(KeyEvent.VK_INSERT, 0);
     *     &quot;control DELETE&quot; =&amp;gt; getKeyStroke(KeyEvent.VK_DELETE, InputEvent.CTRL_MASK);
     *     &quot;alt shift X&quot; =&amp;gt; getKeyStroke(KeyEvent.VK_X, InputEvent.ALT_MASK | InputEvent.SHIFT_MASK);
     *     &quot;alt shift released X&quot; =&amp;gt; getKeyStroke(KeyEvent.VK_X, InputEvent.ALT_MASK | InputEvent.SHIFT_MASK, true);
     *     &quot;typed a&quot; =&amp;gt; getKeyStroke('a');
     * &lt;/pre&gt;
     *
     * In order to maintain backward-compatibility, specifying a null String,
     * or a String which is formatted incorrectly, returns null.
     *
     * @param s a String formatted as described above
     * @return a KeyStroke object for that String, or null if the specified
     *         String is null, or is formatted incorrectly
     *
     * @see java.awt.event.KeyEvent
     */
    public static KeyStroke getKeyStroke(String s) {
<span class="nc bnc" id="L304" title="All 4 branches missed.">        if (s == null || s.length() == 0) {</span>
<span class="nc" id="L305">            return null;</span>
        }
<span class="nc" id="L307">        synchronized (AWTKeyStroke.class) {</span>
<span class="nc" id="L308">            registerSubclass(KeyStroke.class);</span>
            try {
<span class="nc" id="L310">                return (KeyStroke)getAWTKeyStroke(s);</span>
<span class="nc" id="L311">            } catch (IllegalArgumentException e) {</span>
<span class="nc" id="L312">                return null;</span>
            }
<span class="nc" id="L314">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>