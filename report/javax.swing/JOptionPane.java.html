<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>JOptionPane.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing</a> &gt; <span class="el_source">JOptionPane.java</span></div><h1>JOptionPane.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2011, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing;

import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dialog;
import java.awt.Dimension;
import java.awt.KeyboardFocusManager;
import java.awt.Frame;
import java.awt.Point;
import java.awt.HeadlessException;
import java.awt.Window;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.awt.event.WindowListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.lang.reflect.Method;
import java.lang.reflect.InvocationTargetException;
import java.security.AccessController;
import java.security.PrivilegedAction;
import java.util.Vector;
import javax.swing.plaf.OptionPaneUI;
import javax.swing.event.InternalFrameEvent;
import javax.swing.event.InternalFrameAdapter;
import javax.accessibility.*;
import static javax.swing.ClientPropertyKey.PopupFactory_FORCE_HEAVYWEIGHT_POPUP;

/**
 * &lt;code&gt;JOptionPane&lt;/code&gt; makes it easy to pop up a standard dialog box that
 * prompts users for a value or informs them of something.
 * For information about using &lt;code&gt;JOptionPane&lt;/code&gt;, see
 * &lt;a
 href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html&quot;&gt;How to Make Dialogs&lt;/a&gt;,
 * a section in &lt;em&gt;The Java Tutorial&lt;/em&gt;.
 *
 * &lt;p&gt;
 *
 * While the &lt;code&gt;JOptionPane&lt;/code&gt;
 * class may appear complex because of the large number of methods, almost
 * all uses of this class are one-line calls to one of the static
 * &lt;code&gt;showXxxDialog&lt;/code&gt; methods shown below:
 * &lt;blockquote&gt;
 *
 *
 * &lt;table border=1 summary=&quot;Common JOptionPane method names and their descriptions&quot;&gt;
 * &lt;tr&gt;
 *    &lt;th&gt;Method Name&lt;/th&gt;
 *    &lt;th&gt;Description&lt;/th&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *    &lt;td&gt;showConfirmDialog&lt;/td&gt;
 *    &lt;td&gt;Asks a confirming question, like yes/no/cancel.&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *    &lt;td&gt;showInputDialog&lt;/td&gt;
 *    &lt;td&gt;Prompt for some input.&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *   &lt;td&gt;showMessageDialog&lt;/td&gt;
 *   &lt;td&gt;Tell the user about something that has happened.&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *   &lt;td&gt;showOptionDialog&lt;/td&gt;
 *   &lt;td&gt;The Grand Unification of the above three.&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;/table&gt;
 *
 * &lt;/blockquote&gt;
 * Each of these methods also comes in a &lt;code&gt;showInternalXXX&lt;/code&gt;
 * flavor, which uses an internal frame to hold the dialog box (see
 * {@link JInternalFrame}).
 * Multiple convenience methods have also been defined -- overloaded
 * versions of the basic methods that use different parameter lists.
 * &lt;p&gt;
 * All dialogs are modal. Each &lt;code&gt;showXxxDialog&lt;/code&gt; method blocks
 * the caller until the user's interaction is complete.
 * &lt;p&gt;
 *
 * &lt;table cellspacing=6 cellpadding=4 border=0 style=&quot;float:right&quot; summary=&quot;layout&quot;&gt;
 * &lt;tr&gt;
 *  &lt;td style=&quot;background-color:#FFe0d0&quot; rowspan=2&gt;icon&lt;/td&gt;
 *  &lt;td style=&quot;background-color:#FFe0d0&quot;&gt;message&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *  &lt;td style=&quot;background-color:#FFe0d0&quot;&gt;input value&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;tr&gt;
 *   &lt;td style=&quot;background-color:#FFe0d0&quot; colspan=2&gt;option buttons&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;/table&gt;
 *
 * The basic appearance of one of these dialog boxes is generally
 * similar to the picture at the right, although the various
 * look-and-feels are
 * ultimately responsible for the final result.  In particular, the
 * look-and-feels will adjust the layout to accommodate the option pane's
 * &lt;code&gt;ComponentOrientation&lt;/code&gt; property.
 * &lt;br style=&quot;clear:all&quot;&gt;
 * &lt;p&gt;
 * &lt;b&gt;Parameters:&lt;/b&gt;&lt;br&gt;
 * The parameters to these methods follow consistent patterns:
 * &lt;blockquote&gt;
 * &lt;dl compact&gt;
 * &lt;dt&gt;parentComponent&lt;dd&gt;
 * Defines the &lt;code&gt;Component&lt;/code&gt; that is to be the parent of this
 * dialog box.
 * It is used in two ways: the &lt;code&gt;Frame&lt;/code&gt; that contains
 * it is used as the &lt;code&gt;Frame&lt;/code&gt;
 * parent for the dialog box, and its screen coordinates are used in
 * the placement of the dialog box. In general, the dialog box is placed
 * just below the component. This parameter may be &lt;code&gt;null&lt;/code&gt;,
 * in which case a default &lt;code&gt;Frame&lt;/code&gt; is used as the parent,
 * and the dialog will be
 * centered on the screen (depending on the L&amp;F).
 * &lt;dt&gt;&lt;a name=message&gt;message&lt;/a&gt;&lt;dd&gt;
 * A descriptive message to be placed in the dialog box.
 * In the most common usage, message is just a &lt;code&gt;String&lt;/code&gt; or
 * &lt;code&gt;String&lt;/code&gt; constant.
 * However, the type of this parameter is actually &lt;code&gt;Object&lt;/code&gt;. Its
 * interpretation depends on its type:
 * &lt;dl compact&gt;
 * &lt;dt&gt;Object[]&lt;dd&gt;An array of objects is interpreted as a series of
 *                 messages (one per object) arranged in a vertical stack.
 *                 The interpretation is recursive -- each object in the
 *                 array is interpreted according to its type.
 * &lt;dt&gt;Component&lt;dd&gt;The &lt;code&gt;Component&lt;/code&gt; is displayed in the dialog.
 * &lt;dt&gt;Icon&lt;dd&gt;The &lt;code&gt;Icon&lt;/code&gt; is wrapped in a &lt;code&gt;JLabel&lt;/code&gt;
 *               and displayed in the dialog.
 * &lt;dt&gt;others&lt;dd&gt;The object is converted to a &lt;code&gt;String&lt;/code&gt; by calling
 *               its &lt;code&gt;toString&lt;/code&gt; method. The result is wrapped in a
 *               &lt;code&gt;JLabel&lt;/code&gt; and displayed.
 * &lt;/dl&gt;
 * &lt;dt&gt;messageType&lt;dd&gt;Defines the style of the message. The Look and Feel
 * manager may lay out the dialog differently depending on this value, and
 * will often provide a default icon. The possible values are:
 * &lt;ul&gt;
 * &lt;li&gt;&lt;code&gt;ERROR_MESSAGE&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;WARNING_MESSAGE&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
 * &lt;/ul&gt;
 * &lt;dt&gt;optionType&lt;dd&gt;Defines the set of option buttons that appear at
 * the bottom of the dialog box:
 * &lt;ul&gt;
 * &lt;li&gt;&lt;code&gt;DEFAULT_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;YES_NO_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
 * &lt;/ul&gt;
 * You aren't limited to this set of option buttons.  You can provide any
 * buttons you want using the options parameter.
 * &lt;dt&gt;options&lt;dd&gt;A more detailed description of the set of option buttons
 * that will appear at the bottom of the dialog box.
 * The usual value for the options parameter is an array of
 * &lt;code&gt;String&lt;/code&gt;s. But
 * the parameter type is an array of &lt;code&gt;Objects&lt;/code&gt;.
 * A button is created for each object depending on its type:
 * &lt;dl compact&gt;
 * &lt;dt&gt;Component&lt;dd&gt;The component is added to the button row directly.
 * &lt;dt&gt;Icon&lt;dd&gt;A &lt;code&gt;JButton&lt;/code&gt; is created with this as its label.
 * &lt;dt&gt;other&lt;dd&gt;The &lt;code&gt;Object&lt;/code&gt; is converted to a string using its
 *              &lt;code&gt;toString&lt;/code&gt; method and the result is used to
 *              label a &lt;code&gt;JButton&lt;/code&gt;.
 * &lt;/dl&gt;
 * &lt;dt&gt;icon&lt;dd&gt;A decorative icon to be placed in the dialog box. A default
 * value for this is determined by the &lt;code&gt;messageType&lt;/code&gt; parameter.
 * &lt;dt&gt;title&lt;dd&gt;The title for the dialog box.
 * &lt;dt&gt;initialValue&lt;dd&gt;The default selection (input value).
 * &lt;/dl&gt;
 * &lt;/blockquote&gt;
 * &lt;p&gt;
 * When the selection is changed, &lt;code&gt;setValue&lt;/code&gt; is invoked,
 * which generates a &lt;code&gt;PropertyChangeEvent&lt;/code&gt;.
 * &lt;p&gt;
 * If a &lt;code&gt;JOptionPane&lt;/code&gt; has configured to all input
 * &lt;code&gt;setWantsInput&lt;/code&gt;
 * the bound property &lt;code&gt;JOptionPane.INPUT_VALUE_PROPERTY&lt;/code&gt;
 *  can also be listened
 * to, to determine when the user has input or selected a value.
 * &lt;p&gt;
 * When one of the &lt;code&gt;showXxxDialog&lt;/code&gt; methods returns an integer,
 * the possible values are:
 * &lt;ul&gt;
 * &lt;li&gt;&lt;code&gt;YES_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;NO_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;CANCEL_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;OK_OPTION&lt;/code&gt;
 * &lt;li&gt;&lt;code&gt;CLOSED_OPTION&lt;/code&gt;
 * &lt;/ul&gt;
 * &lt;b&gt;Examples:&lt;/b&gt;
 * &lt;dl&gt;
 * &lt;dt&gt;Show an error dialog that displays the message, 'alert':
 * &lt;dd&gt;&lt;code&gt;
 * JOptionPane.showMessageDialog(null, &quot;alert&quot;, &quot;alert&quot;, JOptionPane.ERROR_MESSAGE);
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show an internal information dialog with the message, 'information':
 * &lt;dd&gt;&lt;code&gt;
 * JOptionPane.showInternalMessageDialog(frame, &quot;information&quot;,&lt;br&gt;
 *             &lt;ul&gt;&lt;ul&gt;&quot;information&quot;, JOptionPane.INFORMATION_MESSAGE);&lt;/ul&gt;&lt;/ul&gt;
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show an information panel with the options yes/no and message 'choose one':
 * &lt;dd&gt;&lt;code&gt;JOptionPane.showConfirmDialog(null,
 *             &lt;ul&gt;&lt;ul&gt;&quot;choose one&quot;, &quot;choose one&quot;, JOptionPane.YES_NO_OPTION);&lt;/ul&gt;&lt;/ul&gt;
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show an internal information dialog with the options yes/no/cancel and
 * message 'please choose one' and title information:
 * &lt;dd&gt;&lt;code&gt;JOptionPane.showInternalConfirmDialog(frame,
 *             &lt;ul&gt;&lt;ul&gt;&quot;please choose one&quot;, &quot;information&quot;,&lt;/ul&gt;&lt;/ul&gt;
 *             &lt;ul&gt;&lt;ul&gt;JOptionPane.YES_NO_CANCEL_OPTION, JOptionPane.INFORMATION_MESSAGE);&lt;/ul&gt;&lt;/ul&gt;
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show a warning dialog with the options OK, CANCEL, title 'Warning', and
 * message 'Click OK to continue':
 * &lt;dd&gt;&lt;code&gt;
 * Object[] options = { &quot;OK&quot;, &quot;CANCEL&quot; };&lt;br&gt;
 * JOptionPane.showOptionDialog(null, &quot;Click OK to continue&quot;, &quot;Warning&quot;,
 *             &lt;ul&gt;&lt;ul&gt;JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE,&lt;/ul&gt;&lt;/ul&gt;
 *             &lt;ul&gt;&lt;ul&gt;null, options, options[0]);&lt;/ul&gt;&lt;/ul&gt;
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show a dialog asking the user to type in a String:
 * &lt;dd&gt;&lt;code&gt;
 * String inputValue = JOptionPane.showInputDialog(&quot;Please input a value&quot;);
 * &lt;/code&gt;&lt;p&gt;
 * &lt;dt&gt;Show a dialog asking the user to select a String:
 * &lt;dd&gt;&lt;code&gt;
 * Object[] possibleValues = { &quot;First&quot;, &quot;Second&quot;, &quot;Third&quot; };&lt;br&gt;
 * Object selectedValue = JOptionPane.showInputDialog(null,
 *             &lt;ul&gt;&lt;ul&gt;&quot;Choose one&quot;, &quot;Input&quot;,&lt;/ul&gt;&lt;/ul&gt;
 *             &lt;ul&gt;&lt;ul&gt;JOptionPane.INFORMATION_MESSAGE, null,&lt;/ul&gt;&lt;/ul&gt;
 *             &lt;ul&gt;&lt;ul&gt;possibleValues, possibleValues[0]);&lt;/ul&gt;&lt;/ul&gt;
 * &lt;/code&gt;&lt;p&gt;
 * &lt;/dl&gt;
 * &lt;b&gt;Direct Use:&lt;/b&gt;&lt;br&gt;
 * To create and use an &lt;code&gt;JOptionPane&lt;/code&gt; directly, the
 * standard pattern is roughly as follows:
 * &lt;pre&gt;
 *     JOptionPane pane = new JOptionPane(&lt;i&gt;arguments&lt;/i&gt;);
 *     pane.set&lt;i&gt;.Xxxx(...); // Configure&lt;/i&gt;
 *     JDialog dialog = pane.createDialog(&lt;i&gt;parentComponent, title&lt;/i&gt;);
 *     dialog.show();
 *     Object selectedValue = pane.getValue();
 *     if(selectedValue == null)
 *       return CLOSED_OPTION;
 *     &lt;i&gt;//If there is &lt;b&gt;not&lt;/b&gt; an array of option buttons:&lt;/i&gt;
 *     if(options == null) {
 *       if(selectedValue instanceof Integer)
 *          return ((Integer)selectedValue).intValue();
 *       return CLOSED_OPTION;
 *     }
 *     &lt;i&gt;//If there is an array of option buttons:&lt;/i&gt;
 *     for(int counter = 0, maxCounter = options.length;
 *        counter &lt; maxCounter; counter++) {
 *        if(options[counter].equals(selectedValue))
 *        return counter;
 *     }
 *     return CLOSED_OPTION;
 * &lt;/pre&gt;
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt; Swing is not thread safe. For more
 * information see &lt;a
 * href=&quot;package-summary.html#threading&quot;&gt;Swing's Threading
 * Policy&lt;/a&gt;.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @see JInternalFrame
 *
 * @beaninfo
 *      attribute: isContainer true
 *    description: A component which implements standard dialog box controls.
 *
 * @author James Gosling
 * @author Scott Violet
 */
public class JOptionPane extends JComponent implements Accessible
{
    /**
     * @see #getUIClassID
     * @see #readObject
     */
    private static final String uiClassID = &quot;OptionPaneUI&quot;;

    /**
     * Indicates that the user has not yet selected a value.
     */
<span class="nc" id="L325">    public static final Object      UNINITIALIZED_VALUE = &quot;uninitializedValue&quot;;</span>

    //
    // Option types
    //

    /**
     * Type meaning Look and Feel should not supply any options -- only
     * use the options from the &lt;code&gt;JOptionPane&lt;/code&gt;.
     */
    public static final int         DEFAULT_OPTION = -1;
    /** Type used for &lt;code&gt;showConfirmDialog&lt;/code&gt;. */
    public static final int         YES_NO_OPTION = 0;
    /** Type used for &lt;code&gt;showConfirmDialog&lt;/code&gt;. */
    public static final int         YES_NO_CANCEL_OPTION = 1;
    /** Type used for &lt;code&gt;showConfirmDialog&lt;/code&gt;. */
    public static final int         OK_CANCEL_OPTION = 2;

    //
    // Return values.
    //
    /** Return value from class method if YES is chosen. */
    public static final int         YES_OPTION = 0;
    /** Return value from class method if NO is chosen. */
    public static final int         NO_OPTION = 1;
    /** Return value from class method if CANCEL is chosen. */
    public static final int         CANCEL_OPTION = 2;
    /** Return value form class method if OK is chosen. */
    public static final int         OK_OPTION = 0;
    /** Return value from class method if user closes window without selecting
     * anything, more than likely this should be treated as either a
     * &lt;code&gt;CANCEL_OPTION&lt;/code&gt; or &lt;code&gt;NO_OPTION&lt;/code&gt;. */
    public static final int         CLOSED_OPTION = -1;

    //
    // Message types. Used by the UI to determine what icon to display,
    // and possibly what behavior to give based on the type.
    //
    /** Used for error messages. */
    public static final int  ERROR_MESSAGE = 0;
    /** Used for information messages. */
    public static final int  INFORMATION_MESSAGE = 1;
    /** Used for warning messages. */
    public static final int  WARNING_MESSAGE = 2;
    /** Used for questions. */
    public static final int  QUESTION_MESSAGE = 3;
    /** No icon is used. */
    public static final int   PLAIN_MESSAGE = -1;

    /** Bound property name for &lt;code&gt;icon&lt;/code&gt;. */
    public static final String      ICON_PROPERTY = &quot;icon&quot;;
    /** Bound property name for &lt;code&gt;message&lt;/code&gt;. */
    public static final String      MESSAGE_PROPERTY = &quot;message&quot;;
    /** Bound property name for &lt;code&gt;value&lt;/code&gt;. */
    public static final String      VALUE_PROPERTY = &quot;value&quot;;
    /** Bound property name for &lt;code&gt;option&lt;/code&gt;. */
    public static final String      OPTIONS_PROPERTY = &quot;options&quot;;
    /** Bound property name for &lt;code&gt;initialValue&lt;/code&gt;. */
    public static final String      INITIAL_VALUE_PROPERTY = &quot;initialValue&quot;;
    /** Bound property name for &lt;code&gt;type&lt;/code&gt;. */
    public static final String      MESSAGE_TYPE_PROPERTY = &quot;messageType&quot;;
    /** Bound property name for &lt;code&gt;optionType&lt;/code&gt;. */
    public static final String      OPTION_TYPE_PROPERTY = &quot;optionType&quot;;
    /** Bound property name for &lt;code&gt;selectionValues&lt;/code&gt;. */
    public static final String      SELECTION_VALUES_PROPERTY = &quot;selectionValues&quot;;
    /** Bound property name for &lt;code&gt;initialSelectionValue&lt;/code&gt;. */
    public static final String      INITIAL_SELECTION_VALUE_PROPERTY = &quot;initialSelectionValue&quot;;
    /** Bound property name for &lt;code&gt;inputValue&lt;/code&gt;. */
    public static final String      INPUT_VALUE_PROPERTY = &quot;inputValue&quot;;
    /** Bound property name for &lt;code&gt;wantsInput&lt;/code&gt;. */
    public static final String      WANTS_INPUT_PROPERTY = &quot;wantsInput&quot;;

    /** Icon used in pane. */
    transient protected Icon                  icon;
    /** Message to display. */
    transient protected Object                message;
    /** Options to display to the user. */
    transient protected Object[]              options;
    /** Value that should be initially selected in &lt;code&gt;options&lt;/code&gt;. */
    transient protected Object                initialValue;
    /** Message type. */
    protected int                   messageType;
    /**
     * Option type, one of &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;,
     * &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     * &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt; or
     * &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;.
     */
    protected int                   optionType;
    /** Currently selected value, will be a valid option, or
     * &lt;code&gt;UNINITIALIZED_VALUE&lt;/code&gt; or &lt;code&gt;null&lt;/code&gt;. */
    transient protected Object                value;
    /** Array of values the user can choose from. Look and feel will
     * provide the UI component to choose this from. */
    protected transient Object[]              selectionValues;
    /** Value the user has input. */
    protected transient Object                inputValue;
    /** Initial value to select in &lt;code&gt;selectionValues&lt;/code&gt;. */
    protected transient Object                initialSelectionValue;
    /** If true, a UI widget will be provided to the user to get input. */
    protected boolean                         wantsInput;


    /**
     * Shows a question-message dialog requesting input from the user. The
     * dialog uses the default frame, which usually means it is centered on
     * the screen.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static String showInputDialog(Object message)
        throws HeadlessException {
<span class="nc" id="L441">        return showInputDialog(null, message);</span>
    }

    /**
     * Shows a question-message dialog requesting input from the user, with
     * the input value initialized to &lt;code&gt;initialSelectionValue&lt;/code&gt;. The
     * dialog uses the default frame, which usually means it is centered on
     * the screen.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param initialSelectionValue the value used to initialize the input
     *                 field
     * @since 1.4
     */
    public static String showInputDialog(Object message, Object initialSelectionValue) {
<span class="nc" id="L456">        return showInputDialog(null, message, initialSelectionValue);</span>
    }

    /**
     * Shows a question-message dialog requesting input from the user
     * parented to &lt;code&gt;parentComponent&lt;/code&gt;.
     * The dialog is displayed on top of the &lt;code&gt;Component&lt;/code&gt;'s
     * frame, and is usually positioned below the &lt;code&gt;Component&lt;/code&gt;.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt; for the
     *          dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     * @exception HeadlessException if
     *    &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *    &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static String showInputDialog(Component parentComponent,
        Object message) throws HeadlessException {
<span class="nc" id="L475">        return showInputDialog(parentComponent, message, UIManager.getString(</span>
            &quot;OptionPane.inputDialogTitle&quot;, parentComponent), QUESTION_MESSAGE);
    }

    /**
     * Shows a question-message dialog requesting input from the user and
     * parented to &lt;code&gt;parentComponent&lt;/code&gt;. The input value will be
     * initialized to &lt;code&gt;initialSelectionValue&lt;/code&gt;.
     * The dialog is displayed on top of the &lt;code&gt;Component&lt;/code&gt;'s
     * frame, and is usually positioned below the &lt;code&gt;Component&lt;/code&gt;.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt; for the
     *          dialog
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param initialSelectionValue the value used to initialize the input
     *                 field
     * @since 1.4
     */
    public static String showInputDialog(Component parentComponent, Object message,
                                         Object initialSelectionValue) {
<span class="nc" id="L495">        return (String)showInputDialog(parentComponent, message,</span>
<span class="nc" id="L496">                      UIManager.getString(&quot;OptionPane.inputDialogTitle&quot;,</span>
                      parentComponent), QUESTION_MESSAGE, null, null,
                      initialSelectionValue);
    }

    /**
     * Shows a dialog requesting input from the user parented to
     * &lt;code&gt;parentComponent&lt;/code&gt; with the dialog having the title
     * &lt;code&gt;title&lt;/code&gt; and message type &lt;code&gt;messageType&lt;/code&gt;.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt; for the
     *                  dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title    the &lt;code&gt;String&lt;/code&gt; to display in the dialog
     *                  title bar
     * @param messageType the type of message that is to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static String showInputDialog(Component parentComponent,
        Object message, String title, int messageType)
        throws HeadlessException {
<span class="nc" id="L525">        return (String)showInputDialog(parentComponent, message, title,</span>
                                       messageType, null, null, null);
    }

    /**
     * Prompts the user for input in a blocking dialog where the
     * initial selection, possible selections, and all other options can
     * be specified. The user will able to choose from
     * &lt;code&gt;selectionValues&lt;/code&gt;, where &lt;code&gt;null&lt;/code&gt; implies the
     * user can input
     * whatever they wish, usually by means of a &lt;code&gt;JTextField&lt;/code&gt;.
     * &lt;code&gt;initialSelectionValue&lt;/code&gt; is the initial value to prompt
     * the user with. It is up to the UI to decide how best to represent
     * the &lt;code&gt;selectionValues&lt;/code&gt;, but usually a
     * &lt;code&gt;JComboBox&lt;/code&gt;, &lt;code&gt;JList&lt;/code&gt;, or
     * &lt;code&gt;JTextField&lt;/code&gt; will be used.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt; for the
     *                  dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title    the &lt;code&gt;String&lt;/code&gt; to display in the
     *                  dialog title bar
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon     the &lt;code&gt;Icon&lt;/code&gt; image to display
     * @param selectionValues an array of &lt;code&gt;Object&lt;/code&gt;s that
     *                  gives the possible selections
     * @param initialSelectionValue the value used to initialize the input
     *                 field
     * @return user's input, or &lt;code&gt;null&lt;/code&gt; meaning the user
     *                  canceled the input
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static Object showInputDialog(Component parentComponent,
        Object message, String title, int messageType, Icon icon,
        Object[] selectionValues, Object initialSelectionValue)
        throws HeadlessException {
<span class="nc" id="L569">        JOptionPane    pane = new JOptionPane(message, messageType,</span>
                                              OK_CANCEL_OPTION, icon,
                                              null, null);

<span class="nc" id="L573">        pane.setWantsInput(true);</span>
<span class="nc" id="L574">        pane.setSelectionValues(selectionValues);</span>
<span class="nc" id="L575">        pane.setInitialSelectionValue(initialSelectionValue);</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">        pane.setComponentOrientation(((parentComponent == null) ?</span>
<span class="nc" id="L577">            getRootFrame() : parentComponent).getComponentOrientation());</span>

<span class="nc" id="L579">        int style = styleFromMessageType(messageType);</span>
<span class="nc" id="L580">        JDialog dialog = pane.createDialog(parentComponent, title, style);</span>

<span class="nc" id="L582">        pane.selectInitialValue();</span>
<span class="nc" id="L583">        dialog.show();</span>
<span class="nc" id="L584">        dialog.dispose();</span>

<span class="nc" id="L586">        Object value = pane.getInputValue();</span>

<span class="nc bnc" id="L588" title="All 2 branches missed.">        if (value == UNINITIALIZED_VALUE) {</span>
<span class="nc" id="L589">            return null;</span>
        }
<span class="nc" id="L591">        return value;</span>
    }

    /**
     * Brings up an information-message dialog titled &quot;Message&quot;.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in
     *          which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static void showMessageDialog(Component parentComponent,
        Object message) throws HeadlessException {
<span class="nc" id="L609">        showMessageDialog(parentComponent, message, UIManager.getString(</span>
                    &quot;OptionPane.messageDialogTitle&quot;, parentComponent),
                    INFORMATION_MESSAGE);
<span class="nc" id="L612">    }</span>

    /**
     * Brings up a dialog that displays a message using a default
     * icon determined by the &lt;code&gt;messageType&lt;/code&gt; parameter.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static void showMessageDialog(Component parentComponent,
        Object message, String title, int messageType)
        throws HeadlessException {
<span class="nc" id="L638">        showMessageDialog(parentComponent, message, title, messageType, null);</span>
<span class="nc" id="L639">    }</span>

    /**
     * Brings up a dialog displaying a message, specifying all parameters.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in which the
     *                  dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *                  or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      an icon to display in the dialog that helps the user
     *                  identify the kind of message that is being displayed
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static void showMessageDialog(Component parentComponent,
        Object message, String title, int messageType, Icon icon)
        throws HeadlessException {
<span class="nc" id="L667">        showOptionDialog(parentComponent, message, title, DEFAULT_OPTION,</span>
                         messageType, icon, null, null);
<span class="nc" id="L669">    }</span>

    /**
     * Brings up a dialog with the options &lt;i&gt;Yes&lt;/i&gt;,
     * &lt;i&gt;No&lt;/i&gt; and &lt;i&gt;Cancel&lt;/i&gt;; with the
     * title, &lt;b&gt;Select an Option&lt;/b&gt;.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in which the
     *                  dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *                  or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @return an integer indicating the option selected by the user
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static int showConfirmDialog(Component parentComponent,
        Object message) throws HeadlessException {
<span class="nc" id="L690">        return showConfirmDialog(parentComponent, message,</span>
<span class="nc" id="L691">                                 UIManager.getString(&quot;OptionPane.titleText&quot;),</span>
                                 YES_NO_CANCEL_OPTION);
    }

    /**
     * Brings up a dialog where the number of choices is determined
     * by the &lt;code&gt;optionType&lt;/code&gt; parameter.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in which the
     *                  dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *                  or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param optionType an int designating the options available on the dialog:
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  or &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @return an int indicating the option selected by the user
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType)
        throws HeadlessException {
<span class="nc" id="L719">        return showConfirmDialog(parentComponent, message, title, optionType,</span>
                                 QUESTION_MESSAGE);
    }

    /**
     * Brings up a dialog where the number of choices is determined
     * by the &lt;code&gt;optionType&lt;/code&gt; parameter, where the
     * &lt;code&gt;messageType&lt;/code&gt;
     * parameter determines the icon to display.
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the Look and Feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in
     *                  which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *                  or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used.
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options available
     *                   on the dialog: &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  or &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param messageType an integer designating the kind of message this is;
     *                  primarily used to determine the icon from the pluggable
     *                  Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @return an integer indicating the option selected by the user
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType, int messageType)
        throws HeadlessException {
<span class="nc" id="L758">        return showConfirmDialog(parentComponent, message, title, optionType,</span>
                                messageType, null);
    }

    /**
     * Brings up a dialog with a specified icon, where the number of
     * choices is determined by the &lt;code&gt;optionType&lt;/code&gt; parameter.
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the look and feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in which the
     *                  dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *                  or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the Object to display
     * @param title     the title string for the dialog
     * @param optionType an int designating the options available on the dialog:
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  or &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param messageType an int designating the kind of message this is,
     *                  primarily used to determine the icon from the pluggable
     *                  Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      the icon to display in the dialog
     * @return an int indicating the option selected by the user
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType,
        int messageType, Icon icon) throws HeadlessException {
<span class="nc" id="L796">        return showOptionDialog(parentComponent, message, title, optionType,</span>
                                messageType, icon, null, null);
    }

    /**
     * Brings up a dialog with a specified icon, where the initial
     * choice is determined by the &lt;code&gt;initialValue&lt;/code&gt; parameter and
     * the number of choices is determined by the &lt;code&gt;optionType&lt;/code&gt;
     * parameter.
     * &lt;p&gt;
     * If &lt;code&gt;optionType&lt;/code&gt; is &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     * or &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
     * and the &lt;code&gt;options&lt;/code&gt; parameter is &lt;code&gt;null&lt;/code&gt;,
     * then the options are
     * supplied by the look and feel.
     * &lt;p&gt;
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the look and feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *                  in which the dialog is displayed;  if
     *                  &lt;code&gt;null&lt;/code&gt;, or if the
     *                  &lt;code&gt;parentComponent&lt;/code&gt; has no
     *                  &lt;code&gt;Frame&lt;/code&gt;, a
     *                  default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options available on the
     *                  dialog: &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  or &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param messageType an integer designating the kind of message this is,
     *                  primarily used to determine the icon from the
     *                  pluggable Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      the icon to display in the dialog
     * @param options   an array of objects indicating the possible choices
     *                  the user can make; if the objects are components, they
     *                  are rendered properly; non-&lt;code&gt;String&lt;/code&gt;
     *                  objects are
     *                  rendered using their &lt;code&gt;toString&lt;/code&gt; methods;
     *                  if this parameter is &lt;code&gt;null&lt;/code&gt;,
     *                  the options are determined by the Look and Feel
     * @param initialValue the object that represents the default selection
     *                  for the dialog; only meaningful if &lt;code&gt;options&lt;/code&gt;
     *                  is used; can be &lt;code&gt;null&lt;/code&gt;
     * @return an integer indicating the option chosen by the user,
     *                  or &lt;code&gt;CLOSED_OPTION&lt;/code&gt; if the user closed
     *                  the dialog
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static int showOptionDialog(Component parentComponent,
        Object message, String title, int optionType, int messageType,
        Icon icon, Object[] options, Object initialValue)
        throws HeadlessException {
<span class="nc" id="L858">        JOptionPane             pane = new JOptionPane(message, messageType,</span>
                                                       optionType, icon,
                                                       options, initialValue);

<span class="nc" id="L862">        pane.setInitialValue(initialValue);</span>
<span class="nc bnc" id="L863" title="All 2 branches missed.">        pane.setComponentOrientation(((parentComponent == null) ?</span>
<span class="nc" id="L864">            getRootFrame() : parentComponent).getComponentOrientation());</span>

<span class="nc" id="L866">        int style = styleFromMessageType(messageType);</span>
<span class="nc" id="L867">        JDialog dialog = pane.createDialog(parentComponent, title, style);</span>

<span class="nc" id="L869">        pane.selectInitialValue();</span>
<span class="nc" id="L870">        dialog.show();</span>
<span class="nc" id="L871">        dialog.dispose();</span>

<span class="nc" id="L873">        Object        selectedValue = pane.getValue();</span>

<span class="nc bnc" id="L875" title="All 2 branches missed.">        if(selectedValue == null)</span>
<span class="nc" id="L876">            return CLOSED_OPTION;</span>
<span class="nc bnc" id="L877" title="All 2 branches missed.">        if(options == null) {</span>
<span class="nc bnc" id="L878" title="All 2 branches missed.">            if(selectedValue instanceof Integer)</span>
<span class="nc" id="L879">                return ((Integer)selectedValue).intValue();</span>
<span class="nc" id="L880">            return CLOSED_OPTION;</span>
        }
<span class="nc" id="L882">        for(int counter = 0, maxCounter = options.length;</span>
<span class="nc bnc" id="L883" title="All 2 branches missed.">            counter &lt; maxCounter; counter++) {</span>
<span class="nc bnc" id="L884" title="All 2 branches missed.">            if(options[counter].equals(selectedValue))</span>
<span class="nc" id="L885">                return counter;</span>
        }
<span class="nc" id="L887">        return CLOSED_OPTION;</span>
    }

    /**
     * Creates and returns a new &lt;code&gt;JDialog&lt;/code&gt; wrapping
     * &lt;code&gt;this&lt;/code&gt; centered on the &lt;code&gt;parentComponent&lt;/code&gt;
     * in the &lt;code&gt;parentComponent&lt;/code&gt;'s frame.
     * &lt;code&gt;title&lt;/code&gt; is the title of the returned dialog.
     * The returned &lt;code&gt;JDialog&lt;/code&gt; will not be resizable by the
     * user, however programs can invoke &lt;code&gt;setResizable&lt;/code&gt; on
     * the &lt;code&gt;JDialog&lt;/code&gt; instance to change this property.
     * The returned &lt;code&gt;JDialog&lt;/code&gt; will be set up such that
     * once it is closed, or the user clicks on one of the buttons,
     * the optionpane's value property will be set accordingly and
     * the dialog will be closed.  Each time the dialog is made visible,
     * it will reset the option pane's value property to
     * &lt;code&gt;JOptionPane.UNINITIALIZED_VALUE&lt;/code&gt; to ensure the
     * user's subsequent action closes the dialog properly.
     *
     * @param parentComponent determines the frame in which the dialog
     *          is displayed; if the &lt;code&gt;parentComponent&lt;/code&gt; has
     *          no &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param title     the title string for the dialog
     * @return a new &lt;code&gt;JDialog&lt;/code&gt; containing this instance
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public JDialog createDialog(Component parentComponent, String title)
        throws HeadlessException {
<span class="nc" id="L918">        int style = styleFromMessageType(getMessageType());</span>
<span class="nc" id="L919">        return createDialog(parentComponent, title, style);</span>
    }

    /**
     * Creates and returns a new parentless &lt;code&gt;JDialog&lt;/code&gt;
     * with the specified title.
     * The returned &lt;code&gt;JDialog&lt;/code&gt; will not be resizable by the
     * user, however programs can invoke &lt;code&gt;setResizable&lt;/code&gt; on
     * the &lt;code&gt;JDialog&lt;/code&gt; instance to change this property.
     * The returned &lt;code&gt;JDialog&lt;/code&gt; will be set up such that
     * once it is closed, or the user clicks on one of the buttons,
     * the optionpane's value property will be set accordingly and
     * the dialog will be closed.  Each time the dialog is made visible,
     * it will reset the option pane's value property to
     * &lt;code&gt;JOptionPane.UNINITIALIZED_VALUE&lt;/code&gt; to ensure the
     * user's subsequent action closes the dialog properly.
     *
     * @param title     the title string for the dialog
     * @return a new &lt;code&gt;JDialog&lt;/code&gt; containing this instance
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     * @since 1.6
     */
    public JDialog createDialog(String title) throws HeadlessException {
<span class="nc" id="L945">        int style = styleFromMessageType(getMessageType());</span>
<span class="nc" id="L946">        JDialog dialog = new JDialog((Dialog) null, title, true);</span>
<span class="nc" id="L947">        initDialog(dialog, style, null);</span>
<span class="nc" id="L948">        return dialog;</span>
    }

    private JDialog createDialog(Component parentComponent, String title,
            int style)
            throws HeadlessException {

        final JDialog dialog;

<span class="nc" id="L957">        Window window = JOptionPane.getWindowForComponent(parentComponent);</span>
<span class="nc bnc" id="L958" title="All 2 branches missed.">        if (window instanceof Frame) {</span>
<span class="nc" id="L959">            dialog = new JDialog((Frame)window, title, true);</span>
        } else {
<span class="nc" id="L961">            dialog = new JDialog((Dialog)window, title, true);</span>
        }
<span class="nc bnc" id="L963" title="All 2 branches missed.">        if (window instanceof SwingUtilities.SharedOwnerFrame) {</span>
            WindowListener ownerShutdownListener =
<span class="nc" id="L965">                    SwingUtilities.getSharedOwnerFrameShutdownListener();</span>
<span class="nc" id="L966">            dialog.addWindowListener(ownerShutdownListener);</span>
        }
<span class="nc" id="L968">        initDialog(dialog, style, parentComponent);</span>
<span class="nc" id="L969">        return dialog;</span>
    }

    private void initDialog(final JDialog dialog, int style, Component parentComponent) {
<span class="nc" id="L973">        dialog.setComponentOrientation(this.getComponentOrientation());</span>
<span class="nc" id="L974">        Container contentPane = dialog.getContentPane();</span>

<span class="nc" id="L976">        contentPane.setLayout(new BorderLayout());</span>
<span class="nc" id="L977">        contentPane.add(this, BorderLayout.CENTER);</span>
<span class="nc" id="L978">        dialog.setResizable(false);</span>
<span class="nc bnc" id="L979" title="All 2 branches missed.">        if (JDialog.isDefaultLookAndFeelDecorated()) {</span>
            boolean supportsWindowDecorations =
<span class="nc" id="L981">              UIManager.getLookAndFeel().getSupportsWindowDecorations();</span>
<span class="nc bnc" id="L982" title="All 2 branches missed.">            if (supportsWindowDecorations) {</span>
<span class="nc" id="L983">                dialog.setUndecorated(true);</span>
<span class="nc" id="L984">                getRootPane().setWindowDecorationStyle(style);</span>
            }
        }
<span class="nc" id="L987">        dialog.pack();</span>
<span class="nc" id="L988">        dialog.setLocationRelativeTo(parentComponent);</span>

<span class="nc" id="L990">        final PropertyChangeListener listener = new PropertyChangeListener() {</span>
            public void propertyChange(PropertyChangeEvent event) {
                // Let the defaultCloseOperation handle the closing
                // if the user closed the window without selecting a button
                // (newValue = null in that case).  Otherwise, close the dialog.
<span class="nc bnc" id="L995" title="All 4 branches missed.">                if (dialog.isVisible() &amp;&amp; event.getSource() == JOptionPane.this &amp;&amp;</span>
<span class="nc bnc" id="L996" title="All 2 branches missed.">                        (event.getPropertyName().equals(VALUE_PROPERTY)) &amp;&amp;</span>
<span class="nc bnc" id="L997" title="All 2 branches missed.">                        event.getNewValue() != null &amp;&amp;</span>
<span class="nc bnc" id="L998" title="All 2 branches missed.">                        event.getNewValue() != JOptionPane.UNINITIALIZED_VALUE) {</span>
<span class="nc" id="L999">                    dialog.setVisible(false);</span>
                }
<span class="nc" id="L1001">            }</span>
        };

<span class="nc" id="L1004">        WindowAdapter adapter = new WindowAdapter() {</span>
<span class="nc" id="L1005">            private boolean gotFocus = false;</span>
            public void windowClosing(WindowEvent we) {
<span class="nc" id="L1007">                setValue(null);</span>
<span class="nc" id="L1008">            }</span>

            public void windowClosed(WindowEvent e) {
<span class="nc" id="L1011">                removePropertyChangeListener(listener);</span>
<span class="nc" id="L1012">                dialog.getContentPane().removeAll();</span>
<span class="nc" id="L1013">            }</span>

            public void windowGainedFocus(WindowEvent we) {
                // Once window gets focus, set initial focus
<span class="nc bnc" id="L1017" title="All 2 branches missed.">                if (!gotFocus) {</span>
<span class="nc" id="L1018">                    selectInitialValue();</span>
<span class="nc" id="L1019">                    gotFocus = true;</span>
                }
<span class="nc" id="L1021">            }</span>
        };
<span class="nc" id="L1023">        dialog.addWindowListener(adapter);</span>
<span class="nc" id="L1024">        dialog.addWindowFocusListener(adapter);</span>
<span class="nc" id="L1025">        dialog.addComponentListener(new ComponentAdapter() {</span>
            public void componentShown(ComponentEvent ce) {
                // reset value to ensure closing works properly
<span class="nc" id="L1028">                setValue(JOptionPane.UNINITIALIZED_VALUE);</span>
<span class="nc" id="L1029">            }</span>
        });

<span class="nc" id="L1032">        addPropertyChangeListener(listener);</span>
<span class="nc" id="L1033">    }</span>


    /**
     * Brings up an internal confirmation dialog panel. The dialog
     * is a information-message dialog titled &quot;Message&quot;.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the object to display
     */
    public static void showInternalMessageDialog(Component parentComponent,
                                                 Object message) {
<span class="nc" id="L1048">        showInternalMessageDialog(parentComponent, message, UIManager.</span>
<span class="nc" id="L1049">                                 getString(&quot;OptionPane.messageDialogTitle&quot;,</span>
                                 parentComponent), INFORMATION_MESSAGE);
<span class="nc" id="L1051">    }</span>

    /**
     * Brings up an internal dialog panel that displays a message
     * using a default icon determined by the &lt;code&gt;messageType&lt;/code&gt;
     * parameter.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     */
    public static void showInternalMessageDialog(Component parentComponent,
                                                 Object message, String title,
                                                 int messageType) {
<span class="nc" id="L1074">        showInternalMessageDialog(parentComponent, message, title, messageType,null);</span>
<span class="nc" id="L1075">    }</span>

    /**
     * Brings up an internal dialog panel displaying a message,
     * specifying all parameters.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title     the title string for the dialog
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      an icon to display in the dialog that helps the user
     *                  identify the kind of message that is being displayed
     */
    public static void showInternalMessageDialog(Component parentComponent,
                                         Object message,
                                         String title, int messageType,
                                         Icon icon){
<span class="nc" id="L1100">        showInternalOptionDialog(parentComponent, message, title, DEFAULT_OPTION,</span>
                                 messageType, icon, null, null);
<span class="nc" id="L1102">    }</span>

    /**
     * Brings up an internal dialog panel with the options &lt;i&gt;Yes&lt;/i&gt;, &lt;i&gt;No&lt;/i&gt;
     * and &lt;i&gt;Cancel&lt;/i&gt;; with the title, &lt;b&gt;Select an Option&lt;/b&gt;.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in
     *          which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the &lt;code&gt;Object&lt;/code&gt; to display
     * @return an integer indicating the option selected by the user
     */
    public static int showInternalConfirmDialog(Component parentComponent,
                                                Object message) {
<span class="nc" id="L1117">        return showInternalConfirmDialog(parentComponent, message,</span>
<span class="nc" id="L1118">                                 UIManager.getString(&quot;OptionPane.titleText&quot;),</span>
                                 YES_NO_CANCEL_OPTION);
    }

    /**
     * Brings up a internal dialog panel where the number of choices
     * is determined by the &lt;code&gt;optionType&lt;/code&gt; parameter.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the object to display in the dialog; a
     *          &lt;code&gt;Component&lt;/code&gt; object is rendered as a
     *          &lt;code&gt;Component&lt;/code&gt;; a &lt;code&gt;String&lt;/code&gt;
     *          object is rendered as a string; other objects
     *          are converted to a &lt;code&gt;String&lt;/code&gt; using the
     *          &lt;code&gt;toString&lt;/code&gt; method
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options
     *          available on the dialog: &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *          or &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
     * @return an integer indicating the option selected by the user
     */
    public static int showInternalConfirmDialog(Component parentComponent,
                                                Object message, String title,
                                                int optionType) {
<span class="nc" id="L1145">        return showInternalConfirmDialog(parentComponent, message, title, optionType,</span>
                                         QUESTION_MESSAGE);
    }

    /**
     * Brings up an internal dialog panel where the number of choices
     * is determined by the &lt;code&gt;optionType&lt;/code&gt; parameter, where
     * the &lt;code&gt;messageType&lt;/code&gt; parameter determines the icon to display.
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the Look and Feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt; in
     *          which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the object to display in the dialog; a
     *          &lt;code&gt;Component&lt;/code&gt; object is rendered as a
     *          &lt;code&gt;Component&lt;/code&gt;; a &lt;code&gt;String&lt;/code&gt;
     *          object is rendered as a string; other objects are
     *          converted to a &lt;code&gt;String&lt;/code&gt; using the
     *          &lt;code&gt;toString&lt;/code&gt; method
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options
     *          available on the dialog:
     *          &lt;code&gt;YES_NO_OPTION&lt;/code&gt;, or &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
     * @param messageType an integer designating the kind of message this is,
     *          primarily used to determine the icon from the
     *          pluggable Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;, &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *          or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @return an integer indicating the option selected by the user
     */
    public static int showInternalConfirmDialog(Component parentComponent,
                                        Object message,
                                        String title, int optionType,
                                        int messageType) {
<span class="nc" id="L1182">        return showInternalConfirmDialog(parentComponent, message, title, optionType,</span>
                                         messageType, null);
    }

    /**
     * Brings up an internal dialog panel with a specified icon, where
     * the number of choices is determined by the &lt;code&gt;optionType&lt;/code&gt;
     * parameter.
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the look and feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the parentComponent has no Frame, a
     *          default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the object to display in the dialog; a
     *          &lt;code&gt;Component&lt;/code&gt; object is rendered as a
     *          &lt;code&gt;Component&lt;/code&gt;; a &lt;code&gt;String&lt;/code&gt;
     *          object is rendered as a string; other objects are
     *          converted to a &lt;code&gt;String&lt;/code&gt; using the
     *          &lt;code&gt;toString&lt;/code&gt; method
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options available
     *          on the dialog:
     *          &lt;code&gt;YES_NO_OPTION&lt;/code&gt;, or
     *          &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;.
     * @param messageType an integer designating the kind of message this is,
     *          primarily used to determine the icon from the pluggable
     *          Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;, &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *          or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      the icon to display in the dialog
     * @return an integer indicating the option selected by the user
     */
    public static int showInternalConfirmDialog(Component parentComponent,
                                        Object message,
                                        String title, int optionType,
                                        int messageType, Icon icon) {
<span class="nc" id="L1221">        return showInternalOptionDialog(parentComponent, message, title, optionType,</span>
                                        messageType, icon, null, null);
    }

    /**
     * Brings up an internal dialog panel with a specified icon, where
     * the initial choice is determined by the &lt;code&gt;initialValue&lt;/code&gt;
     * parameter and the number of choices is determined by the
     * &lt;code&gt;optionType&lt;/code&gt; parameter.
     * &lt;p&gt;
     * If &lt;code&gt;optionType&lt;/code&gt; is &lt;code&gt;YES_NO_OPTION&lt;/code&gt;, or
     * &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
     * and the &lt;code&gt;options&lt;/code&gt; parameter is &lt;code&gt;null&lt;/code&gt;,
     * then the options are supplied by the Look and Feel.
     * &lt;p&gt;
     * The &lt;code&gt;messageType&lt;/code&gt; parameter is primarily used to supply
     * a default icon from the look and feel.
     *
     * @param parentComponent determines the &lt;code&gt;Frame&lt;/code&gt;
     *          in which the dialog is displayed; if &lt;code&gt;null&lt;/code&gt;,
     *          or if the &lt;code&gt;parentComponent&lt;/code&gt; has no
     *          &lt;code&gt;Frame&lt;/code&gt;, a default &lt;code&gt;Frame&lt;/code&gt; is used
     * @param message   the object to display in the dialog; a
     *          &lt;code&gt;Component&lt;/code&gt; object is rendered as a
     *          &lt;code&gt;Component&lt;/code&gt;; a &lt;code&gt;String&lt;/code&gt;
     *          object is rendered as a string. Other objects are
     *          converted to a &lt;code&gt;String&lt;/code&gt; using the
     *          &lt;code&gt;toString&lt;/code&gt; method
     * @param title     the title string for the dialog
     * @param optionType an integer designating the options available
     *          on the dialog: &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *          or &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;
     * @param messageType an integer designating the kind of message this is;
     *          primarily used to determine the icon from the
     *          pluggable Look and Feel: &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *          &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;, &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *          or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon      the icon to display in the dialog
     * @param options   an array of objects indicating the possible choices
     *          the user can make; if the objects are components, they
     *          are rendered properly; non-&lt;code&gt;String&lt;/code&gt;
     *          objects are rendered using their &lt;code&gt;toString&lt;/code&gt;
     *          methods; if this parameter is &lt;code&gt;null&lt;/code&gt;,
     *          the options are determined by the Look and Feel
     * @param initialValue the object that represents the default selection
     *          for the dialog; only meaningful if &lt;code&gt;options&lt;/code&gt;
     *          is used; can be &lt;code&gt;null&lt;/code&gt;
     * @return an integer indicating the option chosen by the user,
     *          or &lt;code&gt;CLOSED_OPTION&lt;/code&gt; if the user closed the Dialog
     */
    public static int showInternalOptionDialog(Component parentComponent,
                                       Object message,
                                       String title, int optionType,
                                       int messageType, Icon icon,
                                       Object[] options, Object initialValue) {
<span class="nc" id="L1277">        JOptionPane pane = new JOptionPane(message, messageType,</span>
                optionType, icon, options, initialValue);
<span class="nc" id="L1279">        pane.putClientProperty(PopupFactory_FORCE_HEAVYWEIGHT_POPUP,</span>
                Boolean.TRUE);
<span class="nc" id="L1281">        Component fo = KeyboardFocusManager.getCurrentKeyboardFocusManager().</span>
<span class="nc" id="L1282">                getFocusOwner();</span>

<span class="nc" id="L1284">        pane.setInitialValue(initialValue);</span>

<span class="nc" id="L1286">        JInternalFrame dialog =</span>
<span class="nc" id="L1287">            pane.createInternalFrame(parentComponent, title);</span>
<span class="nc" id="L1288">        pane.selectInitialValue();</span>
<span class="nc" id="L1289">        dialog.setVisible(true);</span>

        /* Since all input will be blocked until this dialog is dismissed,
         * make sure its parent containers are visible first (this component
         * is tested below).  This is necessary for JApplets, because
         * because an applet normally isn't made visible until after its
         * start() method returns -- if this method is called from start(),
         * the applet will appear to hang while an invisible modal frame
         * waits for input.
         */
<span class="nc bnc" id="L1299" title="All 4 branches missed.">        if (dialog.isVisible() &amp;&amp; !dialog.isShowing()) {</span>
<span class="nc" id="L1300">            Container parent = dialog.getParent();</span>
<span class="nc bnc" id="L1301" title="All 2 branches missed.">            while (parent != null) {</span>
<span class="nc bnc" id="L1302" title="All 2 branches missed.">                if (parent.isVisible() == false) {</span>
<span class="nc" id="L1303">                    parent.setVisible(true);</span>
                }
<span class="nc" id="L1305">                parent = parent.getParent();</span>
            }
        }

        // Use reflection to get Container.startLWModal.
        try {
<span class="nc" id="L1311">            Method method = AccessController.doPrivileged(new ModalPrivilegedAction(</span>
                    Container.class, &quot;startLWModal&quot;));
<span class="nc bnc" id="L1313" title="All 2 branches missed.">            if (method != null) {</span>
<span class="nc" id="L1314">                method.invoke(dialog, (Object[])null);</span>
            }
<span class="nc" id="L1316">        } catch (IllegalAccessException ex) {</span>
<span class="nc" id="L1317">        } catch (IllegalArgumentException ex) {</span>
<span class="nc" id="L1318">        } catch (InvocationTargetException ex) {</span>
<span class="nc" id="L1319">        }</span>

<span class="nc bnc" id="L1321" title="All 2 branches missed.">        if (parentComponent instanceof JInternalFrame) {</span>
            try {
<span class="nc" id="L1323">                ((JInternalFrame)parentComponent).setSelected(true);</span>
<span class="nc" id="L1324">            } catch (java.beans.PropertyVetoException e) {</span>
<span class="nc" id="L1325">            }</span>
        }

<span class="nc" id="L1328">        Object selectedValue = pane.getValue();</span>

<span class="nc bnc" id="L1330" title="All 4 branches missed.">        if (fo != null &amp;&amp; fo.isShowing()) {</span>
<span class="nc" id="L1331">            fo.requestFocus();</span>
        }
<span class="nc bnc" id="L1333" title="All 2 branches missed.">        if (selectedValue == null) {</span>
<span class="nc" id="L1334">            return CLOSED_OPTION;</span>
        }
<span class="nc bnc" id="L1336" title="All 2 branches missed.">        if (options == null) {</span>
<span class="nc bnc" id="L1337" title="All 2 branches missed.">            if (selectedValue instanceof Integer) {</span>
<span class="nc" id="L1338">                return ((Integer)selectedValue).intValue();</span>
            }
<span class="nc" id="L1340">            return CLOSED_OPTION;</span>
        }
<span class="nc" id="L1342">        for(int counter = 0, maxCounter = options.length;</span>
<span class="nc bnc" id="L1343" title="All 2 branches missed.">            counter &lt; maxCounter; counter++) {</span>
<span class="nc bnc" id="L1344" title="All 2 branches missed.">            if (options[counter].equals(selectedValue)) {</span>
<span class="nc" id="L1345">                return counter;</span>
            }
        }
<span class="nc" id="L1348">        return CLOSED_OPTION;</span>
    }

    /**
     * Shows an internal question-message dialog requesting input from
     * the user parented to &lt;code&gt;parentComponent&lt;/code&gt;. The dialog
     * is displayed in the &lt;code&gt;Component&lt;/code&gt;'s frame,
     * and is usually positioned below the &lt;code&gt;Component&lt;/code&gt;.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt;
     *          for the dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     */
    public static String showInternalInputDialog(Component parentComponent,
                                                 Object message) {
<span class="nc" id="L1363">        return showInternalInputDialog(parentComponent, message, UIManager.</span>
<span class="nc" id="L1364">               getString(&quot;OptionPane.inputDialogTitle&quot;, parentComponent),</span>
               QUESTION_MESSAGE);
    }

    /**
     * Shows an internal dialog requesting input from the user parented
     * to &lt;code&gt;parentComponent&lt;/code&gt; with the dialog having the title
     * &lt;code&gt;title&lt;/code&gt; and message type &lt;code&gt;messageType&lt;/code&gt;.
     *
     * @param parentComponent the parent &lt;code&gt;Component&lt;/code&gt; for the dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title    the &lt;code&gt;String&lt;/code&gt; to display in the
     *          dialog title bar
     * @param messageType the type of message that is to be displayed:
     *                    ERROR_MESSAGE, INFORMATION_MESSAGE, WARNING_MESSAGE,
     *                    QUESTION_MESSAGE, or PLAIN_MESSAGE
     */
    public static String showInternalInputDialog(Component parentComponent,
                             Object message, String title, int messageType) {
<span class="nc" id="L1383">        return (String)showInternalInputDialog(parentComponent, message, title,</span>
                                       messageType, null, null, null);
    }

    /**
     * Prompts the user for input in a blocking internal dialog where
     * the initial selection, possible selections, and all other
     * options can be specified. The user will able to choose from
     * &lt;code&gt;selectionValues&lt;/code&gt;, where &lt;code&gt;null&lt;/code&gt;
     * implies the user can input
     * whatever they wish, usually by means of a &lt;code&gt;JTextField&lt;/code&gt;.
     * &lt;code&gt;initialSelectionValue&lt;/code&gt; is the initial value to prompt
     * the user with. It is up to the UI to decide how best to represent
     * the &lt;code&gt;selectionValues&lt;/code&gt;, but usually a
     * &lt;code&gt;JComboBox&lt;/code&gt;, &lt;code&gt;JList&lt;/code&gt;, or
     * &lt;code&gt;JTextField&lt;/code&gt; will be used.
     *
     * @param parentComponent the parent &lt;code&gt;Component&lt;/code&gt; for the dialog
     * @param message  the &lt;code&gt;Object&lt;/code&gt; to display
     * @param title    the &lt;code&gt;String&lt;/code&gt; to display in the dialog
     *          title bar
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;, &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;, or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param icon     the &lt;code&gt;Icon&lt;/code&gt; image to display
     * @param selectionValues an array of &lt;code&gt;Objects&lt;/code&gt; that
     *                  gives the possible selections
     * @param initialSelectionValue the value used to initialize the input
     *                  field
     * @return user's input, or &lt;code&gt;null&lt;/code&gt; meaning the user
     *          canceled the input
     */
    public static Object showInternalInputDialog(Component parentComponent,
            Object message, String title, int messageType, Icon icon,
            Object[] selectionValues, Object initialSelectionValue) {
<span class="nc" id="L1419">        JOptionPane pane = new JOptionPane(message, messageType,</span>
                OK_CANCEL_OPTION, icon, null, null);
<span class="nc" id="L1421">        pane.putClientProperty(PopupFactory_FORCE_HEAVYWEIGHT_POPUP,</span>
                Boolean.TRUE);
<span class="nc" id="L1423">        Component fo = KeyboardFocusManager.getCurrentKeyboardFocusManager().</span>
<span class="nc" id="L1424">                getFocusOwner();</span>

<span class="nc" id="L1426">        pane.setWantsInput(true);</span>
<span class="nc" id="L1427">        pane.setSelectionValues(selectionValues);</span>
<span class="nc" id="L1428">        pane.setInitialSelectionValue(initialSelectionValue);</span>

<span class="nc" id="L1430">        JInternalFrame dialog =</span>
<span class="nc" id="L1431">            pane.createInternalFrame(parentComponent, title);</span>

<span class="nc" id="L1433">        pane.selectInitialValue();</span>
<span class="nc" id="L1434">        dialog.setVisible(true);</span>

        /* Since all input will be blocked until this dialog is dismissed,
         * make sure its parent containers are visible first (this component
         * is tested below).  This is necessary for JApplets, because
         * because an applet normally isn't made visible until after its
         * start() method returns -- if this method is called from start(),
         * the applet will appear to hang while an invisible modal frame
         * waits for input.
         */
<span class="nc bnc" id="L1444" title="All 4 branches missed.">        if (dialog.isVisible() &amp;&amp; !dialog.isShowing()) {</span>
<span class="nc" id="L1445">            Container parent = dialog.getParent();</span>
<span class="nc bnc" id="L1446" title="All 2 branches missed.">            while (parent != null) {</span>
<span class="nc bnc" id="L1447" title="All 2 branches missed.">                if (parent.isVisible() == false) {</span>
<span class="nc" id="L1448">                    parent.setVisible(true);</span>
                }
<span class="nc" id="L1450">                parent = parent.getParent();</span>
            }
        }

        // Use reflection to get Container.startLWModal.
        try {
<span class="nc" id="L1456">            Method method = AccessController.doPrivileged(new ModalPrivilegedAction(</span>
                    Container.class, &quot;startLWModal&quot;));
<span class="nc bnc" id="L1458" title="All 2 branches missed.">            if (method != null) {</span>
<span class="nc" id="L1459">                method.invoke(dialog, (Object[])null);</span>
            }
<span class="nc" id="L1461">        } catch (IllegalAccessException ex) {</span>
<span class="nc" id="L1462">        } catch (IllegalArgumentException ex) {</span>
<span class="nc" id="L1463">        } catch (InvocationTargetException ex) {</span>
<span class="nc" id="L1464">        }</span>

<span class="nc bnc" id="L1466" title="All 2 branches missed.">        if (parentComponent instanceof JInternalFrame) {</span>
            try {
<span class="nc" id="L1468">                ((JInternalFrame)parentComponent).setSelected(true);</span>
<span class="nc" id="L1469">            } catch (java.beans.PropertyVetoException e) {</span>
<span class="nc" id="L1470">            }</span>
        }

<span class="nc bnc" id="L1473" title="All 4 branches missed.">        if (fo != null &amp;&amp; fo.isShowing()) {</span>
<span class="nc" id="L1474">            fo.requestFocus();</span>
        }
<span class="nc" id="L1476">        Object value = pane.getInputValue();</span>

<span class="nc bnc" id="L1478" title="All 2 branches missed.">        if (value == UNINITIALIZED_VALUE) {</span>
<span class="nc" id="L1479">            return null;</span>
        }
<span class="nc" id="L1481">        return value;</span>
    }

    /**
     * Creates and returns an instance of &lt;code&gt;JInternalFrame&lt;/code&gt;.
     * The internal frame is created with the specified title,
     * and wrapping the &lt;code&gt;JOptionPane&lt;/code&gt;.
     * The returned &lt;code&gt;JInternalFrame&lt;/code&gt; is
     * added to the &lt;code&gt;JDesktopPane&lt;/code&gt; ancestor of
     * &lt;code&gt;parentComponent&lt;/code&gt;, or components
     * parent if one its ancestors isn't a &lt;code&gt;JDesktopPane&lt;/code&gt;,
     * or if &lt;code&gt;parentComponent&lt;/code&gt;
     * doesn't have a parent then a &lt;code&gt;RuntimeException&lt;/code&gt; is thrown.
     *
     * @param parentComponent  the parent &lt;code&gt;Component&lt;/code&gt; for
     *          the internal frame
     * @param title    the &lt;code&gt;String&lt;/code&gt; to display in the
     *          frame's title bar
     * @return a &lt;code&gt;JInternalFrame&lt;/code&gt; containing a
     *          &lt;code&gt;JOptionPane&lt;/code&gt;
     * @exception RuntimeException if &lt;code&gt;parentComponent&lt;/code&gt; does
     *          not have a valid parent
     */
    public JInternalFrame createInternalFrame(Component parentComponent,
                                 String title) {
<span class="nc" id="L1506">        Container parent =</span>
<span class="nc" id="L1507">                JOptionPane.getDesktopPaneForComponent(parentComponent);</span>

<span class="nc bnc" id="L1509" title="All 4 branches missed.">        if (parent == null &amp;&amp; (parentComponent == null ||</span>
<span class="nc bnc" id="L1510" title="All 2 branches missed.">                (parent = parentComponent.getParent()) == null)) {</span>
<span class="nc" id="L1511">            throw new RuntimeException(&quot;JOptionPane: parentComponent does &quot; +</span>
                    &quot;not have a valid parent&quot;);
        }

        // Option dialogs should be closable only
<span class="nc" id="L1516">        final JInternalFrame  iFrame = new JInternalFrame(title, false, true,</span>
                                                           false, false);

<span class="nc" id="L1519">        iFrame.putClientProperty(&quot;JInternalFrame.frameType&quot;, &quot;optionDialog&quot;);</span>
<span class="nc" id="L1520">        iFrame.putClientProperty(&quot;JInternalFrame.messageType&quot;,</span>
<span class="nc" id="L1521">                                 Integer.valueOf(getMessageType()));</span>

<span class="nc" id="L1523">        iFrame.addInternalFrameListener(new InternalFrameAdapter() {</span>
            public void internalFrameClosing(InternalFrameEvent e) {
<span class="nc bnc" id="L1525" title="All 2 branches missed.">                if (getValue() == UNINITIALIZED_VALUE) {</span>
<span class="nc" id="L1526">                    setValue(null);</span>
                }
<span class="nc" id="L1528">            }</span>
        });
<span class="nc" id="L1530">        addPropertyChangeListener(new PropertyChangeListener() {</span>
            public void propertyChange(PropertyChangeEvent event) {
                // Let the defaultCloseOperation handle the closing
                // if the user closed the iframe without selecting a button
                // (newValue = null in that case).  Otherwise, close the dialog.
<span class="nc bnc" id="L1535" title="All 2 branches missed.">                if (iFrame.isVisible() &amp;&amp;</span>
<span class="nc bnc" id="L1536" title="All 2 branches missed.">                        event.getSource() == JOptionPane.this &amp;&amp;</span>
<span class="nc bnc" id="L1537" title="All 2 branches missed.">                        event.getPropertyName().equals(VALUE_PROPERTY)) {</span>
                // Use reflection to get Container.stopLWModal().
                try {
<span class="nc" id="L1540">                    Method method = AccessController.doPrivileged(</span>
                        new ModalPrivilegedAction(
                            Container.class, &quot;stopLWModal&quot;));
<span class="nc bnc" id="L1543" title="All 2 branches missed.">                    if (method != null) {</span>
<span class="nc" id="L1544">                        method.invoke(iFrame, (Object[])null);</span>
                    }
<span class="nc" id="L1546">                } catch (IllegalAccessException ex) {</span>
<span class="nc" id="L1547">                } catch (IllegalArgumentException ex) {</span>
<span class="nc" id="L1548">                } catch (InvocationTargetException ex) {</span>
<span class="nc" id="L1549">                }</span>

                try {
<span class="nc" id="L1552">                    iFrame.setClosed(true);</span>
                }
<span class="nc" id="L1554">                catch (java.beans.PropertyVetoException e) {</span>
<span class="nc" id="L1555">                }</span>

<span class="nc" id="L1557">                iFrame.setVisible(false);</span>
                }
<span class="nc" id="L1559">            }</span>
        });
<span class="nc" id="L1561">        iFrame.getContentPane().add(this, BorderLayout.CENTER);</span>
<span class="nc bnc" id="L1562" title="All 2 branches missed.">        if (parent instanceof JDesktopPane) {</span>
<span class="nc" id="L1563">            parent.add(iFrame, JLayeredPane.MODAL_LAYER);</span>
        } else {
<span class="nc" id="L1565">            parent.add(iFrame, BorderLayout.CENTER);</span>
        }
<span class="nc" id="L1567">        Dimension iFrameSize = iFrame.getPreferredSize();</span>
<span class="nc" id="L1568">        Dimension rootSize = parent.getSize();</span>
<span class="nc" id="L1569">        Dimension parentSize = parentComponent.getSize();</span>

<span class="nc" id="L1571">        iFrame.setBounds((rootSize.width - iFrameSize.width) / 2,</span>
                         (rootSize.height - iFrameSize.height) / 2,
                         iFrameSize.width, iFrameSize.height);
        // We want dialog centered relative to its parent component
<span class="nc" id="L1575">        Point iFrameCoord =</span>
<span class="nc" id="L1576">          SwingUtilities.convertPoint(parentComponent, 0, 0, parent);</span>
<span class="nc" id="L1577">        int x = (parentSize.width - iFrameSize.width) / 2 + iFrameCoord.x;</span>
<span class="nc" id="L1578">        int y = (parentSize.height - iFrameSize.height) / 2 + iFrameCoord.y;</span>

        // If possible, dialog should be fully visible
<span class="nc" id="L1581">        int ovrx = x + iFrameSize.width - rootSize.width;</span>
<span class="nc" id="L1582">        int ovry = y + iFrameSize.height - rootSize.height;</span>
<span class="nc bnc" id="L1583" title="All 2 branches missed.">        x = Math.max((ovrx &gt; 0? x - ovrx: x), 0);</span>
<span class="nc bnc" id="L1584" title="All 2 branches missed.">        y = Math.max((ovry &gt; 0? y - ovry: y), 0);</span>
<span class="nc" id="L1585">        iFrame.setBounds(x, y, iFrameSize.width, iFrameSize.height);</span>

<span class="nc" id="L1587">        parent.validate();</span>
        try {
<span class="nc" id="L1589">            iFrame.setSelected(true);</span>
<span class="nc" id="L1590">        } catch (java.beans.PropertyVetoException e) {}</span>

<span class="nc" id="L1592">        return iFrame;</span>
    }

    /**
     * Returns the specified component's &lt;code&gt;Frame&lt;/code&gt;.
     *
     * @param parentComponent the &lt;code&gt;Component&lt;/code&gt; to check for a
     *          &lt;code&gt;Frame&lt;/code&gt;
     * @return the &lt;code&gt;Frame&lt;/code&gt; that contains the component,
     *          or &lt;code&gt;getRootFrame&lt;/code&gt;
     *          if the component is &lt;code&gt;null&lt;/code&gt;,
     *          or does not have a valid &lt;code&gt;Frame&lt;/code&gt; parent
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see #getRootFrame
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static Frame getFrameForComponent(Component parentComponent)
        throws HeadlessException {
<span class="nc bnc" id="L1612" title="All 2 branches missed.">        if (parentComponent == null)</span>
<span class="nc" id="L1613">            return getRootFrame();</span>
<span class="nc bnc" id="L1614" title="All 2 branches missed.">        if (parentComponent instanceof Frame)</span>
<span class="nc" id="L1615">            return (Frame)parentComponent;</span>
<span class="nc" id="L1616">        return JOptionPane.getFrameForComponent(parentComponent.getParent());</span>
    }

    /**
     * Returns the specified component's toplevel &lt;code&gt;Frame&lt;/code&gt; or
     * &lt;code&gt;Dialog&lt;/code&gt;.
     *
     * @param parentComponent the &lt;code&gt;Component&lt;/code&gt; to check for a
     *          &lt;code&gt;Frame&lt;/code&gt; or &lt;code&gt;Dialog&lt;/code&gt;
     * @return the &lt;code&gt;Frame&lt;/code&gt; or &lt;code&gt;Dialog&lt;/code&gt; that
     *          contains the component, or the default
     *          frame if the component is &lt;code&gt;null&lt;/code&gt;,
     *          or does not have a valid
     *          &lt;code&gt;Frame&lt;/code&gt; or &lt;code&gt;Dialog&lt;/code&gt; parent
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    static Window getWindowForComponent(Component parentComponent)
        throws HeadlessException {
<span class="nc bnc" id="L1637" title="All 2 branches missed.">        if (parentComponent == null)</span>
<span class="nc" id="L1638">            return getRootFrame();</span>
<span class="nc bnc" id="L1639" title="All 4 branches missed.">        if (parentComponent instanceof Frame || parentComponent instanceof Dialog)</span>
<span class="nc" id="L1640">            return (Window)parentComponent;</span>
<span class="nc" id="L1641">        return JOptionPane.getWindowForComponent(parentComponent.getParent());</span>
    }


    /**
     * Returns the specified component's desktop pane.
     *
     * @param parentComponent the &lt;code&gt;Component&lt;/code&gt; to check for a
     *          desktop
     * @return the &lt;code&gt;JDesktopPane&lt;/code&gt; that contains the component,
     *          or &lt;code&gt;null&lt;/code&gt; if the component is &lt;code&gt;null&lt;/code&gt;
     *          or does not have an ancestor that is a
     *          &lt;code&gt;JInternalFrame&lt;/code&gt;
     */
    public static JDesktopPane getDesktopPaneForComponent(Component parentComponent) {
<span class="nc bnc" id="L1656" title="All 2 branches missed.">        if(parentComponent == null)</span>
<span class="nc" id="L1657">            return null;</span>
<span class="nc bnc" id="L1658" title="All 2 branches missed.">        if(parentComponent instanceof JDesktopPane)</span>
<span class="nc" id="L1659">            return (JDesktopPane)parentComponent;</span>
<span class="nc" id="L1660">        return getDesktopPaneForComponent(parentComponent.getParent());</span>
    }

<span class="nc" id="L1663">    private static final Object sharedFrameKey = JOptionPane.class;</span>

    /**
     * Sets the frame to use for class methods in which a frame is
     * not provided.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt;
     * It is recommended that rather than using this method you supply a valid parent.
     *
     * @param newRootFrame the default &lt;code&gt;Frame&lt;/code&gt; to use
     */
    public static void setRootFrame(Frame newRootFrame) {
<span class="nc bnc" id="L1675" title="All 2 branches missed.">        if (newRootFrame != null) {</span>
<span class="nc" id="L1676">            SwingUtilities.appContextPut(sharedFrameKey, newRootFrame);</span>
        } else {
<span class="nc" id="L1678">            SwingUtilities.appContextRemove(sharedFrameKey);</span>
        }
<span class="nc" id="L1680">    }</span>

    /**
     * Returns the &lt;code&gt;Frame&lt;/code&gt; to use for the class methods in
     * which a frame is not provided.
     *
     * @return the default &lt;code&gt;Frame&lt;/code&gt; to use
     * @exception HeadlessException if
     *   &lt;code&gt;GraphicsEnvironment.isHeadless&lt;/code&gt; returns
     *   &lt;code&gt;true&lt;/code&gt;
     * @see #setRootFrame
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public static Frame getRootFrame() throws HeadlessException {
<span class="nc" id="L1694">        Frame sharedFrame =</span>
<span class="nc" id="L1695">            (Frame)SwingUtilities.appContextGet(sharedFrameKey);</span>
<span class="nc bnc" id="L1696" title="All 2 branches missed.">        if (sharedFrame == null) {</span>
<span class="nc" id="L1697">            sharedFrame = SwingUtilities.getSharedOwnerFrame();</span>
<span class="nc" id="L1698">            SwingUtilities.appContextPut(sharedFrameKey, sharedFrame);</span>
        }
<span class="nc" id="L1700">        return sharedFrame;</span>
    }

    /**
     * Creates a &lt;code&gt;JOptionPane&lt;/code&gt; with a test message.
     */
    public JOptionPane() {
<span class="nc" id="L1707">        this(&quot;JOptionPane message&quot;);</span>
<span class="nc" id="L1708">    }</span>

    /**
     * Creates a instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a
     * message using the
     * plain-message message type and the default options delivered by
     * the UI.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     */
    public JOptionPane(Object message) {
<span class="nc" id="L1719">        this(message, PLAIN_MESSAGE);</span>
<span class="nc" id="L1720">    }</span>

    /**
     * Creates an instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a message
     * with the specified message type and the default options,
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     */
    public JOptionPane(Object message, int messageType) {
<span class="nc" id="L1735">        this(message, messageType, DEFAULT_OPTION);</span>
<span class="nc" id="L1736">    }</span>

    /**
     * Creates an instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a message
     * with the specified message type and options.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param optionType the options to display in the pane:
     *                  &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;, &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     */
    public JOptionPane(Object message, int messageType, int optionType) {
<span class="nc" id="L1755">        this(message, messageType, optionType, null);</span>
<span class="nc" id="L1756">    }</span>

    /**
     * Creates an instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a message
     * with the specified message type, options, and icon.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param optionType the options to display in the pane:
     *                  &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;, &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param icon the &lt;code&gt;Icon&lt;/code&gt; image to display
     */
    public JOptionPane(Object message, int messageType, int optionType,
                       Icon icon) {
<span class="nc" id="L1777">        this(message, messageType, optionType, icon, null);</span>
<span class="nc" id="L1778">    }</span>

    /**
     * Creates an instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a message
     * with the specified message type, icon, and options.
     * None of the options is initially selected.
     * &lt;p&gt;
     * The options objects should contain either instances of
     * &lt;code&gt;Component&lt;/code&gt;s, (which are added directly) or
     * &lt;code&gt;Strings&lt;/code&gt; (which are wrapped in a &lt;code&gt;JButton&lt;/code&gt;).
     * If you provide &lt;code&gt;Component&lt;/code&gt;s, you must ensure that when the
     * &lt;code&gt;Component&lt;/code&gt; is clicked it messages &lt;code&gt;setValue&lt;/code&gt;
     * in the created &lt;code&gt;JOptionPane&lt;/code&gt;.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param optionType the options to display in the pane:
     *                  &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param icon the &lt;code&gt;Icon&lt;/code&gt; image to display
     * @param options  the choices the user can select
     */
    public JOptionPane(Object message, int messageType, int optionType,
                       Icon icon, Object[] options) {
<span class="nc" id="L1809">        this(message, messageType, optionType, icon, options, null);</span>
<span class="nc" id="L1810">    }</span>

    /**
     * Creates an instance of &lt;code&gt;JOptionPane&lt;/code&gt; to display a message
     * with the specified message type, icon, and options, with the
     * initially-selected option specified.
     *
     * @param message the &lt;code&gt;Object&lt;/code&gt; to display
     * @param messageType the type of message to be displayed:
     *                  &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                  &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;,
     *                  or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @param optionType the options to display in the pane:
     *                  &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @param icon the Icon image to display
     * @param options  the choices the user can select
     * @param initialValue the choice that is initially selected; if
     *                  &lt;code&gt;null&lt;/code&gt;, then nothing will be initially selected;
     *                  only meaningful if &lt;code&gt;options&lt;/code&gt; is used
     */
    public JOptionPane(Object message, int messageType, int optionType,
<span class="nc" id="L1836">                       Icon icon, Object[] options, Object initialValue) {</span>

<span class="nc" id="L1838">        this.message = message;</span>
<span class="nc" id="L1839">        this.options = options;</span>
<span class="nc" id="L1840">        this.initialValue = initialValue;</span>
<span class="nc" id="L1841">        this.icon = icon;</span>
<span class="nc" id="L1842">        setMessageType(messageType);</span>
<span class="nc" id="L1843">        setOptionType(optionType);</span>
<span class="nc" id="L1844">        value = UNINITIALIZED_VALUE;</span>
<span class="nc" id="L1845">        inputValue = UNINITIALIZED_VALUE;</span>
<span class="nc" id="L1846">        updateUI();</span>
<span class="nc" id="L1847">    }</span>

    /**
     * Sets the UI object which implements the L&amp;F for this component.
     *
     * @param ui  the &lt;code&gt;OptionPaneUI&lt;/code&gt; L&amp;F object
     * @see UIDefaults#getUI
     * @beaninfo
     *       bound: true
     *      hidden: true
     * description: The UI object that implements the optionpane's LookAndFeel
     */
    public void setUI(OptionPaneUI ui) {
<span class="nc bnc" id="L1860" title="All 2 branches missed.">        if (this.ui != ui) {</span>
<span class="nc" id="L1861">            super.setUI(ui);</span>
<span class="nc" id="L1862">            invalidate();</span>
        }
<span class="nc" id="L1864">    }</span>

    /**
     * Returns the UI object which implements the L&amp;F for this component.
     *
     * @return the &lt;code&gt;OptionPaneUI&lt;/code&gt; object
     */
    public OptionPaneUI getUI() {
<span class="nc" id="L1872">        return (OptionPaneUI)ui;</span>
    }

    /**
     * Notification from the &lt;code&gt;UIManager&lt;/code&gt; that the L&amp;F has changed.
     * Replaces the current UI object with the latest version from the
     * &lt;code&gt;UIManager&lt;/code&gt;.
     *
     * @see JComponent#updateUI
     */
    public void updateUI() {
<span class="nc" id="L1883">        setUI((OptionPaneUI)UIManager.getUI(this));</span>
<span class="nc" id="L1884">    }</span>


    /**
     * Returns the name of the UI class that implements the
     * L&amp;F for this component.
     *
     * @return the string &quot;OptionPaneUI&quot;
     * @see JComponent#getUIClassID
     * @see UIDefaults#getUI
     */
    public String getUIClassID() {
<span class="nc" id="L1896">        return uiClassID;</span>
    }


    /**
     * Sets the option pane's message-object.
     * @param newMessage the &lt;code&gt;Object&lt;/code&gt; to display
     * @see #getMessage
     *
     * @beaninfo
     *   preferred: true
     *   bound: true
     * description: The optionpane's message object.
     */
    public void setMessage(Object newMessage) {
<span class="nc" id="L1911">        Object           oldMessage = message;</span>

<span class="nc" id="L1913">        message = newMessage;</span>
<span class="nc" id="L1914">        firePropertyChange(MESSAGE_PROPERTY, oldMessage, message);</span>
<span class="nc" id="L1915">    }</span>

    /**
     * Returns the message-object this pane displays.
     * @see #setMessage
     *
     * @return the &lt;code&gt;Object&lt;/code&gt; that is displayed
     */
    public Object getMessage() {
<span class="nc" id="L1924">        return message;</span>
    }

    /**
     * Sets the icon to display. If non-&lt;code&gt;null&lt;/code&gt;, the look and feel
     * does not provide an icon.
     * @param newIcon the &lt;code&gt;Icon&lt;/code&gt; to display
     *
     * @see #getIcon
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's type icon.
     */
    public void setIcon(Icon newIcon) {
<span class="nc" id="L1939">        Object              oldIcon = icon;</span>

<span class="nc" id="L1941">        icon = newIcon;</span>
<span class="nc" id="L1942">        firePropertyChange(ICON_PROPERTY, oldIcon, icon);</span>
<span class="nc" id="L1943">    }</span>

    /**
     * Returns the icon this pane displays.
     * @return the &lt;code&gt;Icon&lt;/code&gt; that is displayed
     *
     * @see #setIcon
     */
    public Icon getIcon() {
<span class="nc" id="L1952">        return icon;</span>
    }

    /**
     * Sets the value the user has chosen.
     * @param newValue  the chosen value
     *
     * @see #getValue
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's value object.
     */
    public void setValue(Object newValue) {
<span class="nc" id="L1966">        Object               oldValue = value;</span>

<span class="nc" id="L1968">        value = newValue;</span>
<span class="nc" id="L1969">        firePropertyChange(VALUE_PROPERTY, oldValue, value);</span>
<span class="nc" id="L1970">    }</span>

    /**
     * Returns the value the user has selected. &lt;code&gt;UNINITIALIZED_VALUE&lt;/code&gt;
     * implies the user has not yet made a choice, &lt;code&gt;null&lt;/code&gt; means the
     * user closed the window with out choosing anything. Otherwise
     * the returned value will be one of the options defined in this
     * object.
     *
     * @return the &lt;code&gt;Object&lt;/code&gt; chosen by the user,
     *         &lt;code&gt;UNINITIALIZED_VALUE&lt;/code&gt;
     *         if the user has not yet made a choice, or &lt;code&gt;null&lt;/code&gt; if
     *         the user closed the window without making a choice
     *
     * @see #setValue
     */
    public Object getValue() {
<span class="nc" id="L1987">        return value;</span>
    }

    /**
     * Sets the options this pane displays. If an element in
     * &lt;code&gt;newOptions&lt;/code&gt; is a &lt;code&gt;Component&lt;/code&gt;
     * it is added directly to the pane,
     * otherwise a button is created for the element.
     *
     * @param newOptions an array of &lt;code&gt;Objects&lt;/code&gt; that create the
     *          buttons the user can click on, or arbitrary
     *          &lt;code&gt;Components&lt;/code&gt; to add to the pane
     *
     * @see #getOptions
     * @beaninfo
     *       bound: true
     * description: The option pane's options objects.
     */
    public void setOptions(Object[] newOptions) {
<span class="nc" id="L2006">        Object[]           oldOptions = options;</span>

<span class="nc" id="L2008">        options = newOptions;</span>
<span class="nc" id="L2009">        firePropertyChange(OPTIONS_PROPERTY, oldOptions, options);</span>
<span class="nc" id="L2010">    }</span>

    /**
     * Returns the choices the user can make.
     * @return the array of &lt;code&gt;Objects&lt;/code&gt; that give the user's choices
     *
     * @see #setOptions
     */
    public Object[] getOptions() {
<span class="nc bnc" id="L2019" title="All 2 branches missed.">        if(options != null) {</span>
<span class="nc" id="L2020">            int             optionCount = options.length;</span>
<span class="nc" id="L2021">            Object[]        retOptions = new Object[optionCount];</span>

<span class="nc" id="L2023">            System.arraycopy(options, 0, retOptions, 0, optionCount);</span>
<span class="nc" id="L2024">            return retOptions;</span>
        }
<span class="nc" id="L2026">        return options;</span>
    }

    /**
     * Sets the initial value that is to be enabled -- the
     * &lt;code&gt;Component&lt;/code&gt;
     * that has the focus when the pane is initially displayed.
     *
     * @param newInitialValue the &lt;code&gt;Object&lt;/code&gt; that gets the initial
     *                         keyboard focus
     *
     * @see #getInitialValue
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's initial value object.
     */
    public void setInitialValue(Object newInitialValue) {
<span class="nc" id="L2044">        Object            oldIV = initialValue;</span>

<span class="nc" id="L2046">        initialValue = newInitialValue;</span>
<span class="nc" id="L2047">        firePropertyChange(INITIAL_VALUE_PROPERTY, oldIV, initialValue);</span>
<span class="nc" id="L2048">    }</span>

    /**
     * Returns the initial value.
     *
     * @return the &lt;code&gt;Object&lt;/code&gt; that gets the initial keyboard focus
     *
     * @see #setInitialValue
     */
    public Object getInitialValue() {
<span class="nc" id="L2058">        return initialValue;</span>
    }

    /**
     * Sets the option pane's message type.
     * The message type is used by the Look and Feel to determine the
     * icon to display (if not supplied) as well as potentially how to
     * lay out the &lt;code&gt;parentComponent&lt;/code&gt;.
     * @param newType an integer specifying the kind of message to display:
     *                &lt;code&gt;ERROR_MESSAGE&lt;/code&gt;, &lt;code&gt;INFORMATION_MESSAGE&lt;/code&gt;,
     *                &lt;code&gt;WARNING_MESSAGE&lt;/code&gt;,
     *                &lt;code&gt;QUESTION_MESSAGE&lt;/code&gt;, or &lt;code&gt;PLAIN_MESSAGE&lt;/code&gt;
     * @exception RuntimeException if &lt;code&gt;newType&lt;/code&gt; is not one of the
     *          legal values listed above

     * @see #getMessageType
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's message type.
     */
    public void setMessageType(int newType) {
<span class="nc bnc" id="L2080" title="All 10 branches missed.">        if(newType != ERROR_MESSAGE &amp;&amp; newType != INFORMATION_MESSAGE &amp;&amp;</span>
           newType != WARNING_MESSAGE &amp;&amp; newType != QUESTION_MESSAGE &amp;&amp;
           newType != PLAIN_MESSAGE)
<span class="nc" id="L2083">            throw new RuntimeException(&quot;JOptionPane: type must be one of JOptionPane.ERROR_MESSAGE, JOptionPane.INFORMATION_MESSAGE, JOptionPane.WARNING_MESSAGE, JOptionPane.QUESTION_MESSAGE or JOptionPane.PLAIN_MESSAGE&quot;);</span>

<span class="nc" id="L2085">        int           oldType = messageType;</span>

<span class="nc" id="L2087">        messageType = newType;</span>
<span class="nc" id="L2088">        firePropertyChange(MESSAGE_TYPE_PROPERTY, oldType, messageType);</span>
<span class="nc" id="L2089">    }</span>

    /**
     * Returns the message type.
     *
     * @return an integer specifying the message type
     *
     * @see #setMessageType
     */
    public int getMessageType() {
<span class="nc" id="L2099">        return messageType;</span>
    }

    /**
     * Sets the options to display.
     * The option type is used by the Look and Feel to
     * determine what buttons to show (unless options are supplied).
     * @param newType an integer specifying the options the L&amp;F is to display:
     *                  &lt;code&gt;DEFAULT_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_OPTION&lt;/code&gt;,
     *                  &lt;code&gt;YES_NO_CANCEL_OPTION&lt;/code&gt;,
     *                  or &lt;code&gt;OK_CANCEL_OPTION&lt;/code&gt;
     * @exception RuntimeException if &lt;code&gt;newType&lt;/code&gt; is not one of
     *          the legal values listed above
     *
     * @see #getOptionType
     * @see #setOptions
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's option type.
      */
    public void setOptionType(int newType) {
<span class="nc bnc" id="L2122" title="All 8 branches missed.">        if(newType != DEFAULT_OPTION &amp;&amp; newType != YES_NO_OPTION &amp;&amp;</span>
           newType != YES_NO_CANCEL_OPTION &amp;&amp; newType != OK_CANCEL_OPTION)
<span class="nc" id="L2124">            throw new RuntimeException(&quot;JOptionPane: option type must be one of JOptionPane.DEFAULT_OPTION, JOptionPane.YES_NO_OPTION, JOptionPane.YES_NO_CANCEL_OPTION or JOptionPane.OK_CANCEL_OPTION&quot;);</span>

<span class="nc" id="L2126">        int            oldType = optionType;</span>

<span class="nc" id="L2128">        optionType = newType;</span>
<span class="nc" id="L2129">        firePropertyChange(OPTION_TYPE_PROPERTY, oldType, optionType);</span>
<span class="nc" id="L2130">    }</span>

    /**
     * Returns the type of options that are displayed.
     *
     * @return an integer specifying the user-selectable options
     *
     * @see #setOptionType
     */
    public int getOptionType() {
<span class="nc" id="L2140">        return optionType;</span>
    }

    /**
     * Sets the input selection values for a pane that provides the user
     * with a list of items to choose from. (The UI provides a widget
     * for choosing one of the values.)  A &lt;code&gt;null&lt;/code&gt; value
     * implies the user can input whatever they wish, usually by means
     * of a &lt;code&gt;JTextField&lt;/code&gt;.
     * &lt;p&gt;
     * Sets &lt;code&gt;wantsInput&lt;/code&gt; to true. Use
     * &lt;code&gt;setInitialSelectionValue&lt;/code&gt; to specify the initially-chosen
     * value. After the pane as been enabled, &lt;code&gt;inputValue&lt;/code&gt; is
     * set to the value the user has selected.
     * @param newValues an array of &lt;code&gt;Objects&lt;/code&gt; the user to be
     *                  displayed
     *                  (usually in a list or combo-box) from which
     *                  the user can make a selection
     * @see #setWantsInput
     * @see #setInitialSelectionValue
     * @see #getSelectionValues
     * @beaninfo
     *       bound: true
     * description: The option pane's selection values.
     */
    public void setSelectionValues(Object[] newValues) {
<span class="nc" id="L2166">        Object[]           oldValues = selectionValues;</span>

<span class="nc" id="L2168">        selectionValues = newValues;</span>
<span class="nc" id="L2169">        firePropertyChange(SELECTION_VALUES_PROPERTY, oldValues, newValues);</span>
<span class="nc bnc" id="L2170" title="All 2 branches missed.">        if(selectionValues != null)</span>
<span class="nc" id="L2171">            setWantsInput(true);</span>
<span class="nc" id="L2172">    }</span>

    /**
     * Returns the input selection values.
     *
     * @return the array of &lt;code&gt;Objects&lt;/code&gt; the user can select
     * @see #setSelectionValues
     */
    public Object[] getSelectionValues() {
<span class="nc" id="L2181">        return selectionValues;</span>
    }

    /**
     * Sets the input value that is initially displayed as selected to the user.
     * Only used if &lt;code&gt;wantsInput&lt;/code&gt; is true.
     * @param newValue the initially selected value
     * @see #setSelectionValues
     * @see #getInitialSelectionValue
     * @beaninfo
     *       bound: true
     * description: The option pane's initial selection value object.
     */
    public void setInitialSelectionValue(Object newValue) {
<span class="nc" id="L2195">        Object          oldValue = initialSelectionValue;</span>

<span class="nc" id="L2197">        initialSelectionValue = newValue;</span>
<span class="nc" id="L2198">        firePropertyChange(INITIAL_SELECTION_VALUE_PROPERTY, oldValue,</span>
                           newValue);
<span class="nc" id="L2200">    }</span>

    /**
     * Returns the input value that is displayed as initially selected to the user.
     *
     * @return the initially selected value
     * @see #setInitialSelectionValue
     * @see #setSelectionValues
     */
    public Object getInitialSelectionValue() {
<span class="nc" id="L2210">        return initialSelectionValue;</span>
    }

    /**
     * Sets the input value that was selected or input by the user.
     * Only used if &lt;code&gt;wantsInput&lt;/code&gt; is true.  Note that this method
     * is invoked internally by the option pane (in response to user action)
     * and should generally not be called by client programs.  To set the
     * input value initially displayed as selected to the user, use
     * &lt;code&gt;setInitialSelectionValue&lt;/code&gt;.
     *
     * @param newValue the &lt;code&gt;Object&lt;/code&gt; used to set the
     *          value that the user specified (usually in a text field)
     * @see #setSelectionValues
     * @see #setInitialSelectionValue
     * @see #setWantsInput
     * @see #getInputValue
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: The option pane's input value object.
     */
    public void setInputValue(Object newValue) {
<span class="nc" id="L2233">        Object              oldValue = inputValue;</span>

<span class="nc" id="L2235">        inputValue = newValue;</span>
<span class="nc" id="L2236">        firePropertyChange(INPUT_VALUE_PROPERTY, oldValue, newValue);</span>
<span class="nc" id="L2237">    }</span>

    /**
     * Returns the value the user has input, if &lt;code&gt;wantsInput&lt;/code&gt;
     * is true.
     *
     * @return the &lt;code&gt;Object&lt;/code&gt; the user specified,
     *          if it was one of the objects, or a
     *          &lt;code&gt;String&lt;/code&gt; if it was a value typed into a
     *          field
     * @see #setSelectionValues
     * @see #setWantsInput
     * @see #setInputValue
     */
    public Object getInputValue() {
<span class="nc" id="L2252">        return inputValue;</span>
    }

    /**
     * Returns the maximum number of characters to place on a line in a
     * message. Default is to return &lt;code&gt;Integer.MAX_VALUE&lt;/code&gt;.
     * The value can be
     * changed by overriding this method in a subclass.
     *
     * @return an integer giving the maximum number of characters on a line
     */
    public int getMaxCharactersPerLineCount() {
<span class="nc" id="L2264">        return Integer.MAX_VALUE;</span>
    }

    /**
     * Sets the &lt;code&gt;wantsInput&lt;/code&gt; property.
     * If &lt;code&gt;newValue&lt;/code&gt; is true, an input component
     * (such as a text field or combo box) whose parent is
     * &lt;code&gt;parentComponent&lt;/code&gt; is provided to
     * allow the user to input a value. If &lt;code&gt;getSelectionValues&lt;/code&gt;
     * returns a non-&lt;code&gt;null&lt;/code&gt; array, the input value is one of the
     * objects in that array. Otherwise the input value is whatever
     * the user inputs.
     * &lt;p&gt;
     * This is a bound property.
     *
     * @see #setSelectionValues
     * @see #setInputValue
     * @beaninfo
     *   preferred: true
     *       bound: true
     * description: Flag which allows the user to input a value.
     */
    public void setWantsInput(boolean newValue) {
<span class="nc" id="L2287">        boolean            oldValue = wantsInput;</span>

<span class="nc" id="L2289">        wantsInput = newValue;</span>
<span class="nc" id="L2290">        firePropertyChange(WANTS_INPUT_PROPERTY, oldValue, newValue);</span>
<span class="nc" id="L2291">    }</span>

    /**
     * Returns the value of the &lt;code&gt;wantsInput&lt;/code&gt; property.
     *
     * @return true if an input component will be provided
     * @see #setWantsInput
     */
    public boolean getWantsInput() {
<span class="nc" id="L2300">        return wantsInput;</span>
    }

    /**
     * Requests that the initial value be selected, which will set
     * focus to the initial value. This method
     * should be invoked after the window containing the option pane
     * is made visible.
     */
    public void selectInitialValue() {
<span class="nc" id="L2310">        OptionPaneUI         ui = getUI();</span>
<span class="nc bnc" id="L2311" title="All 2 branches missed.">        if (ui != null) {</span>
<span class="nc" id="L2312">            ui.selectInitialValue(this);</span>
        }
<span class="nc" id="L2314">    }</span>


    private static int styleFromMessageType(int messageType) {
<span class="nc bnc" id="L2318" title="All 5 branches missed.">        switch (messageType) {</span>
        case ERROR_MESSAGE:
<span class="nc" id="L2320">            return JRootPane.ERROR_DIALOG;</span>
        case QUESTION_MESSAGE:
<span class="nc" id="L2322">            return JRootPane.QUESTION_DIALOG;</span>
        case WARNING_MESSAGE:
<span class="nc" id="L2324">            return JRootPane.WARNING_DIALOG;</span>
        case INFORMATION_MESSAGE:
<span class="nc" id="L2326">            return JRootPane.INFORMATION_DIALOG;</span>
        case PLAIN_MESSAGE:
        default:
<span class="nc" id="L2329">            return JRootPane.PLAIN_DIALOG;</span>
        }
    }

    // Serialization support.
    private void writeObject(ObjectOutputStream s) throws IOException {
<span class="nc" id="L2335">        Vector&lt;Object&gt; values = new Vector&lt;Object&gt;();</span>

<span class="nc" id="L2337">        s.defaultWriteObject();</span>
        // Save the icon, if its Serializable.
<span class="nc bnc" id="L2339" title="All 4 branches missed.">        if(icon != null &amp;&amp; icon instanceof Serializable) {</span>
<span class="nc" id="L2340">            values.addElement(&quot;icon&quot;);</span>
<span class="nc" id="L2341">            values.addElement(icon);</span>
        }
        // Save the message, if its Serializable.
<span class="nc bnc" id="L2344" title="All 4 branches missed.">        if(message != null &amp;&amp; message instanceof Serializable) {</span>
<span class="nc" id="L2345">            values.addElement(&quot;message&quot;);</span>
<span class="nc" id="L2346">            values.addElement(message);</span>
        }
        // Save the treeModel, if its Serializable.
<span class="nc bnc" id="L2349" title="All 2 branches missed.">        if(options != null) {</span>
<span class="nc" id="L2350">            Vector&lt;Object&gt; serOptions = new Vector&lt;Object&gt;();</span>

<span class="nc" id="L2352">            for(int counter = 0, maxCounter = options.length;</span>
<span class="nc bnc" id="L2353" title="All 2 branches missed.">                counter &lt; maxCounter; counter++)</span>
<span class="nc bnc" id="L2354" title="All 2 branches missed.">                if(options[counter] instanceof Serializable)</span>
<span class="nc" id="L2355">                    serOptions.addElement(options[counter]);</span>
<span class="nc bnc" id="L2356" title="All 2 branches missed.">            if(serOptions.size() &gt; 0) {</span>
<span class="nc" id="L2357">                int             optionCount = serOptions.size();</span>
<span class="nc" id="L2358">                Object[]        arrayOptions = new Object[optionCount];</span>

<span class="nc" id="L2360">                serOptions.copyInto(arrayOptions);</span>
<span class="nc" id="L2361">                values.addElement(&quot;options&quot;);</span>
<span class="nc" id="L2362">                values.addElement(arrayOptions);</span>
            }
        }
        // Save the initialValue, if its Serializable.
<span class="nc bnc" id="L2366" title="All 4 branches missed.">        if(initialValue != null &amp;&amp; initialValue instanceof Serializable) {</span>
<span class="nc" id="L2367">            values.addElement(&quot;initialValue&quot;);</span>
<span class="nc" id="L2368">            values.addElement(initialValue);</span>
        }
        // Save the value, if its Serializable.
<span class="nc bnc" id="L2371" title="All 4 branches missed.">        if(value != null &amp;&amp; value instanceof Serializable) {</span>
<span class="nc" id="L2372">            values.addElement(&quot;value&quot;);</span>
<span class="nc" id="L2373">            values.addElement(value);</span>
        }
        // Save the selectionValues, if its Serializable.
<span class="nc bnc" id="L2376" title="All 2 branches missed.">        if(selectionValues != null) {</span>
<span class="nc" id="L2377">            boolean            serialize = true;</span>

<span class="nc" id="L2379">            for(int counter = 0, maxCounter = selectionValues.length;</span>
<span class="nc bnc" id="L2380" title="All 2 branches missed.">                counter &lt; maxCounter; counter++) {</span>
<span class="nc bnc" id="L2381" title="All 4 branches missed.">                if(selectionValues[counter] != null &amp;&amp;</span>
                   !(selectionValues[counter] instanceof Serializable)) {
<span class="nc" id="L2383">                    serialize = false;</span>
<span class="nc" id="L2384">                    break;</span>
                }
            }
<span class="nc bnc" id="L2387" title="All 2 branches missed.">            if(serialize) {</span>
<span class="nc" id="L2388">                values.addElement(&quot;selectionValues&quot;);</span>
<span class="nc" id="L2389">                values.addElement(selectionValues);</span>
            }
        }
        // Save the inputValue, if its Serializable.
<span class="nc bnc" id="L2393" title="All 4 branches missed.">        if(inputValue != null &amp;&amp; inputValue instanceof Serializable) {</span>
<span class="nc" id="L2394">            values.addElement(&quot;inputValue&quot;);</span>
<span class="nc" id="L2395">            values.addElement(inputValue);</span>
        }
        // Save the initialSelectionValue, if its Serializable.
<span class="nc bnc" id="L2398" title="All 4 branches missed.">        if(initialSelectionValue != null &amp;&amp;</span>
           initialSelectionValue instanceof Serializable) {
<span class="nc" id="L2400">            values.addElement(&quot;initialSelectionValue&quot;);</span>
<span class="nc" id="L2401">            values.addElement(initialSelectionValue);</span>
        }
<span class="nc" id="L2403">        s.writeObject(values);</span>
<span class="nc" id="L2404">    }</span>

    private void readObject(ObjectInputStream s)
        throws IOException, ClassNotFoundException {
<span class="nc" id="L2408">        s.defaultReadObject();</span>

<span class="nc" id="L2410">        Vector          values = (Vector)s.readObject();</span>
<span class="nc" id="L2411">        int             indexCounter = 0;</span>
<span class="nc" id="L2412">        int             maxCounter = values.size();</span>

<span class="nc bnc" id="L2414" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2415" title="All 2 branches missed.">           equals(&quot;icon&quot;)) {</span>
<span class="nc" id="L2416">            icon = (Icon)values.elementAt(++indexCounter);</span>
<span class="nc" id="L2417">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2419" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2420" title="All 2 branches missed.">           equals(&quot;message&quot;)) {</span>
<span class="nc" id="L2421">            message = values.elementAt(++indexCounter);</span>
<span class="nc" id="L2422">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2424" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2425" title="All 2 branches missed.">           equals(&quot;options&quot;)) {</span>
<span class="nc" id="L2426">            options = (Object[])values.elementAt(++indexCounter);</span>
<span class="nc" id="L2427">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2429" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2430" title="All 2 branches missed.">           equals(&quot;initialValue&quot;)) {</span>
<span class="nc" id="L2431">            initialValue = values.elementAt(++indexCounter);</span>
<span class="nc" id="L2432">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2434" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2435" title="All 2 branches missed.">           equals(&quot;value&quot;)) {</span>
<span class="nc" id="L2436">            value = values.elementAt(++indexCounter);</span>
<span class="nc" id="L2437">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2439" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2440" title="All 2 branches missed.">           equals(&quot;selectionValues&quot;)) {</span>
<span class="nc" id="L2441">            selectionValues = (Object[])values.elementAt(++indexCounter);</span>
<span class="nc" id="L2442">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2444" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2445" title="All 2 branches missed.">           equals(&quot;inputValue&quot;)) {</span>
<span class="nc" id="L2446">            inputValue = values.elementAt(++indexCounter);</span>
<span class="nc" id="L2447">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2449" title="All 2 branches missed.">        if(indexCounter &lt; maxCounter &amp;&amp; values.elementAt(indexCounter).</span>
<span class="nc bnc" id="L2450" title="All 2 branches missed.">           equals(&quot;initialSelectionValue&quot;)) {</span>
<span class="nc" id="L2451">            initialSelectionValue = values.elementAt(++indexCounter);</span>
<span class="nc" id="L2452">            indexCounter++;</span>
        }
<span class="nc bnc" id="L2454" title="All 2 branches missed.">        if (getUIClassID().equals(uiClassID)) {</span>
<span class="nc" id="L2455">            byte count = JComponent.getWriteObjCounter(this);</span>
<span class="nc" id="L2456">            JComponent.setWriteObjCounter(this, --count);</span>
<span class="nc bnc" id="L2457" title="All 4 branches missed.">            if (count == 0 &amp;&amp; ui != null) {</span>
<span class="nc" id="L2458">                ui.installUI(this);</span>
            }
        }
<span class="nc" id="L2461">    }</span>


    /**
     * Returns a string representation of this &lt;code&gt;JOptionPane&lt;/code&gt;.
     * This method
     * is intended to be used only for debugging purposes, and the
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not
     * be &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  a string representation of this &lt;code&gt;JOptionPane&lt;/code&gt;
     */
    protected String paramString() {
<span class="nc bnc" id="L2475" title="All 2 branches missed.">        String iconString = (icon != null ?</span>
<span class="nc" id="L2476">                             icon.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L2477" title="All 2 branches missed.">        String initialValueString = (initialValue != null ?</span>
<span class="nc" id="L2478">                                     initialValue.toString() : &quot;&quot;);</span>
<span class="nc bnc" id="L2479" title="All 2 branches missed.">        String messageString = (message != null ?</span>
<span class="nc" id="L2480">                                message.toString() : &quot;&quot;);</span>
        String messageTypeString;
<span class="nc bnc" id="L2482" title="All 2 branches missed.">        if (messageType == ERROR_MESSAGE) {</span>
<span class="nc" id="L2483">            messageTypeString = &quot;ERROR_MESSAGE&quot;;</span>
<span class="nc bnc" id="L2484" title="All 2 branches missed.">        } else if (messageType == INFORMATION_MESSAGE) {</span>
<span class="nc" id="L2485">            messageTypeString = &quot;INFORMATION_MESSAGE&quot;;</span>
<span class="nc bnc" id="L2486" title="All 2 branches missed.">        } else if (messageType == WARNING_MESSAGE) {</span>
<span class="nc" id="L2487">            messageTypeString = &quot;WARNING_MESSAGE&quot;;</span>
<span class="nc bnc" id="L2488" title="All 2 branches missed.">        } else if (messageType == QUESTION_MESSAGE) {</span>
<span class="nc" id="L2489">            messageTypeString = &quot;QUESTION_MESSAGE&quot;;</span>
<span class="nc bnc" id="L2490" title="All 2 branches missed.">        } else if (messageType == PLAIN_MESSAGE)  {</span>
<span class="nc" id="L2491">            messageTypeString = &quot;PLAIN_MESSAGE&quot;;</span>
<span class="nc" id="L2492">        } else messageTypeString = &quot;&quot;;</span>
        String optionTypeString;
<span class="nc bnc" id="L2494" title="All 2 branches missed.">        if (optionType == DEFAULT_OPTION) {</span>
<span class="nc" id="L2495">            optionTypeString = &quot;DEFAULT_OPTION&quot;;</span>
<span class="nc bnc" id="L2496" title="All 2 branches missed.">        } else if (optionType == YES_NO_OPTION) {</span>
<span class="nc" id="L2497">            optionTypeString = &quot;YES_NO_OPTION&quot;;</span>
<span class="nc bnc" id="L2498" title="All 2 branches missed.">        } else if (optionType == YES_NO_CANCEL_OPTION) {</span>
<span class="nc" id="L2499">            optionTypeString = &quot;YES_NO_CANCEL_OPTION&quot;;</span>
<span class="nc bnc" id="L2500" title="All 2 branches missed.">        } else if (optionType == OK_CANCEL_OPTION) {</span>
<span class="nc" id="L2501">            optionTypeString = &quot;OK_CANCEL_OPTION&quot;;</span>
<span class="nc" id="L2502">        } else optionTypeString = &quot;&quot;;</span>
<span class="nc bnc" id="L2503" title="All 2 branches missed.">        String wantsInputString = (wantsInput ?</span>
                                   &quot;true&quot; : &quot;false&quot;);

<span class="nc" id="L2506">        return super.paramString() +</span>
        &quot;,icon=&quot; + iconString +
        &quot;,initialValue=&quot; + initialValueString +
        &quot;,message=&quot; + messageString +
        &quot;,messageType=&quot; + messageTypeString +
        &quot;,optionType=&quot; + optionTypeString +
        &quot;,wantsInput=&quot; + wantsInputString;
    }

    /**
     * Retrieves a method from the provided class and makes it accessible.
     */
    private static class ModalPrivilegedAction implements PrivilegedAction&lt;Method&gt; {
        private Class&lt;?&gt; clazz;
        private String methodName;

<span class="nc" id="L2522">        public ModalPrivilegedAction(Class&lt;?&gt; clazz, String methodName) {</span>
<span class="nc" id="L2523">            this.clazz = clazz;</span>
<span class="nc" id="L2524">            this.methodName = methodName;</span>
<span class="nc" id="L2525">        }</span>

        public Method run() {
<span class="nc" id="L2528">            Method method = null;</span>
            try {
<span class="nc" id="L2530">                method = clazz.getDeclaredMethod(methodName, (Class[])null);</span>
<span class="nc" id="L2531">            } catch (NoSuchMethodException ex) {</span>
<span class="nc" id="L2532">            }</span>
<span class="nc bnc" id="L2533" title="All 2 branches missed.">            if (method != null) {</span>
<span class="nc" id="L2534">                method.setAccessible(true);</span>
            }
<span class="nc" id="L2536">            return method;</span>
        }
    }



///////////////////
// Accessibility support
///////////////////

    /**
     * Returns the &lt;code&gt;AccessibleContext&lt;/code&gt; associated with this JOptionPane.
     * For option panes, the &lt;code&gt;AccessibleContext&lt;/code&gt; takes the form of an
     * &lt;code&gt;AccessibleJOptionPane&lt;/code&gt;.
     * A new &lt;code&gt;AccessibleJOptionPane&lt;/code&gt; instance is created if necessary.
     *
     * @return an AccessibleJOptionPane that serves as the
     *         AccessibleContext of this AccessibleJOptionPane
     * @beaninfo
     *       expert: true
     *  description: The AccessibleContext associated with this option pane
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L2559" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L2560">            accessibleContext = new AccessibleJOptionPane();</span>
        }
<span class="nc" id="L2562">        return accessibleContext;</span>
    }

    /**
     * This class implements accessibility support for the
     * &lt;code&gt;JOptionPane&lt;/code&gt; class.  It provides an implementation of the
     * Java Accessibility API appropriate to option pane user-interface
     * elements.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
<span class="nc" id="L2580">    protected class AccessibleJOptionPane extends AccessibleJComponent {</span>

        /**
         * Get the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the object
         * @see AccessibleRole
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc bnc" id="L2589" title="All 2 branches missed.">            switch (messageType) {</span>
            case ERROR_MESSAGE:
            case INFORMATION_MESSAGE:
            case WARNING_MESSAGE:
<span class="nc" id="L2593">                return AccessibleRole.ALERT;</span>

            default:
<span class="nc" id="L2596">                return AccessibleRole.OPTION_PANE;</span>
            }
        }

    } // inner class AccessibleJOptionPane
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>