<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>SQLOutputImpl.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.sql.rowset.serial</a> &gt; <span class="el_source">SQLOutputImpl.java</span></div><h1>SQLOutputImpl.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2003, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.sql.rowset.serial;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.*;
import java.util.Map;
import java.util.Vector;

/**
 * The output stream for writing the attributes of a
 * custom-mapped user-defined type (UDT) back to the database.
 * The driver uses this interface internally, and its
 * methods are never directly invoked by an application programmer.
 * &lt;p&gt;
 * When an application calls the
 * method &lt;code&gt;PreparedStatement.setObject&lt;/code&gt;, the driver
 * checks to see whether the value to be written is a UDT with
 * a custom mapping.  If it is, there will be an entry in a
 * type map containing the &lt;code&gt;Class&lt;/code&gt; object for the
 * class that implements &lt;code&gt;SQLData&lt;/code&gt; for this UDT.
 * If the value to be written is an instance of &lt;code&gt;SQLData&lt;/code&gt;,
 * the driver will create an instance of &lt;code&gt;SQLOutputImpl&lt;/code&gt;
 * and pass it to the method &lt;code&gt;SQLData.writeSQL&lt;/code&gt;.
 * The method &lt;code&gt;writeSQL&lt;/code&gt; in turn calls the
 * appropriate &lt;code&gt;SQLOutputImpl.writeXXX&lt;/code&gt; methods
 * to write data from the &lt;code&gt;SQLData&lt;/code&gt; object to
 * the &lt;code&gt;SQLOutputImpl&lt;/code&gt; output stream as the
 * representation of an SQL user-defined type.
 */
public class SQLOutputImpl implements SQLOutput {

    /**
     * A reference to an existing vector that
     * contains the attributes of a &lt;code&gt;Struct&lt;/code&gt; object.
     */
    @SuppressWarnings(&quot;rawtypes&quot;)
    private Vector attribs;

    /**
     * The type map the driver supplies to a newly created
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  This type map
     * indicates the &lt;code&gt;SQLData&lt;/code&gt; class whose
     * &lt;code&gt;writeSQL&lt;/code&gt; method will be called.  This
     * method will in turn call the appropriate
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; writer methods.
     */
    @SuppressWarnings(&quot;rawtypes&quot;)
    private Map map;

    /**
     * Creates a new &lt;code&gt;SQLOutputImpl&lt;/code&gt; object
     * initialized with the given vector of attributes and
     * type map.  The driver will use the type map to determine
     * which &lt;code&gt;SQLData.writeSQL&lt;/code&gt; method to invoke.
     * This method will then call the appropriate
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; writer methods in order and
     * thereby write the attributes to the new output stream.
     *
     * @param attributes a &lt;code&gt;Vector&lt;/code&gt; object containing the attributes of
     *        the UDT to be mapped to one or more objects in the Java
     *        programming language
     *
     * @param map a &lt;code&gt;java.util.Map&lt;/code&gt; object containing zero or
     *        more entries, with each entry consisting of 1) a &lt;code&gt;String&lt;/code&gt;
     *        giving the fully qualified name of a UDT and 2) the
     *        &lt;code&gt;Class&lt;/code&gt; object for the &lt;code&gt;SQLData&lt;/code&gt; implementation
     *        that defines how the UDT is to be mapped
     * @throws SQLException if the &lt;code&gt;attributes&lt;/code&gt; or the &lt;code&gt;map&lt;/code&gt;
     *        is a &lt;code&gt;null&lt;/code&gt; value
     */
    public SQLOutputImpl(Vector&lt;?&gt; attributes, Map&lt;String,?&gt; map)
        throws SQLException
<span class="nc" id="L99">    {</span>
<span class="nc bnc" id="L100" title="All 4 branches missed.">        if ((attributes == null) || (map == null)) {</span>
<span class="nc" id="L101">            throw new SQLException(&quot;Cannot instantiate a SQLOutputImpl &quot; +</span>
            &quot;instance with null parameters&quot;);
        }
<span class="nc" id="L104">        this.attribs = attributes;</span>
<span class="nc" id="L105">        this.map = map;</span>
<span class="nc" id="L106">    }</span>

    //================================================================
    // Methods for writing attributes to the stream of SQL data.
    // These methods correspond to the column-accessor methods of
    // java.sql.ResultSet.
    //================================================================

    /**
     * Writes a &lt;code&gt;String&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;CHAR&lt;/code&gt;, &lt;code&gt;VARCHAR&lt;/code&gt;, or
     * &lt;code&gt;LONGVARCHAR&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeString(String x) throws SQLException {
        //System.out.println(&quot;Adding :&quot;+x);
<span class="nc" id="L128">        attribs.add(x);</span>
<span class="nc" id="L129">    }</span>

    /**
     * Writes a &lt;code&gt;boolean&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBoolean(boolean x) throws SQLException {
<span class="nc" id="L143">        attribs.add(Boolean.valueOf(x));</span>
<span class="nc" id="L144">    }</span>

    /**
     * Writes a &lt;code&gt;byte&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeByte(byte x) throws SQLException {
<span class="nc" id="L158">        attribs.add(Byte.valueOf(x));</span>
<span class="nc" id="L159">    }</span>

    /**
     * Writes a &lt;code&gt;short&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;SMALLINT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeShort(short x) throws SQLException {
<span class="nc" id="L173">        attribs.add(Short.valueOf(x));</span>
<span class="nc" id="L174">    }</span>

    /**
     * Writes an &lt;code&gt;int&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;INTEGER&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeInt(int x) throws SQLException {
<span class="nc" id="L188">        attribs.add(Integer.valueOf(x));</span>
<span class="nc" id="L189">    }</span>

    /**
     * Writes a &lt;code&gt;long&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIGINT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeLong(long x) throws SQLException {
<span class="nc" id="L203">        attribs.add(Long.valueOf(x));</span>
<span class="nc" id="L204">    }</span>

    /**
     * Writes a &lt;code&gt;float&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;REAL&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeFloat(float x) throws SQLException {
<span class="nc" id="L218">        attribs.add(Float.valueOf(x));</span>
<span class="nc" id="L219">    }</span>

    /**
     * Writes a &lt;code&gt;double&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;DOUBLE&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeDouble(double x) throws SQLException{
<span class="nc" id="L233">        attribs.add(Double.valueOf(x));</span>
<span class="nc" id="L234">    }</span>

    /**
     * Writes a &lt;code&gt;java.math.BigDecimal&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;NUMERIC&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBigDecimal(java.math.BigDecimal x) throws SQLException{
<span class="nc" id="L248">        attribs.add(x);</span>
<span class="nc" id="L249">    }</span>

    /**
     * Writes an array of &lt;code&gt;bytes&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;VARBINARY&lt;/code&gt; or &lt;code&gt;LONGVARBINARY&lt;/code&gt;
     * before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBytes(byte[] x) throws SQLException {
<span class="nc" id="L264">        attribs.add(x);</span>
<span class="nc" id="L265">    }</span>

    /**
     * Writes a &lt;code&gt;java.sql.Date&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;DATE&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeDate(java.sql.Date x) throws SQLException {
<span class="nc" id="L279">        attribs.add(x);</span>
<span class="nc" id="L280">    }</span>

    /**
     * Writes a &lt;code&gt;java.sql.Time&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;TIME&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeTime(java.sql.Time x) throws SQLException {
<span class="nc" id="L294">        attribs.add(x);</span>
<span class="nc" id="L295">    }</span>

    /**
     * Writes a &lt;code&gt;java.sql.Timestamp&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;TIMESTAMP&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeTimestamp(java.sql.Timestamp x) throws SQLException {
<span class="nc" id="L309">        attribs.add(x);</span>
<span class="nc" id="L310">    }</span>

    /**
     * Writes a stream of Unicode characters to this
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver will do any necessary
     * conversion from Unicode to the database &lt;code&gt;CHAR&lt;/code&gt; format.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeCharacterStream(java.io.Reader x) throws SQLException {
<span class="nc" id="L324">         BufferedReader bufReader = new BufferedReader(x);</span>
         try {
             int i;
<span class="nc bnc" id="L327" title="All 2 branches missed.">             while( (i = bufReader.read()) != -1 ) {</span>
<span class="nc" id="L328">                char ch = (char)i;</span>
<span class="nc" id="L329">                StringBuffer strBuf = new StringBuffer();</span>
<span class="nc" id="L330">                strBuf.append(ch);</span>

<span class="nc" id="L332">                String str = new String(strBuf);</span>
<span class="nc" id="L333">                String strLine = bufReader.readLine();</span>

<span class="nc" id="L335">                writeString(str.concat(strLine));</span>
<span class="nc" id="L336">             }</span>
<span class="nc" id="L337">         } catch(IOException ioe) {</span>

<span class="nc" id="L339">         }</span>
<span class="nc" id="L340">    }</span>

    /**
     * Writes a stream of ASCII characters to this
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver will do any necessary
     * conversion from ASCII to the database &lt;code&gt;CHAR&lt;/code&gt; format.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeAsciiStream(java.io.InputStream x) throws SQLException {
<span class="nc" id="L354">         BufferedReader bufReader = new BufferedReader(new InputStreamReader(x));</span>
         try {
               int i;
<span class="nc bnc" id="L357" title="All 2 branches missed.">               while( (i=bufReader.read()) != -1 ) {</span>
<span class="nc" id="L358">                char ch = (char)i;</span>

<span class="nc" id="L360">                StringBuffer strBuf = new StringBuffer();</span>
<span class="nc" id="L361">                strBuf.append(ch);</span>

<span class="nc" id="L363">                String str = new String(strBuf);</span>
<span class="nc" id="L364">                String strLine = bufReader.readLine();</span>

<span class="nc" id="L366">                writeString(str.concat(strLine));</span>
<span class="nc" id="L367">            }</span>
<span class="nc" id="L368">          }catch(IOException ioe) {</span>
<span class="nc" id="L369">            throw new SQLException(ioe.getMessage());</span>
<span class="nc" id="L370">        }</span>
<span class="nc" id="L371">    }</span>

    /**
     * Writes a stream of uninterpreted bytes to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBinaryStream(java.io.InputStream x) throws SQLException {
<span class="nc" id="L384">         BufferedReader bufReader = new BufferedReader(new InputStreamReader(x));</span>
         try {
               int i;
<span class="nc bnc" id="L387" title="All 2 branches missed.">             while( (i=bufReader.read()) != -1 ) {</span>
<span class="nc" id="L388">                char ch = (char)i;</span>

<span class="nc" id="L390">                StringBuffer strBuf = new StringBuffer();</span>
<span class="nc" id="L391">                strBuf.append(ch);</span>

<span class="nc" id="L393">                String str = new String(strBuf);</span>
<span class="nc" id="L394">                String strLine = bufReader.readLine();</span>

<span class="nc" id="L396">                writeString(str.concat(strLine));</span>
<span class="nc" id="L397">             }</span>
<span class="nc" id="L398">        } catch(IOException ioe) {</span>
<span class="nc" id="L399">            throw new SQLException(ioe.getMessage());</span>
<span class="nc" id="L400">        }</span>
<span class="nc" id="L401">    }</span>

    //================================================================
    // Methods for writing items of SQL user-defined types to the stream.
    // These methods pass objects to the database as values of SQL
    // Structured Types, Distinct Types, Constructed Types, and Locator
    // Types.  They decompose the Java object(s) and write leaf data
    // items using the methods above.
    //================================================================

    /**
     * Writes to the stream the data contained in the given
     * &lt;code&gt;SQLData&lt;/code&gt; object.
     * When the &lt;code&gt;SQLData&lt;/code&gt; object is &lt;code&gt;null&lt;/code&gt;, this
     * method writes an SQL &lt;code&gt;NULL&lt;/code&gt; to the stream.
     * Otherwise, it calls the &lt;code&gt;SQLData.writeSQL&lt;/code&gt;
     * method of the given object, which
     * writes the object's attributes to the stream.
     * &lt;P&gt;
     * The implementation of the method &lt;code&gt;SQLData.writeSQ&lt;/code&gt;
     * calls the appropriate &lt;code&gt;SQLOutputImpl.writeXXX&lt;/code&gt; method(s)
     * for writing each of the object's attributes in order.
     * The attributes must be read from an &lt;code&gt;SQLInput&lt;/code&gt;
     * input stream and written to an &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * output stream in the same order in which they were
     * listed in the SQL definition of the user-defined type.
     *
     * @param x the object representing data of an SQL structured or
     *          distinct type
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeObject(SQLData x) throws SQLException {

        /*
         * Except for the types that are passed as objects
         * this seems to be the only way for an object to
         * get a null value for a field in a structure.
         *
         * Note: this means that the class defining SQLData
         * will need to track if a field is SQL null for itself
         */
<span class="nc bnc" id="L445" title="All 2 branches missed.">        if (x == null) {</span>
<span class="nc" id="L446">            attribs.add(null);</span>
        } else {
            /*
             * We have to write out a SerialStruct that contains
             * the name of this class otherwise we don't know
             * what to re-instantiate during readSQL()
             */
<span class="nc" id="L453">            attribs.add(new SerialStruct(x, map));</span>
        }
<span class="nc" id="L455">    }</span>

    /**
     * Writes a &lt;code&gt;Ref&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialRef&lt;/code&gt; SQL &lt;code&gt;REF&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;REF&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeRef(Ref x) throws SQLException {
<span class="nc bnc" id="L470" title="All 2 branches missed.">        if (x == null) {</span>
<span class="nc" id="L471">            attribs.add(null);</span>
        } else {
<span class="nc" id="L473">            attribs.add(new SerialRef(x));</span>
        }
<span class="nc" id="L475">    }</span>

    /**
     * Writes a &lt;code&gt;Blob&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialBlob&lt;/code&gt; SQL &lt;code&gt;BLOB&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;BLOB&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBlob(Blob x) throws SQLException {
<span class="nc bnc" id="L490" title="All 2 branches missed.">        if (x == null) {</span>
<span class="nc" id="L491">            attribs.add(null);</span>
        } else {
<span class="nc" id="L493">            attribs.add(new SerialBlob(x));</span>
        }
<span class="nc" id="L495">    }</span>

    /**
     * Writes a &lt;code&gt;Clob&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialClob&lt;/code&gt; SQL &lt;code&gt;CLOB&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;CLOB&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeClob(Clob x) throws SQLException {
<span class="nc bnc" id="L510" title="All 2 branches missed.">        if (x == null) {</span>
<span class="nc" id="L511">            attribs.add(null);</span>
        } else {
<span class="nc" id="L513">            attribs.add(new SerialClob(x));</span>
        }
<span class="nc" id="L515">    }</span>

    /**
     * Writes a &lt;code&gt;Struct&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object. The driver converts this value to an SQL structured type
     * before returning it to the database.
     * &lt;P&gt;
     * This method should be used when an SQL structured type has been
     * mapped to a &lt;code&gt;Struct&lt;/code&gt; object in the Java programming
     * language (the standard mapping).  The method
     * &lt;code&gt;writeObject&lt;/code&gt; should be used if an SQL structured type
     * has been custom mapped to a class in the Java programming language.
     *
     * @param x an object representing the attributes of an SQL structured type
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeStruct(Struct x) throws SQLException {
<span class="nc" id="L536">        SerialStruct s = new SerialStruct(x,map);;</span>
<span class="nc" id="L537">        attribs.add(s);</span>
<span class="nc" id="L538">    }</span>

    /**
     * Writes an &lt;code&gt;Array&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object. The driver converts this value to a serializable
     * &lt;code&gt;SerialArray&lt;/code&gt; SQL &lt;code&gt;ARRAY&lt;/code&gt;
     * value before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;ARRAY&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeArray(Array x) throws SQLException {
<span class="nc bnc" id="L554" title="All 2 branches missed.">        if (x == null) {</span>
<span class="nc" id="L555">            attribs.add(null);</span>
        } else {
<span class="nc" id="L557">            attribs.add(new SerialArray(x, map));</span>
        }
<span class="nc" id="L559">    }</span>

    /**
     * Writes an &lt;code&gt;java.sql.Type.DATALINK&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The
     * driver converts this value to a serializable &lt;code&gt;SerialDatalink&lt;/code&gt;
     * SQL &lt;code&gt;DATALINK&lt;/code&gt; value before return it to the database.
     *
     * @param url an object representing a SQL &lt;code&gt;DATALINK&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeURL(java.net.URL url) throws SQLException {
<span class="nc bnc" id="L574" title="All 2 branches missed.">        if (url == null) {</span>
<span class="nc" id="L575">            attribs.add(null);</span>
        } else {
<span class="nc" id="L577">            attribs.add(new SerialDatalink(url));</span>
        }
<span class="nc" id="L579">    }</span>


  /**
   * Writes the next attribute to the stream as a &lt;code&gt;String&lt;/code&gt;
   * in the Java programming language. The driver converts this to a
   * SQL &lt;code&gt;NCHAR&lt;/code&gt; or
   * &lt;code&gt;NVARCHAR&lt;/code&gt; or &lt;code&gt;LONGNVARCHAR&lt;/code&gt; value
   * (depending on the argument's
   * size relative to the driver's limits on &lt;code&gt;NVARCHAR&lt;/code&gt; values)
   * when it sends it to the stream.
   *
   * @param x the value to pass to the database
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeNString(String x) throws SQLException {
<span class="nc" id="L597">       attribs.add(x);</span>
<span class="nc" id="L598">   }</span>

  /**
   * Writes an SQL &lt;code&gt;NCLOB&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;NClob&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;NCLOB&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeNClob(NClob x) throws SQLException {
<span class="nc" id="L611">           attribs.add(x);</span>
<span class="nc" id="L612">   }</span>


  /**
   * Writes an SQL &lt;code&gt;ROWID&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;RowId&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;ROWID&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeRowId(RowId x) throws SQLException {
<span class="nc" id="L626">        attribs.add(x);</span>
<span class="nc" id="L627">   }</span>


  /**
   * Writes an SQL &lt;code&gt;XML&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;SQLXML&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;XML&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeSQLXML(SQLXML x) throws SQLException {
<span class="nc" id="L641">        attribs.add(x);</span>
<span class="nc" id="L642">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>