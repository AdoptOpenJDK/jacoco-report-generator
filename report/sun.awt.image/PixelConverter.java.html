<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PixelConverter.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">sun.awt.image</a> &gt; <span class="el_source">PixelConverter.java</span></div><h1>PixelConverter.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2000, 2002, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package sun.awt.image;
import java.awt.image.ColorModel;
import java.awt.image.DataBuffer;

/**
 * This class provides utilities for converting between the standard
 * rgb colorspace specification and the equivalent value for a pixel
 * of a given surface type.  The class was designed for use by the
 * SurfaceType objects, since the conversion between pixel values
 * and rgb values is inherently tied to the type of surface we are
 * dealing with.  Some conversions cannot be done automatically,
 * however (for example, the AnyInt or AnyDCM surface types), so
 * we require the caller to pass in a ColorModel object so that
 * we can calculate the pixel values in these generic cases as well.
 */
public class PixelConverter {

    /**
     * Default object, used as a fallback for any surface types where
     * we do not know enough about the surface to calculate the
     * conversions directly.  We use the ColorModel object to assist
     * us in these cases.
     */
<span class="nc" id="L49">    public static final PixelConverter instance = new PixelConverter();</span>


<span class="nc" id="L52">    protected int alphaMask = 0;</span>

<span class="nc" id="L54">    protected PixelConverter() {}</span>

    public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L57">        Object obj = cm.getDataElements(rgb, null);</span>
<span class="nc bnc" id="L58" title="All 4 branches missed.">        switch (cm.getTransferType()) {</span>
        case DataBuffer.TYPE_BYTE:
<span class="nc" id="L60">            byte[] bytearr = (byte[]) obj;</span>
<span class="nc" id="L61">            int pix = 0;</span>

<span class="nc bnc" id="L63" title="All 4 branches missed.">            switch(bytearr.length) {</span>
            default: // bytearr.length &gt;= 4
<span class="nc" id="L65">                pix = bytearr[3] &lt;&lt; 24;</span>
                // FALLSTHROUGH
            case 3:
<span class="nc" id="L68">                pix |= (bytearr[2] &amp; 0xff) &lt;&lt; 16;</span>
                // FALLSTHROUGH
            case 2:
<span class="nc" id="L71">                pix |= (bytearr[1] &amp; 0xff) &lt;&lt; 8;</span>
                // FALLSTHROUGH
            case 1:
<span class="nc" id="L74">                pix |= (bytearr[0] &amp; 0xff);</span>
            }

<span class="nc" id="L77">            return pix;</span>
        case DataBuffer.TYPE_SHORT:
        case DataBuffer.TYPE_USHORT:
<span class="nc" id="L80">            short[] shortarr = (short[]) obj;</span>

<span class="nc bnc" id="L82" title="All 2 branches missed.">            return (((shortarr.length &gt; 1) ? shortarr[1] &lt;&lt; 16 : 0) |</span>
                    shortarr[0] &amp; 0xffff);
        case DataBuffer.TYPE_INT:
<span class="nc" id="L85">            return ((int[]) obj)[0];</span>
        default:
<span class="nc" id="L87">            return rgb;</span>
        }
    }

    public int pixelToRgb(int pixel, ColorModel cm) {
        // REMIND: Not yet implemented
<span class="nc" id="L93">        return pixel;</span>
    }

    public final int getAlphaMask() {
<span class="nc" id="L97">        return alphaMask;</span>
    }


    /**
     * Subclasses of PixelConverter.  These subclasses are
     * specific to surface types where we can definitively
     * calculate the conversions.  Note that some conversions
     * are lossy; that is, we cannot necessarily convert a
     * value and then convert it back and wind up with the
     * original value.  For example, an rgb value  that has
     * an alpha != 1 cannot be converted to an Xrgb pixel
     * without losing the information in the alpha component.
     *
     * The conversion strategies associated with the ThreeByte*
     * and FourByte* surface types swap the components around
     * due to the ordering used when the bytes are stored.  The
     * low order byte of a packed-byte pixel will be the first
     * byte stored and the high order byte will be the last byte
     * stored.  For example, the ThreeByteBgr surface type is
     * associated with an Xrgb conversion object because the
     * three bytes are stored as follows:
     *   pixels[0] = b;    // low order byte of an Xrgb pixel
     *   pixels[1] = g;
     *   pixels[2] = r;    // high order byte of an Xrgb pixel
     */

    public static class Rgbx extends PixelConverter {
<span class="nc" id="L125">        public static final PixelConverter instance = new Rgbx();</span>

<span class="nc" id="L127">        private Rgbx() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L130">            return (rgb &lt;&lt; 8);</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L134">            return (0xff000000 | (pixel &gt;&gt; 8));</span>
        }
    }
    public static class Xrgb extends PixelConverter {
<span class="nc" id="L138">        public static final PixelConverter instance = new Xrgb();</span>

<span class="nc" id="L140">        private Xrgb() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L143">            return rgb;</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L147">            return (0xff000000 | pixel);</span>
        }
    }
    public static class Argb extends PixelConverter {
<span class="nc" id="L151">        public static final PixelConverter instance = new Argb();</span>

<span class="nc" id="L153">        private Argb() {</span>
<span class="nc" id="L154">            alphaMask = 0xff000000;</span>
<span class="nc" id="L155">        }</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L158">            return rgb;</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L162">            return pixel;</span>
        }
    }
    public static class Ushort565Rgb extends PixelConverter {
<span class="nc" id="L166">        public static final PixelConverter instance = new Ushort565Rgb();</span>

<span class="nc" id="L168">        private Ushort565Rgb() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L171">            return (((rgb &gt;&gt; (16 + 3 - 11)) &amp; 0xf800) |</span>
                    ((rgb &gt;&gt; ( 8 + 2 -  5)) &amp; 0x07e0) |
                    ((rgb &gt;&gt; ( 0 + 3 -  0)) &amp; 0x001f));
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
            int r, g, b;
<span class="nc" id="L178">            r = (pixel &gt;&gt; 11) &amp; 0x1f;</span>
<span class="nc" id="L179">            r = (r &lt;&lt; 3) | (r &gt;&gt; 2);</span>
<span class="nc" id="L180">            g = (pixel &gt;&gt;  5) &amp; 0x3f;</span>
<span class="nc" id="L181">            g = (g &lt;&lt; 2) | (g &gt;&gt; 4);</span>
<span class="nc" id="L182">            b = (pixel      ) &amp; 0x1f;</span>
<span class="nc" id="L183">            b = (b &lt;&lt; 3) | (b &gt;&gt; 2);</span>
<span class="nc" id="L184">            return (0xff000000 | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b));</span>
        }
    }
    public static class Ushort555Rgbx extends PixelConverter {
<span class="nc" id="L188">        public static final PixelConverter instance = new Ushort555Rgbx();</span>

<span class="nc" id="L190">        private Ushort555Rgbx() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L193">            return (((rgb &gt;&gt; (16 + 3 - 11)) &amp; 0xf800) |</span>
                    ((rgb &gt;&gt; ( 8 + 3 -  6)) &amp; 0x07c0) |
                    ((rgb &gt;&gt; ( 0 + 3 -  1)) &amp; 0x003e));
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
            int r, g, b;
<span class="nc" id="L200">            r = (pixel &gt;&gt; 11) &amp; 0x1f;</span>
<span class="nc" id="L201">            r = (r &lt;&lt; 3) | (r &gt;&gt; 2);</span>
<span class="nc" id="L202">            g = (pixel &gt;&gt;  6) &amp; 0x1f;</span>
<span class="nc" id="L203">            g = (g &lt;&lt; 3) | (g &gt;&gt; 2);</span>
<span class="nc" id="L204">            b = (pixel &gt;&gt;  1) &amp; 0x1f;</span>
<span class="nc" id="L205">            b = (b &lt;&lt; 3) | (b &gt;&gt; 2);</span>
<span class="nc" id="L206">            return (0xff000000 | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b));</span>
        }
    }
    public static class Ushort555Rgb extends PixelConverter {
<span class="nc" id="L210">        public static final PixelConverter instance = new Ushort555Rgb();</span>

<span class="nc" id="L212">        private Ushort555Rgb() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L215">            return (((rgb &gt;&gt; (16 + 3 - 10)) &amp; 0x7c00) |</span>
                    ((rgb &gt;&gt; ( 8 + 3 -  5)) &amp; 0x03e0) |
                    ((rgb &gt;&gt; ( 0 + 3 -  0)) &amp; 0x001f));
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
            int r, g, b;
<span class="nc" id="L222">            r = (pixel &gt;&gt; 10) &amp; 0x1f;</span>
<span class="nc" id="L223">            r = (r &lt;&lt; 3) | (r &gt;&gt; 2);</span>
<span class="nc" id="L224">            g = (pixel &gt;&gt;  5) &amp; 0x1f;</span>
<span class="nc" id="L225">            g = (g &lt;&lt; 3) | (g &gt;&gt; 2);</span>
<span class="nc" id="L226">            b = (pixel      ) &amp; 0x1f;</span>
<span class="nc" id="L227">            b = (b &lt;&lt; 3) | (b &gt;&gt; 2);</span>
<span class="nc" id="L228">            return (0xff000000 | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b));</span>
        }
    }
    public static class Ushort4444Argb extends PixelConverter {
<span class="nc" id="L232">        public static final PixelConverter instance = new Ushort4444Argb();</span>

<span class="nc" id="L234">        private Ushort4444Argb() {</span>
<span class="nc" id="L235">            alphaMask = 0xf000;</span>
<span class="nc" id="L236">        }</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
            // use upper 4 bits for each color
            // 0xAaRrGgBb -&gt; 0x0000ARGB
<span class="nc" id="L241">            int a = (rgb &gt;&gt; 16) &amp; 0xf000;</span>
<span class="nc" id="L242">            int r = (rgb &gt;&gt; 12) &amp; 0x0f00;</span>
<span class="nc" id="L243">            int g = (rgb &gt;&gt;  8) &amp; 0x00f0;</span>
<span class="nc" id="L244">            int b = (rgb &gt;&gt;  4) &amp; 0x000f;</span>

<span class="nc" id="L246">            return (a | r | g | b);</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
            int a, r, g, b;
            // replicate 4 bits for each color
            // 0xARGB -&gt; 0xAARRGGBB
<span class="nc" id="L253">            a = pixel &amp; 0xf000;</span>
<span class="nc" id="L254">            a = ((pixel &lt;&lt; 16) | (pixel &lt;&lt; 12)) &amp; 0xff000000;</span>
<span class="nc" id="L255">            r = pixel &amp; 0x0f00;</span>
<span class="nc" id="L256">            r = ((pixel &lt;&lt; 12) | (pixel &lt;&lt;  8)) &amp; 0x00ff0000;</span>
<span class="nc" id="L257">            g = pixel &amp; 0x00f0;</span>
<span class="nc" id="L258">            g = ((pixel &lt;&lt;  8) | (pixel &lt;&lt;  4)) &amp; 0x0000ff00;</span>
<span class="nc" id="L259">            b = pixel &amp; 0x000f;</span>
<span class="nc" id="L260">            b = ((pixel &lt;&lt;  4) | (pixel &lt;&lt;  0)) &amp; 0x000000ff;</span>

<span class="nc" id="L262">            return (a | r | g | b);</span>
        }
    }
    public static class Xbgr extends PixelConverter {
<span class="nc" id="L266">        public static final PixelConverter instance = new Xbgr();</span>

<span class="nc" id="L268">        private Xbgr() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L271">            return (((rgb &amp; 0xff) &lt;&lt; 16) |</span>
                    (rgb &amp; 0xff00) |
                    ((rgb &gt;&gt; 16) &amp; 0xff));
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L277">            return (0xff000000 |</span>
                    ((pixel &amp; 0xff) &lt;&lt; 16) |
                    (pixel &amp; 0xff00) |
                    ((pixel &gt;&gt; 16) &amp; 0xff));
        }
    }
    public static class Bgrx extends PixelConverter {
<span class="nc" id="L284">        public static final PixelConverter instance = new Bgrx();</span>

<span class="nc" id="L286">        private Bgrx() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L289">            return ((rgb &lt;&lt; 24) |</span>
                    ((rgb &amp; 0xff00) &lt;&lt; 8) |
                    ((rgb &gt;&gt; 8) &amp; 0xff00));
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L295">            return (0xff000000                   |</span>
                    ((pixel &amp; 0xff00) &lt;&lt; 8) |
                    ((pixel &gt;&gt; 8) &amp; 0xff00) |
                    (pixel &gt;&gt;&gt; 24));
        }
    }
    public static class Rgba extends PixelConverter {
<span class="nc" id="L302">        public static final PixelConverter instance = new Rgba();</span>

<span class="nc" id="L304">        private Rgba() {</span>
<span class="nc" id="L305">            alphaMask = 0x000000ff;</span>
<span class="nc" id="L306">        }</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L309">            return ((rgb &lt;&lt; 8) | (rgb &gt;&gt;&gt; 24));</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L313">            return ((pixel &lt;&lt; 24) | (pixel &gt;&gt;&gt; 8));</span>
        }
    }
    public static class RgbaPre extends PixelConverter {
<span class="nc" id="L317">        public static final PixelConverter instance = new RgbaPre();</span>

<span class="nc" id="L319">        private RgbaPre() {</span>
<span class="nc" id="L320">            alphaMask = 0x000000ff;</span>
<span class="nc" id="L321">        }</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc bnc" id="L324" title="All 2 branches missed.">            if ((rgb &gt;&gt; 24) == -1) {</span>
<span class="nc" id="L325">                return ((rgb &lt;&lt; 8) | (rgb &gt;&gt;&gt; 24));</span>
            }
<span class="nc" id="L327">            int a = rgb &gt;&gt;&gt; 24;</span>
<span class="nc" id="L328">            int r = (rgb &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L329">            int g = (rgb &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L330">            int b = (rgb      ) &amp; 0xff;</span>
<span class="nc" id="L331">            int a2 = a + (a &gt;&gt; 7);</span>
<span class="nc" id="L332">            r = (r * a2) &gt;&gt; 8;</span>
<span class="nc" id="L333">            g = (g * a2) &gt;&gt; 8;</span>
<span class="nc" id="L334">            b = (b * a2) &gt;&gt; 8;</span>
<span class="nc" id="L335">            return ((r &lt;&lt; 24) | (g &lt;&lt; 16) | (b &lt;&lt; 8) | (a));</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L339">            int a = pixel &amp; 0xff;</span>
<span class="nc bnc" id="L340" title="All 4 branches missed.">            if ((a == 0xff) || (a == 0)) {</span>
<span class="nc" id="L341">                return ((pixel &gt;&gt;&gt; 8) | (pixel &lt;&lt; 24));</span>
            }
<span class="nc" id="L343">            int r = pixel &gt;&gt;&gt; 24;</span>
<span class="nc" id="L344">            int g = (pixel &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L345">            int b = (pixel &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L346">            r = ((r &lt;&lt; 8) - r) / a;</span>
<span class="nc" id="L347">            g = ((g &lt;&lt; 8) - g) / a;</span>
<span class="nc" id="L348">            b = ((b &lt;&lt; 8) - b) / a;</span>
<span class="nc" id="L349">            return ((r &lt;&lt; 24) | (g &lt;&lt; 16) | (b &lt;&lt; 8) | (a));</span>
        }
    }
    public static class ArgbPre extends PixelConverter {
<span class="nc" id="L353">        public static final PixelConverter instance = new ArgbPre();</span>

<span class="nc" id="L355">        private ArgbPre() {</span>
<span class="nc" id="L356">            alphaMask = 0xff000000;</span>
<span class="nc" id="L357">        }</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc bnc" id="L360" title="All 2 branches missed.">            if ((rgb &gt;&gt; 24) == -1) {</span>
<span class="nc" id="L361">                return rgb;</span>
            }
<span class="nc" id="L363">            int a = rgb &gt;&gt;&gt; 24;</span>
<span class="nc" id="L364">            int r = (rgb &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L365">            int g = (rgb &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L366">            int b = (rgb      ) &amp; 0xff;</span>
<span class="nc" id="L367">            int a2 = a + (a &gt;&gt; 7);</span>
<span class="nc" id="L368">            r = (r * a2) &gt;&gt; 8;</span>
<span class="nc" id="L369">            g = (g * a2) &gt;&gt; 8;</span>
<span class="nc" id="L370">            b = (b * a2) &gt;&gt; 8;</span>
<span class="nc" id="L371">            return ((a &lt;&lt; 24) | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b));</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L375">            int a = pixel &gt;&gt;&gt; 24;</span>
<span class="nc bnc" id="L376" title="All 4 branches missed.">            if ((a == 0xff) || (a == 0)) {</span>
<span class="nc" id="L377">                return pixel;</span>
            }
<span class="nc" id="L379">            int r = (pixel &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L380">            int g = (pixel &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L381">            int b = (pixel      ) &amp; 0xff;</span>
<span class="nc" id="L382">            r = ((r &lt;&lt; 8) - r) / a;</span>
<span class="nc" id="L383">            g = ((g &lt;&lt; 8) - g) / a;</span>
<span class="nc" id="L384">            b = ((b &lt;&lt; 8) - b) / a;</span>
<span class="nc" id="L385">            return ((a &lt;&lt; 24) | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b));</span>
        }
    }
    public static class ArgbBm extends PixelConverter {
<span class="nc" id="L389">        public static final PixelConverter instance = new ArgbBm();</span>

<span class="nc" id="L391">        private ArgbBm() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L394">            return (rgb | ((rgb &gt;&gt; 31) &lt;&lt; 24));</span>
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L398">            return ((pixel &lt;&lt; 7) &gt;&gt; 7);</span>
        }
    }
    public static class ByteGray extends PixelConverter {
        static final double RED_MULT = 0.299;
        static final double GRN_MULT = 0.587;
        static final double BLU_MULT = 0.114;
<span class="nc" id="L405">        public static final PixelConverter instance = new ByteGray();</span>

<span class="nc" id="L407">        private ByteGray() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L410">            int red = (rgb &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L411">            int grn = (rgb &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L412">            int blu = (rgb      ) &amp; 0xff;</span>
<span class="nc" id="L413">            return (int) (red * RED_MULT +</span>
                          grn * GRN_MULT +
                          blu * BLU_MULT +
                          0.5);
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L420">            return ((((((0xff &lt;&lt; 8) | pixel) &lt;&lt; 8) | pixel) &lt;&lt; 8) | pixel);</span>
        }
    }
    public static class UshortGray extends ByteGray {
        static final double SHORT_MULT = 257.0; // (65535.0 / 255.0);
        static final double USHORT_RED_MULT = RED_MULT * SHORT_MULT;
        static final double USHORT_GRN_MULT = GRN_MULT * SHORT_MULT;
        static final double USHORT_BLU_MULT = BLU_MULT * SHORT_MULT;
<span class="nc" id="L428">        public static final PixelConverter instance = new UshortGray();</span>

<span class="nc" id="L430">        private UshortGray() {}</span>

        public int rgbToPixel(int rgb, ColorModel cm) {
<span class="nc" id="L433">            int red = (rgb &gt;&gt; 16) &amp; 0xff;</span>
<span class="nc" id="L434">            int grn = (rgb &gt;&gt;  8) &amp; 0xff;</span>
<span class="nc" id="L435">            int blu = (rgb      ) &amp; 0xff;</span>
<span class="nc" id="L436">            return (int) (red * USHORT_RED_MULT +</span>
                          grn * USHORT_GRN_MULT +
                          blu * USHORT_BLU_MULT +
                          0.5);
        }

        public int pixelToRgb(int pixel, ColorModel cm) {
<span class="nc" id="L443">            pixel = pixel &gt;&gt; 8;</span>
<span class="nc" id="L444">            return ((((((0xff &lt;&lt; 8) | pixel) &lt;&lt; 8) | pixel) &lt;&lt; 8) | pixel);</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>