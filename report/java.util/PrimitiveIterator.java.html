<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>PrimitiveIterator.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.util</a> &gt; <span class="el_source">PrimitiveIterator.java</span></div><h1>PrimitiveIterator.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package java.util;

import java.util.function.Consumer;
import java.util.function.DoubleConsumer;
import java.util.function.IntConsumer;
import java.util.function.LongConsumer;

/**
 * A base type for primitive specializations of {@code Iterator}.  Specialized
 * subtypes are provided for {@link OfInt int}, {@link OfLong long}, and
 * {@link OfDouble double} values.
 *
 * &lt;p&gt;The specialized subtype default implementations of {@link Iterator#next}
 * and {@link Iterator#forEachRemaining(java.util.function.Consumer)} box
 * primitive values to instances of their corresponding wrapper class.  Such
 * boxing may offset any advantages gained when using the primitive
 * specializations.  To avoid boxing, the corresponding primitive-based methods
 * should be used.  For example, {@link PrimitiveIterator.OfInt#nextInt()} and
 * {@link PrimitiveIterator.OfInt#forEachRemaining(java.util.function.IntConsumer)}
 * should be used in preference to {@link PrimitiveIterator.OfInt#next()} and
 * {@link PrimitiveIterator.OfInt#forEachRemaining(java.util.function.Consumer)}.
 *
 * &lt;p&gt;Iteration of primitive values using boxing-based methods
 * {@link Iterator#next next()} and
 * {@link Iterator#forEachRemaining(java.util.function.Consumer) forEachRemaining()},
 * does not affect the order in which the values, transformed to boxed values,
 * are encountered.
 *
 * @implNote
 * If the boolean system property {@code org.openjdk.java.util.stream.tripwire}
 * is set to {@code true} then diagnostic warnings are reported if boxing of
 * primitive values occur when operating on primitive subtype specializations.
 *
 * @param &lt;T&gt; the type of elements returned by this PrimitiveIterator.  The
 *        type must be a wrapper type for a primitive type, such as
 *        {@code Integer} for the primitive {@code int} type.
 * @param &lt;T_CONS&gt; the type of primitive consumer.  The type must be a
 *        primitive specialization of {@link java.util.function.Consumer} for
 *        {@code T}, such as {@link java.util.function.IntConsumer} for
 *        {@code Integer}.
 *
 * @since 1.8
 */
public interface PrimitiveIterator&lt;T, T_CONS&gt; extends Iterator&lt;T&gt; {

    /**
     * Performs the given action for each remaining element, in the order
     * elements occur when iterating, until all elements have been processed
     * or the action throws an exception.  Errors or runtime exceptions
     * thrown by the action are relayed to the caller.
     *
     * @param action The action to be performed for each element
     * @throws NullPointerException if the specified action is null
     */
    @SuppressWarnings(&quot;overloads&quot;)
    void forEachRemaining(T_CONS action);

    /**
     * An Iterator specialized for {@code int} values.
     * @since 1.8
     */
    public static interface OfInt extends PrimitiveIterator&lt;Integer, IntConsumer&gt; {

        /**
         * Returns the next {@code int} element in the iteration.
         *
         * @return the next {@code int} element in the iteration
         * @throws NoSuchElementException if the iteration has no more elements
         */
        int nextInt();

        /**
         * Performs the given action for each remaining element until all elements
         * have been processed or the action throws an exception.  Actions are
         * performed in the order of iteration, if that order is specified.
         * Exceptions thrown by the action are relayed to the caller.
         *
         * @implSpec
         * &lt;p&gt;The default implementation behaves as if:
         * &lt;pre&gt;{@code
         *     while (hasNext())
         *         action.accept(nextInt());
         * }&lt;/pre&gt;
         *
         * @param action The action to be performed for each element
         * @throws NullPointerException if the specified action is null
         */
        default void forEachRemaining(IntConsumer action) {
<span class="fc" id="L113">            Objects.requireNonNull(action);</span>
<span class="fc bfc" id="L114" title="All 2 branches covered.">            while (hasNext())</span>
<span class="fc" id="L115">                action.accept(nextInt());</span>
<span class="fc" id="L116">        }</span>

        /**
         * {@inheritDoc}
         * @implSpec
         * The default implementation boxes the result of calling
         * {@link #nextInt()}, and returns that boxed result.
         */
        @Override
        default Integer next() {
<span class="nc bnc" id="L126" title="All 2 branches missed.">            if (Tripwire.ENABLED)</span>
<span class="nc" id="L127">                Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfInt.nextInt()&quot;);</span>
<span class="nc" id="L128">            return nextInt();</span>
        }

        /**
         * {@inheritDoc}
         * @implSpec
         * If the action is an instance of {@code IntConsumer} then it is cast
         * to {@code IntConsumer} and passed to {@link #forEachRemaining};
         * otherwise the action is adapted to an instance of
         * {@code IntConsumer}, by boxing the argument of {@code IntConsumer},
         * and then passed to {@link #forEachRemaining}.
         */
        @Override
        default void forEachRemaining(Consumer&lt;? super Integer&gt; action) {
<span class="nc bnc" id="L142" title="All 2 branches missed.">            if (action instanceof IntConsumer) {</span>
<span class="nc" id="L143">                forEachRemaining((IntConsumer) action);</span>
            }
            else {
                // The method reference action::accept is never null
<span class="nc" id="L147">                Objects.requireNonNull(action);</span>
<span class="nc bnc" id="L148" title="All 2 branches missed.">                if (Tripwire.ENABLED)</span>
<span class="nc" id="L149">                    Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfInt.forEachRemainingInt(action::accept)&quot;);</span>
<span class="nc" id="L150">                forEachRemaining((IntConsumer) action::accept);</span>
            }
<span class="nc" id="L152">        }</span>

    }

    /**
     * An Iterator specialized for {@code long} values.
     * @since 1.8
     */
    public static interface OfLong extends PrimitiveIterator&lt;Long, LongConsumer&gt; {

        /**
         * Returns the next {@code long} element in the iteration.
         *
         * @return the next {@code long} element in the iteration
         * @throws NoSuchElementException if the iteration has no more elements
         */
        long nextLong();

        /**
         * Performs the given action for each remaining element until all elements
         * have been processed or the action throws an exception.  Actions are
         * performed in the order of iteration, if that order is specified.
         * Exceptions thrown by the action are relayed to the caller.
         *
         * @implSpec
         * &lt;p&gt;The default implementation behaves as if:
         * &lt;pre&gt;{@code
         *     while (hasNext())
         *         action.accept(nextLong());
         * }&lt;/pre&gt;
         *
         * @param action The action to be performed for each element
         * @throws NullPointerException if the specified action is null
         */
        default void forEachRemaining(LongConsumer action) {
<span class="fc" id="L187">            Objects.requireNonNull(action);</span>
<span class="fc bfc" id="L188" title="All 2 branches covered.">            while (hasNext())</span>
<span class="fc" id="L189">                action.accept(nextLong());</span>
<span class="fc" id="L190">        }</span>

        /**
         * {@inheritDoc}
         * @implSpec
         * The default implementation boxes the result of calling
         * {@link #nextLong()}, and returns that boxed result.
         */
        @Override
        default Long next() {
<span class="nc bnc" id="L200" title="All 2 branches missed.">            if (Tripwire.ENABLED)</span>
<span class="nc" id="L201">                Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfLong.nextLong()&quot;);</span>
<span class="nc" id="L202">            return nextLong();</span>
        }

        /**
         * {@inheritDoc}
         * @implSpec
         * If the action is an instance of {@code LongConsumer} then it is cast
         * to {@code LongConsumer} and passed to {@link #forEachRemaining};
         * otherwise the action is adapted to an instance of
         * {@code LongConsumer}, by boxing the argument of {@code LongConsumer},
         * and then passed to {@link #forEachRemaining}.
         */
        @Override
        default void forEachRemaining(Consumer&lt;? super Long&gt; action) {
<span class="nc bnc" id="L216" title="All 2 branches missed.">            if (action instanceof LongConsumer) {</span>
<span class="nc" id="L217">                forEachRemaining((LongConsumer) action);</span>
            }
            else {
                // The method reference action::accept is never null
<span class="nc" id="L221">                Objects.requireNonNull(action);</span>
<span class="nc bnc" id="L222" title="All 2 branches missed.">                if (Tripwire.ENABLED)</span>
<span class="nc" id="L223">                    Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfLong.forEachRemainingLong(action::accept)&quot;);</span>
<span class="nc" id="L224">                forEachRemaining((LongConsumer) action::accept);</span>
            }
<span class="nc" id="L226">        }</span>
    }

    /**
     * An Iterator specialized for {@code double} values.
     * @since 1.8
     */
    public static interface OfDouble extends PrimitiveIterator&lt;Double, DoubleConsumer&gt; {

        /**
         * Returns the next {@code double} element in the iteration.
         *
         * @return the next {@code double} element in the iteration
         * @throws NoSuchElementException if the iteration has no more elements
         */
        double nextDouble();

        /**
         * Performs the given action for each remaining element until all elements
         * have been processed or the action throws an exception.  Actions are
         * performed in the order of iteration, if that order is specified.
         * Exceptions thrown by the action are relayed to the caller.
         *
         * @implSpec
         * &lt;p&gt;The default implementation behaves as if:
         * &lt;pre&gt;{@code
         *     while (hasNext())
         *         action.accept(nextDouble());
         * }&lt;/pre&gt;
         *
         * @param action The action to be performed for each element
         * @throws NullPointerException if the specified action is null
         */
        default void forEachRemaining(DoubleConsumer action) {
<span class="fc" id="L260">            Objects.requireNonNull(action);</span>
<span class="fc bfc" id="L261" title="All 2 branches covered.">            while (hasNext())</span>
<span class="fc" id="L262">                action.accept(nextDouble());</span>
<span class="fc" id="L263">        }</span>

        /**
         * {@inheritDoc}
         * @implSpec
         * The default implementation boxes the result of calling
         * {@link #nextDouble()}, and returns that boxed result.
         */
        @Override
        default Double next() {
<span class="nc bnc" id="L273" title="All 2 branches missed.">            if (Tripwire.ENABLED)</span>
<span class="nc" id="L274">                Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfDouble.nextLong()&quot;);</span>
<span class="nc" id="L275">            return nextDouble();</span>
        }

        /**
         * {@inheritDoc}
         * @implSpec
         * If the action is an instance of {@code DoubleConsumer} then it is
         * cast to {@code DoubleConsumer} and passed to
         * {@link #forEachRemaining}; otherwise the action is adapted to
         * an instance of {@code DoubleConsumer}, by boxing the argument of
         * {@code DoubleConsumer}, and then passed to
         * {@link #forEachRemaining}.
         */
        @Override
        default void forEachRemaining(Consumer&lt;? super Double&gt; action) {
<span class="nc bnc" id="L290" title="All 2 branches missed.">            if (action instanceof DoubleConsumer) {</span>
<span class="nc" id="L291">                forEachRemaining((DoubleConsumer) action);</span>
            }
            else {
                // The method reference action::accept is never null
<span class="nc" id="L295">                Objects.requireNonNull(action);</span>
<span class="nc bnc" id="L296" title="All 2 branches missed.">                if (Tripwire.ENABLED)</span>
<span class="nc" id="L297">                    Tripwire.trip(getClass(), &quot;{0} calling PrimitiveIterator.OfDouble.forEachRemainingDouble(action::accept)&quot;);</span>
<span class="nc" id="L298">                forEachRemaining((DoubleConsumer) action::accept);</span>
            }
<span class="nc" id="L300">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>