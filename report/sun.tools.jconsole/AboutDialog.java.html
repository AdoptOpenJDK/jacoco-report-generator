<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AboutDialog.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">sun.tools.jconsole</a> &gt; <span class="el_source">AboutDialog.java</span></div><h1>AboutDialog.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2006, 2012, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package sun.tools.jconsole;

import java.awt.*;
import java.awt.event.*;
import java.beans.PropertyVetoException;
import java.net.URI;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.*;

import static sun.misc.Version.jdkMinorVersion;

import static java.awt.BorderLayout.*;
import static sun.tools.jconsole.Utilities.*;

@SuppressWarnings(&quot;serial&quot;)
public class AboutDialog extends InternalDialog {

<span class="nc" id="L45">    private static final Color textColor     = new Color(87,   88,  89);</span>
<span class="nc" id="L46">    private static final Color bgColor       = new Color(232, 237, 241);</span>
<span class="nc" id="L47">    private static final Color borderColor   = Color.black;</span>

<span class="nc" id="L49">    private Icon mastheadIcon =</span>
        new MastheadIcon(Messages.HELP_ABOUT_DIALOG_MASTHEAD_TITLE);

    private static AboutDialog aboutDialog;

    private JLabel statusBar;
    private Action closeAction;

    public AboutDialog(JConsole jConsole) {
<span class="nc" id="L58">        super(jConsole, Messages.HELP_ABOUT_DIALOG_TITLE, false);</span>

<span class="nc" id="L60">        setAccessibleDescription(this, Messages.HELP_ABOUT_DIALOG_ACCESSIBLE_DESCRIPTION);</span>
<span class="nc" id="L61">        setDefaultCloseOperation(HIDE_ON_CLOSE);</span>
<span class="nc" id="L62">        setResizable(false);</span>
<span class="nc" id="L63">        JComponent cp = (JComponent)getContentPane();</span>

<span class="nc" id="L65">        createActions();</span>

<span class="nc" id="L67">        JLabel mastheadLabel = new JLabel(mastheadIcon);</span>
<span class="nc" id="L68">        setAccessibleName(mastheadLabel,</span>
                Messages.HELP_ABOUT_DIALOG_MASTHEAD_ACCESSIBLE_NAME);

<span class="nc" id="L71">        JPanel mainPanel = new TPanel(0, 0);</span>
<span class="nc" id="L72">        mainPanel.add(mastheadLabel, NORTH);</span>

<span class="nc" id="L74">        String jConsoleVersion = Version.getVersion();</span>
<span class="nc" id="L75">        String vmName = System.getProperty(&quot;java.vm.name&quot;);</span>
<span class="nc" id="L76">        String vmVersion = System.getProperty(&quot;java.vm.version&quot;);</span>
<span class="nc" id="L77">        String urlStr = getOnlineDocUrl();</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">        if (isBrowseSupported()) {</span>
<span class="nc" id="L79">            urlStr = &quot;&lt;a style='color:#35556b' href=\&quot;&quot; + urlStr + &quot;\&quot;&gt;&quot; + urlStr + &quot;&lt;/a&gt;&quot;;</span>
        }

<span class="nc" id="L82">        JPanel infoAndLogoPanel = new JPanel(new BorderLayout(10, 10));</span>
<span class="nc" id="L83">        infoAndLogoPanel.setBackground(bgColor);</span>

<span class="nc" id="L85">        String colorStr = String.format(&quot;%06x&quot;, textColor.getRGB() &amp; 0xFFFFFF);</span>
<span class="nc" id="L86">        JEditorPane helpLink = new JEditorPane(&quot;text/html&quot;,</span>
                                &quot;&lt;html&gt;&lt;font color=#&quot;+ colorStr + &quot;&gt;&quot; +
<span class="nc" id="L88">                        Resources.format(Messages.HELP_ABOUT_DIALOG_JCONSOLE_VERSION, jConsoleVersion) +</span>
<span class="nc" id="L89">                &quot;&lt;p&gt;&quot; + Resources.format(Messages.HELP_ABOUT_DIALOG_JAVA_VERSION, (vmName +&quot;, &quot;+ vmVersion)) +</span>
                &quot;&lt;p&gt;&quot; + urlStr + &quot;&lt;/html&gt;&quot;);
<span class="nc" id="L91">        helpLink.setOpaque(false);</span>
<span class="nc" id="L92">        helpLink.setEditable(false);</span>
<span class="nc" id="L93">        helpLink.setForeground(textColor);</span>
<span class="nc" id="L94">        mainPanel.setBorder(BorderFactory.createLineBorder(borderColor));</span>
<span class="nc" id="L95">        infoAndLogoPanel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));</span>
<span class="nc" id="L96">        helpLink.addHyperlinkListener(new HyperlinkListener() {</span>
            public void hyperlinkUpdate(HyperlinkEvent e) {
<span class="nc bnc" id="L98" title="All 2 branches missed.">                if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {</span>
<span class="nc" id="L99">                    browse(e.getDescription());</span>
                }
<span class="nc" id="L101">            }</span>
        });
<span class="nc" id="L103">        infoAndLogoPanel.add(helpLink, NORTH);</span>

<span class="nc" id="L105">        ImageIcon brandLogoIcon = new ImageIcon(getClass().getResource(&quot;resources/brandlogo.png&quot;));</span>
<span class="nc" id="L106">        JLabel brandLogo = new JLabel(brandLogoIcon, JLabel.LEADING);</span>

<span class="nc" id="L108">        JButton closeButton = new JButton(closeAction);</span>

<span class="nc" id="L110">        JPanel bottomPanel = new TPanel(0, 0);</span>
<span class="nc" id="L111">        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.TRAILING));</span>
<span class="nc" id="L112">        buttonPanel.setOpaque(false);</span>

<span class="nc" id="L114">        mainPanel.add(infoAndLogoPanel, CENTER);</span>
<span class="nc" id="L115">        cp.add(bottomPanel, SOUTH);</span>

<span class="nc" id="L117">        infoAndLogoPanel.add(brandLogo, SOUTH);</span>

<span class="nc" id="L119">        buttonPanel.setBorder(new EmptyBorder(2, 12, 2, 12));</span>
<span class="nc" id="L120">        buttonPanel.add(closeButton);</span>
<span class="nc" id="L121">        bottomPanel.add(buttonPanel, NORTH);</span>

<span class="nc" id="L123">        statusBar = new JLabel(&quot; &quot;);</span>
<span class="nc" id="L124">        bottomPanel.add(statusBar, SOUTH);</span>

<span class="nc" id="L126">        cp.add(mainPanel, NORTH);</span>

<span class="nc" id="L128">        pack();</span>
<span class="nc" id="L129">        setLocationRelativeTo(jConsole);</span>
<span class="nc" id="L130">        Utilities.updateTransparency(this);</span>
<span class="nc" id="L131">    }</span>

    public void showDialog() {
<span class="nc" id="L134">        statusBar.setText(&quot; &quot;);</span>
<span class="nc" id="L135">        setVisible(true);</span>
        try {
            // Bring to front of other dialogs
<span class="nc" id="L138">            setSelected(true);</span>
<span class="nc" id="L139">        } catch (PropertyVetoException e) {</span>
            // ignore
<span class="nc" id="L141">        }</span>
<span class="nc" id="L142">    }</span>

    private static AboutDialog getAboutDialog(JConsole jConsole) {
<span class="nc bnc" id="L145" title="All 2 branches missed.">        if (aboutDialog == null) {</span>
<span class="nc" id="L146">            aboutDialog = new AboutDialog(jConsole);</span>
        }
<span class="nc" id="L148">        return aboutDialog;</span>
    }

    static void showAboutDialog(JConsole jConsole) {
<span class="nc" id="L152">        getAboutDialog(jConsole).showDialog();</span>
<span class="nc" id="L153">    }</span>

    static void browseUserGuide(JConsole jConsole) {
<span class="nc" id="L156">        getAboutDialog(jConsole).browse(getOnlineDocUrl());</span>
<span class="nc" id="L157">    }</span>

    static boolean isBrowseSupported() {
<span class="nc bnc" id="L160" title="All 2 branches missed.">        return (Desktop.isDesktopSupported() &amp;&amp;</span>
<span class="nc bnc" id="L161" title="All 2 branches missed.">                Desktop.getDesktop().isSupported(Desktop.Action.BROWSE));</span>
    }

    void browse(String urlStr) {
        try {
<span class="nc" id="L166">            Desktop.getDesktop().browse(new URI(urlStr));</span>
<span class="nc" id="L167">        } catch (Exception ex) {</span>
<span class="nc" id="L168">            showDialog();</span>
<span class="nc" id="L169">            statusBar.setText(ex.getLocalizedMessage());</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">            if (JConsole.isDebug()) {</span>
<span class="nc" id="L171">                ex.printStackTrace();</span>
            }
<span class="nc" id="L173">        }</span>
<span class="nc" id="L174">    }</span>

    private void createActions() {
<span class="nc" id="L177">        closeAction = new AbstractAction(Messages.CLOSE) {</span>
            public void actionPerformed(ActionEvent ev) {
<span class="nc" id="L179">                setVisible(false);</span>
<span class="nc" id="L180">                statusBar.setText(&quot;&quot;);</span>
<span class="nc" id="L181">            }</span>
        };
<span class="nc" id="L183">    }</span>

    private static String getOnlineDocUrl() {
<span class="nc" id="L186">        String version = Integer.toString(jdkMinorVersion());</span>
<span class="nc" id="L187">        return Resources.format(Messages.HELP_ABOUT_DIALOG_USER_GUIDE_LINK_URL,</span>
                                version);
    }

    private static class TPanel extends JPanel {
        TPanel(int hgap, int vgap) {
<span class="nc" id="L193">            super(new BorderLayout(hgap, vgap));</span>
<span class="nc" id="L194">            setOpaque(false);</span>
<span class="nc" id="L195">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>