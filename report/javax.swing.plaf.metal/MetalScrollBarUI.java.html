<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MetalScrollBarUI.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.plaf.metal</a> &gt; <span class="el_source">MetalScrollBarUI.java</span></div><h1>MetalScrollBarUI.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1998, 2004, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.plaf.metal;

import java.awt.Component;
import java.awt.Container;
import java.awt.LayoutManager;
import java.awt.Adjustable;
import java.awt.event.AdjustmentListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.Graphics;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Point;
import java.awt.Insets;
import java.awt.Color;
import java.awt.IllegalComponentStateException;

import java.beans.*;

import javax.swing.*;
import javax.swing.event.*;

import javax.swing.plaf.*;
import javax.swing.plaf.basic.BasicScrollBarUI;


/**
 * Implementation of ScrollBarUI for the Metal Look and Feel
 * &lt;p&gt;
 *
 * @author Tom Santos
 * @author Steve Wilson
 */
<span class="nc" id="L64">public class MetalScrollBarUI extends BasicScrollBarUI</span>
{
    private static Color shadowColor;
    private static Color highlightColor;
    private static Color darkShadowColor;
    private static Color thumbColor;
    private static Color thumbShadow;
    private static Color thumbHighlightColor;


    protected MetalBumps bumps;

    protected MetalScrollButton increaseButton;
    protected MetalScrollButton decreaseButton;

    protected  int scrollBarWidth;

    public static final String FREE_STANDING_PROP = &quot;JScrollBar.isFreeStanding&quot;;
<span class="nc" id="L82">    protected boolean isFreeStanding = true;</span>

    public static ComponentUI createUI( JComponent c )
    {
<span class="nc" id="L86">        return new MetalScrollBarUI();</span>
    }

    protected void installDefaults() {
<span class="nc" id="L90">        scrollBarWidth = ((Integer)(UIManager.get( &quot;ScrollBar.width&quot; ))).intValue();</span>
<span class="nc" id="L91">        super.installDefaults();</span>
<span class="nc" id="L92">        bumps = new MetalBumps( 10, 10, thumbHighlightColor, thumbShadow, thumbColor );</span>
<span class="nc" id="L93">    }</span>

    protected void installListeners(){
<span class="nc" id="L96">        super.installListeners();</span>
<span class="nc" id="L97">        ((ScrollBarListener)propertyChangeListener).handlePropertyChange( scrollbar.getClientProperty( FREE_STANDING_PROP ) );</span>
<span class="nc" id="L98">    }</span>

    protected PropertyChangeListener createPropertyChangeListener(){
<span class="nc" id="L101">        return new ScrollBarListener();</span>
    }

    protected void configureScrollBarColors()
    {
<span class="nc" id="L106">        super.configureScrollBarColors();</span>
<span class="nc" id="L107">        shadowColor         = UIManager.getColor(&quot;ScrollBar.shadow&quot;);</span>
<span class="nc" id="L108">        highlightColor      = UIManager.getColor(&quot;ScrollBar.highlight&quot;);</span>
<span class="nc" id="L109">        darkShadowColor     = UIManager.getColor(&quot;ScrollBar.darkShadow&quot;);</span>
<span class="nc" id="L110">        thumbColor          = UIManager.getColor(&quot;ScrollBar.thumb&quot;);</span>
<span class="nc" id="L111">        thumbShadow         = UIManager.getColor(&quot;ScrollBar.thumbShadow&quot;);</span>
<span class="nc" id="L112">        thumbHighlightColor = UIManager.getColor(&quot;ScrollBar.thumbHighlight&quot;);</span>


<span class="nc" id="L115">    }</span>

    public Dimension getPreferredSize( JComponent c )
    {
<span class="nc bnc" id="L119" title="All 2 branches missed.">        if ( scrollbar.getOrientation() == JScrollBar.VERTICAL )</span>
        {
<span class="nc" id="L121">            return new Dimension( scrollBarWidth, scrollBarWidth * 3 + 10 );</span>
        }
        else  // Horizontal
        {
<span class="nc" id="L125">            return new Dimension( scrollBarWidth * 3 + 10, scrollBarWidth );</span>
        }

    }

    /** Returns the view that represents the decrease view.
      */
    protected JButton createDecreaseButton( int orientation )
    {
<span class="nc" id="L134">        decreaseButton = new MetalScrollButton( orientation, scrollBarWidth, isFreeStanding );</span>
<span class="nc" id="L135">        return decreaseButton;</span>
    }

    /** Returns the view that represents the increase view. */
    protected JButton createIncreaseButton( int orientation )
    {
<span class="nc" id="L141">        increaseButton =  new MetalScrollButton( orientation, scrollBarWidth, isFreeStanding );</span>
<span class="nc" id="L142">        return increaseButton;</span>
    }

    protected void paintTrack( Graphics g, JComponent c, Rectangle trackBounds )
    {
<span class="nc" id="L147">        g.translate( trackBounds.x, trackBounds.y );</span>

<span class="nc" id="L149">        boolean leftToRight = MetalUtils.isLeftToRight(c);</span>

<span class="nc bnc" id="L151" title="All 2 branches missed.">        if ( scrollbar.getOrientation() == JScrollBar.VERTICAL )</span>
        {
<span class="nc bnc" id="L153" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L154">                trackBounds.width += 2;</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">                if ( !leftToRight ) {</span>
<span class="nc" id="L156">                    g.translate( -1, 0 );</span>
                }
            }

<span class="nc bnc" id="L160" title="All 2 branches missed.">            if ( c.isEnabled() ) {</span>
<span class="nc" id="L161">                g.setColor( darkShadowColor );</span>
<span class="nc" id="L162">                g.drawLine( 0, 0, 0, trackBounds.height - 1 );</span>
<span class="nc" id="L163">                g.drawLine( trackBounds.width - 2, 0, trackBounds.width - 2, trackBounds.height - 1 );</span>
<span class="nc" id="L164">                g.drawLine( 2, trackBounds.height - 1, trackBounds.width - 1, trackBounds.height - 1);</span>
<span class="nc" id="L165">                g.drawLine( 2, 0, trackBounds.width - 2, 0 );</span>

<span class="nc" id="L167">                g.setColor( shadowColor );</span>
                //      g.setColor( Color.red);
<span class="nc" id="L169">                g.drawLine( 1, 1, 1, trackBounds.height - 2 );</span>
<span class="nc" id="L170">                g.drawLine( 1, 1, trackBounds.width - 3, 1 );</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">                if (scrollbar.getValue() != scrollbar.getMaximum()) {  // thumb shadow</span>
<span class="nc" id="L172">                    int y = thumbRect.y + thumbRect.height - trackBounds.y;</span>
<span class="nc" id="L173">                    g.drawLine( 1, y, trackBounds.width-1, y);</span>
                }
<span class="nc" id="L175">                g.setColor(highlightColor);</span>
<span class="nc" id="L176">                g.drawLine( trackBounds.width - 1, 0, trackBounds.width - 1, trackBounds.height - 1 );</span>
            } else {
<span class="nc" id="L178">                MetalUtils.drawDisabledBorder(g, 0, 0, trackBounds.width, trackBounds.height );</span>
            }

<span class="nc bnc" id="L181" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L182">                trackBounds.width -= 2;</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">                if ( !leftToRight ) {</span>
<span class="nc" id="L184">                    g.translate( 1, 0 );</span>
                }
            }
        }
        else  // HORIZONTAL
        {
<span class="nc bnc" id="L190" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L191">                trackBounds.height += 2;</span>
            }

<span class="nc bnc" id="L194" title="All 2 branches missed.">            if ( c.isEnabled() ) {</span>
<span class="nc" id="L195">                g.setColor( darkShadowColor );</span>
<span class="nc" id="L196">                g.drawLine( 0, 0, trackBounds.width - 1, 0 );  // top</span>
<span class="nc" id="L197">                g.drawLine( 0, 2, 0, trackBounds.height - 2 ); // left</span>
<span class="nc" id="L198">                g.drawLine( 0, trackBounds.height - 2, trackBounds.width - 1, trackBounds.height - 2 ); // bottom</span>
<span class="nc" id="L199">                g.drawLine( trackBounds.width - 1, 2, trackBounds.width - 1, trackBounds.height - 1 ); // right</span>

<span class="nc" id="L201">                g.setColor( shadowColor );</span>
                //      g.setColor( Color.red);
<span class="nc" id="L203">                g.drawLine( 1, 1, trackBounds.width - 2, 1 );  // top</span>
<span class="nc" id="L204">                g.drawLine( 1, 1, 1, trackBounds.height - 3 ); // left</span>
<span class="nc" id="L205">                g.drawLine( 0, trackBounds.height - 1, trackBounds.width - 1, trackBounds.height - 1 ); // bottom</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">                if (scrollbar.getValue() != scrollbar.getMaximum()) {  // thumb shadow</span>
<span class="nc" id="L207">                    int x = thumbRect.x + thumbRect.width - trackBounds.x;</span>
<span class="nc" id="L208">                    g.drawLine( x, 1, x, trackBounds.height-1);</span>
<span class="nc" id="L209">                }</span>
            } else {
<span class="nc" id="L211">                MetalUtils.drawDisabledBorder(g, 0, 0, trackBounds.width, trackBounds.height );</span>
            }

<span class="nc bnc" id="L214" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L215">                trackBounds.height -= 2;</span>
            }
        }

<span class="nc" id="L219">        g.translate( -trackBounds.x, -trackBounds.y );</span>
<span class="nc" id="L220">    }</span>

    protected void paintThumb( Graphics g, JComponent c, Rectangle thumbBounds )
    {
<span class="nc bnc" id="L224" title="All 2 branches missed.">        if (!c.isEnabled()) {</span>
<span class="nc" id="L225">            return;</span>
        }

<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (MetalLookAndFeel.usingOcean()) {</span>
<span class="nc" id="L229">            oceanPaintThumb(g, c, thumbBounds);</span>
<span class="nc" id="L230">            return;</span>
        }

<span class="nc" id="L233">        boolean leftToRight = MetalUtils.isLeftToRight(c);</span>

<span class="nc" id="L235">        g.translate( thumbBounds.x, thumbBounds.y );</span>

<span class="nc bnc" id="L237" title="All 2 branches missed.">        if ( scrollbar.getOrientation() == JScrollBar.VERTICAL )</span>
        {
<span class="nc bnc" id="L239" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L240">                thumbBounds.width += 2;</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">                if ( !leftToRight ) {</span>
<span class="nc" id="L242">                    g.translate( -1, 0 );</span>
                }
            }

<span class="nc" id="L246">            g.setColor( thumbColor );</span>
<span class="nc" id="L247">            g.fillRect( 0, 0, thumbBounds.width - 2, thumbBounds.height - 1 );</span>

<span class="nc" id="L249">            g.setColor( thumbShadow );</span>
<span class="nc" id="L250">            g.drawRect( 0, 0, thumbBounds.width - 2, thumbBounds.height - 1 );</span>

<span class="nc" id="L252">            g.setColor( thumbHighlightColor );</span>
<span class="nc" id="L253">            g.drawLine( 1, 1, thumbBounds.width - 3, 1 );</span>
<span class="nc" id="L254">            g.drawLine( 1, 1, 1, thumbBounds.height - 2 );</span>

<span class="nc" id="L256">            bumps.setBumpArea( thumbBounds.width - 6, thumbBounds.height - 7 );</span>
<span class="nc" id="L257">            bumps.paintIcon( c, g, 3, 4 );</span>

<span class="nc bnc" id="L259" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L260">                thumbBounds.width -= 2;</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">                if ( !leftToRight ) {</span>
<span class="nc" id="L262">                    g.translate( 1, 0 );</span>
                }
            }
        }
        else  // HORIZONTAL
        {
<span class="nc bnc" id="L268" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L269">                thumbBounds.height += 2;</span>
            }

<span class="nc" id="L272">            g.setColor( thumbColor );</span>
<span class="nc" id="L273">            g.fillRect( 0, 0, thumbBounds.width - 1, thumbBounds.height - 2 );</span>

<span class="nc" id="L275">            g.setColor( thumbShadow );</span>
<span class="nc" id="L276">            g.drawRect( 0, 0, thumbBounds.width - 1, thumbBounds.height - 2 );</span>

<span class="nc" id="L278">            g.setColor( thumbHighlightColor );</span>
<span class="nc" id="L279">            g.drawLine( 1, 1, thumbBounds.width - 3, 1 );</span>
<span class="nc" id="L280">            g.drawLine( 1, 1, 1, thumbBounds.height - 3 );</span>

<span class="nc" id="L282">            bumps.setBumpArea( thumbBounds.width - 7, thumbBounds.height - 6 );</span>
<span class="nc" id="L283">            bumps.paintIcon( c, g, 4, 3 );</span>

<span class="nc bnc" id="L285" title="All 2 branches missed.">            if ( !isFreeStanding ) {</span>
<span class="nc" id="L286">                thumbBounds.height -= 2;</span>
            }
        }

<span class="nc" id="L290">        g.translate( -thumbBounds.x, -thumbBounds.y );</span>
<span class="nc" id="L291">    }</span>

    private void oceanPaintThumb(Graphics g, JComponent c,
                                   Rectangle thumbBounds) {
<span class="nc" id="L295">        boolean leftToRight = MetalUtils.isLeftToRight(c);</span>

<span class="nc" id="L297">        g.translate(thumbBounds.x, thumbBounds.y);</span>

<span class="nc bnc" id="L299" title="All 2 branches missed.">        if (scrollbar.getOrientation() == JScrollBar.VERTICAL) {</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">            if (!isFreeStanding) {</span>
<span class="nc" id="L301">                thumbBounds.width += 2;</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">                if (!leftToRight) {</span>
<span class="nc" id="L303">                    g.translate(-1, 0);</span>
                }
            }

<span class="nc bnc" id="L307" title="All 2 branches missed.">            if (thumbColor != null) {</span>
<span class="nc" id="L308">                g.setColor(thumbColor);</span>
<span class="nc" id="L309">                g.fillRect(0, 0, thumbBounds.width - 2,thumbBounds.height - 1);</span>
            }

<span class="nc" id="L312">            g.setColor(thumbShadow);</span>
<span class="nc" id="L313">            g.drawRect(0, 0, thumbBounds.width - 2, thumbBounds.height - 1);</span>

<span class="nc" id="L315">            g.setColor(thumbHighlightColor);</span>
<span class="nc" id="L316">            g.drawLine(1, 1, thumbBounds.width - 3, 1);</span>
<span class="nc" id="L317">            g.drawLine(1, 1, 1, thumbBounds.height - 2);</span>

<span class="nc" id="L319">            MetalUtils.drawGradient(c, g, &quot;ScrollBar.gradient&quot;, 2, 2,</span>
                                    thumbBounds.width - 4,
                                    thumbBounds.height - 3, false);

<span class="nc" id="L323">            int gripSize = thumbBounds.width - 8;</span>
<span class="nc bnc" id="L324" title="All 4 branches missed.">            if (gripSize &gt; 2 &amp;&amp; thumbBounds.height &gt;= 10) {</span>
<span class="nc" id="L325">                g.setColor(MetalLookAndFeel.getPrimaryControlDarkShadow());</span>
<span class="nc" id="L326">                int gripY = thumbBounds.height / 2 - 2;</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                for (int counter = 0; counter &lt; 6; counter += 2) {</span>
<span class="nc" id="L328">                    g.fillRect(4, counter + gripY, gripSize, 1);</span>
                }

<span class="nc" id="L331">                g.setColor(MetalLookAndFeel.getWhite());</span>
<span class="nc" id="L332">                gripY++;</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">                for (int counter = 0; counter &lt; 6; counter += 2) {</span>
<span class="nc" id="L334">                    g.fillRect(5, counter + gripY, gripSize, 1);</span>
                }
            }
<span class="nc bnc" id="L337" title="All 2 branches missed.">            if (!isFreeStanding) {</span>
<span class="nc" id="L338">                thumbBounds.width -= 2;</span>
<span class="nc bnc" id="L339" title="All 2 branches missed.">                if (!leftToRight) {</span>
<span class="nc" id="L340">                    g.translate(1, 0);</span>
                }
            }
<span class="nc" id="L343">        }</span>
        else { // HORIZONTAL
<span class="nc bnc" id="L345" title="All 2 branches missed.">            if (!isFreeStanding) {</span>
<span class="nc" id="L346">                thumbBounds.height += 2;</span>
            }

<span class="nc bnc" id="L349" title="All 2 branches missed.">            if (thumbColor != null) {</span>
<span class="nc" id="L350">                g.setColor(thumbColor);</span>
<span class="nc" id="L351">                g.fillRect(0, 0, thumbBounds.width - 1,thumbBounds.height - 2);</span>
            }

<span class="nc" id="L354">            g.setColor(thumbShadow);</span>
<span class="nc" id="L355">            g.drawRect(0, 0, thumbBounds.width - 1, thumbBounds.height - 2);</span>

<span class="nc" id="L357">            g.setColor(thumbHighlightColor);</span>
<span class="nc" id="L358">            g.drawLine(1, 1, thumbBounds.width - 2, 1);</span>
<span class="nc" id="L359">            g.drawLine(1, 1, 1, thumbBounds.height - 3);</span>

<span class="nc" id="L361">            MetalUtils.drawGradient(c, g, &quot;ScrollBar.gradient&quot;, 2, 2,</span>
                                    thumbBounds.width - 3,
                                    thumbBounds.height - 4, true);

<span class="nc" id="L365">            int gripSize = thumbBounds.height - 8;</span>
<span class="nc bnc" id="L366" title="All 4 branches missed.">            if (gripSize &gt; 2 &amp;&amp; thumbBounds.width &gt;= 10) {</span>
<span class="nc" id="L367">                g.setColor(MetalLookAndFeel.getPrimaryControlDarkShadow());</span>
<span class="nc" id="L368">                int gripX = thumbBounds.width / 2 - 2;</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">                for (int counter = 0; counter &lt; 6; counter += 2) {</span>
<span class="nc" id="L370">                    g.fillRect(gripX + counter, 4, 1, gripSize);</span>
                }

<span class="nc" id="L373">                g.setColor(MetalLookAndFeel.getWhite());</span>
<span class="nc" id="L374">                gripX++;</span>
<span class="nc bnc" id="L375" title="All 2 branches missed.">                for (int counter = 0; counter &lt; 6; counter += 2) {</span>
<span class="nc" id="L376">                    g.fillRect(gripX + counter, 5, 1, gripSize);</span>
                }
            }

<span class="nc bnc" id="L380" title="All 2 branches missed.">            if (!isFreeStanding) {</span>
<span class="nc" id="L381">                thumbBounds.height -= 2;</span>
            }
        }

<span class="nc" id="L385">        g.translate( -thumbBounds.x, -thumbBounds.y );</span>
<span class="nc" id="L386">    }</span>

    protected Dimension getMinimumThumbSize()
    {
<span class="nc" id="L390">        return new Dimension( scrollBarWidth, scrollBarWidth );</span>
    }

    /**
      * This is overridden only to increase the invalid area.  This
      * ensures that the &quot;Shadow&quot; below the thumb is invalidated
      */
    protected void setThumbBounds(int x, int y, int width, int height)
    {
        /* If the thumbs bounds haven't changed, we're done.
         */
<span class="nc bnc" id="L401" title="All 8 branches missed.">        if ((thumbRect.x == x) &amp;&amp;</span>
            (thumbRect.y == y) &amp;&amp;
            (thumbRect.width == width) &amp;&amp;
            (thumbRect.height == height)) {
<span class="nc" id="L405">            return;</span>
        }

        /* Update thumbRect, and repaint the union of x,y,w,h and
         * the old thumbRect.
         */
<span class="nc" id="L411">        int minX = Math.min(x, thumbRect.x);</span>
<span class="nc" id="L412">        int minY = Math.min(y, thumbRect.y);</span>
<span class="nc" id="L413">        int maxX = Math.max(x + width, thumbRect.x + thumbRect.width);</span>
<span class="nc" id="L414">        int maxY = Math.max(y + height, thumbRect.y + thumbRect.height);</span>

<span class="nc" id="L416">        thumbRect.setBounds(x, y, width, height);</span>
<span class="nc" id="L417">        scrollbar.repaint(minX, minY, (maxX - minX)+1, (maxY - minY)+1);</span>
<span class="nc" id="L418">    }</span>



<span class="nc" id="L422">    class ScrollBarListener extends BasicScrollBarUI.PropertyChangeHandler</span>
    {
        public void propertyChange(PropertyChangeEvent e)
        {
<span class="nc" id="L426">            String name = e.getPropertyName();</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">            if ( name.equals( FREE_STANDING_PROP ) )</span>
            {
<span class="nc" id="L429">                handlePropertyChange( e.getNewValue() );</span>
            }
            else {
<span class="nc" id="L432">                super.propertyChange( e );</span>
            }
<span class="nc" id="L434">        }</span>

        public void handlePropertyChange( Object newValue )
        {
<span class="nc bnc" id="L438" title="All 2 branches missed.">            if ( newValue != null )</span>
            {
<span class="nc" id="L440">                boolean temp = ((Boolean)newValue).booleanValue();</span>
<span class="nc bnc" id="L441" title="All 4 branches missed.">                boolean becameFlush = temp == false &amp;&amp; isFreeStanding == true;</span>
<span class="nc bnc" id="L442" title="All 4 branches missed.">                boolean becameNormal = temp == true &amp;&amp; isFreeStanding == false;</span>

<span class="nc" id="L444">                isFreeStanding = temp;</span>

<span class="nc bnc" id="L446" title="All 2 branches missed.">                if ( becameFlush ) {</span>
<span class="nc" id="L447">                    toFlush();</span>
                }
<span class="nc bnc" id="L449" title="All 2 branches missed.">                else if ( becameNormal ) {</span>
<span class="nc" id="L450">                    toFreeStanding();</span>
                }
<span class="nc" id="L452">            }</span>
            else
            {

<span class="nc bnc" id="L456" title="All 2 branches missed.">                if ( !isFreeStanding ) {</span>
<span class="nc" id="L457">                    isFreeStanding = true;</span>
<span class="nc" id="L458">                    toFreeStanding();</span>
                }

                // This commented-out block is used for testing flush scrollbars.
/*
                if ( isFreeStanding ) {
                    isFreeStanding = false;
                    toFlush();
                }
*/
            }

<span class="nc bnc" id="L470" title="All 2 branches missed.">            if ( increaseButton != null )</span>
            {
<span class="nc" id="L472">                increaseButton.setFreeStanding( isFreeStanding );</span>
            }
<span class="nc bnc" id="L474" title="All 2 branches missed.">            if ( decreaseButton != null )</span>
            {
<span class="nc" id="L476">                decreaseButton.setFreeStanding( isFreeStanding );</span>
            }
<span class="nc" id="L478">        }</span>

        protected void toFlush() {
<span class="nc" id="L481">            scrollBarWidth -= 2;</span>
<span class="nc" id="L482">        }</span>

        protected void toFreeStanding() {
<span class="nc" id="L485">            scrollBarWidth += 2;</span>
<span class="nc" id="L486">        }</span>
    } // end class ScrollBarListener
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>