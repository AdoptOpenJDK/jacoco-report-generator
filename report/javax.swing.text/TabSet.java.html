<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TabSet.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.text</a> &gt; <span class="el_source">TabSet.java</span></div><h1>TabSet.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1998, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.text;

import java.io.Serializable;

/**
 * A TabSet is comprised of many TabStops. It offers methods for locating the
 * closest TabStop to a given position and finding all the potential TabStops.
 * It is also immutable.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author  Scott Violet
 */
public class TabSet implements Serializable
{
    /** TabStops this TabSet contains. */
    private TabStop[]              tabs;
    /**
     * Since this class is immutable the hash code could be
     * calculated once. MAX_VALUE means that it was not initialized
     * yet. Hash code shouldn't has MAX_VALUE value.
     */
<span class="nc" id="L55">    private int hashCode = Integer.MAX_VALUE;</span>

    /**
     * Creates and returns an instance of TabSet. The array of Tabs
     * passed in must be sorted in ascending order.
     */
<span class="nc" id="L61">    public TabSet(TabStop[] tabs) {</span>
        // PENDING(sky): If this becomes a problem, make it sort.
<span class="nc bnc" id="L63" title="All 2 branches missed.">        if(tabs != null) {</span>
<span class="nc" id="L64">            int          tabCount = tabs.length;</span>

<span class="nc" id="L66">            this.tabs = new TabStop[tabCount];</span>
<span class="nc" id="L67">            System.arraycopy(tabs, 0, this.tabs, 0, tabCount);</span>
<span class="nc" id="L68">        }</span>
        else
<span class="nc" id="L70">            this.tabs = null;</span>
<span class="nc" id="L71">    }</span>

    /**
     * Returns the number of Tab instances the receiver contains.
     */
    public int getTabCount() {
<span class="nc bnc" id="L77" title="All 2 branches missed.">        return (tabs == null) ? 0 : tabs.length;</span>
    }

    /**
     * Returns the TabStop at index &lt;code&gt;index&lt;/code&gt;. This will throw an
     * IllegalArgumentException if &lt;code&gt;index&lt;/code&gt; is outside the range
     * of tabs.
     */
    public TabStop getTab(int index) {
<span class="nc" id="L86">        int          numTabs = getTabCount();</span>

<span class="nc bnc" id="L88" title="All 4 branches missed.">        if(index &lt; 0 || index &gt;= numTabs)</span>
<span class="nc" id="L89">            throw new IllegalArgumentException(index +</span>
                                              &quot; is outside the range of tabs&quot;);
<span class="nc" id="L91">        return tabs[index];</span>
    }

    /**
     * Returns the Tab instance after &lt;code&gt;location&lt;/code&gt;. This will
     * return null if there are no tabs after &lt;code&gt;location&lt;/code&gt;.
     */
    public TabStop getTabAfter(float location) {
<span class="nc" id="L99">        int     index = getTabIndexAfter(location);</span>

<span class="nc bnc" id="L101" title="All 2 branches missed.">        return (index == -1) ? null : tabs[index];</span>
    }

    /**
     * @return the index of the TabStop &lt;code&gt;tab&lt;/code&gt;, or -1 if
     * &lt;code&gt;tab&lt;/code&gt; is not contained in the receiver.
     */
    public int getTabIndex(TabStop tab) {
<span class="nc bnc" id="L109" title="All 2 branches missed.">        for(int counter = getTabCount() - 1; counter &gt;= 0; counter--)</span>
            // should this use .equals?
<span class="nc bnc" id="L111" title="All 2 branches missed.">            if(getTab(counter) == tab)</span>
<span class="nc" id="L112">                return counter;</span>
<span class="nc" id="L113">        return -1;</span>
    }

    /**
     * Returns the index of the Tab to be used after &lt;code&gt;location&lt;/code&gt;.
     * This will return -1 if there are no tabs after &lt;code&gt;location&lt;/code&gt;.
     */
    public int getTabIndexAfter(float location) {
        int     current, min, max;

<span class="nc" id="L123">        min = 0;</span>
<span class="nc" id="L124">        max = getTabCount();</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">        while(min != max) {</span>
<span class="nc" id="L126">            current = (max - min) / 2 + min;</span>
<span class="nc bnc" id="L127" title="All 2 branches missed.">            if(location &gt; tabs[current].getPosition()) {</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">                if(min == current)</span>
<span class="nc" id="L129">                    min = max;</span>
                else
<span class="nc" id="L131">                    min = current;</span>
            }
            else {
<span class="nc bnc" id="L134" title="All 4 branches missed.">                if(current == 0 || location &gt; tabs[current - 1].getPosition())</span>
<span class="nc" id="L135">                    return current;</span>
<span class="nc" id="L136">                max = current;</span>
            }
        }
        // no tabs after the passed in location.
<span class="nc" id="L140">        return -1;</span>
    }

    /**
     * Indicates whether this &lt;code&gt;TabSet&lt;/code&gt; is equal to another one.
     * @param o the &lt;code&gt;TabSet&lt;/code&gt; instance which this instance
     *  should be compared to.
     * @return &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;o&lt;/code&gt; is the instance of
     * &lt;code&gt;TabSet&lt;/code&gt;, has the same number of &lt;code&gt;TabStop&lt;/code&gt;s
     * and they are all equal, &lt;code&gt;false&lt;/code&gt; otherwise.
     *
     * @since 1.5
     */
    public boolean equals(Object o) {
<span class="nc bnc" id="L154" title="All 2 branches missed.">        if (o == this) {</span>
<span class="nc" id="L155">            return true;</span>
        }
<span class="nc bnc" id="L157" title="All 2 branches missed.">        if (o instanceof TabSet) {</span>
<span class="nc" id="L158">            TabSet ts = (TabSet) o;</span>
<span class="nc" id="L159">            int count = getTabCount();</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">            if (ts.getTabCount() != count) {</span>
<span class="nc" id="L161">                return false;</span>
            }
<span class="nc bnc" id="L163" title="All 2 branches missed.">            for (int i=0; i &lt; count; i++) {</span>
<span class="nc" id="L164">                TabStop ts1 = getTab(i);</span>
<span class="nc" id="L165">                TabStop ts2 = ts.getTab(i);</span>
<span class="nc bnc" id="L166" title="All 6 branches missed.">                if ((ts1 == null &amp;&amp; ts2 != null) ||</span>
<span class="nc bnc" id="L167" title="All 2 branches missed.">                        (ts1 != null &amp;&amp; !getTab(i).equals(ts.getTab(i)))) {</span>
<span class="nc" id="L168">                    return false;</span>
                }
            }
<span class="nc" id="L171">            return true;</span>
        }
<span class="nc" id="L173">        return false;</span>
    }

    /**
     * Returns a hashcode for this set of TabStops.
     * @return  a hashcode value for this set of TabStops.
     *
     * @since 1.5
     */
    public int hashCode() {
<span class="nc bnc" id="L183" title="All 2 branches missed.">        if (hashCode == Integer.MAX_VALUE) {</span>
<span class="nc" id="L184">            hashCode = 0;</span>
<span class="nc" id="L185">            int len = getTabCount();</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">            for (int i = 0; i &lt; len; i++) {</span>
<span class="nc" id="L187">                TabStop ts = getTab(i);</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">                hashCode ^= ts != null ? getTab(i).hashCode() : 0;</span>
            }
<span class="nc bnc" id="L190" title="All 2 branches missed.">            if (hashCode == Integer.MAX_VALUE) {</span>
<span class="nc" id="L191">                hashCode -= 1;</span>
            }
        }
<span class="nc" id="L194">        return hashCode;</span>
    }

    /**
     * Returns the string representation of the set of tabs.
     */
    public String toString() {
<span class="nc" id="L201">        int            tabCount = getTabCount();</span>
<span class="nc" id="L202">        StringBuilder buffer = new StringBuilder(&quot;[ &quot;);</span>

<span class="nc bnc" id="L204" title="All 2 branches missed.">        for(int counter = 0; counter &lt; tabCount; counter++) {</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">            if(counter &gt; 0)</span>
<span class="nc" id="L206">                buffer.append(&quot; - &quot;);</span>
<span class="nc" id="L207">            buffer.append(getTab(counter).toString());</span>
        }
<span class="nc" id="L209">        buffer.append(&quot; ]&quot;);</span>
<span class="nc" id="L210">        return buffer.toString();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>