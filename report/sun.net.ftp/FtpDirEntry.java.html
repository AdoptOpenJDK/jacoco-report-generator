<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>FtpDirEntry.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">sun.net.ftp</a> &gt; <span class="el_source">FtpDirEntry.java</span></div><h1>FtpDirEntry.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2009, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package sun.net.ftp;

import java.util.Date;
import java.util.HashMap;

/**
 * A {@code FtpDirEntry} is a class agregating all the information that the FTP client
 * can gather from the server by doing a {@code LST} (or {@code NLST}) command and
 * parsing the output. It will typically contain the name, type, size, last modification
 * time, owner and group of the file, although some of these could be unavailable
 * due to specific FTP server limitations.
 *
 * @see sun.net.ftp.FtpDirParser
 * @since 1.7
 */
public class FtpDirEntry {

<span class="nc" id="L42">    public enum Type {</span>

<span class="nc" id="L44">        FILE, DIR, PDIR, CDIR, LINK</span>
    };

<span class="nc" id="L47">    public enum Permission {</span>

<span class="nc" id="L49">        USER(0), GROUP(1), OTHERS(2);</span>
        int value;

<span class="nc" id="L52">        Permission(int v) {</span>
<span class="nc" id="L53">            value = v;</span>
<span class="nc" id="L54">        }</span>
    };
    private final String name;
<span class="nc" id="L57">    private String user = null;</span>
<span class="nc" id="L58">    private String group = null;</span>
<span class="nc" id="L59">    private long size = -1;</span>
<span class="nc" id="L60">    private java.util.Date created = null;</span>
<span class="nc" id="L61">    private java.util.Date lastModified = null;</span>
<span class="nc" id="L62">    private Type type = Type.FILE;</span>
<span class="nc" id="L63">    private boolean[][] permissions = null;</span>
<span class="nc" id="L64">    private HashMap&lt;String, String&gt; facts = new HashMap&lt;String, String&gt;();</span>

<span class="nc" id="L66">    private FtpDirEntry() {</span>
<span class="nc" id="L67">        name = null;</span>
<span class="nc" id="L68">    }</span>

    /**
     * Creates an FtpDirEntry instance with only the name being set.
     *
     * @param name The name of the file
     */
<span class="nc" id="L75">    public FtpDirEntry(String name) {</span>
<span class="nc" id="L76">        this.name = name;</span>
<span class="nc" id="L77">    }</span>

    /**
     * Returns the name of the remote file.
     *
     * @return a {@code String} containing the name of the remote file.
     */
    public String getName() {
<span class="nc" id="L85">        return name;</span>
    }

    /**
     * Returns the user name of the owner of the file as returned by the FTP
     * server, if provided. This could be a name or a user id (number).
     *
     * @return a {@code String} containing the user name or
     *         {@code null} if that information is not available.
     */
    public String getUser() {
<span class="nc" id="L96">        return user;</span>
    }

    /**
     * Sets the user name of the owner of the file. Intended mostly to be
     * used from inside a {@link java.net.FtpDirParser} implementation.
     *
     * @param user The user name of the owner of the file, or {@code null}
     * if that information is not available.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setUser(String user) {
<span class="nc" id="L108">        this.user = user;</span>
<span class="nc" id="L109">        return this;</span>
    }

    /**
     * Returns the group name of the file as returned by the FTP
     * server, if provided. This could be a name or a group id (number).
     *
     * @return a {@code String} containing the group name or
     *         {@code null} if that information is not available.
     */
    public String getGroup() {
<span class="nc" id="L120">        return group;</span>
    }

    /**
     * Sets the name of the group to which the file belong. Intended mostly to be
     * used from inside a {@link java.net.FtpDirParser} implementation.
     *
     * @param group The name of the group to which the file belong, or {@code null}
     * if that information is not available.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setGroup(String group) {
<span class="nc" id="L132">        this.group = group;</span>
<span class="nc" id="L133">        return this;</span>
    }

    /**
     * Returns the size of the remote file as it was returned by the FTP
     * server, if provided.
     *
     * @return the size of the file or -1 if that information is not available.
     */
    public long getSize() {
<span class="nc" id="L143">        return size;</span>
    }

    /**
     * Sets the size of that file. Intended mostly to be used from inside an
     * {@link java.net.FtpDirParser} implementation.
     *
     * @param size The size, in bytes, of that file. or -1 if unknown.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setSize(long size) {
<span class="nc" id="L154">        this.size = size;</span>
<span class="nc" id="L155">        return this;</span>
    }

    /**
     * Returns the type of the remote file as it was returned by the FTP
     * server, if provided.
     * It returns a FtpDirEntry.Type enum and the values can be:
     * - FtpDirEntry.Type.FILE for a normal file
     * - FtpDirEntry.Type.DIR for a directory
     * - FtpDirEntry.Type.LINK for a symbolic link
     *
     * @return a {@code FtpDirEntry.Type} describing the type of the file
     *         or {@code null} if that information is not available.
     */
    public Type getType() {
<span class="nc" id="L170">        return type;</span>
    }

    /**
     * Sets the type of the file. Intended mostly to be used from inside an
     * {@link java.net.FtpDirParser} implementation.
     *
     * @param type the type of this file or {@code null} if that information
     * is not available.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setType(Type type) {
<span class="nc" id="L182">        this.type = type;</span>
<span class="nc" id="L183">        return this;</span>
    }

    /**
     * Returns the last modification time of the remote file as it was returned
     * by the FTP server, if provided, {@code null} otherwise.
     *
     * @return a &lt;code&gt;Date&lt;/code&gt; representing the last time the file was
     *         modified on the server, or {@code null} if that
     *         information is not available.
     */
    public java.util.Date getLastModified() {
<span class="nc" id="L195">        return this.lastModified;</span>
    }

    /**
     * Sets the last modification time of the file. Intended mostly to be used
     * from inside an {@link java.net.FtpDirParser} implementation.
     *
     * @param lastModified The Date representing the last modification time, or
     * {@code null} if that information is not available.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setLastModified(Date lastModified) {
<span class="nc" id="L207">        this.lastModified = lastModified;</span>
<span class="nc" id="L208">        return this;</span>
    }

    /**
     * Returns whether read access is granted for a specific permission.
     *
     * @param p the Permission (user, group, others) to check.
     * @return {@code true} if read access is granted.
     */
    public boolean canRead(Permission p) {
<span class="nc bnc" id="L218" title="All 2 branches missed.">        if (permissions != null) {</span>
<span class="nc" id="L219">            return permissions[p.value][0];</span>
        }
<span class="nc" id="L221">        return false;</span>
    }

    /**
     * Returns whether write access is granted for a specific permission.
     *
     * @param p the Permission (user, group, others) to check.
     * @return {@code true} if write access is granted.
     */
    public boolean canWrite(Permission p) {
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (permissions != null) {</span>
<span class="nc" id="L232">            return permissions[p.value][1];</span>
        }
<span class="nc" id="L234">        return false;</span>
    }

    /**
     * Returns whether execute access is granted for a specific permission.
     *
     * @param p the Permission (user, group, others) to check.
     * @return {@code true} if execute access is granted.
     */
    public boolean canExexcute(Permission p) {
<span class="nc bnc" id="L244" title="All 2 branches missed.">        if (permissions != null) {</span>
<span class="nc" id="L245">            return permissions[p.value][2];</span>
        }
<span class="nc" id="L247">        return false;</span>
    }

    /**
     * Sets the permissions for that file. Intended mostly to be used
     * from inside an {@link java.net.FtpDirParser} implementation.
     * The permissions array is a 3x3 {@code boolean} array, the first index being
     * the User, group or owner (0, 1 and 2 respectively) while the second
     * index is read, write or execute (0, 1 and 2 respectively again).
     * &lt;p&gt;E.G.: {@code permissions[1][2]} is the group/execute permission.&lt;/p&gt;
     *
     * @param permissions a 3x3 {@code boolean} array
     * @return this {@code FtpDirEntry}
     */
    public FtpDirEntry setPermissions(boolean[][] permissions) {
<span class="nc" id="L262">        this.permissions = permissions;</span>
<span class="nc" id="L263">        return this;</span>
    }

    /**
     * Adds a 'fact', as defined in RFC 3659, to the list of facts of this file.
     * Intended mostly to be used from inside a {@link java.net.FtpDirParser}
     * implementation.
     *
     * @param fact the name of the fact (e.g. &quot;Media-Type&quot;). It is not case-sensitive.
     * @param value the value associated with this fact.
     * @return this {@code FtpDirEntry}
     */
    public FtpDirEntry addFact(String fact, String value) {
<span class="nc" id="L276">        facts.put(fact.toLowerCase(), value);</span>
<span class="nc" id="L277">        return this;</span>
    }

    /**
     * Returns the requested 'fact', as defined in RFC 3659, if available.
     *
     * @param fact The name of the fact *e.g. &quot;Media-Type&quot;). It is not case sensitive.
     * @return The value of the fact or, {@code null} if that fact wasn't
     * provided by the server.
     */
    public String getFact(String fact) {
<span class="nc" id="L288">        return facts.get(fact.toLowerCase());</span>
    }

    /**
     * Returns the creation time of the file, when provided by the server.
     *
     * @return The Date representing the creation time, or {@code null}
     * if the server didn't provide that information.
     */
    public Date getCreated() {
<span class="nc" id="L298">        return created;</span>
    }

    /**
     * Sets the creation time for that file. Intended mostly to be used from
     * inside a {@link java.net.FtpDirParser} implementation.
     *
     * @param created the Date representing the creation time for that file, or
     * {@code null} if that information is not available.
     * @return this FtpDirEntry
     */
    public FtpDirEntry setCreated(Date created) {
<span class="nc" id="L310">        this.created = created;</span>
<span class="nc" id="L311">        return this;</span>
    }

    /**
     * Returns a string representation of the object.
     * The {@code toString} method for class {@code FtpDirEntry}
     * returns a string consisting of the name of the file, followed by its
     * type between brackets, followed by the user and group between
     * parenthesis, then size between '{', and, finally, the lastModified of last
     * modification if it's available.
     *
     * @return  a string representation of the object.
     */
    @Override
    public String toString() {
<span class="nc bnc" id="L326" title="All 2 branches missed.">        if (lastModified == null) {</span>
<span class="nc" id="L327">            return name + &quot; [&quot; + type + &quot;] (&quot; + user + &quot; / &quot; + group + &quot;) &quot; + size;</span>
        }
<span class="nc" id="L329">        return name + &quot; [&quot; + type + &quot;] (&quot; + user + &quot; / &quot; + group + &quot;) {&quot; + size + &quot;} &quot; + java.text.DateFormat.getDateInstance().format(lastModified);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>