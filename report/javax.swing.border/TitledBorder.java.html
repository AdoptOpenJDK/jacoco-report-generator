<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TitledBorder.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing.border</a> &gt; <span class="el_source">TitledBorder.java</span></div><h1>TitledBorder.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package javax.swing.border;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Insets;
import java.awt.Rectangle;
import java.awt.geom.Path2D;
import java.beans.ConstructorProperties;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.UIManager;
import javax.swing.plaf.basic.BasicHTML;

/**
 * A class which implements an arbitrary border
 * with the addition of a String title in a
 * specified position and justification.
 * &lt;p&gt;
 * If the border, font, or color property values are not
 * specified in the constructor or by invoking the appropriate
 * set methods, the property values will be defined by the current
 * look and feel, using the following property names in the
 * Defaults Table:
 * &lt;ul&gt;
 * &lt;li&gt;&amp;quot;TitledBorder.border&amp;quot;
 * &lt;li&gt;&amp;quot;TitledBorder.font&amp;quot;
 * &lt;li&gt;&amp;quot;TitledBorder.titleColor&amp;quot;
 * &lt;/ul&gt;
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author David Kloba
 * @author Amy Fowler
 */
@SuppressWarnings(&quot;serial&quot;)
public class TitledBorder extends AbstractBorder
{
    protected String title;
    protected Border border;
    protected int titlePosition;
    protected int titleJustification;
    protected Font titleFont;
    protected Color titleColor;

    private final JLabel label;

    /**
     * Use the default vertical orientation for the title text.
     */
    static public final int     DEFAULT_POSITION        = 0;
    /** Position the title above the border's top line. */
    static public final int     ABOVE_TOP               = 1;
    /** Position the title in the middle of the border's top line. */
    static public final int     TOP                     = 2;
    /** Position the title below the border's top line. */
    static public final int     BELOW_TOP               = 3;
    /** Position the title above the border's bottom line. */
    static public final int     ABOVE_BOTTOM            = 4;
    /** Position the title in the middle of the border's bottom line. */
    static public final int     BOTTOM                  = 5;
    /** Position the title below the border's bottom line. */
    static public final int     BELOW_BOTTOM            = 6;

    /**
     * Use the default justification for the title text.
     */
    static public final int     DEFAULT_JUSTIFICATION   = 0;
    /** Position title text at the left side of the border line. */
    static public final int     LEFT                    = 1;
    /** Position title text in the center of the border line. */
    static public final int     CENTER                  = 2;
    /** Position title text at the right side of the border line. */
    static public final int     RIGHT                   = 3;
    /** Position title text at the left side of the border line
     *  for left to right orientation, at the right side of the
     *  border line for right to left orientation.
     */
    static public final int     LEADING = 4;
    /** Position title text at the right side of the border line
     *  for left to right orientation, at the left side of the
     *  border line for right to left orientation.
     */
    static public final int     TRAILING = 5;

    // Space between the border and the component's edge
    static protected final int EDGE_SPACING = 2;

    // Space between the border and text
    static protected final int TEXT_SPACING = 2;

    // Horizontal inset of text that is left or right justified
    static protected final int TEXT_INSET_H = 5;

    /**
     * Creates a TitledBorder instance.
     *
     * @param title  the title the border should display
     */
    public TitledBorder(String title) {
<span class="nc" id="L135">        this(null, title, LEADING, DEFAULT_POSITION, null, null);</span>
<span class="nc" id="L136">    }</span>

    /**
     * Creates a TitledBorder instance with the specified border
     * and an empty title.
     *
     * @param border  the border
     */
    public TitledBorder(Border border) {
<span class="nc" id="L145">        this(border, &quot;&quot;, LEADING, DEFAULT_POSITION, null, null);</span>
<span class="nc" id="L146">    }</span>

    /**
     * Creates a TitledBorder instance with the specified border
     * and title.
     *
     * @param border  the border
     * @param title  the title the border should display
     */
    public TitledBorder(Border border, String title) {
<span class="nc" id="L156">        this(border, title, LEADING, DEFAULT_POSITION, null, null);</span>
<span class="nc" id="L157">    }</span>

    /**
     * Creates a TitledBorder instance with the specified border,
     * title, title-justification, and title-position.
     *
     * @param border  the border
     * @param title  the title the border should display
     * @param titleJustification the justification for the title
     * @param titlePosition the position for the title
     */
    public TitledBorder(Border border,
                        String title,
                        int titleJustification,
                        int titlePosition) {
<span class="nc" id="L172">        this(border, title, titleJustification,</span>
             titlePosition, null, null);
<span class="nc" id="L174">    }</span>

    /**
     * Creates a TitledBorder instance with the specified border,
     * title, title-justification, title-position, and title-font.
     *
     * @param border  the border
     * @param title  the title the border should display
     * @param titleJustification the justification for the title
     * @param titlePosition the position for the title
     * @param titleFont the font for rendering the title
     */
    public TitledBorder(Border border,
                        String title,
                        int titleJustification,
                        int titlePosition,
                        Font titleFont) {
<span class="nc" id="L191">        this(border, title, titleJustification,</span>
             titlePosition, titleFont, null);
<span class="nc" id="L193">    }</span>

    /**
     * Creates a TitledBorder instance with the specified border,
     * title, title-justification, title-position, title-font, and
     * title-color.
     *
     * @param border  the border
     * @param title  the title the border should display
     * @param titleJustification the justification for the title
     * @param titlePosition the position for the title
     * @param titleFont the font of the title
     * @param titleColor the color of the title
     */
    @ConstructorProperties({&quot;border&quot;, &quot;title&quot;, &quot;titleJustification&quot;, &quot;titlePosition&quot;, &quot;titleFont&quot;, &quot;titleColor&quot;})
    public TitledBorder(Border border,
                        String title,
                        int titleJustification,
                        int titlePosition,
                        Font titleFont,
<span class="nc" id="L213">                        Color titleColor) {</span>
<span class="nc" id="L214">        this.title = title;</span>
<span class="nc" id="L215">        this.border = border;</span>
<span class="nc" id="L216">        this.titleFont = titleFont;</span>
<span class="nc" id="L217">        this.titleColor = titleColor;</span>

<span class="nc" id="L219">        setTitleJustification(titleJustification);</span>
<span class="nc" id="L220">        setTitlePosition(titlePosition);</span>

<span class="nc" id="L222">        this.label = new JLabel();</span>
<span class="nc" id="L223">        this.label.setOpaque(false);</span>
<span class="nc" id="L224">        this.label.putClientProperty(BasicHTML.propertyKey, null);</span>
<span class="nc" id="L225">    }</span>

    /**
     * Paints the border for the specified component with the
     * specified position and size.
     * @param c the component for which this border is being painted
     * @param g the paint graphics
     * @param x the x position of the painted border
     * @param y the y position of the painted border
     * @param width the width of the painted border
     * @param height the height of the painted border
     */
    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
<span class="nc" id="L238">        Border border = getBorder();</span>
<span class="nc" id="L239">        String title = getTitle();</span>
<span class="nc bnc" id="L240" title="All 4 branches missed.">        if ((title != null) &amp;&amp; !title.isEmpty()) {</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">            int edge = (border instanceof TitledBorder) ? 0 : EDGE_SPACING;</span>
<span class="nc" id="L242">            JLabel label = getLabel(c);</span>
<span class="nc" id="L243">            Dimension size = label.getPreferredSize();</span>
<span class="nc" id="L244">            Insets insets = getBorderInsets(border, c, new Insets(0, 0, 0, 0));</span>

<span class="nc" id="L246">            int borderX = x + edge;</span>
<span class="nc" id="L247">            int borderY = y + edge;</span>
<span class="nc" id="L248">            int borderW = width - edge - edge;</span>
<span class="nc" id="L249">            int borderH = height - edge - edge;</span>

<span class="nc" id="L251">            int labelY = y;</span>
<span class="nc" id="L252">            int labelH = size.height;</span>
<span class="nc" id="L253">            int position = getPosition();</span>
<span class="nc bnc" id="L254" title="All 7 branches missed.">            switch (position) {</span>
                case ABOVE_TOP:
<span class="nc" id="L256">                    insets.left = 0;</span>
<span class="nc" id="L257">                    insets.right = 0;</span>
<span class="nc" id="L258">                    borderY += labelH - edge;</span>
<span class="nc" id="L259">                    borderH -= labelH - edge;</span>
<span class="nc" id="L260">                    break;</span>
                case TOP:
<span class="nc" id="L262">                    insets.top = edge + insets.top/2 - labelH/2;</span>
<span class="nc bnc" id="L263" title="All 2 branches missed.">                    if (insets.top &lt; edge) {</span>
<span class="nc" id="L264">                        borderY -= insets.top;</span>
<span class="nc" id="L265">                        borderH += insets.top;</span>
                    }
                    else {
<span class="nc" id="L268">                        labelY += insets.top;</span>
                    }
<span class="nc" id="L270">                    break;</span>
                case BELOW_TOP:
<span class="nc" id="L272">                    labelY += insets.top + edge;</span>
<span class="nc" id="L273">                    break;</span>
                case ABOVE_BOTTOM:
<span class="nc" id="L275">                    labelY += height - labelH - insets.bottom - edge;</span>
<span class="nc" id="L276">                    break;</span>
                case BOTTOM:
<span class="nc" id="L278">                    labelY += height - labelH;</span>
<span class="nc" id="L279">                    insets.bottom = edge + (insets.bottom - labelH) / 2;</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">                    if (insets.bottom &lt; edge) {</span>
<span class="nc" id="L281">                        borderH += insets.bottom;</span>
                    }
                    else {
<span class="nc" id="L284">                        labelY -= insets.bottom;</span>
                    }
<span class="nc" id="L286">                    break;</span>
                case BELOW_BOTTOM:
<span class="nc" id="L288">                    insets.left = 0;</span>
<span class="nc" id="L289">                    insets.right = 0;</span>
<span class="nc" id="L290">                    labelY += height - labelH;</span>
<span class="nc" id="L291">                    borderH -= labelH - edge;</span>
                    break;
            }
<span class="nc" id="L294">            insets.left += edge + TEXT_INSET_H;</span>
<span class="nc" id="L295">            insets.right += edge + TEXT_INSET_H;</span>

<span class="nc" id="L297">            int labelX = x;</span>
<span class="nc" id="L298">            int labelW = width - insets.left - insets.right;</span>
<span class="nc bnc" id="L299" title="All 2 branches missed.">            if (labelW &gt; size.width) {</span>
<span class="nc" id="L300">                labelW = size.width;</span>
            }
<span class="nc bnc" id="L302" title="All 4 branches missed.">            switch (getJustification(c)) {</span>
                case LEFT:
<span class="nc" id="L304">                    labelX += insets.left;</span>
<span class="nc" id="L305">                    break;</span>
                case RIGHT:
<span class="nc" id="L307">                    labelX += width - insets.right - labelW;</span>
<span class="nc" id="L308">                    break;</span>
                case CENTER:
<span class="nc" id="L310">                    labelX += (width - labelW) / 2;</span>
                    break;
            }

<span class="nc bnc" id="L314" title="All 2 branches missed.">            if (border != null) {</span>
<span class="nc bnc" id="L315" title="All 4 branches missed.">                if ((position != TOP) &amp;&amp; (position != BOTTOM)) {</span>
<span class="nc" id="L316">                    border.paintBorder(c, g, borderX, borderY, borderW, borderH);</span>
                }
                else {
<span class="nc" id="L319">                    Graphics g2 = g.create();</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">                    if (g2 instanceof Graphics2D) {</span>
<span class="nc" id="L321">                        Graphics2D g2d = (Graphics2D) g2;</span>
<span class="nc" id="L322">                        Path2D path = new Path2D.Float();</span>
<span class="nc" id="L323">                        path.append(new Rectangle(borderX, borderY, borderW, labelY - borderY), false);</span>
<span class="nc" id="L324">                        path.append(new Rectangle(borderX, labelY, labelX - borderX - TEXT_SPACING, labelH), false);</span>
<span class="nc" id="L325">                        path.append(new Rectangle(labelX + labelW + TEXT_SPACING, labelY, borderX - labelX + borderW - labelW - TEXT_SPACING, labelH), false);</span>
<span class="nc" id="L326">                        path.append(new Rectangle(borderX, labelY + labelH, borderW, borderY - labelY + borderH - labelH), false);</span>
<span class="nc" id="L327">                        g2d.clip(path);</span>
                    }
<span class="nc" id="L329">                    border.paintBorder(c, g2, borderX, borderY, borderW, borderH);</span>
<span class="nc" id="L330">                    g2.dispose();</span>
                }
            }
<span class="nc" id="L333">            g.translate(labelX, labelY);</span>
<span class="nc" id="L334">            label.setSize(labelW, labelH);</span>
<span class="nc" id="L335">            label.paint(g);</span>
<span class="nc" id="L336">            g.translate(-labelX, -labelY);</span>
<span class="nc" id="L337">        }</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">        else if (border != null) {</span>
<span class="nc" id="L339">            border.paintBorder(c, g, x, y, width, height);</span>
        }
<span class="nc" id="L341">    }</span>

    /**
     * Reinitialize the insets parameter with this Border's current Insets.
     * @param c the component for which this border insets value applies
     * @param insets the object to be reinitialized
     */
    public Insets getBorderInsets(Component c, Insets insets) {
<span class="nc" id="L349">        Border border = getBorder();</span>
<span class="nc" id="L350">        insets = getBorderInsets(border, c, insets);</span>

<span class="nc" id="L352">        String title = getTitle();</span>
<span class="nc bnc" id="L353" title="All 4 branches missed.">        if ((title != null) &amp;&amp; !title.isEmpty()) {</span>
<span class="nc bnc" id="L354" title="All 2 branches missed.">            int edge = (border instanceof TitledBorder) ? 0 : EDGE_SPACING;</span>
<span class="nc" id="L355">            JLabel label = getLabel(c);</span>
<span class="nc" id="L356">            Dimension size = label.getPreferredSize();</span>

<span class="nc bnc" id="L358" title="All 7 branches missed.">            switch (getPosition()) {</span>
                case ABOVE_TOP:
<span class="nc" id="L360">                    insets.top += size.height - edge;</span>
<span class="nc" id="L361">                    break;</span>
                case TOP: {
<span class="nc bnc" id="L363" title="All 2 branches missed.">                    if (insets.top &lt; size.height) {</span>
<span class="nc" id="L364">                        insets.top = size.height - edge;</span>
                    }
                    break;
                }
                case BELOW_TOP:
<span class="nc" id="L369">                    insets.top += size.height;</span>
<span class="nc" id="L370">                    break;</span>
                case ABOVE_BOTTOM:
<span class="nc" id="L372">                    insets.bottom += size.height;</span>
<span class="nc" id="L373">                    break;</span>
                case BOTTOM: {
<span class="nc bnc" id="L375" title="All 2 branches missed.">                    if (insets.bottom &lt; size.height) {</span>
<span class="nc" id="L376">                        insets.bottom = size.height - edge;</span>
                    }
                    break;
                }
                case BELOW_BOTTOM:
<span class="nc" id="L381">                    insets.bottom += size.height - edge;</span>
                    break;
            }
<span class="nc" id="L384">            insets.top += edge + TEXT_SPACING;</span>
<span class="nc" id="L385">            insets.left += edge + TEXT_SPACING;</span>
<span class="nc" id="L386">            insets.right += edge + TEXT_SPACING;</span>
<span class="nc" id="L387">            insets.bottom += edge + TEXT_SPACING;</span>
        }
<span class="nc" id="L389">        return insets;</span>
    }

    /**
     * Returns whether or not the border is opaque.
     */
    public boolean isBorderOpaque() {
<span class="nc" id="L396">        return false;</span>
    }

    /**
     * Returns the title of the titled border.
     *
     * @return the title of the titled border
     */
    public String getTitle() {
<span class="nc" id="L405">        return title;</span>
    }

    /**
     * Returns the border of the titled border.
     *
     * @return the border of the titled border
     */
    public Border getBorder() {
<span class="nc bnc" id="L414" title="All 2 branches missed.">        return border != null</span>
                ? border
<span class="nc" id="L416">                : UIManager.getBorder(&quot;TitledBorder.border&quot;);</span>
    }

    /**
     * Returns the title-position of the titled border.
     *
     * @return the title-position of the titled border
     */
    public int getTitlePosition() {
<span class="nc" id="L425">        return titlePosition;</span>
    }

    /**
     * Returns the title-justification of the titled border.
     *
     * @return the title-justification of the titled border
     */
    public int getTitleJustification() {
<span class="nc" id="L434">        return titleJustification;</span>
    }

    /**
     * Returns the title-font of the titled border.
     *
     * @return the title-font of the titled border
     */
    public Font getTitleFont() {
<span class="nc bnc" id="L443" title="All 2 branches missed.">        return titleFont == null ? UIManager.getFont(&quot;TitledBorder.font&quot;) : titleFont;</span>
    }

    /**
     * Returns the title-color of the titled border.
     *
     * @return the title-color of the titled border
     */
    public Color getTitleColor() {
<span class="nc bnc" id="L452" title="All 2 branches missed.">        return titleColor == null ? UIManager.getColor(&quot;TitledBorder.titleColor&quot;) : titleColor;</span>
    }


    // REMIND(aim): remove all or some of these set methods?

    /**
     * Sets the title of the titled border.
     * @param title  the title for the border
     */
    public void setTitle(String title) {
<span class="nc" id="L463">        this.title = title;</span>
<span class="nc" id="L464">    }</span>

    /**
     * Sets the border of the titled border.
     * @param border the border
     */
    public void setBorder(Border border) {
<span class="nc" id="L471">        this.border = border;</span>
<span class="nc" id="L472">    }</span>

    /**
     * Sets the title-position of the titled border.
     * @param titlePosition the position for the border
     */
    public void setTitlePosition(int titlePosition) {
<span class="nc bnc" id="L479" title="All 2 branches missed.">        switch (titlePosition) {</span>
            case ABOVE_TOP:
            case TOP:
            case BELOW_TOP:
            case ABOVE_BOTTOM:
            case BOTTOM:
            case BELOW_BOTTOM:
            case DEFAULT_POSITION:
<span class="nc" id="L487">                this.titlePosition = titlePosition;</span>
<span class="nc" id="L488">                break;</span>
            default:
<span class="nc" id="L490">                throw new IllegalArgumentException(titlePosition +</span>
                        &quot; is not a valid title position.&quot;);
        }
<span class="nc" id="L493">    }</span>

    /**
     * Sets the title-justification of the titled border.
     * @param titleJustification the justification for the border
     */
    public void setTitleJustification(int titleJustification) {
<span class="nc bnc" id="L500" title="All 2 branches missed.">        switch (titleJustification) {</span>
            case DEFAULT_JUSTIFICATION:
            case LEFT:
            case CENTER:
            case RIGHT:
            case LEADING:
            case TRAILING:
<span class="nc" id="L507">                this.titleJustification = titleJustification;</span>
<span class="nc" id="L508">                break;</span>
            default:
<span class="nc" id="L510">                throw new IllegalArgumentException(titleJustification +</span>
                        &quot; is not a valid title justification.&quot;);
        }
<span class="nc" id="L513">    }</span>

    /**
     * Sets the title-font of the titled border.
     * @param titleFont the font for the border title
     */
    public void setTitleFont(Font titleFont) {
<span class="nc" id="L520">        this.titleFont = titleFont;</span>
<span class="nc" id="L521">    }</span>

    /**
     * Sets the title-color of the titled border.
     * @param titleColor the color for the border title
     */
    public void setTitleColor(Color titleColor) {
<span class="nc" id="L528">        this.titleColor = titleColor;</span>
<span class="nc" id="L529">    }</span>

    /**
     * Returns the minimum dimensions this border requires
     * in order to fully display the border and title.
     * @param c the component where this border will be drawn
     * @return the {@code Dimension} object
     */
    public Dimension getMinimumSize(Component c) {
<span class="nc" id="L538">        Insets insets = getBorderInsets(c);</span>
<span class="nc" id="L539">        Dimension minSize = new Dimension(insets.right+insets.left,</span>
                                          insets.top+insets.bottom);
<span class="nc" id="L541">        String title = getTitle();</span>
<span class="nc bnc" id="L542" title="All 4 branches missed.">        if ((title != null) &amp;&amp; !title.isEmpty()) {</span>
<span class="nc" id="L543">            JLabel label = getLabel(c);</span>
<span class="nc" id="L544">            Dimension size = label.getPreferredSize();</span>

<span class="nc" id="L546">            int position = getPosition();</span>
<span class="nc bnc" id="L547" title="All 4 branches missed.">            if ((position != ABOVE_TOP) &amp;&amp; (position != BELOW_BOTTOM)) {</span>
<span class="nc" id="L548">                minSize.width += size.width;</span>
            }
<span class="nc bnc" id="L550" title="All 2 branches missed.">            else if (minSize.width &lt; size.width) {</span>
<span class="nc" id="L551">                minSize.width += size.width;</span>
            }
        }
<span class="nc" id="L554">        return minSize;</span>
    }

    /**
     * Returns the baseline.
     *
     * @throws NullPointerException {@inheritDoc}
     * @throws IllegalArgumentException {@inheritDoc}
     * @see javax.swing.JComponent#getBaseline(int, int)
     * @since 1.6
     */
    public int getBaseline(Component c, int width, int height) {
<span class="nc bnc" id="L566" title="All 2 branches missed.">        if (c == null) {</span>
<span class="nc" id="L567">            throw new NullPointerException(&quot;Must supply non-null component&quot;);</span>
        }
<span class="nc bnc" id="L569" title="All 2 branches missed.">        if (width &lt; 0) {</span>
<span class="nc" id="L570">            throw new IllegalArgumentException(&quot;Width must be &gt;= 0&quot;);</span>
        }
<span class="nc bnc" id="L572" title="All 2 branches missed.">        if (height &lt; 0) {</span>
<span class="nc" id="L573">            throw new IllegalArgumentException(&quot;Height must be &gt;= 0&quot;);</span>
        }
<span class="nc" id="L575">        Border border = getBorder();</span>
<span class="nc" id="L576">        String title = getTitle();</span>
<span class="nc bnc" id="L577" title="All 4 branches missed.">        if ((title != null) &amp;&amp; !title.isEmpty()) {</span>
<span class="nc bnc" id="L578" title="All 2 branches missed.">            int edge = (border instanceof TitledBorder) ? 0 : EDGE_SPACING;</span>
<span class="nc" id="L579">            JLabel label = getLabel(c);</span>
<span class="nc" id="L580">            Dimension size = label.getPreferredSize();</span>
<span class="nc" id="L581">            Insets insets = getBorderInsets(border, c, new Insets(0, 0, 0, 0));</span>

<span class="nc" id="L583">            int baseline = label.getBaseline(size.width, size.height);</span>
<span class="nc bnc" id="L584" title="All 7 branches missed.">            switch (getPosition()) {</span>
                case ABOVE_TOP:
<span class="nc" id="L586">                    return baseline;</span>
                case TOP:
<span class="nc" id="L588">                    insets.top = edge + (insets.top - size.height) / 2;</span>
<span class="nc bnc" id="L589" title="All 2 branches missed.">                    return (insets.top &lt; edge)</span>
                            ? baseline
                            : baseline + insets.top;
                case BELOW_TOP:
<span class="nc" id="L593">                    return baseline + insets.top + edge;</span>
                case ABOVE_BOTTOM:
<span class="nc" id="L595">                    return baseline + height - size.height - insets.bottom - edge;</span>
                case BOTTOM:
<span class="nc" id="L597">                    insets.bottom = edge + (insets.bottom - size.height) / 2;</span>
<span class="nc bnc" id="L598" title="All 2 branches missed.">                    return (insets.bottom &lt; edge)</span>
                            ? baseline + height - size.height
                            : baseline + height - size.height + insets.bottom;
                case BELOW_BOTTOM:
<span class="nc" id="L602">                    return baseline + height - size.height;</span>
            }
        }
<span class="nc" id="L605">        return -1;</span>
    }

    /**
     * Returns an enum indicating how the baseline of the border
     * changes as the size changes.
     *
     * @throws NullPointerException {@inheritDoc}
     * @see javax.swing.JComponent#getBaseline(int, int)
     * @since 1.6
     */
    public Component.BaselineResizeBehavior getBaselineResizeBehavior(
            Component c) {
<span class="nc" id="L618">        super.getBaselineResizeBehavior(c);</span>
<span class="nc bnc" id="L619" title="All 3 branches missed.">        switch (getPosition()) {</span>
            case TitledBorder.ABOVE_TOP:
            case TitledBorder.TOP:
            case TitledBorder.BELOW_TOP:
<span class="nc" id="L623">                return Component.BaselineResizeBehavior.CONSTANT_ASCENT;</span>
            case TitledBorder.ABOVE_BOTTOM:
            case TitledBorder.BOTTOM:
            case TitledBorder.BELOW_BOTTOM:
<span class="nc" id="L627">                return JComponent.BaselineResizeBehavior.CONSTANT_DESCENT;</span>
        }
<span class="nc" id="L629">        return Component.BaselineResizeBehavior.OTHER;</span>
    }

    private int getPosition() {
<span class="nc" id="L633">        int position = getTitlePosition();</span>
<span class="nc bnc" id="L634" title="All 2 branches missed.">        if (position != DEFAULT_POSITION) {</span>
<span class="nc" id="L635">            return position;</span>
        }
<span class="nc" id="L637">        Object value = UIManager.get(&quot;TitledBorder.position&quot;);</span>
<span class="nc bnc" id="L638" title="All 2 branches missed.">        if (value instanceof Integer) {</span>
<span class="nc" id="L639">            int i = (Integer) value;</span>
<span class="nc bnc" id="L640" title="All 4 branches missed.">            if ((0 &lt; i) &amp;&amp; (i &lt;= 6)) {</span>
<span class="nc" id="L641">                return i;</span>
            }
<span class="nc" id="L643">        }</span>
<span class="nc bnc" id="L644" title="All 2 branches missed.">        else if (value instanceof String) {</span>
<span class="nc" id="L645">            String s = (String) value;</span>
<span class="nc bnc" id="L646" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;ABOVE_TOP&quot;)) {</span>
<span class="nc" id="L647">                return ABOVE_TOP;</span>
            }
<span class="nc bnc" id="L649" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;TOP&quot;)) {</span>
<span class="nc" id="L650">                return TOP;</span>
            }
<span class="nc bnc" id="L652" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;BELOW_TOP&quot;)) {</span>
<span class="nc" id="L653">                return BELOW_TOP;</span>
            }
<span class="nc bnc" id="L655" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;ABOVE_BOTTOM&quot;)) {</span>
<span class="nc" id="L656">                return ABOVE_BOTTOM;</span>
            }
<span class="nc bnc" id="L658" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;BOTTOM&quot;)) {</span>
<span class="nc" id="L659">                return BOTTOM;</span>
            }
<span class="nc bnc" id="L661" title="All 2 branches missed.">            if (s.equalsIgnoreCase(&quot;BELOW_BOTTOM&quot;)) {</span>
<span class="nc" id="L662">                return BELOW_BOTTOM;</span>
            }
        }
<span class="nc" id="L665">        return TOP;</span>
    }

    private int getJustification(Component c) {
<span class="nc" id="L669">        int justification = getTitleJustification();</span>
<span class="nc bnc" id="L670" title="All 4 branches missed.">        if ((justification == LEADING) || (justification == DEFAULT_JUSTIFICATION)) {</span>
<span class="nc bnc" id="L671" title="All 2 branches missed.">            return c.getComponentOrientation().isLeftToRight() ? LEFT : RIGHT;</span>
        }
<span class="nc bnc" id="L673" title="All 2 branches missed.">        if (justification == TRAILING) {</span>
<span class="nc bnc" id="L674" title="All 2 branches missed.">            return c.getComponentOrientation().isLeftToRight() ? RIGHT : LEFT;</span>
        }
<span class="nc" id="L676">        return justification;</span>
    }

    protected Font getFont(Component c) {
<span class="nc" id="L680">        Font font = getTitleFont();</span>
<span class="nc bnc" id="L681" title="All 2 branches missed.">        if (font != null) {</span>
<span class="nc" id="L682">            return font;</span>
        }
<span class="nc bnc" id="L684" title="All 2 branches missed.">        if (c != null) {</span>
<span class="nc" id="L685">            font = c.getFont();</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">            if (font != null) {</span>
<span class="nc" id="L687">                return font;</span>
            }
        }
<span class="nc" id="L690">        return new Font(Font.DIALOG, Font.PLAIN, 12);</span>
    }

    private Color getColor(Component c) {
<span class="nc" id="L694">        Color color = getTitleColor();</span>
<span class="nc bnc" id="L695" title="All 2 branches missed.">        if (color != null) {</span>
<span class="nc" id="L696">            return color;</span>
        }
<span class="nc bnc" id="L698" title="All 2 branches missed.">        return (c != null)</span>
<span class="nc" id="L699">                ? c.getForeground()</span>
                : null;
    }

    private JLabel getLabel(Component c) {
<span class="nc" id="L704">        this.label.setText(getTitle());</span>
<span class="nc" id="L705">        this.label.setFont(getFont(c));</span>
<span class="nc" id="L706">        this.label.setForeground(getColor(c));</span>
<span class="nc" id="L707">        this.label.setComponentOrientation(c.getComponentOrientation());</span>
<span class="nc" id="L708">        this.label.setEnabled(c.isEnabled());</span>
<span class="nc" id="L709">        return this.label;</span>
    }

    private static Insets getBorderInsets(Border border, Component c, Insets insets) {
<span class="nc bnc" id="L713" title="All 2 branches missed.">        if (border == null) {</span>
<span class="nc" id="L714">            insets.set(0, 0, 0, 0);</span>
        }
<span class="nc bnc" id="L716" title="All 2 branches missed.">        else if (border instanceof AbstractBorder) {</span>
<span class="nc" id="L717">            AbstractBorder ab = (AbstractBorder) border;</span>
<span class="nc" id="L718">            insets = ab.getBorderInsets(c, insets);</span>
<span class="nc" id="L719">        }</span>
        else {
<span class="nc" id="L721">            Insets i = border.getBorderInsets(c);</span>
<span class="nc" id="L722">            insets.set(i.top, i.left, i.bottom, i.right);</span>
        }
<span class="nc" id="L724">        return insets;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>