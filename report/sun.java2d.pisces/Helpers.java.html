<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>Helpers.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">sun.java2d.pisces</a> &gt; <span class="el_source">Helpers.java</span></div><h1>Helpers.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2007, 2011, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package sun.java2d.pisces;

import java.util.Arrays;
import static java.lang.Math.PI;
import static java.lang.Math.cos;
import static java.lang.Math.sqrt;
import static java.lang.Math.cbrt;
import static java.lang.Math.acos;


<span class="nc bnc" id="L36" title="All 2 branches missed.">final class Helpers {</span>
<span class="nc" id="L37">    private Helpers() {</span>
<span class="nc" id="L38">        throw new Error(&quot;This is a non instantiable class&quot;);</span>
    }

    static boolean within(final float x, final float y, final float err) {
<span class="nc" id="L42">        final float d = y - x;</span>
<span class="nc bnc" id="L43" title="All 4 branches missed.">        return (d &lt;= err &amp;&amp; d &gt;= -err);</span>
    }

    static boolean within(final double x, final double y, final double err) {
<span class="nc" id="L47">        final double d = y - x;</span>
<span class="nc bnc" id="L48" title="All 4 branches missed.">        return (d &lt;= err &amp;&amp; d &gt;= -err);</span>
    }

    static int quadraticRoots(final float a, final float b,
                              final float c, float[] zeroes, final int off)
    {
<span class="nc" id="L54">        int ret = off;</span>
        float t;
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (a != 0f) {</span>
<span class="nc" id="L57">            final float dis = b*b - 4*a*c;</span>
<span class="nc bnc" id="L58" title="All 2 branches missed.">            if (dis &gt; 0) {</span>
<span class="nc" id="L59">                final float sqrtDis = (float)Math.sqrt(dis);</span>
                // depending on the sign of b we use a slightly different
                // algorithm than the traditional one to find one of the roots
                // so we can avoid adding numbers of different signs (which
                // might result in loss of precision).
<span class="nc bnc" id="L64" title="All 2 branches missed.">                if (b &gt;= 0) {</span>
<span class="nc" id="L65">                    zeroes[ret++] = (2 * c) / (-b - sqrtDis);</span>
<span class="nc" id="L66">                    zeroes[ret++] = (-b - sqrtDis) / (2 * a);</span>
                } else {
<span class="nc" id="L68">                    zeroes[ret++] = (-b + sqrtDis) / (2 * a);</span>
<span class="nc" id="L69">                    zeroes[ret++] = (2 * c) / (-b + sqrtDis);</span>
                }
<span class="nc bnc" id="L71" title="All 2 branches missed.">            } else if (dis == 0f) {</span>
<span class="nc" id="L72">                t = (-b) / (2 * a);</span>
<span class="nc" id="L73">                zeroes[ret++] = t;</span>
            }
<span class="nc" id="L75">        } else {</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">            if (b != 0f) {</span>
<span class="nc" id="L77">                t = (-c) / b;</span>
<span class="nc" id="L78">                zeroes[ret++] = t;</span>
            }
        }
<span class="nc" id="L81">        return ret - off;</span>
    }

    // find the roots of g(t) = d*t^3 + a*t^2 + b*t + c in [A,B)
    static int cubicRootsInAB(float d, float a, float b, float c,
                              float[] pts, final int off,
                              final float A, final float B)
    {
<span class="nc bnc" id="L89" title="All 2 branches missed.">        if (d == 0) {</span>
<span class="nc" id="L90">            int num = quadraticRoots(a, b, c, pts, off);</span>
<span class="nc" id="L91">            return filterOutNotInAB(pts, off, num, A, B) - off;</span>
        }
        // From Graphics Gems:
        // http://tog.acm.org/resources/GraphicsGems/gems/Roots3And4.c
        // (also from awt.geom.CubicCurve2D. But here we don't need as
        // much accuracy and we don't want to create arrays so we use
        // our own customized version).

        /* normal form: x^3 + ax^2 + bx + c = 0 */
<span class="nc" id="L100">        a /= d;</span>
<span class="nc" id="L101">        b /= d;</span>
<span class="nc" id="L102">        c /= d;</span>

        //  substitute x = y - A/3 to eliminate quadratic term:
        //     x^3 +Px + Q = 0
        //
        // Since we actually need P/3 and Q/2 for all of the
        // calculations that follow, we will calculate
        // p = P/3
        // q = Q/2
        // instead and use those values for simplicity of the code.
<span class="nc" id="L112">        double sq_A = a * a;</span>
<span class="nc" id="L113">        double p = 1.0/3 * (-1.0/3 * sq_A + b);</span>
<span class="nc" id="L114">        double q = 1.0/2 * (2.0/27 * a * sq_A - 1.0/3 * a * b + c);</span>

        /* use Cardano's formula */

<span class="nc" id="L118">        double cb_p = p * p * p;</span>
<span class="nc" id="L119">        double D = q * q + cb_p;</span>

        int num;
<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (D &lt; 0) {</span>
            // see: http://en.wikipedia.org/wiki/Cubic_function#Trigonometric_.28and_hyperbolic.29_method
<span class="nc" id="L124">            final double phi = 1.0/3 * acos(-q / sqrt(-cb_p));</span>
<span class="nc" id="L125">            final double t = 2 * sqrt(-p);</span>

<span class="nc" id="L127">            pts[ off+0 ] =  (float)( t * cos(phi));</span>
<span class="nc" id="L128">            pts[ off+1 ] =  (float)(-t * cos(phi + PI / 3));</span>
<span class="nc" id="L129">            pts[ off+2 ] =  (float)(-t * cos(phi - PI / 3));</span>
<span class="nc" id="L130">            num = 3;</span>
<span class="nc" id="L131">        } else {</span>
<span class="nc" id="L132">            final double sqrt_D = sqrt(D);</span>
<span class="nc" id="L133">            final double u = cbrt(sqrt_D - q);</span>
<span class="nc" id="L134">            final double v = - cbrt(sqrt_D + q);</span>

<span class="nc" id="L136">            pts[ off ] = (float)(u + v);</span>
<span class="nc" id="L137">            num = 1;</span>

<span class="nc bnc" id="L139" title="All 2 branches missed.">            if (within(D, 0, 1e-8)) {</span>
<span class="nc" id="L140">                pts[off+1] = -(pts[off] / 2);</span>
<span class="nc" id="L141">                num = 2;</span>
            }
        }

<span class="nc" id="L145">        final float sub = 1.0f/3 * a;</span>

<span class="nc bnc" id="L147" title="All 2 branches missed.">        for (int i = 0; i &lt; num; ++i) {</span>
<span class="nc" id="L148">            pts[ off+i ] -= sub;</span>
        }

<span class="nc" id="L151">        return filterOutNotInAB(pts, off, num, A, B) - off;</span>
    }

    // These use a hardcoded factor of 2 for increasing sizes. Perhaps this
    // should be provided as an argument.
    static float[] widenArray(float[] in, final int cursize, final int numToAdd) {
<span class="nc bnc" id="L157" title="All 2 branches missed.">        if (in.length &gt;= cursize + numToAdd) {</span>
<span class="nc" id="L158">            return in;</span>
        }
<span class="nc" id="L160">        return Arrays.copyOf(in, 2 * (cursize + numToAdd));</span>
    }

    static int[] widenArray(int[] in, final int cursize, final int numToAdd) {
<span class="nc bnc" id="L164" title="All 2 branches missed.">        if (in.length &gt;= cursize + numToAdd) {</span>
<span class="nc" id="L165">            return in;</span>
        }
<span class="nc" id="L167">        return Arrays.copyOf(in, 2 * (cursize + numToAdd));</span>
    }

    static float evalCubic(final float a, final float b,
                           final float c, final float d,
                           final float t)
    {
<span class="nc" id="L174">        return t * (t * (t * a + b) + c) + d;</span>
    }

    static float evalQuad(final float a, final float b,
                          final float c, final float t)
    {
<span class="nc" id="L180">        return t * (t * a + b) + c;</span>
    }

    // returns the index 1 past the last valid element remaining after filtering
    static int filterOutNotInAB(float[] nums, final int off, final int len,
                                final float a, final float b)
    {
<span class="nc" id="L187">        int ret = off;</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">        for (int i = off; i &lt; off + len; i++) {</span>
<span class="nc bnc" id="L189" title="All 4 branches missed.">            if (nums[i] &gt;= a &amp;&amp; nums[i] &lt; b) {</span>
<span class="nc" id="L190">                nums[ret++] = nums[i];</span>
            }
        }
<span class="nc" id="L193">        return ret;</span>
    }

    static float polyLineLength(float[] poly, final int off, final int nCoords) {
<span class="nc bnc" id="L197" title="All 6 branches missed.">        assert nCoords % 2 == 0 &amp;&amp; poly.length &gt;= off + nCoords : &quot;&quot;;</span>
<span class="nc" id="L198">        float acc = 0;</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">        for (int i = off + 2; i &lt; off + nCoords; i += 2) {</span>
<span class="nc" id="L200">            acc += linelen(poly[i], poly[i+1], poly[i-2], poly[i-1]);</span>
        }
<span class="nc" id="L202">        return acc;</span>
    }

    static float linelen(float x1, float y1, float x2, float y2) {
<span class="nc" id="L206">        final float dx = x2 - x1;</span>
<span class="nc" id="L207">        final float dy = y2 - y1;</span>
<span class="nc" id="L208">        return (float)Math.sqrt(dx*dx + dy*dy);</span>
    }

    static void subdivide(float[] src, int srcoff, float[] left, int leftoff,
                          float[] right, int rightoff, int type)
    {
<span class="nc bnc" id="L214" title="All 3 branches missed.">        switch(type) {</span>
        case 6:
<span class="nc" id="L216">            Helpers.subdivideQuad(src, srcoff, left, leftoff, right, rightoff);</span>
<span class="nc" id="L217">            break;</span>
        case 8:
<span class="nc" id="L219">            Helpers.subdivideCubic(src, srcoff, left, leftoff, right, rightoff);</span>
<span class="nc" id="L220">            break;</span>
        default:
<span class="nc" id="L222">            throw new InternalError(&quot;Unsupported curve type&quot;);</span>
        }
<span class="nc" id="L224">    }</span>

    static void isort(float[] a, int off, int len) {
<span class="nc bnc" id="L227" title="All 2 branches missed.">        for (int i = off + 1; i &lt; off + len; i++) {</span>
<span class="nc" id="L228">            float ai = a[i];</span>
<span class="nc" id="L229">            int j = i - 1;</span>
<span class="nc bnc" id="L230" title="All 4 branches missed.">            for (; j &gt;= off &amp;&amp; a[j] &gt; ai; j--) {</span>
<span class="nc" id="L231">                a[j+1] = a[j];</span>
            }
<span class="nc" id="L233">            a[j+1] = ai;</span>
        }
<span class="nc" id="L235">    }</span>

    // Most of these are copied from classes in java.awt.geom because we need
    // float versions of these functions, and Line2D, CubicCurve2D,
    // QuadCurve2D don't provide them.
    /**
     * Subdivides the cubic curve specified by the coordinates
     * stored in the &lt;code&gt;src&lt;/code&gt; array at indices &lt;code&gt;srcoff&lt;/code&gt;
     * through (&lt;code&gt;srcoff&lt;/code&gt;&amp;nbsp;+&amp;nbsp;7) and stores the
     * resulting two subdivided curves into the two result arrays at the
     * corresponding indices.
     * Either or both of the &lt;code&gt;left&lt;/code&gt; and &lt;code&gt;right&lt;/code&gt;
     * arrays may be &lt;code&gt;null&lt;/code&gt; or a reference to the same array
     * as the &lt;code&gt;src&lt;/code&gt; array.
     * Note that the last point in the first subdivided curve is the
     * same as the first point in the second subdivided curve. Thus,
     * it is possible to pass the same array for &lt;code&gt;left&lt;/code&gt;
     * and &lt;code&gt;right&lt;/code&gt; and to use offsets, such as &lt;code&gt;rightoff&lt;/code&gt;
     * equals (&lt;code&gt;leftoff&lt;/code&gt; + 6), in order
     * to avoid allocating extra storage for this common point.
     * @param src the array holding the coordinates for the source curve
     * @param srcoff the offset into the array of the beginning of the
     * the 6 source coordinates
     * @param left the array for storing the coordinates for the first
     * half of the subdivided curve
     * @param leftoff the offset into the array of the beginning of the
     * the 6 left coordinates
     * @param right the array for storing the coordinates for the second
     * half of the subdivided curve
     * @param rightoff the offset into the array of the beginning of the
     * the 6 right coordinates
     * @since 1.7
     */
    static void subdivideCubic(float src[], int srcoff,
                               float left[], int leftoff,
                               float right[], int rightoff)
    {
<span class="nc" id="L272">        float x1 = src[srcoff + 0];</span>
<span class="nc" id="L273">        float y1 = src[srcoff + 1];</span>
<span class="nc" id="L274">        float ctrlx1 = src[srcoff + 2];</span>
<span class="nc" id="L275">        float ctrly1 = src[srcoff + 3];</span>
<span class="nc" id="L276">        float ctrlx2 = src[srcoff + 4];</span>
<span class="nc" id="L277">        float ctrly2 = src[srcoff + 5];</span>
<span class="nc" id="L278">        float x2 = src[srcoff + 6];</span>
<span class="nc" id="L279">        float y2 = src[srcoff + 7];</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L281">            left[leftoff + 0] = x1;</span>
<span class="nc" id="L282">            left[leftoff + 1] = y1;</span>
        }
<span class="nc bnc" id="L284" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L285">            right[rightoff + 6] = x2;</span>
<span class="nc" id="L286">            right[rightoff + 7] = y2;</span>
        }
<span class="nc" id="L288">        x1 = (x1 + ctrlx1) / 2.0f;</span>
<span class="nc" id="L289">        y1 = (y1 + ctrly1) / 2.0f;</span>
<span class="nc" id="L290">        x2 = (x2 + ctrlx2) / 2.0f;</span>
<span class="nc" id="L291">        y2 = (y2 + ctrly2) / 2.0f;</span>
<span class="nc" id="L292">        float centerx = (ctrlx1 + ctrlx2) / 2.0f;</span>
<span class="nc" id="L293">        float centery = (ctrly1 + ctrly2) / 2.0f;</span>
<span class="nc" id="L294">        ctrlx1 = (x1 + centerx) / 2.0f;</span>
<span class="nc" id="L295">        ctrly1 = (y1 + centery) / 2.0f;</span>
<span class="nc" id="L296">        ctrlx2 = (x2 + centerx) / 2.0f;</span>
<span class="nc" id="L297">        ctrly2 = (y2 + centery) / 2.0f;</span>
<span class="nc" id="L298">        centerx = (ctrlx1 + ctrlx2) / 2.0f;</span>
<span class="nc" id="L299">        centery = (ctrly1 + ctrly2) / 2.0f;</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L301">            left[leftoff + 2] = x1;</span>
<span class="nc" id="L302">            left[leftoff + 3] = y1;</span>
<span class="nc" id="L303">            left[leftoff + 4] = ctrlx1;</span>
<span class="nc" id="L304">            left[leftoff + 5] = ctrly1;</span>
<span class="nc" id="L305">            left[leftoff + 6] = centerx;</span>
<span class="nc" id="L306">            left[leftoff + 7] = centery;</span>
        }
<span class="nc bnc" id="L308" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L309">            right[rightoff + 0] = centerx;</span>
<span class="nc" id="L310">            right[rightoff + 1] = centery;</span>
<span class="nc" id="L311">            right[rightoff + 2] = ctrlx2;</span>
<span class="nc" id="L312">            right[rightoff + 3] = ctrly2;</span>
<span class="nc" id="L313">            right[rightoff + 4] = x2;</span>
<span class="nc" id="L314">            right[rightoff + 5] = y2;</span>
        }
<span class="nc" id="L316">    }</span>


    static void subdivideCubicAt(float t, float src[], int srcoff,
                                 float left[], int leftoff,
                                 float right[], int rightoff)
    {
<span class="nc" id="L323">        float x1 = src[srcoff + 0];</span>
<span class="nc" id="L324">        float y1 = src[srcoff + 1];</span>
<span class="nc" id="L325">        float ctrlx1 = src[srcoff + 2];</span>
<span class="nc" id="L326">        float ctrly1 = src[srcoff + 3];</span>
<span class="nc" id="L327">        float ctrlx2 = src[srcoff + 4];</span>
<span class="nc" id="L328">        float ctrly2 = src[srcoff + 5];</span>
<span class="nc" id="L329">        float x2 = src[srcoff + 6];</span>
<span class="nc" id="L330">        float y2 = src[srcoff + 7];</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L332">            left[leftoff + 0] = x1;</span>
<span class="nc" id="L333">            left[leftoff + 1] = y1;</span>
        }
<span class="nc bnc" id="L335" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L336">            right[rightoff + 6] = x2;</span>
<span class="nc" id="L337">            right[rightoff + 7] = y2;</span>
        }
<span class="nc" id="L339">        x1 = x1 + t * (ctrlx1 - x1);</span>
<span class="nc" id="L340">        y1 = y1 + t * (ctrly1 - y1);</span>
<span class="nc" id="L341">        x2 = ctrlx2 + t * (x2 - ctrlx2);</span>
<span class="nc" id="L342">        y2 = ctrly2 + t * (y2 - ctrly2);</span>
<span class="nc" id="L343">        float centerx = ctrlx1 + t * (ctrlx2 - ctrlx1);</span>
<span class="nc" id="L344">        float centery = ctrly1 + t * (ctrly2 - ctrly1);</span>
<span class="nc" id="L345">        ctrlx1 = x1 + t * (centerx - x1);</span>
<span class="nc" id="L346">        ctrly1 = y1 + t * (centery - y1);</span>
<span class="nc" id="L347">        ctrlx2 = centerx + t * (x2 - centerx);</span>
<span class="nc" id="L348">        ctrly2 = centery + t * (y2 - centery);</span>
<span class="nc" id="L349">        centerx = ctrlx1 + t * (ctrlx2 - ctrlx1);</span>
<span class="nc" id="L350">        centery = ctrly1 + t * (ctrly2 - ctrly1);</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L352">            left[leftoff + 2] = x1;</span>
<span class="nc" id="L353">            left[leftoff + 3] = y1;</span>
<span class="nc" id="L354">            left[leftoff + 4] = ctrlx1;</span>
<span class="nc" id="L355">            left[leftoff + 5] = ctrly1;</span>
<span class="nc" id="L356">            left[leftoff + 6] = centerx;</span>
<span class="nc" id="L357">            left[leftoff + 7] = centery;</span>
        }
<span class="nc bnc" id="L359" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L360">            right[rightoff + 0] = centerx;</span>
<span class="nc" id="L361">            right[rightoff + 1] = centery;</span>
<span class="nc" id="L362">            right[rightoff + 2] = ctrlx2;</span>
<span class="nc" id="L363">            right[rightoff + 3] = ctrly2;</span>
<span class="nc" id="L364">            right[rightoff + 4] = x2;</span>
<span class="nc" id="L365">            right[rightoff + 5] = y2;</span>
        }
<span class="nc" id="L367">    }</span>

    static void subdivideQuad(float src[], int srcoff,
                              float left[], int leftoff,
                              float right[], int rightoff)
    {
<span class="nc" id="L373">        float x1 = src[srcoff + 0];</span>
<span class="nc" id="L374">        float y1 = src[srcoff + 1];</span>
<span class="nc" id="L375">        float ctrlx = src[srcoff + 2];</span>
<span class="nc" id="L376">        float ctrly = src[srcoff + 3];</span>
<span class="nc" id="L377">        float x2 = src[srcoff + 4];</span>
<span class="nc" id="L378">        float y2 = src[srcoff + 5];</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L380">            left[leftoff + 0] = x1;</span>
<span class="nc" id="L381">            left[leftoff + 1] = y1;</span>
        }
<span class="nc bnc" id="L383" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L384">            right[rightoff + 4] = x2;</span>
<span class="nc" id="L385">            right[rightoff + 5] = y2;</span>
        }
<span class="nc" id="L387">        x1 = (x1 + ctrlx) / 2.0f;</span>
<span class="nc" id="L388">        y1 = (y1 + ctrly) / 2.0f;</span>
<span class="nc" id="L389">        x2 = (x2 + ctrlx) / 2.0f;</span>
<span class="nc" id="L390">        y2 = (y2 + ctrly) / 2.0f;</span>
<span class="nc" id="L391">        ctrlx = (x1 + x2) / 2.0f;</span>
<span class="nc" id="L392">        ctrly = (y1 + y2) / 2.0f;</span>
<span class="nc bnc" id="L393" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L394">            left[leftoff + 2] = x1;</span>
<span class="nc" id="L395">            left[leftoff + 3] = y1;</span>
<span class="nc" id="L396">            left[leftoff + 4] = ctrlx;</span>
<span class="nc" id="L397">            left[leftoff + 5] = ctrly;</span>
        }
<span class="nc bnc" id="L399" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L400">            right[rightoff + 0] = ctrlx;</span>
<span class="nc" id="L401">            right[rightoff + 1] = ctrly;</span>
<span class="nc" id="L402">            right[rightoff + 2] = x2;</span>
<span class="nc" id="L403">            right[rightoff + 3] = y2;</span>
        }
<span class="nc" id="L405">    }</span>

    static void subdivideQuadAt(float t, float src[], int srcoff,
                                float left[], int leftoff,
                                float right[], int rightoff)
    {
<span class="nc" id="L411">        float x1 = src[srcoff + 0];</span>
<span class="nc" id="L412">        float y1 = src[srcoff + 1];</span>
<span class="nc" id="L413">        float ctrlx = src[srcoff + 2];</span>
<span class="nc" id="L414">        float ctrly = src[srcoff + 3];</span>
<span class="nc" id="L415">        float x2 = src[srcoff + 4];</span>
<span class="nc" id="L416">        float y2 = src[srcoff + 5];</span>
<span class="nc bnc" id="L417" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L418">            left[leftoff + 0] = x1;</span>
<span class="nc" id="L419">            left[leftoff + 1] = y1;</span>
        }
<span class="nc bnc" id="L421" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L422">            right[rightoff + 4] = x2;</span>
<span class="nc" id="L423">            right[rightoff + 5] = y2;</span>
        }
<span class="nc" id="L425">        x1 = x1 + t * (ctrlx - x1);</span>
<span class="nc" id="L426">        y1 = y1 + t * (ctrly - y1);</span>
<span class="nc" id="L427">        x2 = ctrlx + t * (x2 - ctrlx);</span>
<span class="nc" id="L428">        y2 = ctrly + t * (y2 - ctrly);</span>
<span class="nc" id="L429">        ctrlx = x1 + t * (x2 - x1);</span>
<span class="nc" id="L430">        ctrly = y1 + t * (y2 - y1);</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">        if (left != null) {</span>
<span class="nc" id="L432">            left[leftoff + 2] = x1;</span>
<span class="nc" id="L433">            left[leftoff + 3] = y1;</span>
<span class="nc" id="L434">            left[leftoff + 4] = ctrlx;</span>
<span class="nc" id="L435">            left[leftoff + 5] = ctrly;</span>
        }
<span class="nc bnc" id="L437" title="All 2 branches missed.">        if (right != null) {</span>
<span class="nc" id="L438">            right[rightoff + 0] = ctrlx;</span>
<span class="nc" id="L439">            right[rightoff + 1] = ctrly;</span>
<span class="nc" id="L440">            right[rightoff + 2] = x2;</span>
<span class="nc" id="L441">            right[rightoff + 3] = y2;</span>
        }
<span class="nc" id="L443">    }</span>

    static void subdivideAt(float t, float src[], int srcoff,
                            float left[], int leftoff,
                            float right[], int rightoff, int size)
    {
<span class="nc bnc" id="L449" title="All 3 branches missed.">        switch(size) {</span>
        case 8:
<span class="nc" id="L451">            subdivideCubicAt(t, src, srcoff, left, leftoff, right, rightoff);</span>
<span class="nc" id="L452">            break;</span>
        case 6:
<span class="nc" id="L454">            subdivideQuadAt(t, src, srcoff, left, leftoff, right, rightoff);</span>
            break;
        }
<span class="nc" id="L457">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>