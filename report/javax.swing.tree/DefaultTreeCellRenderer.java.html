<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>DefaultTreeCellRenderer.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing.tree</a> &gt; <span class="el_source">DefaultTreeCellRenderer.java</span></div><h1>DefaultTreeCellRenderer.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2006, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.tree;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Insets;
import java.awt.Rectangle;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.FontUIResource;
import javax.swing.plaf.UIResource;
import javax.swing.plaf.basic.BasicGraphicsUtils;
import javax.swing.Icon;
import javax.swing.JLabel;
import javax.swing.JTree;
import javax.swing.LookAndFeel;
import javax.swing.UIManager;
import javax.swing.border.EmptyBorder;
import sun.swing.DefaultLookup;

/**
 * Displays an entry in a tree.
 * &lt;code&gt;DefaultTreeCellRenderer&lt;/code&gt; is not opaque and
 * unless you subclass paint you should not change this.
 * See &lt;a
 href=&quot;http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html&quot;&gt;How to Use Trees&lt;/a&gt;
 * in &lt;em&gt;The Java Tutorial&lt;/em&gt;
 * for examples of customizing node display using this class.
 * &lt;p&gt;
 * The set of icons and colors used by {@code DefaultTreeCellRenderer}
 * can be configured using the various setter methods. The value for
 * each property is initialized from the defaults table. When the
 * look and feel changes ({@code updateUI} is invoked), any properties
 * that have a value of type {@code UIResource} are refreshed from the
 * defaults table. The following table lists the mapping between
 * {@code DefaultTreeCellRenderer} property and defaults table key:
 * &lt;table border=&quot;1&quot; cellpadding=&quot;1&quot; cellspacing=&quot;0&quot; summary=&quot;&quot;&gt;
 *   &lt;tr valign=&quot;top&quot;  align=&quot;left&quot;&gt;
 *     &lt;th style=&quot;background-color:#CCCCFF&quot; align=&quot;left&quot;&gt;Property:
 *     &lt;th style=&quot;background-color:#CCCCFF&quot; align=&quot;left&quot;&gt;Key:
 *   &lt;tr&gt;&lt;td&gt;&quot;leafIcon&quot;&lt;td&gt;&quot;Tree.leafIcon&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;closedIcon&quot;&lt;td&gt;&quot;Tree.closedIcon&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;openIcon&quot;&lt;td&gt;&quot;Tree.openIcon&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;textSelectionColor&quot;&lt;td&gt;&quot;Tree.selectionForeground&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;textNonSelectionColor&quot;&lt;td&gt;&quot;Tree.textForeground&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;backgroundSelectionColor&quot;&lt;td&gt;&quot;Tree.selectionBackground&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;backgroundNonSelectionColor&quot;&lt;td&gt;&quot;Tree.textBackground&quot;
 *   &lt;tr&gt;&lt;td&gt;&quot;borderSelectionColor&quot;&lt;td&gt;&quot;Tree.selectionBorderColor&quot;
 * &lt;/table&gt;
 * &lt;p&gt;
 * &lt;strong&gt;&lt;a name=&quot;override&quot;&gt;Implementation Note:&lt;/a&gt;&lt;/strong&gt;
 * This class overrides
 * &lt;code&gt;invalidate&lt;/code&gt;,
 * &lt;code&gt;validate&lt;/code&gt;,
 * &lt;code&gt;revalidate&lt;/code&gt;,
 * &lt;code&gt;repaint&lt;/code&gt;,
 * and
 * &lt;code&gt;firePropertyChange&lt;/code&gt;
 * solely to improve performance.
 * If not overridden, these frequently called methods would execute code paths
 * that are unnecessary for the default tree cell renderer.
 * If you write your own renderer,
 * take care to weigh the benefits and
 * drawbacks of overriding these methods.
 *
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author Rob Davis
 * @author Ray Ryan
 * @author Scott Violet
 */
public class DefaultTreeCellRenderer extends JLabel implements TreeCellRenderer
{
    /** Last tree the renderer was painted in. */
    private JTree tree;

    /** Is the value currently selected. */
    protected boolean selected;
    /** True if has focus. */
    protected boolean hasFocus;
    /** True if draws focus border around icon as well. */
    private boolean drawsFocusBorderAroundIcon;
    /** If true, a dashed line is drawn as the focus indicator. */
    private boolean drawDashedFocusIndicator;

    // If drawDashedFocusIndicator is true, the following are used.
    /**
     * Background color of the tree.
     */
    private Color treeBGColor;
    /**
     * Color to draw the focus indicator in, determined from the background.
     * color.
     */
    private Color focusBGColor;

    // Icons
    /** Icon used to show non-leaf nodes that aren't expanded. */
    transient protected Icon closedIcon;

    /** Icon used to show leaf nodes. */
    transient protected Icon leafIcon;

    /** Icon used to show non-leaf nodes that are expanded. */
    transient protected Icon openIcon;

    // Colors
    /** Color to use for the foreground for selected nodes. */
    protected Color textSelectionColor;

    /** Color to use for the foreground for non-selected nodes. */
    protected Color textNonSelectionColor;

    /** Color to use for the background when a node is selected. */
    protected Color backgroundSelectionColor;

    /** Color to use for the background when the node isn't selected. */
    protected Color backgroundNonSelectionColor;

    /** Color to use for the focus indicator when the node has focus. */
    protected Color borderSelectionColor;

    private boolean isDropCell;
    private boolean fillBackground;

    /**
     * Set to true after the constructor has run.
     */
    private boolean inited;

    /**
     * Creates a {@code DefaultTreeCellRenderer}. Icons and text color are
     * determined from the {@code UIManager}.
     */
<span class="nc" id="L169">    public DefaultTreeCellRenderer() {</span>
<span class="nc" id="L170">        inited = true;</span>
<span class="nc" id="L171">    }</span>

    /**
     * {@inheritDoc}
     *
     * @since 1.7
     */
    public void updateUI() {
<span class="nc" id="L179">        super.updateUI();</span>
        // To avoid invoking new methods from the constructor, the
        // inited field is first checked. If inited is false, the constructor
        // has not run and there is no point in checking the value. As
        // all look and feels have a non-null value for these properties,
        // a null value means the developer has specifically set it to
        // null. As such, if the value is null, this does not reset the
        // value.
<span class="nc bnc" id="L187" title="All 4 branches missed.">        if (!inited || (getLeafIcon() instanceof UIResource)) {</span>
<span class="nc" id="L188">            setLeafIcon(DefaultLookup.getIcon(this, ui, &quot;Tree.leafIcon&quot;));</span>
        }
<span class="nc bnc" id="L190" title="All 4 branches missed.">        if (!inited || (getClosedIcon() instanceof UIResource)) {</span>
<span class="nc" id="L191">            setClosedIcon(DefaultLookup.getIcon(this, ui, &quot;Tree.closedIcon&quot;));</span>
        }
<span class="nc bnc" id="L193" title="All 4 branches missed.">        if (!inited || (getOpenIcon() instanceof UIManager)) {</span>
<span class="nc" id="L194">            setOpenIcon(DefaultLookup.getIcon(this, ui, &quot;Tree.openIcon&quot;));</span>
        }
<span class="nc bnc" id="L196" title="All 4 branches missed.">        if (!inited || (getTextSelectionColor() instanceof UIResource)) {</span>
<span class="nc" id="L197">            setTextSelectionColor(</span>
<span class="nc" id="L198">                    DefaultLookup.getColor(this, ui, &quot;Tree.selectionForeground&quot;));</span>
        }
<span class="nc bnc" id="L200" title="All 4 branches missed.">        if (!inited || (getTextNonSelectionColor() instanceof UIResource)) {</span>
<span class="nc" id="L201">            setTextNonSelectionColor(</span>
<span class="nc" id="L202">                    DefaultLookup.getColor(this, ui, &quot;Tree.textForeground&quot;));</span>
        }
<span class="nc bnc" id="L204" title="All 4 branches missed.">        if (!inited || (getBackgroundSelectionColor() instanceof UIResource)) {</span>
<span class="nc" id="L205">            setBackgroundSelectionColor(</span>
<span class="nc" id="L206">                    DefaultLookup.getColor(this, ui, &quot;Tree.selectionBackground&quot;));</span>
        }
<span class="nc bnc" id="L208" title="All 2 branches missed.">        if (!inited ||</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">                (getBackgroundNonSelectionColor() instanceof UIResource)) {</span>
<span class="nc" id="L210">            setBackgroundNonSelectionColor(</span>
<span class="nc" id="L211">                    DefaultLookup.getColor(this, ui, &quot;Tree.textBackground&quot;));</span>
        }
<span class="nc bnc" id="L213" title="All 4 branches missed.">        if (!inited || (getBorderSelectionColor() instanceof UIResource)) {</span>
<span class="nc" id="L214">            setBorderSelectionColor(</span>
<span class="nc" id="L215">                    DefaultLookup.getColor(this, ui, &quot;Tree.selectionBorderColor&quot;));</span>
        }
<span class="nc" id="L217">        drawsFocusBorderAroundIcon = DefaultLookup.getBoolean(</span>
                this, ui, &quot;Tree.drawsFocusBorderAroundIcon&quot;, false);
<span class="nc" id="L219">        drawDashedFocusIndicator = DefaultLookup.getBoolean(</span>
                this, ui, &quot;Tree.drawDashedFocusIndicator&quot;, false);

<span class="nc" id="L222">        fillBackground = DefaultLookup.getBoolean(this, ui, &quot;Tree.rendererFillBackground&quot;, true);</span>
<span class="nc" id="L223">        Insets margins = DefaultLookup.getInsets(this, ui, &quot;Tree.rendererMargins&quot;);</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">        if (margins != null) {</span>
<span class="nc" id="L225">            setBorder(new EmptyBorder(margins.top, margins.left,</span>
                    margins.bottom, margins.right));
        }

<span class="nc" id="L229">        setName(&quot;Tree.cellRenderer&quot;);</span>
<span class="nc" id="L230">    }</span>


    /**
      * Returns the default icon, for the current laf, that is used to
      * represent non-leaf nodes that are expanded.
      */
    public Icon getDefaultOpenIcon() {
<span class="nc" id="L238">        return DefaultLookup.getIcon(this, ui, &quot;Tree.openIcon&quot;);</span>
    }

    /**
      * Returns the default icon, for the current laf, that is used to
      * represent non-leaf nodes that are not expanded.
      */
    public Icon getDefaultClosedIcon() {
<span class="nc" id="L246">        return DefaultLookup.getIcon(this, ui, &quot;Tree.closedIcon&quot;);</span>
    }

    /**
      * Returns the default icon, for the current laf, that is used to
      * represent leaf nodes.
      */
    public Icon getDefaultLeafIcon() {
<span class="nc" id="L254">        return DefaultLookup.getIcon(this, ui, &quot;Tree.leafIcon&quot;);</span>
    }

    /**
      * Sets the icon used to represent non-leaf nodes that are expanded.
      */
    public void setOpenIcon(Icon newIcon) {
<span class="nc" id="L261">        openIcon = newIcon;</span>
<span class="nc" id="L262">    }</span>

    /**
      * Returns the icon used to represent non-leaf nodes that are expanded.
      */
    public Icon getOpenIcon() {
<span class="nc" id="L268">        return openIcon;</span>
    }

    /**
      * Sets the icon used to represent non-leaf nodes that are not expanded.
      */
    public void setClosedIcon(Icon newIcon) {
<span class="nc" id="L275">        closedIcon = newIcon;</span>
<span class="nc" id="L276">    }</span>

    /**
      * Returns the icon used to represent non-leaf nodes that are not
      * expanded.
      */
    public Icon getClosedIcon() {
<span class="nc" id="L283">        return closedIcon;</span>
    }

    /**
      * Sets the icon used to represent leaf nodes.
      */
    public void setLeafIcon(Icon newIcon) {
<span class="nc" id="L290">        leafIcon = newIcon;</span>
<span class="nc" id="L291">    }</span>

    /**
      * Returns the icon used to represent leaf nodes.
      */
    public Icon getLeafIcon() {
<span class="nc" id="L297">        return leafIcon;</span>
    }

    /**
      * Sets the color the text is drawn with when the node is selected.
      */
    public void setTextSelectionColor(Color newColor) {
<span class="nc" id="L304">        textSelectionColor = newColor;</span>
<span class="nc" id="L305">    }</span>

    /**
      * Returns the color the text is drawn with when the node is selected.
      */
    public Color getTextSelectionColor() {
<span class="nc" id="L311">        return textSelectionColor;</span>
    }

    /**
      * Sets the color the text is drawn with when the node isn't selected.
      */
    public void setTextNonSelectionColor(Color newColor) {
<span class="nc" id="L318">        textNonSelectionColor = newColor;</span>
<span class="nc" id="L319">    }</span>

    /**
      * Returns the color the text is drawn with when the node isn't selected.
      */
    public Color getTextNonSelectionColor() {
<span class="nc" id="L325">        return textNonSelectionColor;</span>
    }

    /**
      * Sets the color to use for the background if node is selected.
      */
    public void setBackgroundSelectionColor(Color newColor) {
<span class="nc" id="L332">        backgroundSelectionColor = newColor;</span>
<span class="nc" id="L333">    }</span>


    /**
      * Returns the color to use for the background if node is selected.
      */
    public Color getBackgroundSelectionColor() {
<span class="nc" id="L340">        return backgroundSelectionColor;</span>
    }

    /**
      * Sets the background color to be used for non selected nodes.
      */
    public void setBackgroundNonSelectionColor(Color newColor) {
<span class="nc" id="L347">        backgroundNonSelectionColor = newColor;</span>
<span class="nc" id="L348">    }</span>

    /**
      * Returns the background color to be used for non selected nodes.
      */
    public Color getBackgroundNonSelectionColor() {
<span class="nc" id="L354">        return backgroundNonSelectionColor;</span>
    }

    /**
      * Sets the color to use for the border.
      */
    public void setBorderSelectionColor(Color newColor) {
<span class="nc" id="L361">        borderSelectionColor = newColor;</span>
<span class="nc" id="L362">    }</span>

    /**
      * Returns the color the border is drawn.
      */
    public Color getBorderSelectionColor() {
<span class="nc" id="L368">        return borderSelectionColor;</span>
    }

    /**
     * Subclassed to map &lt;code&gt;FontUIResource&lt;/code&gt;s to null. If
     * &lt;code&gt;font&lt;/code&gt; is null, or a &lt;code&gt;FontUIResource&lt;/code&gt;, this
     * has the effect of letting the font of the JTree show
     * through. On the other hand, if &lt;code&gt;font&lt;/code&gt; is non-null, and not
     * a &lt;code&gt;FontUIResource&lt;/code&gt;, the font becomes &lt;code&gt;font&lt;/code&gt;.
     */
    public void setFont(Font font) {
<span class="nc bnc" id="L379" title="All 2 branches missed.">        if(font instanceof FontUIResource)</span>
<span class="nc" id="L380">            font = null;</span>
<span class="nc" id="L381">        super.setFont(font);</span>
<span class="nc" id="L382">    }</span>

    /**
     * Gets the font of this component.
     * @return this component's font; if a font has not been set
     * for this component, the font of its parent is returned
     */
    public Font getFont() {
<span class="nc" id="L390">        Font font = super.getFont();</span>

<span class="nc bnc" id="L392" title="All 4 branches missed.">        if (font == null &amp;&amp; tree != null) {</span>
            // Strive to return a non-null value, otherwise the html support
            // will typically pick up the wrong font in certain situations.
<span class="nc" id="L395">            font = tree.getFont();</span>
        }
<span class="nc" id="L397">        return font;</span>
    }

    /**
     * Subclassed to map &lt;code&gt;ColorUIResource&lt;/code&gt;s to null. If
     * &lt;code&gt;color&lt;/code&gt; is null, or a &lt;code&gt;ColorUIResource&lt;/code&gt;, this
     * has the effect of letting the background color of the JTree show
     * through. On the other hand, if &lt;code&gt;color&lt;/code&gt; is non-null, and not
     * a &lt;code&gt;ColorUIResource&lt;/code&gt;, the background becomes
     * &lt;code&gt;color&lt;/code&gt;.
     */
    public void setBackground(Color color) {
<span class="nc bnc" id="L409" title="All 2 branches missed.">        if(color instanceof ColorUIResource)</span>
<span class="nc" id="L410">            color = null;</span>
<span class="nc" id="L411">        super.setBackground(color);</span>
<span class="nc" id="L412">    }</span>

    /**
      * Configures the renderer based on the passed in components.
      * The value is set from messaging the tree with
      * &lt;code&gt;convertValueToText&lt;/code&gt;, which ultimately invokes
      * &lt;code&gt;toString&lt;/code&gt; on &lt;code&gt;value&lt;/code&gt;.
      * The foreground color is set based on the selection and the icon
      * is set based on the &lt;code&gt;leaf&lt;/code&gt; and &lt;code&gt;expanded&lt;/code&gt;
      * parameters.
      */
    public Component getTreeCellRendererComponent(JTree tree, Object value,
                                                  boolean sel,
                                                  boolean expanded,
                                                  boolean leaf, int row,
                                                  boolean hasFocus) {
<span class="nc" id="L428">        String         stringValue = tree.convertValueToText(value, sel,</span>
                                          expanded, leaf, row, hasFocus);

<span class="nc" id="L431">        this.tree = tree;</span>
<span class="nc" id="L432">        this.hasFocus = hasFocus;</span>
<span class="nc" id="L433">        setText(stringValue);</span>

<span class="nc" id="L435">        Color fg = null;</span>
<span class="nc" id="L436">        isDropCell = false;</span>

<span class="nc" id="L438">        JTree.DropLocation dropLocation = tree.getDropLocation();</span>
<span class="nc bnc" id="L439" title="All 2 branches missed.">        if (dropLocation != null</span>
<span class="nc bnc" id="L440" title="All 2 branches missed.">                &amp;&amp; dropLocation.getChildIndex() == -1</span>
<span class="nc bnc" id="L441" title="All 2 branches missed.">                &amp;&amp; tree.getRowForPath(dropLocation.getPath()) == row) {</span>

<span class="nc" id="L443">            Color col = DefaultLookup.getColor(this, ui, &quot;Tree.dropCellForeground&quot;);</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">            if (col != null) {</span>
<span class="nc" id="L445">                fg = col;</span>
            } else {
<span class="nc" id="L447">                fg = getTextSelectionColor();</span>
            }

<span class="nc" id="L450">            isDropCell = true;</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">        } else if (sel) {</span>
<span class="nc" id="L452">            fg = getTextSelectionColor();</span>
        } else {
<span class="nc" id="L454">            fg = getTextNonSelectionColor();</span>
        }

<span class="nc" id="L457">        setForeground(fg);</span>

<span class="nc" id="L459">        Icon icon = null;</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">        if (leaf) {</span>
<span class="nc" id="L461">            icon = getLeafIcon();</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">        } else if (expanded) {</span>
<span class="nc" id="L463">            icon = getOpenIcon();</span>
        } else {
<span class="nc" id="L465">            icon = getClosedIcon();</span>
        }

<span class="nc bnc" id="L468" title="All 2 branches missed.">        if (!tree.isEnabled()) {</span>
<span class="nc" id="L469">            setEnabled(false);</span>
<span class="nc" id="L470">            LookAndFeel laf = UIManager.getLookAndFeel();</span>
<span class="nc" id="L471">            Icon disabledIcon = laf.getDisabledIcon(tree, icon);</span>
<span class="nc bnc" id="L472" title="All 2 branches missed.">            if (disabledIcon != null) icon = disabledIcon;</span>
<span class="nc" id="L473">            setDisabledIcon(icon);</span>
<span class="nc" id="L474">        } else {</span>
<span class="nc" id="L475">            setEnabled(true);</span>
<span class="nc" id="L476">            setIcon(icon);</span>
        }
<span class="nc" id="L478">        setComponentOrientation(tree.getComponentOrientation());</span>

<span class="nc" id="L480">        selected = sel;</span>

<span class="nc" id="L482">        return this;</span>
    }

    /**
      * Paints the value.  The background is filled based on selected.
      */
    public void paint(Graphics g) {
        Color bColor;

<span class="nc bnc" id="L491" title="All 2 branches missed.">        if (isDropCell) {</span>
<span class="nc" id="L492">            bColor = DefaultLookup.getColor(this, ui, &quot;Tree.dropCellBackground&quot;);</span>
<span class="nc bnc" id="L493" title="All 2 branches missed.">            if (bColor == null) {</span>
<span class="nc" id="L494">                bColor = getBackgroundSelectionColor();</span>
            }
<span class="nc bnc" id="L496" title="All 2 branches missed.">        } else if (selected) {</span>
<span class="nc" id="L497">            bColor = getBackgroundSelectionColor();</span>
        } else {
<span class="nc" id="L499">            bColor = getBackgroundNonSelectionColor();</span>
<span class="nc bnc" id="L500" title="All 2 branches missed.">            if (bColor == null) {</span>
<span class="nc" id="L501">                bColor = getBackground();</span>
            }
        }

<span class="nc" id="L505">        int imageOffset = -1;</span>
<span class="nc bnc" id="L506" title="All 4 branches missed.">        if (bColor != null &amp;&amp; fillBackground) {</span>
<span class="nc" id="L507">            imageOffset = getLabelStart();</span>
<span class="nc" id="L508">            g.setColor(bColor);</span>
<span class="nc bnc" id="L509" title="All 2 branches missed.">            if(getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L510">                g.fillRect(imageOffset, 0, getWidth() - imageOffset,</span>
<span class="nc" id="L511">                           getHeight());</span>
            } else {
<span class="nc" id="L513">                g.fillRect(0, 0, getWidth() - imageOffset,</span>
<span class="nc" id="L514">                           getHeight());</span>
            }
        }

<span class="nc bnc" id="L518" title="All 2 branches missed.">        if (hasFocus) {</span>
<span class="nc bnc" id="L519" title="All 2 branches missed.">            if (drawsFocusBorderAroundIcon) {</span>
<span class="nc" id="L520">                imageOffset = 0;</span>
            }
<span class="nc bnc" id="L522" title="All 2 branches missed.">            else if (imageOffset == -1) {</span>
<span class="nc" id="L523">                imageOffset = getLabelStart();</span>
            }
<span class="nc bnc" id="L525" title="All 2 branches missed.">            if(getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L526">                paintFocus(g, imageOffset, 0, getWidth() - imageOffset,</span>
<span class="nc" id="L527">                           getHeight(), bColor);</span>
            } else {
<span class="nc" id="L529">                paintFocus(g, 0, 0, getWidth() - imageOffset, getHeight(), bColor);</span>
            }
        }
<span class="nc" id="L532">        super.paint(g);</span>
<span class="nc" id="L533">    }</span>

    private void paintFocus(Graphics g, int x, int y, int w, int h, Color notColor) {
<span class="nc" id="L536">        Color       bsColor = getBorderSelectionColor();</span>

<span class="nc bnc" id="L538" title="All 6 branches missed.">        if (bsColor != null &amp;&amp; (selected || !drawDashedFocusIndicator)) {</span>
<span class="nc" id="L539">            g.setColor(bsColor);</span>
<span class="nc" id="L540">            g.drawRect(x, y, w - 1, h - 1);</span>
        }
<span class="nc bnc" id="L542" title="All 4 branches missed.">        if (drawDashedFocusIndicator &amp;&amp; notColor != null) {</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">            if (treeBGColor != notColor) {</span>
<span class="nc" id="L544">                treeBGColor = notColor;</span>
<span class="nc" id="L545">                focusBGColor = new Color(~notColor.getRGB());</span>
            }
<span class="nc" id="L547">            g.setColor(focusBGColor);</span>
<span class="nc" id="L548">            BasicGraphicsUtils.drawDashedRect(g, x, y, w, h);</span>
        }
<span class="nc" id="L550">    }</span>

    private int getLabelStart() {
<span class="nc" id="L553">        Icon currentI = getIcon();</span>
<span class="nc bnc" id="L554" title="All 4 branches missed.">        if(currentI != null &amp;&amp; getText() != null) {</span>
<span class="nc" id="L555">            return currentI.getIconWidth() + Math.max(0, getIconTextGap() - 1);</span>
        }
<span class="nc" id="L557">        return 0;</span>
    }

    /**
     * Overrides &lt;code&gt;JComponent.getPreferredSize&lt;/code&gt; to
     * return slightly wider preferred size value.
     */
    public Dimension getPreferredSize() {
<span class="nc" id="L565">        Dimension        retDimension = super.getPreferredSize();</span>

<span class="nc bnc" id="L567" title="All 2 branches missed.">        if(retDimension != null)</span>
<span class="nc" id="L568">            retDimension = new Dimension(retDimension.width + 3,</span>
                                         retDimension.height);
<span class="nc" id="L570">        return retDimension;</span>
    }

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L578">    public void validate() {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    *
    * @since 1.5
    */
<span class="nc" id="L587">    public void invalidate() {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L594">    public void revalidate() {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L601">    public void repaint(long tm, int x, int y, int width, int height) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L608">    public void repaint(Rectangle r) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    *
    * @since 1.5
    */
<span class="nc" id="L617">    public void repaint() {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
    protected void firePropertyChange(String propertyName, Object oldValue, Object newValue) {
        // Strings get interned...
<span class="nc bnc" id="L626" title="All 8 branches missed.">        if (propertyName == &quot;text&quot;</span>
                || ((propertyName == &quot;font&quot; || propertyName == &quot;foreground&quot;)
                    &amp;&amp; oldValue != newValue
<span class="nc bnc" id="L629" title="All 2 branches missed.">                    &amp;&amp; getClientProperty(javax.swing.plaf.basic.BasicHTML.propertyKey) != null)) {</span>

<span class="nc" id="L631">            super.firePropertyChange(propertyName, oldValue, newValue);</span>
        }
<span class="nc" id="L633">    }</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L640">    public void firePropertyChange(String propertyName, byte oldValue, byte newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L647">    public void firePropertyChange(String propertyName, char oldValue, char newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L654">    public void firePropertyChange(String propertyName, short oldValue, short newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L661">    public void firePropertyChange(String propertyName, int oldValue, int newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L668">    public void firePropertyChange(String propertyName, long oldValue, long newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L675">    public void firePropertyChange(String propertyName, float oldValue, float newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L682">    public void firePropertyChange(String propertyName, double oldValue, double newValue) {}</span>

   /**
    * Overridden for performance reasons.
    * See the &lt;a href=&quot;#override&quot;&gt;Implementation Note&lt;/a&gt;
    * for more information.
    */
<span class="nc" id="L689">    public void firePropertyChange(String propertyName, boolean oldValue, boolean newValue) {}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>