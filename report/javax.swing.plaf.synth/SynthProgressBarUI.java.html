<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SynthProgressBarUI.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.plaf.synth</a> &gt; <span class="el_source">SynthProgressBarUI.java</span></div><h1>SynthProgressBarUI.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2002, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.plaf.synth;

import java.awt.*;
import java.awt.geom.AffineTransform;
import javax.swing.*;
import javax.swing.plaf.*;
import javax.swing.plaf.basic.BasicProgressBarUI;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeEvent;
import sun.swing.SwingUtilities2;

/**
 * Provides the Synth L&amp;amp;F UI delegate for
 * {@link javax.swing.JProgressBar}.
 *
 * @author Joshua Outwater
 * @since 1.7
 */
<span class="nc" id="L44">public class SynthProgressBarUI extends BasicProgressBarUI</span>
                                implements SynthUI, PropertyChangeListener {
    private SynthStyle style;
    private int progressPadding;
    private boolean rotateText; // added for Nimbus LAF
    private boolean paintOutsideClip;
    private boolean tileWhenIndeterminate; //whether to tile indeterminate painting
    private int tileWidth; //the width of each tile

    /**
     * Creates a new UI object for the given component.
     *
     * @param x component to create UI object for
     * @return the UI object
     */
    public static ComponentUI createUI(JComponent x) {
<span class="nc" id="L60">        return new SynthProgressBarUI();</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void installListeners() {
<span class="nc" id="L68">        super.installListeners();</span>
<span class="nc" id="L69">        progressBar.addPropertyChangeListener(this);</span>
<span class="nc" id="L70">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void uninstallListeners() {
<span class="nc" id="L77">        super.uninstallListeners();</span>
<span class="nc" id="L78">        progressBar.removePropertyChangeListener(this);</span>
<span class="nc" id="L79">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void installDefaults() {
<span class="nc" id="L86">        updateStyle(progressBar);</span>
<span class="nc" id="L87">    }</span>

    private void updateStyle(JProgressBar c) {
<span class="nc" id="L90">        SynthContext context = getContext(c, ENABLED);</span>
<span class="nc" id="L91">        SynthStyle oldStyle = style;</span>
<span class="nc" id="L92">        style = SynthLookAndFeel.updateStyle(context, this);</span>
<span class="nc" id="L93">        setCellLength(style.getInt(context, &quot;ProgressBar.cellLength&quot;, 1));</span>
<span class="nc" id="L94">        setCellSpacing(style.getInt(context, &quot;ProgressBar.cellSpacing&quot;, 0));</span>
<span class="nc" id="L95">        progressPadding = style.getInt(context,</span>
                &quot;ProgressBar.progressPadding&quot;, 0);
<span class="nc" id="L97">        paintOutsideClip = style.getBoolean(context,</span>
                &quot;ProgressBar.paintOutsideClip&quot;, false);
<span class="nc" id="L99">        rotateText = style.getBoolean(context,</span>
                &quot;ProgressBar.rotateText&quot;, false);
<span class="nc" id="L101">        tileWhenIndeterminate = style.getBoolean(context, &quot;ProgressBar.tileWhenIndeterminate&quot;, false);</span>
<span class="nc" id="L102">        tileWidth = style.getInt(context, &quot;ProgressBar.tileWidth&quot;, 15);</span>
        // handle scaling for sizeVarients for special case components. The
        // key &quot;JComponent.sizeVariant&quot; scales for large/small/mini
        // components are based on Apples LAF
<span class="nc" id="L106">        String scaleKey = (String)progressBar.getClientProperty(</span>
                &quot;JComponent.sizeVariant&quot;);
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if (scaleKey != null){</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            if (&quot;large&quot;.equals(scaleKey)){</span>
<span class="nc" id="L110">                tileWidth *= 1.15;</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">            } else if (&quot;small&quot;.equals(scaleKey)){</span>
<span class="nc" id="L112">                tileWidth *= 0.857;</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">            } else if (&quot;mini&quot;.equals(scaleKey)){</span>
<span class="nc" id="L114">                tileWidth *= 0.784;</span>
            }
        }
<span class="nc" id="L117">        context.dispose();</span>
<span class="nc" id="L118">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void uninstallDefaults() {
<span class="nc" id="L125">        SynthContext context = getContext(progressBar, ENABLED);</span>

<span class="nc" id="L127">        style.uninstallDefaults(context);</span>
<span class="nc" id="L128">        context.dispose();</span>
<span class="nc" id="L129">        style = null;</span>
<span class="nc" id="L130">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public SynthContext getContext(JComponent c) {
<span class="nc" id="L137">        return getContext(c, getComponentState(c));</span>
    }

    private SynthContext getContext(JComponent c, int state) {
<span class="nc" id="L141">        return SynthContext.getContext(SynthContext.class, c,</span>
<span class="nc" id="L142">                            SynthLookAndFeel.getRegion(c), style, state);</span>
    }

    private int getComponentState(JComponent c) {
<span class="nc" id="L146">        return SynthLookAndFeel.getComponentState(c);</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public int getBaseline(JComponent c, int width, int height) {
<span class="nc" id="L154">        super.getBaseline(c, width, height);</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">        if (progressBar.isStringPainted() &amp;&amp;</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">                progressBar.getOrientation() == JProgressBar.HORIZONTAL) {</span>
<span class="nc" id="L157">            SynthContext context = getContext(c);</span>
<span class="nc" id="L158">            Font font = context.getStyle().getFont(context);</span>
<span class="nc" id="L159">            FontMetrics metrics = progressBar.getFontMetrics(font);</span>
<span class="nc" id="L160">            context.dispose();</span>
<span class="nc" id="L161">            return (height - metrics.getAscent() - metrics.getDescent()) / 2 +</span>
<span class="nc" id="L162">                    metrics.getAscent();</span>
        }
<span class="nc" id="L164">        return -1;</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected Rectangle getBox(Rectangle r) {
<span class="nc bnc" id="L172" title="All 2 branches missed.">        if (tileWhenIndeterminate) {</span>
<span class="nc" id="L173">            return SwingUtilities.calculateInnerArea(progressBar, r);</span>
        } else {
<span class="nc" id="L175">            return super.getBox(r);</span>
        }
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void setAnimationIndex(int newValue) {
<span class="nc bnc" id="L184" title="All 2 branches missed.">        if (paintOutsideClip) {</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">            if (getAnimationIndex() == newValue) {</span>
<span class="nc" id="L186">                return;</span>
            }
<span class="nc" id="L188">            super.setAnimationIndex(newValue);</span>
<span class="nc" id="L189">            progressBar.repaint();</span>
        } else {
<span class="nc" id="L191">            super.setAnimationIndex(newValue);</span>
        }
<span class="nc" id="L193">    }</span>

    /**
     * Notifies this UI delegate to repaint the specified component.
     * This method paints the component background, then calls
     * the {@link #paint(SynthContext,Graphics)} method.
     *
     * &lt;p&gt;In general, this method does not need to be overridden by subclasses.
     * All Look and Feel rendering code should reside in the {@code paint} method.
     *
     * @param g the {@code Graphics} object used for painting
     * @param c the component being painted
     * @see #paint(SynthContext,Graphics)
     */
    @Override
    public void update(Graphics g, JComponent c) {
<span class="nc" id="L209">        SynthContext context = getContext(c);</span>

<span class="nc" id="L211">        SynthLookAndFeel.update(context, g);</span>
<span class="nc" id="L212">        context.getPainter().paintProgressBarBackground(context,</span>
<span class="nc" id="L213">                          g, 0, 0, c.getWidth(), c.getHeight(),</span>
<span class="nc" id="L214">                          progressBar.getOrientation());</span>
<span class="nc" id="L215">        paint(context, g);</span>
<span class="nc" id="L216">        context.dispose();</span>
<span class="nc" id="L217">    }</span>

    /**
     * Paints the specified component according to the Look and Feel.
     * &lt;p&gt;This method is not used by Synth Look and Feel.
     * Painting is handled by the {@link #paint(SynthContext,Graphics)} method.
     *
     * @param g the {@code Graphics} object used for painting
     * @param c the component being painted
     * @see #paint(SynthContext,Graphics)
     */
    @Override
    public void paint(Graphics g, JComponent c) {
<span class="nc" id="L230">        SynthContext context = getContext(c);</span>

<span class="nc" id="L232">        paint(context, g);</span>
<span class="nc" id="L233">        context.dispose();</span>
<span class="nc" id="L234">    }</span>

    /**
     * Paints the specified component.
     *
     * @param context context for the component being painted
     * @param g the {@code Graphics} object used for painting
     * @see #update(Graphics,JComponent)
     */
    protected void paint(SynthContext context, Graphics g) {
<span class="nc" id="L244">        JProgressBar pBar = (JProgressBar)context.getComponent();</span>
<span class="nc" id="L245">        int x = 0, y = 0, width = 0, height = 0;</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">        if (!pBar.isIndeterminate()) {</span>
<span class="nc" id="L247">            Insets pBarInsets = pBar.getInsets();</span>
<span class="nc" id="L248">            double percentComplete = pBar.getPercentComplete();</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">            if (percentComplete != 0.0) {</span>
<span class="nc bnc" id="L250" title="All 2 branches missed.">                if (pBar.getOrientation() == JProgressBar.HORIZONTAL) {</span>
<span class="nc" id="L251">                    x = pBarInsets.left + progressPadding;</span>
<span class="nc" id="L252">                    y = pBarInsets.top + progressPadding;</span>
<span class="nc" id="L253">                    width = (int)(percentComplete * (pBar.getWidth()</span>
                            - (pBarInsets.left + progressPadding
                             + pBarInsets.right + progressPadding)));
<span class="nc" id="L256">                    height = pBar.getHeight()</span>
                            - (pBarInsets.top + progressPadding
                             + pBarInsets.bottom + progressPadding);

<span class="nc bnc" id="L260" title="All 2 branches missed.">                    if (!SynthLookAndFeel.isLeftToRight(pBar)) {</span>
<span class="nc" id="L261">                        x = pBar.getWidth() - pBarInsets.right - width</span>
                                - progressPadding;
                    }
                } else {  // JProgressBar.VERTICAL
<span class="nc" id="L265">                    x = pBarInsets.left + progressPadding;</span>
<span class="nc" id="L266">                    width = pBar.getWidth()</span>
                            - (pBarInsets.left + progressPadding
                            + pBarInsets.right + progressPadding);
<span class="nc" id="L269">                    height = (int)(percentComplete * (pBar.getHeight()</span>
                            - (pBarInsets.top + progressPadding
                             + pBarInsets.bottom + progressPadding)));
<span class="nc" id="L272">                    y = pBar.getHeight() - pBarInsets.bottom - height</span>
                            - progressPadding;

                    // When the progress bar is vertical we always paint
                    // from bottom to top, not matter what the component
                    // orientation is.
                }
            }
<span class="nc" id="L280">        } else {</span>
<span class="nc" id="L281">            boxRect = getBox(boxRect);</span>
<span class="nc" id="L282">            x = boxRect.x + progressPadding;</span>
<span class="nc" id="L283">            y = boxRect.y + progressPadding;</span>
<span class="nc" id="L284">            width = boxRect.width - progressPadding - progressPadding;</span>
<span class="nc" id="L285">            height = boxRect.height - progressPadding - progressPadding;</span>
        }

        //if tiling and indeterminate, then paint the progress bar foreground a
        //bit wider than it should be. Shift as needed to ensure that there is
        //an animated effect
<span class="nc bnc" id="L291" title="All 4 branches missed.">        if (tileWhenIndeterminate &amp;&amp; pBar.isIndeterminate()) {</span>
<span class="nc" id="L292">            double percentComplete = (double)getAnimationIndex() / (double)getFrameCount();</span>
<span class="nc" id="L293">            int offset = (int)(percentComplete * tileWidth);</span>
<span class="nc" id="L294">            Shape clip = g.getClip();</span>
<span class="nc" id="L295">            g.clipRect(x, y, width, height);</span>
<span class="nc bnc" id="L296" title="All 2 branches missed.">            if (pBar.getOrientation() == JProgressBar.HORIZONTAL) {</span>
                //paint each tile horizontally
<span class="nc bnc" id="L298" title="All 2 branches missed.">                for (int i=x-tileWidth+offset; i&lt;=width; i+=tileWidth) {</span>
<span class="nc" id="L299">                    context.getPainter().paintProgressBarForeground(</span>
<span class="nc" id="L300">                            context, g, i, y, tileWidth, height, pBar.getOrientation());</span>
                }
            } else { //JProgressBar.VERTICAL
                //paint each tile vertically
<span class="nc bnc" id="L304" title="All 2 branches missed.">                for (int i=y-offset; i&lt;height+tileWidth; i+=tileWidth) {</span>
<span class="nc" id="L305">                    context.getPainter().paintProgressBarForeground(</span>
<span class="nc" id="L306">                            context, g, x, i, width, tileWidth, pBar.getOrientation());</span>
                }
            }
<span class="nc" id="L309">            g.setClip(clip);</span>
<span class="nc" id="L310">        } else {</span>
<span class="nc" id="L311">            context.getPainter().paintProgressBarForeground(context, g,</span>
<span class="nc" id="L312">                    x, y, width, height, pBar.getOrientation());</span>
        }

<span class="nc bnc" id="L315" title="All 2 branches missed.">        if (pBar.isStringPainted()) {</span>
<span class="nc" id="L316">            paintText(context, g, pBar.getString());</span>
        }
<span class="nc" id="L318">    }</span>

    /**
     * Paints the component's text.
     *
     * @param context context for the component being painted
     * @param g {@code Graphics} object used for painting
     * @param title the text to paint
     */
    protected void paintText(SynthContext context, Graphics g, String title) {
<span class="nc bnc" id="L328" title="All 2 branches missed.">        if (progressBar.isStringPainted()) {</span>
<span class="nc" id="L329">            SynthStyle style = context.getStyle();</span>
<span class="nc" id="L330">            Font font = style.getFont(context);</span>
<span class="nc" id="L331">            FontMetrics fm = SwingUtilities2.getFontMetrics(</span>
                    progressBar, g, font);
<span class="nc" id="L333">            int strLength = style.getGraphicsUtils(context).</span>
<span class="nc" id="L334">                computeStringWidth(context, font, fm, title);</span>
<span class="nc" id="L335">            Rectangle bounds = progressBar.getBounds();</span>

<span class="nc bnc" id="L337" title="All 2 branches missed.">            if (rotateText &amp;&amp;</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">                    progressBar.getOrientation() == JProgressBar.VERTICAL){</span>
<span class="nc" id="L339">                Graphics2D g2 = (Graphics2D)g;</span>
                // Calculate the position for the text.
                Point textPos;
                AffineTransform rotation;
<span class="nc bnc" id="L343" title="All 2 branches missed.">                if (progressBar.getComponentOrientation().isLeftToRight()){</span>
<span class="nc" id="L344">                    rotation = AffineTransform.getRotateInstance(-Math.PI/2);</span>
<span class="nc" id="L345">                    textPos = new Point(</span>
<span class="nc" id="L346">                        (bounds.width+fm.getAscent()-fm.getDescent())/2,</span>
                           (bounds.height+strLength)/2);
                } else {
<span class="nc" id="L349">                    rotation = AffineTransform.getRotateInstance(Math.PI/2);</span>
<span class="nc" id="L350">                    textPos = new Point(</span>
<span class="nc" id="L351">                        (bounds.width-fm.getAscent()+fm.getDescent())/2,</span>
                           (bounds.height-strLength)/2);
                }

                // Progress bar isn't wide enough for the font.  Don't paint it.
<span class="nc bnc" id="L356" title="All 2 branches missed.">                if (textPos.x &lt; 0) {</span>
<span class="nc" id="L357">                    return;</span>
                }

                // Paint the text.
<span class="nc" id="L361">                font = font.deriveFont(rotation);</span>
<span class="nc" id="L362">                g2.setFont(font);</span>
<span class="nc" id="L363">                g2.setColor(style.getColor(context, ColorType.TEXT_FOREGROUND));</span>
<span class="nc" id="L364">                style.getGraphicsUtils(context).paintText(context, g, title,</span>
                                                     textPos.x, textPos.y, -1);
<span class="nc" id="L366">            } else {</span>
                // Calculate the bounds for the text.
<span class="nc" id="L368">                Rectangle textRect = new Rectangle(</span>
                    (bounds.width / 2) - (strLength / 2),
                    (bounds.height -
<span class="nc" id="L371">                        (fm.getAscent() + fm.getDescent())) / 2,</span>
                    0, 0);

                // Progress bar isn't tall enough for the font.  Don't paint it.
<span class="nc bnc" id="L375" title="All 2 branches missed.">                if (textRect.y &lt; 0) {</span>
<span class="nc" id="L376">                    return;</span>
                }

                // Paint the text.
<span class="nc" id="L380">                g.setColor(style.getColor(context, ColorType.TEXT_FOREGROUND));</span>
<span class="nc" id="L381">                g.setFont(font);</span>
<span class="nc" id="L382">                style.getGraphicsUtils(context).paintText(context, g, title,</span>
                                                     textRect.x, textRect.y, -1);
            }
        }
<span class="nc" id="L386">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public void paintBorder(SynthContext context, Graphics g, int x,
                            int y, int w, int h) {
<span class="nc" id="L394">        context.getPainter().paintProgressBarBorder(context, g, x, y, w, h,</span>
<span class="nc" id="L395">                                                    progressBar.getOrientation());</span>
<span class="nc" id="L396">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public void propertyChange(PropertyChangeEvent e) {
<span class="nc bnc" id="L403" title="All 2 branches missed.">        if (SynthLookAndFeel.shouldUpdateStyle(e) ||</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">                &quot;indeterminate&quot;.equals(e.getPropertyName())) {</span>
<span class="nc" id="L405">            updateStyle((JProgressBar)e.getSource());</span>
        }
<span class="nc" id="L407">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public Dimension getPreferredSize(JComponent c) {
<span class="nc" id="L414">        Dimension size = null;</span>
<span class="nc" id="L415">        Insets border = progressBar.getInsets();</span>
<span class="nc" id="L416">        FontMetrics fontSizer = progressBar.getFontMetrics(progressBar.getFont());</span>
<span class="nc" id="L417">        String progString = progressBar.getString();</span>
<span class="nc" id="L418">        int stringHeight = fontSizer.getHeight() + fontSizer.getDescent();</span>

<span class="nc bnc" id="L420" title="All 2 branches missed.">        if (progressBar.getOrientation() == JProgressBar.HORIZONTAL) {</span>
<span class="nc" id="L421">            size = new Dimension(getPreferredInnerHorizontal());</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">            if (progressBar.isStringPainted()) {</span>
                // adjust the height if necessary to make room for the string
<span class="nc bnc" id="L424" title="All 2 branches missed.">                if (stringHeight &gt; size.height) {</span>
<span class="nc" id="L425">                    size.height = stringHeight;</span>
                }

                // adjust the width if necessary to make room for the string
<span class="nc" id="L429">                int stringWidth = SwingUtilities2.stringWidth(</span>
                                       progressBar, fontSizer, progString);
<span class="nc bnc" id="L431" title="All 2 branches missed.">                if (stringWidth &gt; size.width) {</span>
<span class="nc" id="L432">                    size.width = stringWidth;</span>
                }
<span class="nc" id="L434">            }</span>
        } else {
<span class="nc" id="L436">            size = new Dimension(getPreferredInnerVertical());</span>
<span class="nc bnc" id="L437" title="All 2 branches missed.">            if (progressBar.isStringPainted()) {</span>
                // make sure the width is big enough for the string
<span class="nc bnc" id="L439" title="All 2 branches missed.">                if (stringHeight &gt; size.width) {</span>
<span class="nc" id="L440">                    size.width = stringHeight;</span>
                }

                // make sure the height is big enough for the string
<span class="nc" id="L444">                int stringWidth = SwingUtilities2.stringWidth(</span>
                                       progressBar, fontSizer, progString);
<span class="nc bnc" id="L446" title="All 2 branches missed.">                if (stringWidth &gt; size.height) {</span>
<span class="nc" id="L447">                    size.height = stringWidth;</span>
                }
            }
        }

        // handle scaling for sizeVarients for special case components. The
        // key &quot;JComponent.sizeVariant&quot; scales for large/small/mini
        // components are based on Apples LAF
<span class="nc" id="L455">        String scaleKey = (String)progressBar.getClientProperty(</span>
                &quot;JComponent.sizeVariant&quot;);
<span class="nc bnc" id="L457" title="All 2 branches missed.">        if (scaleKey != null){</span>
<span class="nc bnc" id="L458" title="All 2 branches missed.">            if (&quot;large&quot;.equals(scaleKey)){</span>
<span class="nc" id="L459">                size.width *= 1.15f;</span>
<span class="nc" id="L460">                size.height *= 1.15f;</span>
<span class="nc bnc" id="L461" title="All 2 branches missed.">            } else if (&quot;small&quot;.equals(scaleKey)){</span>
<span class="nc" id="L462">                size.width *= 0.90f;</span>
<span class="nc" id="L463">                size.height *= 0.90f;</span>
<span class="nc bnc" id="L464" title="All 2 branches missed.">            } else if (&quot;mini&quot;.equals(scaleKey)){</span>
<span class="nc" id="L465">                size.width *= 0.784f;</span>
<span class="nc" id="L466">                size.height *= 0.784f;</span>
            }
        }

<span class="nc" id="L470">        size.width += border.left + border.right;</span>
<span class="nc" id="L471">        size.height += border.top + border.bottom;</span>

<span class="nc" id="L473">        return size;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>