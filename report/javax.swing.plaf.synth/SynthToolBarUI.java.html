<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>SynthToolBarUI.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.plaf.synth</a> &gt; <span class="el_source">SynthToolBarUI.java</span></div><h1>SynthToolBarUI.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2002, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.plaf.synth;

import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Insets;
import java.awt.LayoutManager;
import java.awt.Rectangle;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.Box;
import javax.swing.Icon;
import javax.swing.JComponent;
import javax.swing.JSeparator;
import javax.swing.JToolBar;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.basic.BasicToolBarUI;
import sun.swing.plaf.synth.SynthIcon;

/**
 * Provides the Synth L&amp;amp;F UI delegate for
 * {@link javax.swing.JToolBar}.
 *
 * @since 1.7
 */
<span class="nc" id="L52">public class SynthToolBarUI extends BasicToolBarUI</span>
                            implements PropertyChangeListener, SynthUI {
<span class="nc" id="L54">    private Icon handleIcon = null;</span>
<span class="nc" id="L55">    private Rectangle contentRect = new Rectangle();</span>

    private SynthStyle style;
    private SynthStyle contentStyle;
    private SynthStyle dragWindowStyle;

    /**
     * Creates a new UI object for the given component.
     *
     * @param c component to create UI object for
     * @return the UI object
     */
    public static ComponentUI createUI(JComponent c) {
<span class="nc" id="L68">        return new SynthToolBarUI();</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void installDefaults() {
<span class="nc" id="L76">        toolBar.setLayout(createLayout());</span>
<span class="nc" id="L77">        updateStyle(toolBar);</span>
<span class="nc" id="L78">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void installListeners() {
<span class="nc" id="L85">        super.installListeners();</span>
<span class="nc" id="L86">        toolBar.addPropertyChangeListener(this);</span>
<span class="nc" id="L87">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void uninstallListeners() {
<span class="nc" id="L94">        super.uninstallListeners();</span>
<span class="nc" id="L95">        toolBar.removePropertyChangeListener(this);</span>
<span class="nc" id="L96">    }</span>

    private void updateStyle(JToolBar c) {
<span class="nc" id="L99">        SynthContext context = getContext(</span>
                c, Region.TOOL_BAR_CONTENT, null, ENABLED);
<span class="nc" id="L101">        contentStyle = SynthLookAndFeel.updateStyle(context, this);</span>
<span class="nc" id="L102">        context.dispose();</span>

<span class="nc" id="L104">        context = getContext(c, Region.TOOL_BAR_DRAG_WINDOW, null, ENABLED);</span>
<span class="nc" id="L105">        dragWindowStyle = SynthLookAndFeel.updateStyle(context, this);</span>
<span class="nc" id="L106">        context.dispose();</span>

<span class="nc" id="L108">        context = getContext(c, ENABLED);</span>
<span class="nc" id="L109">        SynthStyle oldStyle = style;</span>

<span class="nc" id="L111">        style = SynthLookAndFeel.updateStyle(context, this);</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if (oldStyle != style) {</span>
<span class="nc" id="L113">            handleIcon =</span>
<span class="nc" id="L114">                style.getIcon(context, &quot;ToolBar.handleIcon&quot;);</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">            if (oldStyle != null) {</span>
<span class="nc" id="L116">                uninstallKeyboardActions();</span>
<span class="nc" id="L117">                installKeyboardActions();</span>
            }
        }
<span class="nc" id="L120">        context.dispose();</span>
<span class="nc" id="L121">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void uninstallDefaults() {
<span class="nc" id="L128">        SynthContext context = getContext(toolBar, ENABLED);</span>

<span class="nc" id="L130">        style.uninstallDefaults(context);</span>
<span class="nc" id="L131">        context.dispose();</span>
<span class="nc" id="L132">        style = null;</span>

<span class="nc" id="L134">        handleIcon = null;</span>

<span class="nc" id="L136">        context = getContext(toolBar, Region.TOOL_BAR_CONTENT,</span>
                             contentStyle, ENABLED);
<span class="nc" id="L138">        contentStyle.uninstallDefaults(context);</span>
<span class="nc" id="L139">        context.dispose();</span>
<span class="nc" id="L140">        contentStyle = null;</span>

<span class="nc" id="L142">        context = getContext(toolBar, Region.TOOL_BAR_DRAG_WINDOW,</span>
                             dragWindowStyle, ENABLED);
<span class="nc" id="L144">        dragWindowStyle.uninstallDefaults(context);</span>
<span class="nc" id="L145">        context.dispose();</span>
<span class="nc" id="L146">        dragWindowStyle = null;</span>

<span class="nc" id="L148">        toolBar.setLayout(null);</span>
<span class="nc" id="L149">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
<span class="nc" id="L155">    protected void installComponents() {}</span>

    /**
     * {@inheritDoc}
     */
    @Override
<span class="nc" id="L161">    protected void uninstallComponents() {}</span>

    /**
     * Creates a {@code LayoutManager} to use with the toolbar.
     *
     * @return a {@code LayoutManager} instance
     */
    protected LayoutManager createLayout() {
<span class="nc" id="L169">        return new SynthToolBarLayoutManager();</span>
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public SynthContext getContext(JComponent c) {
<span class="nc" id="L177">        return getContext(c, SynthLookAndFeel.getComponentState(c));</span>
    }

    private SynthContext getContext(JComponent c, int state) {
<span class="nc" id="L181">        return SynthContext.getContext(SynthContext.class, c,</span>
<span class="nc" id="L182">                    SynthLookAndFeel.getRegion(c), style, state);</span>
    }

    private SynthContext getContext(JComponent c, Region region, SynthStyle style) {
<span class="nc" id="L186">        return SynthContext.getContext(SynthContext.class, c, region,</span>
<span class="nc" id="L187">                                       style, getComponentState(c, region));</span>
    }

    private SynthContext getContext(JComponent c, Region region,
                                    SynthStyle style, int state) {
<span class="nc" id="L192">        return SynthContext.getContext(SynthContext.class, c, region,</span>
                                       style, state);
    }

    private int getComponentState(JComponent c, Region region) {
<span class="nc" id="L197">        return SynthLookAndFeel.getComponentState(c);</span>
    }

    /**
     * Notifies this UI delegate to repaint the specified component.
     * This method paints the component background, then calls
     * the {@link #paint(SynthContext,Graphics)} method.
     *
     * &lt;p&gt;In general, this method does not need to be overridden by subclasses.
     * All Look and Feel rendering code should reside in the {@code paint} method.
     *
     * @param g the {@code Graphics} object used for painting
     * @param c the component being painted
     * @see #paint(SynthContext,Graphics)
     */
    @Override
    public void update(Graphics g, JComponent c) {
<span class="nc" id="L214">        SynthContext context = getContext(c);</span>

<span class="nc" id="L216">        SynthLookAndFeel.update(context, g);</span>
<span class="nc" id="L217">        context.getPainter().paintToolBarBackground(context,</span>
<span class="nc" id="L218">                          g, 0, 0, c.getWidth(), c.getHeight(),</span>
<span class="nc" id="L219">                          toolBar.getOrientation());</span>
<span class="nc" id="L220">        paint(context, g);</span>
<span class="nc" id="L221">        context.dispose();</span>
<span class="nc" id="L222">    }</span>

    /**
     * Paints the specified component according to the Look and Feel.
     * &lt;p&gt;This method is not used by Synth Look and Feel.
     * Painting is handled by the {@link #paint(SynthContext,Graphics)} method.
     *
     * @param g the {@code Graphics} object used for painting
     * @param c the component being painted
     * @see #paint(SynthContext,Graphics)
     */
    @Override
    public void paint(Graphics g, JComponent c) {
<span class="nc" id="L235">        SynthContext context = getContext(c);</span>

<span class="nc" id="L237">        paint(context, g);</span>
<span class="nc" id="L238">        context.dispose();</span>
<span class="nc" id="L239">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    public void paintBorder(SynthContext context, Graphics g, int x,
                            int y, int w, int h) {
<span class="nc" id="L247">        context.getPainter().paintToolBarBorder(context, g, x, y, w, h,</span>
<span class="nc" id="L248">                                                toolBar.getOrientation());</span>
<span class="nc" id="L249">    }</span>

    /**
     * This implementation does nothing, because the {@code rollover}
     * property of the {@code JToolBar} class is not used
     * in the Synth Look and Feel.
     */
    @Override
<span class="nc" id="L257">    protected void setBorderToNonRollover(Component c) {}</span>

    /**
     * This implementation does nothing, because the {@code rollover}
     * property of the {@code JToolBar} class is not used
     * in the Synth Look and Feel.
     */
    @Override
<span class="nc" id="L265">    protected void setBorderToRollover(Component c) {}</span>

    /**
     * This implementation does nothing, because the {@code rollover}
     * property of the {@code JToolBar} class is not used
     * in the Synth Look and Feel.
     */
    @Override
<span class="nc" id="L273">    protected void setBorderToNormal(Component c) {}</span>

    /**
     * Paints the toolbar.
     *
     * @param context context for the component being painted
     * @param g the {@code Graphics} object used for painting
     * @see #update(Graphics,JComponent)
     */
    protected void paint(SynthContext context, Graphics g) {
<span class="nc bnc" id="L283" title="All 4 branches missed.">        if (handleIcon != null &amp;&amp; toolBar.isFloatable()) {</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">            int startX = toolBar.getComponentOrientation().isLeftToRight() ?</span>
<span class="nc" id="L285">                0 : toolBar.getWidth() -</span>
<span class="nc" id="L286">                    SynthIcon.getIconWidth(handleIcon, context);</span>
<span class="nc" id="L287">            SynthIcon.paintIcon(handleIcon, context, g, startX, 0,</span>
<span class="nc" id="L288">                    SynthIcon.getIconWidth(handleIcon, context),</span>
<span class="nc" id="L289">                    SynthIcon.getIconHeight(handleIcon, context));</span>
        }

<span class="nc" id="L292">        SynthContext subcontext = getContext(</span>
                toolBar, Region.TOOL_BAR_CONTENT, contentStyle);
<span class="nc" id="L294">        paintContent(subcontext, g, contentRect);</span>
<span class="nc" id="L295">        subcontext.dispose();</span>
<span class="nc" id="L296">    }</span>

    /**
     * Paints the toolbar content.
     *
     * @param context context for the component being painted
     * @param g {@code Graphics} object used for painting
     * @param bounds bounding box for the toolbar
     */
    protected void paintContent(SynthContext context, Graphics g,
            Rectangle bounds) {
<span class="nc" id="L307">        SynthLookAndFeel.updateSubregion(context, g, bounds);</span>
<span class="nc" id="L308">        context.getPainter().paintToolBarContentBackground(context, g,</span>
                             bounds.x, bounds.y, bounds.width, bounds.height,
<span class="nc" id="L310">                             toolBar.getOrientation());</span>
<span class="nc" id="L311">        context.getPainter().paintToolBarContentBorder(context, g,</span>
                             bounds.x, bounds.y, bounds.width, bounds.height,
<span class="nc" id="L313">                             toolBar.getOrientation());</span>
<span class="nc" id="L314">    }</span>

    /**
     * {@inheritDoc}
     */
    @Override
    protected void paintDragWindow(Graphics g) {
<span class="nc" id="L321">        int w = dragWindow.getWidth();</span>
<span class="nc" id="L322">        int h = dragWindow.getHeight();</span>
<span class="nc" id="L323">        SynthContext context = getContext(</span>
                toolBar, Region.TOOL_BAR_DRAG_WINDOW, dragWindowStyle);
<span class="nc" id="L325">        SynthLookAndFeel.updateSubregion(</span>
                context, g, new Rectangle(0, 0, w, h));
<span class="nc" id="L327">        context.getPainter().paintToolBarDragWindowBackground(context,</span>
                                                           g, 0, 0, w, h,
<span class="nc" id="L329">                                                           dragWindow.getOrientation());</span>
<span class="nc" id="L330">        context.getPainter().paintToolBarDragWindowBorder(context, g, 0, 0, w, h,</span>
<span class="nc" id="L331">                                                          dragWindow.getOrientation());</span>
<span class="nc" id="L332">        context.dispose();</span>
<span class="nc" id="L333">    }</span>

    //
    // PropertyChangeListener
    //

    /**
     * {@inheritDoc}
     */
    @Override
    public void propertyChange(PropertyChangeEvent e) {
<span class="nc bnc" id="L344" title="All 2 branches missed.">        if (SynthLookAndFeel.shouldUpdateStyle(e)) {</span>
<span class="nc" id="L345">            updateStyle((JToolBar)e.getSource());</span>
        }
<span class="nc" id="L347">    }</span>


<span class="nc" id="L350">    class SynthToolBarLayoutManager implements LayoutManager {</span>
<span class="nc" id="L351">        public void addLayoutComponent(String name, Component comp) {}</span>

<span class="nc" id="L353">        public void removeLayoutComponent(Component comp) {}</span>

        public Dimension minimumLayoutSize(Container parent) {
<span class="nc" id="L356">            JToolBar tb = (JToolBar)parent;</span>
<span class="nc" id="L357">            Insets insets = tb.getInsets();</span>
<span class="nc" id="L358">            Dimension dim = new Dimension();</span>
<span class="nc" id="L359">            SynthContext context = getContext(tb);</span>

<span class="nc bnc" id="L361" title="All 2 branches missed.">            if (tb.getOrientation() == JToolBar.HORIZONTAL) {</span>
<span class="nc bnc" id="L362" title="All 2 branches missed.">                dim.width = tb.isFloatable() ?</span>
<span class="nc" id="L363">                    SynthIcon.getIconWidth(handleIcon, context) : 0;</span>
                Dimension compDim;
<span class="nc bnc" id="L365" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L366">                    Component component = tb.getComponent(i);</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">                    if (component.isVisible()) {</span>
<span class="nc" id="L368">                        compDim = component.getMinimumSize();</span>
<span class="nc" id="L369">                        dim.width += compDim.width;</span>
<span class="nc" id="L370">                        dim.height = Math.max(dim.height, compDim.height);</span>
                    }
                }
            } else {
<span class="nc bnc" id="L374" title="All 2 branches missed.">                dim.height = tb.isFloatable() ?</span>
<span class="nc" id="L375">                    SynthIcon.getIconHeight(handleIcon, context) : 0;</span>
                Dimension compDim;
<span class="nc bnc" id="L377" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L378">                    Component component = tb.getComponent(i);</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">                    if (component.isVisible()) {</span>
<span class="nc" id="L380">                        compDim = component.getMinimumSize();</span>
<span class="nc" id="L381">                        dim.width = Math.max(dim.width, compDim.width);</span>
<span class="nc" id="L382">                        dim.height += compDim.height;</span>
                    }
                }
            }
<span class="nc" id="L386">            dim.width += insets.left + insets.right;</span>
<span class="nc" id="L387">            dim.height += insets.top + insets.bottom;</span>

<span class="nc" id="L389">            context.dispose();</span>
<span class="nc" id="L390">            return dim;</span>
        }

        public Dimension preferredLayoutSize(Container parent) {
<span class="nc" id="L394">            JToolBar tb = (JToolBar)parent;</span>
<span class="nc" id="L395">            Insets insets = tb.getInsets();</span>
<span class="nc" id="L396">            Dimension dim = new Dimension();</span>
<span class="nc" id="L397">            SynthContext context = getContext(tb);</span>

<span class="nc bnc" id="L399" title="All 2 branches missed.">            if (tb.getOrientation() == JToolBar.HORIZONTAL) {</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">                dim.width = tb.isFloatable() ?</span>
<span class="nc" id="L401">                    SynthIcon.getIconWidth(handleIcon, context) : 0;</span>
                Dimension compDim;
<span class="nc bnc" id="L403" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L404">                    Component component = tb.getComponent(i);</span>
<span class="nc bnc" id="L405" title="All 2 branches missed.">                    if (component.isVisible()) {</span>
<span class="nc" id="L406">                        compDim = component.getPreferredSize();</span>
<span class="nc" id="L407">                        dim.width += compDim.width;</span>
<span class="nc" id="L408">                        dim.height = Math.max(dim.height, compDim.height);</span>
                    }
                }
            } else {
<span class="nc bnc" id="L412" title="All 2 branches missed.">                dim.height = tb.isFloatable() ?</span>
<span class="nc" id="L413">                    SynthIcon.getIconHeight(handleIcon, context) : 0;</span>
                Dimension compDim;
<span class="nc bnc" id="L415" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L416">                    Component component = tb.getComponent(i);</span>
<span class="nc bnc" id="L417" title="All 2 branches missed.">                    if (component.isVisible()) {</span>
<span class="nc" id="L418">                        compDim = component.getPreferredSize();</span>
<span class="nc" id="L419">                        dim.width = Math.max(dim.width, compDim.width);</span>
<span class="nc" id="L420">                        dim.height += compDim.height;</span>
                    }
                }
            }
<span class="nc" id="L424">            dim.width += insets.left + insets.right;</span>
<span class="nc" id="L425">            dim.height += insets.top + insets.bottom;</span>

<span class="nc" id="L427">            context.dispose();</span>
<span class="nc" id="L428">            return dim;</span>
        }

        public void layoutContainer(Container parent) {
<span class="nc" id="L432">            JToolBar tb = (JToolBar)parent;</span>
<span class="nc" id="L433">            Insets insets = tb.getInsets();</span>
<span class="nc" id="L434">            boolean ltr = tb.getComponentOrientation().isLeftToRight();</span>
<span class="nc" id="L435">            SynthContext context = getContext(tb);</span>

            Component c;
            Dimension d;

            // JToolBar by default uses a somewhat modified BoxLayout as
            // its layout manager. For compatibility reasons, we want to
            // support Box &quot;glue&quot; as a way to move things around on the
            // toolbar. &quot;glue&quot; is represented in BoxLayout as a Box.Filler
            // with a minimum and preferred size of (0,0).
            // So what we do here is find the number of such glue fillers
            // and figure out how much space should be allocated to them.
<span class="nc" id="L447">            int glueCount = 0;</span>
<span class="nc bnc" id="L448" title="All 2 branches missed.">            for (int i=0; i&lt;tb.getComponentCount(); i++) {</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">                if (isGlue(tb.getComponent(i))) glueCount++;</span>
            }

<span class="nc bnc" id="L452" title="All 2 branches missed.">            if (tb.getOrientation() == JToolBar.HORIZONTAL) {</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">                int handleWidth = tb.isFloatable() ?</span>
<span class="nc" id="L454">                    SynthIcon.getIconWidth(handleIcon, context) : 0;</span>

                // Note: contentRect does not take insets into account
                // since it is used for determining the bounds that are
                // passed to paintToolBarContentBackground().
<span class="nc bnc" id="L459" title="All 2 branches missed.">                contentRect.x = ltr ? handleWidth : 0;</span>
<span class="nc" id="L460">                contentRect.y = 0;</span>
<span class="nc" id="L461">                contentRect.width = tb.getWidth() - handleWidth;</span>
<span class="nc" id="L462">                contentRect.height = tb.getHeight();</span>

                // However, we do take the insets into account here for
                // the purposes of laying out the toolbar child components.
<span class="nc bnc" id="L466" title="All 2 branches missed.">                int x = ltr ?</span>
                    handleWidth + insets.left :
<span class="nc" id="L468">                    tb.getWidth() - handleWidth - insets.right;</span>
<span class="nc" id="L469">                int baseY = insets.top;</span>
<span class="nc" id="L470">                int baseH = tb.getHeight() - insets.top - insets.bottom;</span>

                // we need to get the minimum width for laying things out
                // so that we can calculate how much empty space needs to
                // be distributed among the &quot;glue&quot;, if any
<span class="nc" id="L475">                int extraSpacePerGlue = 0;</span>
<span class="nc bnc" id="L476" title="All 2 branches missed.">                if (glueCount &gt; 0) {</span>
<span class="nc" id="L477">                    int minWidth = minimumLayoutSize(parent).width;</span>
<span class="nc" id="L478">                    extraSpacePerGlue = (tb.getWidth() - minWidth) / glueCount;</span>
<span class="nc bnc" id="L479" title="All 2 branches missed.">                    if (extraSpacePerGlue &lt; 0) extraSpacePerGlue = 0;</span>
                }

<span class="nc bnc" id="L482" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L483">                    c = tb.getComponent(i);</span>
<span class="nc bnc" id="L484" title="All 2 branches missed.">                    if (c.isVisible()) {</span>
<span class="nc" id="L485">                        d = c.getPreferredSize();</span>
                        int y, h;
<span class="nc bnc" id="L487" title="All 4 branches missed.">                        if (d.height &gt;= baseH || c instanceof JSeparator) {</span>
                            // Fill available height
<span class="nc" id="L489">                            y = baseY;</span>
<span class="nc" id="L490">                            h = baseH;</span>
                        } else {
                            // Center component vertically in the available space
<span class="nc" id="L493">                            y = baseY + (baseH / 2) - (d.height / 2);</span>
<span class="nc" id="L494">                            h = d.height;</span>
                        }
                        //if the component is a &quot;glue&quot; component then add to its
                        //width the extraSpacePerGlue it is due
<span class="nc bnc" id="L498" title="All 2 branches missed.">                        if (isGlue(c)) d.width += extraSpacePerGlue;</span>
<span class="nc bnc" id="L499" title="All 2 branches missed.">                        c.setBounds(ltr ? x : x - d.width, y, d.width, h);</span>
<span class="nc bnc" id="L500" title="All 2 branches missed.">                        x = ltr ? x + d.width : x - d.width;</span>
                    }
                }
<span class="nc" id="L503">            } else {</span>
<span class="nc bnc" id="L504" title="All 2 branches missed.">                int handleHeight = tb.isFloatable() ?</span>
<span class="nc" id="L505">                    SynthIcon.getIconHeight(handleIcon, context) : 0;</span>

                // See notes above regarding the use of insets
<span class="nc" id="L508">                contentRect.x = 0;</span>
<span class="nc" id="L509">                contentRect.y = handleHeight;</span>
<span class="nc" id="L510">                contentRect.width = tb.getWidth();</span>
<span class="nc" id="L511">                contentRect.height = tb.getHeight() - handleHeight;</span>

<span class="nc" id="L513">                int baseX = insets.left;</span>
<span class="nc" id="L514">                int baseW = tb.getWidth() - insets.left - insets.right;</span>
<span class="nc" id="L515">                int y = handleHeight + insets.top;</span>

                // we need to get the minimum height for laying things out
                // so that we can calculate how much empty space needs to
                // be distributed among the &quot;glue&quot;, if any
<span class="nc" id="L520">                int extraSpacePerGlue = 0;</span>
<span class="nc bnc" id="L521" title="All 2 branches missed.">                if (glueCount &gt; 0) {</span>
<span class="nc" id="L522">                    int minHeight = minimumLayoutSize(parent).height;</span>
<span class="nc" id="L523">                    extraSpacePerGlue = (tb.getHeight() - minHeight) / glueCount;</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">                    if (extraSpacePerGlue &lt; 0) extraSpacePerGlue = 0;</span>
                }

<span class="nc bnc" id="L527" title="All 2 branches missed.">                for (int i = 0; i &lt; tb.getComponentCount(); i++) {</span>
<span class="nc" id="L528">                    c = tb.getComponent(i);</span>
<span class="nc bnc" id="L529" title="All 2 branches missed.">                    if (c.isVisible()) {</span>
<span class="nc" id="L530">                        d = c.getPreferredSize();</span>
                        int x, w;
<span class="nc bnc" id="L532" title="All 4 branches missed.">                        if (d.width &gt;= baseW || c instanceof JSeparator) {</span>
                            // Fill available width
<span class="nc" id="L534">                            x = baseX;</span>
<span class="nc" id="L535">                            w = baseW;</span>
                        } else {
                            // Center component horizontally in the available space
<span class="nc" id="L538">                            x = baseX + (baseW / 2) - (d.width / 2);</span>
<span class="nc" id="L539">                            w = d.width;</span>
                        }
                        //if the component is a &quot;glue&quot; component then add to its
                        //height the extraSpacePerGlue it is due
<span class="nc bnc" id="L543" title="All 2 branches missed.">                        if (isGlue(c)) d.height += extraSpacePerGlue;</span>
<span class="nc" id="L544">                        c.setBounds(x, y, w, d.height);</span>
<span class="nc" id="L545">                        y += d.height;</span>
                    }
                }
            }
<span class="nc" id="L549">            context.dispose();</span>
<span class="nc" id="L550">        }</span>

        private boolean isGlue(Component c) {
<span class="nc bnc" id="L553" title="All 4 branches missed.">            if (c.isVisible() &amp;&amp; c instanceof Box.Filler) {</span>
<span class="nc" id="L554">                Box.Filler f = (Box.Filler)c;</span>
<span class="nc" id="L555">                Dimension min = f.getMinimumSize();</span>
<span class="nc" id="L556">                Dimension pref = f.getPreferredSize();</span>
<span class="nc bnc" id="L557" title="All 8 branches missed.">                return min.width == 0 &amp;&amp;  min.height == 0 &amp;&amp;</span>
                        pref.width == 0 &amp;&amp; pref.height == 0;
            }
<span class="nc" id="L560">            return false;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>