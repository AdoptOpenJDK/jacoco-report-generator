<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>Label.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.awt</a> &gt; <span class="el_source">Label.java</span></div><h1>Label.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */
package java.awt;

import java.awt.peer.LabelPeer;
import java.io.IOException;
import java.io.ObjectInputStream;
import javax.accessibility.*;

/**
 * A &lt;code&gt;Label&lt;/code&gt; object is a component for placing text in a
 * container. A label displays a single line of read-only text.
 * The text can be changed by the application, but a user cannot edit it
 * directly.
 * &lt;p&gt;
 * For example, the code&amp;nbsp;.&amp;nbsp;.&amp;nbsp;.
 * &lt;p&gt;
 * &lt;hr&gt;&lt;blockquote&gt;&lt;pre&gt;
 * setLayout(new FlowLayout(FlowLayout.CENTER, 10, 10));
 * add(new Label(&quot;Hi There!&quot;));
 * add(new Label(&quot;Another Label&quot;));
 * &lt;/pre&gt;&lt;/blockquote&gt;&lt;hr&gt;
 * &lt;p&gt;
 * produces the following labels:
 * &lt;p&gt;
 * &lt;img src=&quot;doc-files/Label-1.gif&quot; alt=&quot;Two labels: 'Hi There!' and 'Another label'&quot;
 * style=&quot;float:center; margin: 7px 10px;&quot;&gt;
 *
 * @author      Sami Shaio
 * @since       JDK1.0
 */
public class Label extends Component implements Accessible {

    static {
        /* ensure that the necessary native libraries are loaded */
<span class="nc" id="L58">        Toolkit.loadLibraries();</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">        if (!GraphicsEnvironment.isHeadless()) {</span>
<span class="nc" id="L60">            initIDs();</span>
        }
    }

    /**
     * Indicates that the label should be left justified.
     */
    public static final int LEFT        = 0;

    /**
     * Indicates that the label should be centered.
     */
    public static final int CENTER      = 1;

    /**
     * Indicates that the label should be right justified.
     * @since   JDK1.0t.
     */
    public static final int RIGHT       = 2;

    /**
     * The text of this label.
     * This text can be modified by the program
     * but never by the user.
     *
     * @serial
     * @see #getText()
     * @see #setText(String)
     */
    String text;

    /**
     * The label's alignment.  The default alignment is set
     * to be left justified.
     *
     * @serial
     * @see #getAlignment()
     * @see #setAlignment(int)
     */
<span class="nc" id="L99">    int    alignment = LEFT;</span>

    private static final String base = &quot;label&quot;;
<span class="nc" id="L102">    private static int nameCounter = 0;</span>

    /*
     * JDK 1.1 serialVersionUID
     */
     private static final long serialVersionUID = 3094126758329070636L;

    /**
     * Constructs an empty label.
     * The text of the label is the empty string &lt;code&gt;&quot;&quot;&lt;/code&gt;.
     * @exception HeadlessException if GraphicsEnvironment.isHeadless()
     * returns true.
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public Label() throws HeadlessException {
<span class="nc" id="L117">        this(&quot;&quot;, LEFT);</span>
<span class="nc" id="L118">    }</span>

    /**
     * Constructs a new label with the specified string of text,
     * left justified.
     * @param text the string that the label presents.
     *        A &lt;code&gt;null&lt;/code&gt; value
     *        will be accepted without causing a NullPointerException
     *        to be thrown.
     * @exception HeadlessException if GraphicsEnvironment.isHeadless()
     * returns true.
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    public Label(String text) throws HeadlessException {
<span class="nc" id="L132">        this(text, LEFT);</span>
<span class="nc" id="L133">    }</span>

    /**
     * Constructs a new label that presents the specified string of
     * text with the specified alignment.
     * Possible values for &lt;code&gt;alignment&lt;/code&gt; are &lt;code&gt;Label.LEFT&lt;/code&gt;,
     * &lt;code&gt;Label.RIGHT&lt;/code&gt;, and &lt;code&gt;Label.CENTER&lt;/code&gt;.
     * @param text the string that the label presents.
     *        A &lt;code&gt;null&lt;/code&gt; value
     *        will be accepted without causing a NullPointerException
     *        to be thrown.
     * @param     alignment   the alignment value.
     * @exception HeadlessException if GraphicsEnvironment.isHeadless()
     * returns true.
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
<span class="nc" id="L149">    public Label(String text, int alignment) throws HeadlessException {</span>
<span class="nc" id="L150">        GraphicsEnvironment.checkHeadless();</span>
<span class="nc" id="L151">        this.text = text;</span>
<span class="nc" id="L152">        setAlignment(alignment);</span>
<span class="nc" id="L153">    }</span>

    /**
     * Read a label from an object input stream.
     * @exception HeadlessException if
     * &lt;code&gt;GraphicsEnvironment.isHeadless()&lt;/code&gt; returns
     * &lt;code&gt;true&lt;/code&gt;
     * @serial
     * @since 1.4
     * @see java.awt.GraphicsEnvironment#isHeadless
     */
    private void readObject(ObjectInputStream s)
        throws ClassNotFoundException, IOException, HeadlessException {
<span class="nc" id="L166">        GraphicsEnvironment.checkHeadless();</span>
<span class="nc" id="L167">        s.defaultReadObject();</span>
<span class="nc" id="L168">    }</span>

    /**
     * Construct a name for this component.  Called by getName() when the
     * name is &lt;code&gt;null&lt;/code&gt;.
     */
    String constructComponentName() {
<span class="nc" id="L175">        synchronized (Label.class) {</span>
<span class="nc" id="L176">            return base + nameCounter++;</span>
<span class="nc" id="L177">        }</span>
    }

    /**
     * Creates the peer for this label.  The peer allows us to
     * modify the appearance of the label without changing its
     * functionality.
     */
    public void addNotify() {
<span class="nc" id="L186">        synchronized (getTreeLock()) {</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">            if (peer == null)</span>
<span class="nc" id="L188">                peer = getToolkit().createLabel(this);</span>
<span class="nc" id="L189">            super.addNotify();</span>
<span class="nc" id="L190">        }</span>
<span class="nc" id="L191">    }</span>

    /**
     * Gets the current alignment of this label. Possible values are
     * &lt;code&gt;Label.LEFT&lt;/code&gt;, &lt;code&gt;Label.RIGHT&lt;/code&gt;, and
     * &lt;code&gt;Label.CENTER&lt;/code&gt;.
     * @see        java.awt.Label#setAlignment
     */
    public int getAlignment() {
<span class="nc" id="L200">        return alignment;</span>
    }

    /**
     * Sets the alignment for this label to the specified alignment.
     * Possible values are &lt;code&gt;Label.LEFT&lt;/code&gt;,
     * &lt;code&gt;Label.RIGHT&lt;/code&gt;, and &lt;code&gt;Label.CENTER&lt;/code&gt;.
     * @param      alignment    the alignment to be set.
     * @exception  IllegalArgumentException if an improper value for
     *                          &lt;code&gt;alignment&lt;/code&gt; is given.
     * @see        java.awt.Label#getAlignment
     */
    public synchronized void setAlignment(int alignment) {
<span class="nc bnc" id="L213" title="All 2 branches missed.">        switch (alignment) {</span>
          case LEFT:
          case CENTER:
          case RIGHT:
<span class="nc" id="L217">            this.alignment = alignment;</span>
<span class="nc" id="L218">            LabelPeer peer = (LabelPeer)this.peer;</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">            if (peer != null) {</span>
<span class="nc" id="L220">                peer.setAlignment(alignment);</span>
            }
<span class="nc" id="L222">            return;</span>
        }
<span class="nc" id="L224">        throw new IllegalArgumentException(&quot;improper alignment: &quot; + alignment);</span>
    }

    /**
     * Gets the text of this label.
     * @return     the text of this label, or &lt;code&gt;null&lt;/code&gt; if
     *             the text has been set to &lt;code&gt;null&lt;/code&gt;.
     * @see        java.awt.Label#setText
     */
    public String getText() {
<span class="nc" id="L234">        return text;</span>
    }

    /**
     * Sets the text for this label to the specified text.
     * @param      text the text that this label displays. If
     *             &lt;code&gt;text&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, it is
     *             treated for display purposes like an empty
     *             string &lt;code&gt;&quot;&quot;&lt;/code&gt;.
     * @see        java.awt.Label#getText
     */
    public void setText(String text) {
<span class="nc" id="L246">        boolean testvalid = false;</span>
<span class="nc" id="L247">        synchronized (this) {</span>
<span class="nc bnc" id="L248" title="All 4 branches missed.">            if (text != this.text &amp;&amp; (this.text == null ||</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">                                      !this.text.equals(text))) {</span>
<span class="nc" id="L250">                this.text = text;</span>
<span class="nc" id="L251">                LabelPeer peer = (LabelPeer)this.peer;</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">                if (peer != null) {</span>
<span class="nc" id="L253">                    peer.setText(text);</span>
                }
<span class="nc" id="L255">                testvalid = true;</span>
            }
<span class="nc" id="L257">        }</span>

        // This could change the preferred size of the Component.
<span class="nc bnc" id="L260" title="All 2 branches missed.">        if (testvalid) {</span>
<span class="nc" id="L261">            invalidateIfValid();</span>
        }
<span class="nc" id="L263">    }</span>

    /**
     * Returns a string representing the state of this &lt;code&gt;Label&lt;/code&gt;.
     * This method is intended to be used only for debugging purposes, and the
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not be
     * &lt;code&gt;null&lt;/code&gt;.
     *
     * @return     the parameter string of this label
     */
    protected String paramString() {
<span class="nc" id="L275">        String str = &quot;,align=&quot;;</span>
<span class="nc bnc" id="L276" title="All 4 branches missed.">        switch (alignment) {</span>
<span class="nc" id="L277">          case LEFT:   str += &quot;left&quot;; break;</span>
<span class="nc" id="L278">          case CENTER: str += &quot;center&quot;; break;</span>
<span class="nc" id="L279">          case RIGHT:  str += &quot;right&quot;; break;</span>
        }
<span class="nc" id="L281">        return super.paramString() + str + &quot;,text=&quot; + text;</span>
    }

    /**
     * Initialize JNI field and method IDs
     */
    private static native void initIDs();


/////////////////
// Accessibility support
////////////////


    /**
     * Gets the AccessibleContext associated with this Label.
     * For labels, the AccessibleContext takes the form of an
     * AccessibleAWTLabel.
     * A new AccessibleAWTLabel instance is created if necessary.
     *
     * @return an AccessibleAWTLabel that serves as the
     *         AccessibleContext of this Label
     * @since 1.3
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L306" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L307">            accessibleContext = new AccessibleAWTLabel();</span>
        }
<span class="nc" id="L309">        return accessibleContext;</span>
    }

    /**
     * This class implements accessibility support for the
     * &lt;code&gt;Label&lt;/code&gt; class.  It provides an implementation of the
     * Java Accessibility API appropriate to label user-interface elements.
     * @since 1.3
     */
    protected class AccessibleAWTLabel extends AccessibleAWTComponent
    {
        /*
         * JDK 1.3 serialVersionUID
         */
        private static final long serialVersionUID = -3568967560160480438L;

<span class="nc" id="L325">        public AccessibleAWTLabel() {</span>
<span class="nc" id="L326">            super();</span>
<span class="nc" id="L327">        }</span>

        /**
         * Get the accessible name of this object.
         *
         * @return the localized name of the object -- can be null if this
         * object does not have a name
         * @see AccessibleContext#setAccessibleName
         */
        public String getAccessibleName() {
<span class="nc bnc" id="L337" title="All 2 branches missed.">            if (accessibleName != null) {</span>
<span class="nc" id="L338">                return accessibleName;</span>
            } else {
<span class="nc bnc" id="L340" title="All 2 branches missed.">                if (getText() == null) {</span>
<span class="nc" id="L341">                    return super.getAccessibleName();</span>
                } else {
<span class="nc" id="L343">                    return getText();</span>
                }
            }
        }

        /**
         * Get the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the object
         * @see AccessibleRole
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc" id="L355">            return AccessibleRole.LABEL;</span>
        }

    } // inner class AccessibleAWTLabel

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>