<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>GridLayout.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">java.awt</a> &gt; <span class="el_source">GridLayout.java</span></div><h1>GridLayout.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1995, 2006, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package java.awt;

/**
 * The &lt;code&gt;GridLayout&lt;/code&gt; class is a layout manager that
 * lays out a container's components in a rectangular grid.
 * The container is divided into equal-sized rectangles,
 * and one component is placed in each rectangle.
 * For example, the following is an applet that lays out six buttons
 * into three rows and two columns:
 * &lt;p&gt;
 * &lt;hr&gt;&lt;blockquote&gt;
 * &lt;pre&gt;
 * import java.awt.*;
 * import java.applet.Applet;
 * public class ButtonGrid extends Applet {
 *     public void init() {
 *         setLayout(new GridLayout(3,2));
 *         add(new Button(&quot;1&quot;));
 *         add(new Button(&quot;2&quot;));
 *         add(new Button(&quot;3&quot;));
 *         add(new Button(&quot;4&quot;));
 *         add(new Button(&quot;5&quot;));
 *         add(new Button(&quot;6&quot;));
 *     }
 * }
 * &lt;/pre&gt;&lt;/blockquote&gt;&lt;hr&gt;
 * &lt;p&gt;
 * If the container's &lt;code&gt;ComponentOrientation&lt;/code&gt; property is horizontal
 * and left-to-right, the above example produces the output shown in Figure 1.
 * If the container's &lt;code&gt;ComponentOrientation&lt;/code&gt; property is horizontal
 * and right-to-left, the example produces the output shown in Figure 2.
 * &lt;p&gt;
 * &lt;table style=&quot;float:center&quot; WIDTH=600 summary=&quot;layout&quot;&gt;
 * &lt;tr ALIGN=CENTER&gt;
 * &lt;td&gt;&lt;img SRC=&quot;doc-files/GridLayout-1.gif&quot;
 *      alt=&quot;Shows 6 buttons in rows of 2. Row 1 shows buttons 1 then 2.
 * Row 2 shows buttons 3 then 4. Row 3 shows buttons 5 then 6.&quot;&gt;
 * &lt;/td&gt;
 *
 * &lt;td ALIGN=CENTER&gt;&lt;img SRC=&quot;doc-files/GridLayout-2.gif&quot;
 *                   alt=&quot;Shows 6 buttons in rows of 2. Row 1 shows buttons 2 then 1.
 * Row 2 shows buttons 4 then 3. Row 3 shows buttons 6 then 5.&quot;&gt;
 * &lt;/td&gt;
 * &lt;/tr&gt;
 *
 * &lt;tr ALIGN=CENTER&gt;
 * &lt;td&gt;Figure 1: Horizontal, Left-to-Right&lt;/td&gt;
 *
 * &lt;td&gt;Figure 2: Horizontal, Right-to-Left&lt;/td&gt;
 * &lt;/tr&gt;
 * &lt;/table&gt;
 * &lt;p&gt;
 * When both the number of rows and the number of columns have
 * been set to non-zero values, either by a constructor or
 * by the &lt;tt&gt;setRows&lt;/tt&gt; and &lt;tt&gt;setColumns&lt;/tt&gt; methods, the number of
 * columns specified is ignored.  Instead, the number of
 * columns is determined from the specified number of rows
 * and the total number of components in the layout. So, for
 * example, if three rows and two columns have been specified
 * and nine components are added to the layout, they will
 * be displayed as three rows of three columns.  Specifying
 * the number of columns affects the layout only when the
 * number of rows is set to zero.
 *
 * @author  Arthur van Hoff
 * @since   JDK1.0
 */
public class GridLayout implements LayoutManager, java.io.Serializable {
    /*
     * serialVersionUID
     */
    private static final long serialVersionUID = -7411804673224730901L;

    /**
     * This is the horizontal gap (in pixels) which specifies the space
     * between columns.  They can be changed at any time.
     * This should be a non-negative integer.
     *
     * @serial
     * @see #getHgap()
     * @see #setHgap(int)
     */
    int hgap;
    /**
     * This is the vertical gap (in pixels) which specifies the space
     * between rows.  They can be changed at any time.
     * This should be a non negative integer.
     *
     * @serial
     * @see #getVgap()
     * @see #setVgap(int)
     */
    int vgap;
    /**
     * This is the number of rows specified for the grid.  The number
     * of rows can be changed at any time.
     * This should be a non negative integer, where '0' means
     * 'any number' meaning that the number of Rows in that
     * dimension depends on the other dimension.
     *
     * @serial
     * @see #getRows()
     * @see #setRows(int)
     */
    int rows;
    /**
     * This is the number of columns specified for the grid.  The number
     * of columns can be changed at any time.
     * This should be a non negative integer, where '0' means
     * 'any number' meaning that the number of Columns in that
     * dimension depends on the other dimension.
     *
     * @serial
     * @see #getColumns()
     * @see #setColumns(int)
     */
    int cols;

    /**
     * Creates a grid layout with a default of one column per component,
     * in a single row.
     * @since JDK1.1
     */
    public GridLayout() {
<span class="nc" id="L150">        this(1, 0, 0, 0);</span>
<span class="nc" id="L151">    }</span>

    /**
     * Creates a grid layout with the specified number of rows and
     * columns. All components in the layout are given equal size.
     * &lt;p&gt;
     * One, but not both, of &lt;code&gt;rows&lt;/code&gt; and &lt;code&gt;cols&lt;/code&gt; can
     * be zero, which means that any number of objects can be placed in a
     * row or in a column.
     * @param     rows   the rows, with the value zero meaning
     *                   any number of rows.
     * @param     cols   the columns, with the value zero meaning
     *                   any number of columns.
     */
    public GridLayout(int rows, int cols) {
<span class="nc" id="L166">        this(rows, cols, 0, 0);</span>
<span class="nc" id="L167">    }</span>

    /**
     * Creates a grid layout with the specified number of rows and
     * columns. All components in the layout are given equal size.
     * &lt;p&gt;
     * In addition, the horizontal and vertical gaps are set to the
     * specified values. Horizontal gaps are placed between each
     * of the columns. Vertical gaps are placed between each of
     * the rows.
     * &lt;p&gt;
     * One, but not both, of &lt;code&gt;rows&lt;/code&gt; and &lt;code&gt;cols&lt;/code&gt; can
     * be zero, which means that any number of objects can be placed in a
     * row or in a column.
     * &lt;p&gt;
     * All &lt;code&gt;GridLayout&lt;/code&gt; constructors defer to this one.
     * @param     rows   the rows, with the value zero meaning
     *                   any number of rows
     * @param     cols   the columns, with the value zero meaning
     *                   any number of columns
     * @param     hgap   the horizontal gap
     * @param     vgap   the vertical gap
     * @exception   IllegalArgumentException  if the value of both
     *                  &lt;code&gt;rows&lt;/code&gt; and &lt;code&gt;cols&lt;/code&gt; is
     *                  set to zero
     */
<span class="nc" id="L193">    public GridLayout(int rows, int cols, int hgap, int vgap) {</span>
<span class="nc bnc" id="L194" title="All 4 branches missed.">        if ((rows == 0) &amp;&amp; (cols == 0)) {</span>
<span class="nc" id="L195">            throw new IllegalArgumentException(&quot;rows and cols cannot both be zero&quot;);</span>
        }
<span class="nc" id="L197">        this.rows = rows;</span>
<span class="nc" id="L198">        this.cols = cols;</span>
<span class="nc" id="L199">        this.hgap = hgap;</span>
<span class="nc" id="L200">        this.vgap = vgap;</span>
<span class="nc" id="L201">    }</span>

    /**
     * Gets the number of rows in this layout.
     * @return    the number of rows in this layout
     * @since     JDK1.1
     */
    public int getRows() {
<span class="nc" id="L209">        return rows;</span>
    }

    /**
     * Sets the number of rows in this layout to the specified value.
     * @param        rows   the number of rows in this layout
     * @exception    IllegalArgumentException  if the value of both
     *               &lt;code&gt;rows&lt;/code&gt; and &lt;code&gt;cols&lt;/code&gt; is set to zero
     * @since        JDK1.1
     */
    public void setRows(int rows) {
<span class="nc bnc" id="L220" title="All 4 branches missed.">        if ((rows == 0) &amp;&amp; (this.cols == 0)) {</span>
<span class="nc" id="L221">            throw new IllegalArgumentException(&quot;rows and cols cannot both be zero&quot;);</span>
        }
<span class="nc" id="L223">        this.rows = rows;</span>
<span class="nc" id="L224">    }</span>

    /**
     * Gets the number of columns in this layout.
     * @return     the number of columns in this layout
     * @since      JDK1.1
     */
    public int getColumns() {
<span class="nc" id="L232">        return cols;</span>
    }

    /**
     * Sets the number of columns in this layout to the specified value.
     * Setting the number of columns has no affect on the layout
     * if the number of rows specified by a constructor or by
     * the &lt;tt&gt;setRows&lt;/tt&gt; method is non-zero. In that case, the number
     * of columns displayed in the layout is determined by the total
     * number of components and the number of rows specified.
     * @param        cols   the number of columns in this layout
     * @exception    IllegalArgumentException  if the value of both
     *               &lt;code&gt;rows&lt;/code&gt; and &lt;code&gt;cols&lt;/code&gt; is set to zero
     * @since        JDK1.1
     */
    public void setColumns(int cols) {
<span class="nc bnc" id="L248" title="All 4 branches missed.">        if ((cols == 0) &amp;&amp; (this.rows == 0)) {</span>
<span class="nc" id="L249">            throw new IllegalArgumentException(&quot;rows and cols cannot both be zero&quot;);</span>
        }
<span class="nc" id="L251">        this.cols = cols;</span>
<span class="nc" id="L252">    }</span>

    /**
     * Gets the horizontal gap between components.
     * @return       the horizontal gap between components
     * @since        JDK1.1
     */
    public int getHgap() {
<span class="nc" id="L260">        return hgap;</span>
    }

    /**
     * Sets the horizontal gap between components to the specified value.
     * @param        hgap   the horizontal gap between components
     * @since        JDK1.1
     */
    public void setHgap(int hgap) {
<span class="nc" id="L269">        this.hgap = hgap;</span>
<span class="nc" id="L270">    }</span>

    /**
     * Gets the vertical gap between components.
     * @return       the vertical gap between components
     * @since        JDK1.1
     */
    public int getVgap() {
<span class="nc" id="L278">        return vgap;</span>
    }

    /**
     * Sets the vertical gap between components to the specified value.
     * @param         vgap  the vertical gap between components
     * @since        JDK1.1
     */
    public void setVgap(int vgap) {
<span class="nc" id="L287">        this.vgap = vgap;</span>
<span class="nc" id="L288">    }</span>

    /**
     * Adds the specified component with the specified name to the layout.
     * @param name the name of the component
     * @param comp the component to be added
     */
    public void addLayoutComponent(String name, Component comp) {
<span class="nc" id="L296">    }</span>

    /**
     * Removes the specified component from the layout.
     * @param comp the component to be removed
     */
    public void removeLayoutComponent(Component comp) {
<span class="nc" id="L303">    }</span>

    /**
     * Determines the preferred size of the container argument using
     * this grid layout.
     * &lt;p&gt;
     * The preferred width of a grid layout is the largest preferred
     * width of all of the components in the container times the number of
     * columns, plus the horizontal padding times the number of columns
     * minus one, plus the left and right insets of the target container.
     * &lt;p&gt;
     * The preferred height of a grid layout is the largest preferred
     * height of all of the components in the container times the number of
     * rows, plus the vertical padding times the number of rows minus one,
     * plus the top and bottom insets of the target container.
     *
     * @param     parent   the container in which to do the layout
     * @return    the preferred dimensions to lay out the
     *                      subcomponents of the specified container
     * @see       java.awt.GridLayout#minimumLayoutSize
     * @see       java.awt.Container#getPreferredSize()
     */
    public Dimension preferredLayoutSize(Container parent) {
<span class="nc" id="L326">      synchronized (parent.getTreeLock()) {</span>
<span class="nc" id="L327">        Insets insets = parent.getInsets();</span>
<span class="nc" id="L328">        int ncomponents = parent.getComponentCount();</span>
<span class="nc" id="L329">        int nrows = rows;</span>
<span class="nc" id="L330">        int ncols = cols;</span>

<span class="nc bnc" id="L332" title="All 2 branches missed.">        if (nrows &gt; 0) {</span>
<span class="nc" id="L333">            ncols = (ncomponents + nrows - 1) / nrows;</span>
        } else {
<span class="nc" id="L335">            nrows = (ncomponents + ncols - 1) / ncols;</span>
        }
<span class="nc" id="L337">        int w = 0;</span>
<span class="nc" id="L338">        int h = 0;</span>
<span class="nc bnc" id="L339" title="All 2 branches missed.">        for (int i = 0 ; i &lt; ncomponents ; i++) {</span>
<span class="nc" id="L340">            Component comp = parent.getComponent(i);</span>
<span class="nc" id="L341">            Dimension d = comp.getPreferredSize();</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">            if (w &lt; d.width) {</span>
<span class="nc" id="L343">                w = d.width;</span>
            }
<span class="nc bnc" id="L345" title="All 2 branches missed.">            if (h &lt; d.height) {</span>
<span class="nc" id="L346">                h = d.height;</span>
            }
        }
<span class="nc" id="L349">        return new Dimension(insets.left + insets.right + ncols*w + (ncols-1)*hgap,</span>
                             insets.top + insets.bottom + nrows*h + (nrows-1)*vgap);
<span class="nc" id="L351">      }</span>
    }

    /**
     * Determines the minimum size of the container argument using this
     * grid layout.
     * &lt;p&gt;
     * The minimum width of a grid layout is the largest minimum width
     * of all of the components in the container times the number of columns,
     * plus the horizontal padding times the number of columns minus one,
     * plus the left and right insets of the target container.
     * &lt;p&gt;
     * The minimum height of a grid layout is the largest minimum height
     * of all of the components in the container times the number of rows,
     * plus the vertical padding times the number of rows minus one, plus
     * the top and bottom insets of the target container.
     *
     * @param       parent   the container in which to do the layout
     * @return      the minimum dimensions needed to lay out the
     *                      subcomponents of the specified container
     * @see         java.awt.GridLayout#preferredLayoutSize
     * @see         java.awt.Container#doLayout
     */
    public Dimension minimumLayoutSize(Container parent) {
<span class="nc" id="L375">      synchronized (parent.getTreeLock()) {</span>
<span class="nc" id="L376">        Insets insets = parent.getInsets();</span>
<span class="nc" id="L377">        int ncomponents = parent.getComponentCount();</span>
<span class="nc" id="L378">        int nrows = rows;</span>
<span class="nc" id="L379">        int ncols = cols;</span>

<span class="nc bnc" id="L381" title="All 2 branches missed.">        if (nrows &gt; 0) {</span>
<span class="nc" id="L382">            ncols = (ncomponents + nrows - 1) / nrows;</span>
        } else {
<span class="nc" id="L384">            nrows = (ncomponents + ncols - 1) / ncols;</span>
        }
<span class="nc" id="L386">        int w = 0;</span>
<span class="nc" id="L387">        int h = 0;</span>
<span class="nc bnc" id="L388" title="All 2 branches missed.">        for (int i = 0 ; i &lt; ncomponents ; i++) {</span>
<span class="nc" id="L389">            Component comp = parent.getComponent(i);</span>
<span class="nc" id="L390">            Dimension d = comp.getMinimumSize();</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">            if (w &lt; d.width) {</span>
<span class="nc" id="L392">                w = d.width;</span>
            }
<span class="nc bnc" id="L394" title="All 2 branches missed.">            if (h &lt; d.height) {</span>
<span class="nc" id="L395">                h = d.height;</span>
            }
        }
<span class="nc" id="L398">        return new Dimension(insets.left + insets.right + ncols*w + (ncols-1)*hgap,</span>
                             insets.top + insets.bottom + nrows*h + (nrows-1)*vgap);
<span class="nc" id="L400">      }</span>
    }

    /**
     * Lays out the specified container using this layout.
     * &lt;p&gt;
     * This method reshapes the components in the specified target
     * container in order to satisfy the constraints of the
     * &lt;code&gt;GridLayout&lt;/code&gt; object.
     * &lt;p&gt;
     * The grid layout manager determines the size of individual
     * components by dividing the free space in the container into
     * equal-sized portions according to the number of rows and columns
     * in the layout. The container's free space equals the container's
     * size minus any insets and any specified horizontal or vertical
     * gap. All components in a grid layout are given the same size.
     *
     * @param      parent   the container in which to do the layout
     * @see        java.awt.Container
     * @see        java.awt.Container#doLayout
     */
    public void layoutContainer(Container parent) {
<span class="nc" id="L422">      synchronized (parent.getTreeLock()) {</span>
<span class="nc" id="L423">        Insets insets = parent.getInsets();</span>
<span class="nc" id="L424">        int ncomponents = parent.getComponentCount();</span>
<span class="nc" id="L425">        int nrows = rows;</span>
<span class="nc" id="L426">        int ncols = cols;</span>
<span class="nc" id="L427">        boolean ltr = parent.getComponentOrientation().isLeftToRight();</span>

<span class="nc bnc" id="L429" title="All 2 branches missed.">        if (ncomponents == 0) {</span>
<span class="nc" id="L430">            return;</span>
        }
<span class="nc bnc" id="L432" title="All 2 branches missed.">        if (nrows &gt; 0) {</span>
<span class="nc" id="L433">            ncols = (ncomponents + nrows - 1) / nrows;</span>
        } else {
<span class="nc" id="L435">            nrows = (ncomponents + ncols - 1) / ncols;</span>
        }
        // 4370316. To position components in the center we should:
        // 1. get an amount of extra space within Container
        // 2. incorporate half of that value to the left/top position
        // Note that we use trancating division for widthOnComponent
        // The reminder goes to extraWidthAvailable
<span class="nc" id="L442">        int totalGapsWidth = (ncols - 1) * hgap;</span>
<span class="nc" id="L443">        int widthWOInsets = parent.width - (insets.left + insets.right);</span>
<span class="nc" id="L444">        int widthOnComponent = (widthWOInsets - totalGapsWidth) / ncols;</span>
<span class="nc" id="L445">        int extraWidthAvailable = (widthWOInsets - (widthOnComponent * ncols + totalGapsWidth)) / 2;</span>

<span class="nc" id="L447">        int totalGapsHeight = (nrows - 1) * vgap;</span>
<span class="nc" id="L448">        int heightWOInsets = parent.height - (insets.top + insets.bottom);</span>
<span class="nc" id="L449">        int heightOnComponent = (heightWOInsets - totalGapsHeight) / nrows;</span>
<span class="nc" id="L450">        int extraHeightAvailable = (heightWOInsets - (heightOnComponent * nrows + totalGapsHeight)) / 2;</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">        if (ltr) {</span>
<span class="nc bnc" id="L452" title="All 2 branches missed.">            for (int c = 0, x = insets.left + extraWidthAvailable; c &lt; ncols ; c++, x += widthOnComponent + hgap) {</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">                for (int r = 0, y = insets.top + extraHeightAvailable; r &lt; nrows ; r++, y += heightOnComponent + vgap) {</span>
<span class="nc" id="L454">                    int i = r * ncols + c;</span>
<span class="nc bnc" id="L455" title="All 2 branches missed.">                    if (i &lt; ncomponents) {</span>
<span class="nc" id="L456">                        parent.getComponent(i).setBounds(x, y, widthOnComponent, heightOnComponent);</span>
                    }
                }
            }
        } else {
<span class="nc bnc" id="L461" title="All 2 branches missed.">            for (int c = 0, x = (parent.width - insets.right - widthOnComponent) - extraWidthAvailable; c &lt; ncols ; c++, x -= widthOnComponent + hgap) {</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">                for (int r = 0, y = insets.top + extraHeightAvailable; r &lt; nrows ; r++, y += heightOnComponent + vgap) {</span>
<span class="nc" id="L463">                    int i = r * ncols + c;</span>
<span class="nc bnc" id="L464" title="All 2 branches missed.">                    if (i &lt; ncomponents) {</span>
<span class="nc" id="L465">                        parent.getComponent(i).setBounds(x, y, widthOnComponent, heightOnComponent);</span>
                    }
                }
            }
        }
<span class="nc" id="L470">      }</span>
<span class="nc" id="L471">    }</span>

    /**
     * Returns the string representation of this grid layout's values.
     * @return     a string representation of this grid layout
     */
    public String toString() {
<span class="nc" id="L478">        return getClass().getName() + &quot;[hgap=&quot; + hgap + &quot;,vgap=&quot; + vgap +</span>
                                       &quot;,rows=&quot; + rows + &quot;,cols=&quot; + cols + &quot;]&quot;;
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>