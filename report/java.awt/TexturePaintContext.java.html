<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TexturePaintContext.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">java.awt</a> &gt; <span class="el_source">TexturePaintContext.java</span></div><h1>TexturePaintContext.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2007, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package java.awt;

import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import java.awt.image.ColorModel;
import java.awt.image.DirectColorModel;
import java.awt.image.IndexColorModel;
import java.awt.geom.AffineTransform;
import java.awt.geom.NoninvertibleTransformException;
import java.lang.ref.WeakReference;
import sun.awt.image.SunWritableRaster;
import sun.awt.image.IntegerInterleavedRaster;
import sun.awt.image.ByteInterleavedRaster;

abstract class TexturePaintContext implements PaintContext {
<span class="nc" id="L42">    public static ColorModel xrgbmodel =</span>
        new DirectColorModel(24, 0xff0000, 0xff00, 0xff);
<span class="nc" id="L44">    public static ColorModel argbmodel = ColorModel.getRGBdefault();</span>

    ColorModel colorModel;
    int bWidth;
    int bHeight;
    int maxWidth;

    WritableRaster outRas;

    double xOrg;
    double yOrg;
    double incXAcross;
    double incYAcross;
    double incXDown;
    double incYDown;

    int colincx;
    int colincy;
    int colincxerr;
    int colincyerr;
    int rowincx;
    int rowincy;
    int rowincxerr;
    int rowincyerr;

    public static PaintContext getContext(BufferedImage bufImg,
                                          AffineTransform xform,
                                          RenderingHints hints,
                                          Rectangle devBounds) {
<span class="nc" id="L73">        WritableRaster raster = bufImg.getRaster();</span>
<span class="nc" id="L74">        ColorModel cm = bufImg.getColorModel();</span>
<span class="nc" id="L75">        int maxw = devBounds.width;</span>
<span class="nc" id="L76">        Object val = hints.get(RenderingHints.KEY_INTERPOLATION);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">        boolean filter =</span>
            (val == null
<span class="nc bnc" id="L79" title="All 4 branches missed.">             ? (hints.get(RenderingHints.KEY_RENDERING) == RenderingHints.VALUE_RENDER_QUALITY)</span>
             : (val != RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR));
<span class="nc bnc" id="L81" title="All 4 branches missed.">        if (raster instanceof IntegerInterleavedRaster &amp;&amp;</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">            (!filter || isFilterableDCM(cm)))</span>
        {
<span class="nc" id="L84">            IntegerInterleavedRaster iir = (IntegerInterleavedRaster) raster;</span>
<span class="nc bnc" id="L85" title="All 4 branches missed.">            if (iir.getNumDataElements() == 1 &amp;&amp; iir.getPixelStride() == 1) {</span>
<span class="nc" id="L86">                return new Int(iir, cm, xform, maxw, filter);</span>
            }
<span class="nc bnc" id="L88" title="All 2 branches missed.">        } else if (raster instanceof ByteInterleavedRaster) {</span>
<span class="nc" id="L89">            ByteInterleavedRaster bir = (ByteInterleavedRaster) raster;</span>
<span class="nc bnc" id="L90" title="All 4 branches missed.">            if (bir.getNumDataElements() == 1 &amp;&amp; bir.getPixelStride() == 1) {</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">                if (filter) {</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">                    if (isFilterableICM(cm)) {</span>
<span class="nc" id="L93">                        return new ByteFilter(bir, cm, xform, maxw);</span>
                    }
                } else {
<span class="nc" id="L96">                    return new Byte(bir, cm, xform, maxw);</span>
                }
            }
        }
<span class="nc" id="L100">        return new Any(raster, cm, xform, maxw, filter);</span>
    }

    public static boolean isFilterableICM(ColorModel cm) {
<span class="nc bnc" id="L104" title="All 2 branches missed.">        if (cm instanceof IndexColorModel) {</span>
<span class="nc" id="L105">            IndexColorModel icm = (IndexColorModel) cm;</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">            if (icm.getMapSize() &lt;= 256) {</span>
<span class="nc" id="L107">                return true;</span>
            }
        }
<span class="nc" id="L110">        return false;</span>
    }

    public static boolean isFilterableDCM(ColorModel cm) {
<span class="nc bnc" id="L114" title="All 2 branches missed.">        if (cm instanceof DirectColorModel) {</span>
<span class="nc" id="L115">            DirectColorModel dcm = (DirectColorModel) cm;</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">            return (isMaskOK(dcm.getAlphaMask(), true) &amp;&amp;</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                    isMaskOK(dcm.getRedMask(), false) &amp;&amp;</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">                    isMaskOK(dcm.getGreenMask(), false) &amp;&amp;</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">                    isMaskOK(dcm.getBlueMask(), false));</span>
        }
<span class="nc" id="L121">        return false;</span>
    }

    public static boolean isMaskOK(int mask, boolean canbezero) {
<span class="nc bnc" id="L125" title="All 4 branches missed.">        if (canbezero &amp;&amp; mask == 0) {</span>
<span class="nc" id="L126">            return true;</span>
        }
<span class="nc bnc" id="L128" title="All 8 branches missed.">        return (mask == 0xff ||</span>
                mask == 0xff00 ||
                mask == 0xff0000 ||
                mask == 0xff000000);
    }

    public static ColorModel getInternedColorModel(ColorModel cm) {
<span class="nc bnc" id="L135" title="All 4 branches missed.">        if (xrgbmodel == cm || xrgbmodel.equals(cm)) {</span>
<span class="nc" id="L136">            return xrgbmodel;</span>
        }
<span class="nc bnc" id="L138" title="All 4 branches missed.">        if (argbmodel == cm || argbmodel.equals(cm)) {</span>
<span class="nc" id="L139">            return argbmodel;</span>
        }
<span class="nc" id="L141">        return cm;</span>
    }

    TexturePaintContext(ColorModel cm, AffineTransform xform,
<span class="nc" id="L145">                        int bWidth, int bHeight, int maxw) {</span>
<span class="nc" id="L146">        this.colorModel = getInternedColorModel(cm);</span>
<span class="nc" id="L147">        this.bWidth = bWidth;</span>
<span class="nc" id="L148">        this.bHeight = bHeight;</span>
<span class="nc" id="L149">        this.maxWidth = maxw;</span>

        try {
<span class="nc" id="L152">            xform = xform.createInverse();</span>
<span class="nc" id="L153">        } catch (NoninvertibleTransformException e) {</span>
<span class="nc" id="L154">            xform.setToScale(0, 0);</span>
<span class="nc" id="L155">        }</span>
<span class="nc" id="L156">        this.incXAcross = mod(xform.getScaleX(), bWidth);</span>
<span class="nc" id="L157">        this.incYAcross = mod(xform.getShearY(), bHeight);</span>
<span class="nc" id="L158">        this.incXDown = mod(xform.getShearX(), bWidth);</span>
<span class="nc" id="L159">        this.incYDown = mod(xform.getScaleY(), bHeight);</span>
<span class="nc" id="L160">        this.xOrg = xform.getTranslateX();</span>
<span class="nc" id="L161">        this.yOrg = xform.getTranslateY();</span>
<span class="nc" id="L162">        this.colincx = (int) incXAcross;</span>
<span class="nc" id="L163">        this.colincy = (int) incYAcross;</span>
<span class="nc" id="L164">        this.colincxerr = fractAsInt(incXAcross);</span>
<span class="nc" id="L165">        this.colincyerr = fractAsInt(incYAcross);</span>
<span class="nc" id="L166">        this.rowincx = (int) incXDown;</span>
<span class="nc" id="L167">        this.rowincy = (int) incYDown;</span>
<span class="nc" id="L168">        this.rowincxerr = fractAsInt(incXDown);</span>
<span class="nc" id="L169">        this.rowincyerr = fractAsInt(incYDown);</span>

<span class="nc" id="L171">    }</span>

    static int fractAsInt(double d) {
<span class="nc" id="L174">        return (int) ((d % 1.0) * Integer.MAX_VALUE);</span>
    }

    static double mod(double num, double den) {
<span class="nc" id="L178">        num = num % den;</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">        if (num &lt; 0) {</span>
<span class="nc" id="L180">            num += den;</span>
<span class="nc bnc" id="L181" title="All 2 branches missed.">            if (num &gt;= den) {</span>
                // For very small negative numerators, the answer might
                // be such a tiny bit less than den that the difference
                // is smaller than the mantissa of a double allows and
                // the result would then be rounded to den.  If that is
                // the case then we map that number to 0 as the nearest
                // modulus representation.
<span class="nc" id="L188">                num = 0;</span>
            }
        }
<span class="nc" id="L191">        return num;</span>
    }

    /**
     * Release the resources allocated for the operation.
     */
    public void dispose() {
<span class="nc" id="L198">        dropRaster(colorModel, outRas);</span>
<span class="nc" id="L199">    }</span>

    /**
     * Return the ColorModel of the output.
     */
    public ColorModel getColorModel() {
<span class="nc" id="L205">        return colorModel;</span>
    }

    /**
     * Return a Raster containing the colors generated for the graphics
     * operation.
     * @param x,y,w,h The area in device space for which colors are
     * generated.
     */
    public Raster getRaster(int x, int y, int w, int h) {
<span class="nc bnc" id="L215" title="All 2 branches missed.">        if (outRas == null ||</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">            outRas.getWidth() &lt; w ||</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">            outRas.getHeight() &lt; h)</span>
        {
            // If h==1, we will probably get lots of &quot;scanline&quot; rects
<span class="nc bnc" id="L220" title="All 2 branches missed.">            outRas = makeRaster((h == 1 ? Math.max(w, maxWidth) : w), h);</span>
        }
<span class="nc" id="L222">        double X = mod(xOrg + x * incXAcross + y * incXDown, bWidth);</span>
<span class="nc" id="L223">        double Y = mod(yOrg + x * incYAcross + y * incYDown, bHeight);</span>

<span class="nc" id="L225">        setRaster((int) X, (int) Y, fractAsInt(X), fractAsInt(Y),</span>
                  w, h, bWidth, bHeight,
                  colincx, colincxerr,
                  colincy, colincyerr,
                  rowincx, rowincxerr,
                  rowincy, rowincyerr);

<span class="nc" id="L232">        SunWritableRaster.markDirty(outRas);</span>

<span class="nc" id="L234">        return outRas;</span>
    }

    private static WeakReference&lt;Raster&gt; xrgbRasRef;
    private static WeakReference&lt;Raster&gt; argbRasRef;

    synchronized static WritableRaster makeRaster(ColorModel cm,
                                                  Raster srcRas,
                                                  int w, int h)
    {
<span class="nc bnc" id="L244" title="All 2 branches missed.">        if (xrgbmodel == cm) {</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">            if (xrgbRasRef != null) {</span>
<span class="nc" id="L246">                WritableRaster wr = (WritableRaster) xrgbRasRef.get();</span>
<span class="nc bnc" id="L247" title="All 6 branches missed.">                if (wr != null &amp;&amp; wr.getWidth() &gt;= w &amp;&amp; wr.getHeight() &gt;= h) {</span>
<span class="nc" id="L248">                    xrgbRasRef = null;</span>
<span class="nc" id="L249">                    return wr;</span>
                }
            }
            // If we are going to cache this Raster, make it non-tiny
<span class="nc bnc" id="L253" title="All 4 branches missed.">            if (w &lt;= 32 &amp;&amp; h &lt;= 32) {</span>
<span class="nc" id="L254">                w = h = 32;</span>
            }
<span class="nc bnc" id="L256" title="All 2 branches missed.">        } else if (argbmodel == cm) {</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">            if (argbRasRef != null) {</span>
<span class="nc" id="L258">                WritableRaster wr = (WritableRaster) argbRasRef.get();</span>
<span class="nc bnc" id="L259" title="All 6 branches missed.">                if (wr != null &amp;&amp; wr.getWidth() &gt;= w &amp;&amp; wr.getHeight() &gt;= h) {</span>
<span class="nc" id="L260">                    argbRasRef = null;</span>
<span class="nc" id="L261">                    return wr;</span>
                }
            }
            // If we are going to cache this Raster, make it non-tiny
<span class="nc bnc" id="L265" title="All 4 branches missed.">            if (w &lt;= 32 &amp;&amp; h &lt;= 32) {</span>
<span class="nc" id="L266">                w = h = 32;</span>
            }
        }
<span class="nc bnc" id="L269" title="All 2 branches missed.">        if (srcRas != null) {</span>
<span class="nc" id="L270">            return srcRas.createCompatibleWritableRaster(w, h);</span>
        } else {
<span class="nc" id="L272">            return cm.createCompatibleWritableRaster(w, h);</span>
        }
    }

    synchronized static void dropRaster(ColorModel cm, Raster outRas) {
<span class="nc bnc" id="L277" title="All 2 branches missed.">        if (outRas == null) {</span>
<span class="nc" id="L278">            return;</span>
        }
<span class="nc bnc" id="L280" title="All 2 branches missed.">        if (xrgbmodel == cm) {</span>
<span class="nc" id="L281">            xrgbRasRef = new WeakReference&lt;&gt;(outRas);</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">        } else if (argbmodel == cm) {</span>
<span class="nc" id="L283">            argbRasRef = new WeakReference&lt;&gt;(outRas);</span>
        }
<span class="nc" id="L285">    }</span>

    private static WeakReference&lt;Raster&gt; byteRasRef;

    synchronized static WritableRaster makeByteRaster(Raster srcRas,
                                                      int w, int h)
    {
<span class="nc bnc" id="L292" title="All 2 branches missed.">        if (byteRasRef != null) {</span>
<span class="nc" id="L293">            WritableRaster wr = (WritableRaster) byteRasRef.get();</span>
<span class="nc bnc" id="L294" title="All 6 branches missed.">            if (wr != null &amp;&amp; wr.getWidth() &gt;= w &amp;&amp; wr.getHeight() &gt;= h) {</span>
<span class="nc" id="L295">                byteRasRef = null;</span>
<span class="nc" id="L296">                return wr;</span>
            }
        }
        // If we are going to cache this Raster, make it non-tiny
<span class="nc bnc" id="L300" title="All 4 branches missed.">        if (w &lt;= 32 &amp;&amp; h &lt;= 32) {</span>
<span class="nc" id="L301">            w = h = 32;</span>
        }
<span class="nc" id="L303">        return srcRas.createCompatibleWritableRaster(w, h);</span>
    }

    synchronized static void dropByteRaster(Raster outRas) {
<span class="nc bnc" id="L307" title="All 2 branches missed.">        if (outRas == null) {</span>
<span class="nc" id="L308">            return;</span>
        }
<span class="nc" id="L310">        byteRasRef = new WeakReference&lt;&gt;(outRas);</span>
<span class="nc" id="L311">    }</span>

    public abstract WritableRaster makeRaster(int w, int h);
    public abstract void setRaster(int x, int y, int xerr, int yerr,
                                   int w, int h, int bWidth, int bHeight,
                                   int colincx, int colincxerr,
                                   int colincy, int colincyerr,
                                   int rowincx, int rowincxerr,
                                   int rowincy, int rowincyerr);

    /*
     * Blends the four ARGB values in the rgbs array using the factors
     * described by xmul and ymul in the following ratio:
     *
     *     rgbs[0] * (1-xmul) * (1-ymul) +
     *     rgbs[1] * (  xmul) * (1-ymul) +
     *     rgbs[2] * (1-xmul) * (  ymul) +
     *     rgbs[3] * (  xmul) * (  ymul)
     *
     * xmul and ymul are integer values in the half-open range [0, 2^31)
     * where 0 == 0.0 and 2^31 == 1.0.
     *
     * Note that since the range is half-open, the values are always
     * logically less than 1.0.  This makes sense because while choosing
     * pixels to blend, when the error values reach 1.0 we move to the
     * next pixel and reset them to 0.0.
     */
    public static int blend(int rgbs[], int xmul, int ymul) {
        // xmul/ymul are 31 bits wide, (0 =&gt; 2^31-1)
        // shift them to 12 bits wide, (0 =&gt; 2^12-1)
<span class="nc" id="L341">        xmul = (xmul &gt;&gt;&gt; 19);</span>
<span class="nc" id="L342">        ymul = (ymul &gt;&gt;&gt; 19);</span>
        int accumA, accumR, accumG, accumB;
<span class="nc" id="L344">        accumA = accumR = accumG = accumB = 0;</span>
<span class="nc bnc" id="L345" title="All 2 branches missed.">        for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L346">            int rgb = rgbs[i];</span>
            // The complement of the [xy]mul values (1-[xy]mul) can result
            // in new values in the range (1 =&gt; 2^12).  Thus for any given
            // loop iteration, the values could be anywhere in (0 =&gt; 2^12).
<span class="nc" id="L350">            xmul = (1&lt;&lt;12) - xmul;</span>
<span class="nc bnc" id="L351" title="All 2 branches missed.">            if ((i &amp; 1) == 0) {</span>
<span class="nc" id="L352">                ymul = (1&lt;&lt;12) - ymul;</span>
            }
            // xmul and ymul are each 12 bits (0 =&gt; 2^12)
            // factor is thus 24 bits (0 =&gt; 2^24)
<span class="nc" id="L356">            int factor = xmul * ymul;</span>
<span class="nc bnc" id="L357" title="All 2 branches missed.">            if (factor != 0) {</span>
                // accum variables will accumulate 32 bits
                // bytes extracted from rgb fit in 8 bits (0 =&gt; 255)
                // byte * factor thus fits in 32 bits (0 =&gt; 255 * 2^24)
<span class="nc" id="L361">                accumA += (((rgb &gt;&gt;&gt; 24)       ) * factor);</span>
<span class="nc" id="L362">                accumR += (((rgb &gt;&gt;&gt; 16) &amp; 0xff) * factor);</span>
<span class="nc" id="L363">                accumG += (((rgb &gt;&gt;&gt;  8) &amp; 0xff) * factor);</span>
<span class="nc" id="L364">                accumB += (((rgb       ) &amp; 0xff) * factor);</span>
            }
        }
<span class="nc" id="L367">        return ((((accumA + (1&lt;&lt;23)) &gt;&gt;&gt; 24) &lt;&lt; 24) |</span>
                (((accumR + (1&lt;&lt;23)) &gt;&gt;&gt; 24) &lt;&lt; 16) |
                (((accumG + (1&lt;&lt;23)) &gt;&gt;&gt; 24) &lt;&lt;  8) |
                (((accumB + (1&lt;&lt;23)) &gt;&gt;&gt; 24)      ));
    }

    static class Int extends TexturePaintContext {
        IntegerInterleavedRaster srcRas;
        int inData[];
        int inOff;
        int inSpan;
        int outData[];
        int outOff;
        int outSpan;
        boolean filter;

        public Int(IntegerInterleavedRaster srcRas, ColorModel cm,
                   AffineTransform xform, int maxw, boolean filter)
        {
<span class="nc" id="L386">            super(cm, xform, srcRas.getWidth(), srcRas.getHeight(), maxw);</span>
<span class="nc" id="L387">            this.srcRas = srcRas;</span>
<span class="nc" id="L388">            this.inData = srcRas.getDataStorage();</span>
<span class="nc" id="L389">            this.inSpan = srcRas.getScanlineStride();</span>
<span class="nc" id="L390">            this.inOff = srcRas.getDataOffset(0);</span>
<span class="nc" id="L391">            this.filter = filter;</span>
<span class="nc" id="L392">        }</span>

        public WritableRaster makeRaster(int w, int h) {
<span class="nc" id="L395">            WritableRaster ras = makeRaster(colorModel, srcRas, w, h);</span>
<span class="nc" id="L396">            IntegerInterleavedRaster iiRas = (IntegerInterleavedRaster) ras;</span>
<span class="nc" id="L397">            outData = iiRas.getDataStorage();</span>
<span class="nc" id="L398">            outSpan = iiRas.getScanlineStride();</span>
<span class="nc" id="L399">            outOff = iiRas.getDataOffset(0);</span>
<span class="nc" id="L400">            return ras;</span>
        }

        public void setRaster(int x, int y, int xerr, int yerr,
                              int w, int h, int bWidth, int bHeight,
                              int colincx, int colincxerr,
                              int colincy, int colincyerr,
                              int rowincx, int rowincxerr,
                              int rowincy, int rowincyerr) {
<span class="nc" id="L409">            int[] inData = this.inData;</span>
<span class="nc" id="L410">            int[] outData = this.outData;</span>
<span class="nc" id="L411">            int out = outOff;</span>
<span class="nc" id="L412">            int inSpan = this.inSpan;</span>
<span class="nc" id="L413">            int inOff = this.inOff;</span>
<span class="nc" id="L414">            int outSpan = this.outSpan;</span>
<span class="nc" id="L415">            boolean filter = this.filter;</span>
<span class="nc bnc" id="L416" title="All 10 branches missed.">            boolean normalx = (colincx == 1 &amp;&amp; colincxerr == 0 &amp;&amp;</span>
                               colincy == 0 &amp;&amp; colincyerr == 0) &amp;&amp; !filter;
<span class="nc" id="L418">            int rowx = x;</span>
<span class="nc" id="L419">            int rowy = y;</span>
<span class="nc" id="L420">            int rowxerr = xerr;</span>
<span class="nc" id="L421">            int rowyerr = yerr;</span>
<span class="nc bnc" id="L422" title="All 2 branches missed.">            if (normalx) {</span>
<span class="nc" id="L423">                outSpan -= w;</span>
            }
<span class="nc bnc" id="L425" title="All 2 branches missed.">            int rgbs[] = filter ? new int[4] : null;</span>
<span class="nc bnc" id="L426" title="All 2 branches missed.">            for (int j = 0; j &lt; h; j++) {</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">                if (normalx) {</span>
<span class="nc" id="L428">                    int in = inOff + rowy * inSpan + bWidth;</span>
<span class="nc" id="L429">                    x = bWidth - rowx;</span>
<span class="nc" id="L430">                    out += w;</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">                    if (bWidth &gt;= 32) {</span>
<span class="nc" id="L432">                        int i = w;</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">                        while (i &gt; 0) {</span>
<span class="nc bnc" id="L434" title="All 2 branches missed.">                            int copyw = (i &lt; x) ? i : x;</span>
<span class="nc" id="L435">                            System.arraycopy(inData, in - x,</span>
                                             outData, out - i,
                                             copyw);
<span class="nc" id="L438">                            i -= copyw;</span>
<span class="nc bnc" id="L439" title="All 2 branches missed.">                            if ((x -= copyw) == 0) {</span>
<span class="nc" id="L440">                                x = bWidth;</span>
                            }
<span class="nc" id="L442">                        }</span>
<span class="nc" id="L443">                    } else {</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">                        for (int i = w; i &gt; 0; i--) {</span>
<span class="nc" id="L445">                            outData[out - i] = inData[in - x];</span>
<span class="nc bnc" id="L446" title="All 2 branches missed.">                            if (--x == 0) {</span>
<span class="nc" id="L447">                                x = bWidth;</span>
                            }
                        }
                    }
<span class="nc" id="L451">                } else {</span>
<span class="nc" id="L452">                    x = rowx;</span>
<span class="nc" id="L453">                    y = rowy;</span>
<span class="nc" id="L454">                    xerr = rowxerr;</span>
<span class="nc" id="L455">                    yerr = rowyerr;</span>
<span class="nc bnc" id="L456" title="All 2 branches missed.">                    for (int i = 0; i &lt; w; i++) {</span>
<span class="nc bnc" id="L457" title="All 2 branches missed.">                        if (filter) {</span>
                            int nextx, nexty;
<span class="nc bnc" id="L459" title="All 2 branches missed.">                            if ((nextx = x + 1) &gt;= bWidth) {</span>
<span class="nc" id="L460">                                nextx = 0;</span>
                            }
<span class="nc bnc" id="L462" title="All 2 branches missed.">                            if ((nexty = y + 1) &gt;= bHeight) {</span>
<span class="nc" id="L463">                                nexty = 0;</span>
                            }
<span class="nc" id="L465">                            rgbs[0] = inData[inOff + y * inSpan + x];</span>
<span class="nc" id="L466">                            rgbs[1] = inData[inOff + y * inSpan + nextx];</span>
<span class="nc" id="L467">                            rgbs[2] = inData[inOff + nexty * inSpan + x];</span>
<span class="nc" id="L468">                            rgbs[3] = inData[inOff + nexty * inSpan + nextx];</span>
<span class="nc" id="L469">                            outData[out + i] =</span>
<span class="nc" id="L470">                                TexturePaintContext.blend(rgbs, xerr, yerr);</span>
<span class="nc" id="L471">                        } else {</span>
<span class="nc" id="L472">                            outData[out + i] = inData[inOff + y * inSpan + x];</span>
                        }
<span class="nc bnc" id="L474" title="All 2 branches missed.">                        if ((xerr += colincxerr) &lt; 0) {</span>
<span class="nc" id="L475">                            xerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L476">                            x++;</span>
                        }
<span class="nc bnc" id="L478" title="All 2 branches missed.">                        if ((x += colincx) &gt;= bWidth) {</span>
<span class="nc" id="L479">                            x -= bWidth;</span>
                        }
<span class="nc bnc" id="L481" title="All 2 branches missed.">                        if ((yerr += colincyerr) &lt; 0) {</span>
<span class="nc" id="L482">                            yerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L483">                            y++;</span>
                        }
<span class="nc bnc" id="L485" title="All 2 branches missed.">                        if ((y += colincy) &gt;= bHeight) {</span>
<span class="nc" id="L486">                            y -= bHeight;</span>
                        }
                    }
                }
<span class="nc bnc" id="L490" title="All 2 branches missed.">                if ((rowxerr += rowincxerr) &lt; 0) {</span>
<span class="nc" id="L491">                    rowxerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L492">                    rowx++;</span>
                }
<span class="nc bnc" id="L494" title="All 2 branches missed.">                if ((rowx += rowincx) &gt;= bWidth) {</span>
<span class="nc" id="L495">                    rowx -= bWidth;</span>
                }
<span class="nc bnc" id="L497" title="All 2 branches missed.">                if ((rowyerr += rowincyerr) &lt; 0) {</span>
<span class="nc" id="L498">                    rowyerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L499">                    rowy++;</span>
                }
<span class="nc bnc" id="L501" title="All 2 branches missed.">                if ((rowy += rowincy) &gt;= bHeight) {</span>
<span class="nc" id="L502">                    rowy -= bHeight;</span>
                }
<span class="nc" id="L504">                out += outSpan;</span>
            }
<span class="nc" id="L506">        }</span>
    }

    static class Byte extends TexturePaintContext {
        ByteInterleavedRaster srcRas;
        byte inData[];
        int inOff;
        int inSpan;
        byte outData[];
        int outOff;
        int outSpan;

        public Byte(ByteInterleavedRaster srcRas, ColorModel cm,
                    AffineTransform xform, int maxw)
        {
<span class="nc" id="L521">            super(cm, xform, srcRas.getWidth(), srcRas.getHeight(), maxw);</span>
<span class="nc" id="L522">            this.srcRas = srcRas;</span>
<span class="nc" id="L523">            this.inData = srcRas.getDataStorage();</span>
<span class="nc" id="L524">            this.inSpan = srcRas.getScanlineStride();</span>
<span class="nc" id="L525">            this.inOff = srcRas.getDataOffset(0);</span>
<span class="nc" id="L526">        }</span>

        public WritableRaster makeRaster(int w, int h) {
<span class="nc" id="L529">            WritableRaster ras = makeByteRaster(srcRas, w, h);</span>
<span class="nc" id="L530">            ByteInterleavedRaster biRas = (ByteInterleavedRaster) ras;</span>
<span class="nc" id="L531">            outData = biRas.getDataStorage();</span>
<span class="nc" id="L532">            outSpan = biRas.getScanlineStride();</span>
<span class="nc" id="L533">            outOff = biRas.getDataOffset(0);</span>
<span class="nc" id="L534">            return ras;</span>
        }

        public void dispose() {
<span class="nc" id="L538">            dropByteRaster(outRas);</span>
<span class="nc" id="L539">        }</span>

        public void setRaster(int x, int y, int xerr, int yerr,
                              int w, int h, int bWidth, int bHeight,
                              int colincx, int colincxerr,
                              int colincy, int colincyerr,
                              int rowincx, int rowincxerr,
                              int rowincy, int rowincyerr) {
<span class="nc" id="L547">            byte[] inData = this.inData;</span>
<span class="nc" id="L548">            byte[] outData = this.outData;</span>
<span class="nc" id="L549">            int out = outOff;</span>
<span class="nc" id="L550">            int inSpan = this.inSpan;</span>
<span class="nc" id="L551">            int inOff = this.inOff;</span>
<span class="nc" id="L552">            int outSpan = this.outSpan;</span>
<span class="nc bnc" id="L553" title="All 8 branches missed.">            boolean normalx = (colincx == 1 &amp;&amp; colincxerr == 0 &amp;&amp;</span>
                               colincy == 0 &amp;&amp; colincyerr == 0);
<span class="nc" id="L555">            int rowx = x;</span>
<span class="nc" id="L556">            int rowy = y;</span>
<span class="nc" id="L557">            int rowxerr = xerr;</span>
<span class="nc" id="L558">            int rowyerr = yerr;</span>
<span class="nc bnc" id="L559" title="All 2 branches missed.">            if (normalx) {</span>
<span class="nc" id="L560">                outSpan -= w;</span>
            }
<span class="nc bnc" id="L562" title="All 2 branches missed.">            for (int j = 0; j &lt; h; j++) {</span>
<span class="nc bnc" id="L563" title="All 2 branches missed.">                if (normalx) {</span>
<span class="nc" id="L564">                    int in = inOff + rowy * inSpan + bWidth;</span>
<span class="nc" id="L565">                    x = bWidth - rowx;</span>
<span class="nc" id="L566">                    out += w;</span>
<span class="nc bnc" id="L567" title="All 2 branches missed.">                    if (bWidth &gt;= 32) {</span>
<span class="nc" id="L568">                        int i = w;</span>
<span class="nc bnc" id="L569" title="All 2 branches missed.">                        while (i &gt; 0) {</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">                            int copyw = (i &lt; x) ? i : x;</span>
<span class="nc" id="L571">                            System.arraycopy(inData, in - x,</span>
                                             outData, out - i,
                                             copyw);
<span class="nc" id="L574">                            i -= copyw;</span>
<span class="nc bnc" id="L575" title="All 2 branches missed.">                            if ((x -= copyw) == 0) {</span>
<span class="nc" id="L576">                                x = bWidth;</span>
                            }
<span class="nc" id="L578">                        }</span>
<span class="nc" id="L579">                    } else {</span>
<span class="nc bnc" id="L580" title="All 2 branches missed.">                        for (int i = w; i &gt; 0; i--) {</span>
<span class="nc" id="L581">                            outData[out - i] = inData[in - x];</span>
<span class="nc bnc" id="L582" title="All 2 branches missed.">                            if (--x == 0) {</span>
<span class="nc" id="L583">                                x = bWidth;</span>
                            }
                        }
                    }
<span class="nc" id="L587">                } else {</span>
<span class="nc" id="L588">                    x = rowx;</span>
<span class="nc" id="L589">                    y = rowy;</span>
<span class="nc" id="L590">                    xerr = rowxerr;</span>
<span class="nc" id="L591">                    yerr = rowyerr;</span>
<span class="nc bnc" id="L592" title="All 2 branches missed.">                    for (int i = 0; i &lt; w; i++) {</span>
<span class="nc" id="L593">                        outData[out + i] = inData[inOff + y * inSpan + x];</span>
<span class="nc bnc" id="L594" title="All 2 branches missed.">                        if ((xerr += colincxerr) &lt; 0) {</span>
<span class="nc" id="L595">                            xerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L596">                            x++;</span>
                        }
<span class="nc bnc" id="L598" title="All 2 branches missed.">                        if ((x += colincx) &gt;= bWidth) {</span>
<span class="nc" id="L599">                            x -= bWidth;</span>
                        }
<span class="nc bnc" id="L601" title="All 2 branches missed.">                        if ((yerr += colincyerr) &lt; 0) {</span>
<span class="nc" id="L602">                            yerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L603">                            y++;</span>
                        }
<span class="nc bnc" id="L605" title="All 2 branches missed.">                        if ((y += colincy) &gt;= bHeight) {</span>
<span class="nc" id="L606">                            y -= bHeight;</span>
                        }
                    }
                }
<span class="nc bnc" id="L610" title="All 2 branches missed.">                if ((rowxerr += rowincxerr) &lt; 0) {</span>
<span class="nc" id="L611">                    rowxerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L612">                    rowx++;</span>
                }
<span class="nc bnc" id="L614" title="All 2 branches missed.">                if ((rowx += rowincx) &gt;= bWidth) {</span>
<span class="nc" id="L615">                    rowx -= bWidth;</span>
                }
<span class="nc bnc" id="L617" title="All 2 branches missed.">                if ((rowyerr += rowincyerr) &lt; 0) {</span>
<span class="nc" id="L618">                    rowyerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L619">                    rowy++;</span>
                }
<span class="nc bnc" id="L621" title="All 2 branches missed.">                if ((rowy += rowincy) &gt;= bHeight) {</span>
<span class="nc" id="L622">                    rowy -= bHeight;</span>
                }
<span class="nc" id="L624">                out += outSpan;</span>
            }
<span class="nc" id="L626">        }</span>
    }

    static class ByteFilter extends TexturePaintContext {
        ByteInterleavedRaster srcRas;
        int inPalette[];
        byte inData[];
        int inOff;
        int inSpan;
        int outData[];
        int outOff;
        int outSpan;

        public ByteFilter(ByteInterleavedRaster srcRas, ColorModel cm,
                          AffineTransform xform, int maxw)
        {
<span class="nc bnc" id="L642" title="All 2 branches missed.">            super((cm.getTransparency() == Transparency.OPAQUE</span>
                   ? xrgbmodel : argbmodel),
<span class="nc" id="L644">                  xform, srcRas.getWidth(), srcRas.getHeight(), maxw);</span>
<span class="nc" id="L645">            this.inPalette = new int[256];</span>
<span class="nc" id="L646">            ((IndexColorModel) cm).getRGBs(this.inPalette);</span>
<span class="nc" id="L647">            this.srcRas = srcRas;</span>
<span class="nc" id="L648">            this.inData = srcRas.getDataStorage();</span>
<span class="nc" id="L649">            this.inSpan = srcRas.getScanlineStride();</span>
<span class="nc" id="L650">            this.inOff = srcRas.getDataOffset(0);</span>
<span class="nc" id="L651">        }</span>

        public WritableRaster makeRaster(int w, int h) {
            // Note that we do not pass srcRas to makeRaster since it
            // is a Byte Raster and this colorModel needs an Int Raster
<span class="nc" id="L656">            WritableRaster ras = makeRaster(colorModel, null, w, h);</span>
<span class="nc" id="L657">            IntegerInterleavedRaster iiRas = (IntegerInterleavedRaster) ras;</span>
<span class="nc" id="L658">            outData = iiRas.getDataStorage();</span>
<span class="nc" id="L659">            outSpan = iiRas.getScanlineStride();</span>
<span class="nc" id="L660">            outOff = iiRas.getDataOffset(0);</span>
<span class="nc" id="L661">            return ras;</span>
        }

        public void setRaster(int x, int y, int xerr, int yerr,
                              int w, int h, int bWidth, int bHeight,
                              int colincx, int colincxerr,
                              int colincy, int colincyerr,
                              int rowincx, int rowincxerr,
                              int rowincy, int rowincyerr) {
<span class="nc" id="L670">            byte[] inData = this.inData;</span>
<span class="nc" id="L671">            int[] outData = this.outData;</span>
<span class="nc" id="L672">            int out = outOff;</span>
<span class="nc" id="L673">            int inSpan = this.inSpan;</span>
<span class="nc" id="L674">            int inOff = this.inOff;</span>
<span class="nc" id="L675">            int outSpan = this.outSpan;</span>
<span class="nc" id="L676">            int rowx = x;</span>
<span class="nc" id="L677">            int rowy = y;</span>
<span class="nc" id="L678">            int rowxerr = xerr;</span>
<span class="nc" id="L679">            int rowyerr = yerr;</span>
<span class="nc" id="L680">            int rgbs[] = new int[4];</span>
<span class="nc bnc" id="L681" title="All 2 branches missed.">            for (int j = 0; j &lt; h; j++) {</span>
<span class="nc" id="L682">                x = rowx;</span>
<span class="nc" id="L683">                y = rowy;</span>
<span class="nc" id="L684">                xerr = rowxerr;</span>
<span class="nc" id="L685">                yerr = rowyerr;</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">                for (int i = 0; i &lt; w; i++) {</span>
                    int nextx, nexty;
<span class="nc bnc" id="L688" title="All 2 branches missed.">                    if ((nextx = x + 1) &gt;= bWidth) {</span>
<span class="nc" id="L689">                        nextx = 0;</span>
                    }
<span class="nc bnc" id="L691" title="All 2 branches missed.">                    if ((nexty = y + 1) &gt;= bHeight) {</span>
<span class="nc" id="L692">                        nexty = 0;</span>
                    }
<span class="nc" id="L694">                    rgbs[0] = inPalette[0xff &amp; inData[inOff + x +</span>
                                                      inSpan * y]];
<span class="nc" id="L696">                    rgbs[1] = inPalette[0xff &amp; inData[inOff + nextx +</span>
                                                      inSpan * y]];
<span class="nc" id="L698">                    rgbs[2] = inPalette[0xff &amp; inData[inOff + x +</span>
                                                      inSpan * nexty]];
<span class="nc" id="L700">                    rgbs[3] = inPalette[0xff &amp; inData[inOff + nextx +</span>
                                                      inSpan * nexty]];
<span class="nc" id="L702">                    outData[out + i] =</span>
<span class="nc" id="L703">                        TexturePaintContext.blend(rgbs, xerr, yerr);</span>
<span class="nc bnc" id="L704" title="All 2 branches missed.">                    if ((xerr += colincxerr) &lt; 0) {</span>
<span class="nc" id="L705">                        xerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L706">                        x++;</span>
                    }
<span class="nc bnc" id="L708" title="All 2 branches missed.">                    if ((x += colincx) &gt;= bWidth) {</span>
<span class="nc" id="L709">                        x -= bWidth;</span>
                    }
<span class="nc bnc" id="L711" title="All 2 branches missed.">                    if ((yerr += colincyerr) &lt; 0) {</span>
<span class="nc" id="L712">                        yerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L713">                        y++;</span>
                    }
<span class="nc bnc" id="L715" title="All 2 branches missed.">                    if ((y += colincy) &gt;= bHeight) {</span>
<span class="nc" id="L716">                        y -= bHeight;</span>
                    }
                }
<span class="nc bnc" id="L719" title="All 2 branches missed.">                if ((rowxerr += rowincxerr) &lt; 0) {</span>
<span class="nc" id="L720">                    rowxerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L721">                    rowx++;</span>
                }
<span class="nc bnc" id="L723" title="All 2 branches missed.">                if ((rowx += rowincx) &gt;= bWidth) {</span>
<span class="nc" id="L724">                    rowx -= bWidth;</span>
                }
<span class="nc bnc" id="L726" title="All 2 branches missed.">                if ((rowyerr += rowincyerr) &lt; 0) {</span>
<span class="nc" id="L727">                    rowyerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L728">                    rowy++;</span>
                }
<span class="nc bnc" id="L730" title="All 2 branches missed.">                if ((rowy += rowincy) &gt;= bHeight) {</span>
<span class="nc" id="L731">                    rowy -= bHeight;</span>
                }
<span class="nc" id="L733">                out += outSpan;</span>
            }
<span class="nc" id="L735">        }</span>
    }

    static class Any extends TexturePaintContext {
        WritableRaster srcRas;
        boolean filter;

        public Any(WritableRaster srcRas, ColorModel cm,
                   AffineTransform xform, int maxw, boolean filter)
        {
<span class="nc" id="L745">            super(cm, xform, srcRas.getWidth(), srcRas.getHeight(), maxw);</span>
<span class="nc" id="L746">            this.srcRas = srcRas;</span>
<span class="nc" id="L747">            this.filter = filter;</span>
<span class="nc" id="L748">        }</span>

        public WritableRaster makeRaster(int w, int h) {
<span class="nc" id="L751">            return makeRaster(colorModel, srcRas, w, h);</span>
        }

        public void setRaster(int x, int y, int xerr, int yerr,
                              int w, int h, int bWidth, int bHeight,
                              int colincx, int colincxerr,
                              int colincy, int colincyerr,
                              int rowincx, int rowincxerr,
                              int rowincy, int rowincyerr) {
<span class="nc" id="L760">            Object data = null;</span>
<span class="nc" id="L761">            int rowx = x;</span>
<span class="nc" id="L762">            int rowy = y;</span>
<span class="nc" id="L763">            int rowxerr = xerr;</span>
<span class="nc" id="L764">            int rowyerr = yerr;</span>
<span class="nc" id="L765">            WritableRaster srcRas = this.srcRas;</span>
<span class="nc" id="L766">            WritableRaster outRas = this.outRas;</span>
<span class="nc bnc" id="L767" title="All 2 branches missed.">            int rgbs[] = filter ? new int[4] : null;</span>
<span class="nc bnc" id="L768" title="All 2 branches missed.">            for (int j = 0; j &lt; h; j++) {</span>
<span class="nc" id="L769">                x = rowx;</span>
<span class="nc" id="L770">                y = rowy;</span>
<span class="nc" id="L771">                xerr = rowxerr;</span>
<span class="nc" id="L772">                yerr = rowyerr;</span>
<span class="nc bnc" id="L773" title="All 2 branches missed.">                for (int i = 0; i &lt; w; i++) {</span>
<span class="nc" id="L774">                    data = srcRas.getDataElements(x, y, data);</span>
<span class="nc bnc" id="L775" title="All 2 branches missed.">                    if (filter) {</span>
                        int nextx, nexty;
<span class="nc bnc" id="L777" title="All 2 branches missed.">                        if ((nextx = x + 1) &gt;= bWidth) {</span>
<span class="nc" id="L778">                            nextx = 0;</span>
                        }
<span class="nc bnc" id="L780" title="All 2 branches missed.">                        if ((nexty = y + 1) &gt;= bHeight) {</span>
<span class="nc" id="L781">                            nexty = 0;</span>
                        }
<span class="nc" id="L783">                        rgbs[0] = colorModel.getRGB(data);</span>
<span class="nc" id="L784">                        data = srcRas.getDataElements(nextx, y, data);</span>
<span class="nc" id="L785">                        rgbs[1] = colorModel.getRGB(data);</span>
<span class="nc" id="L786">                        data = srcRas.getDataElements(x, nexty, data);</span>
<span class="nc" id="L787">                        rgbs[2] = colorModel.getRGB(data);</span>
<span class="nc" id="L788">                        data = srcRas.getDataElements(nextx, nexty, data);</span>
<span class="nc" id="L789">                        rgbs[3] = colorModel.getRGB(data);</span>
<span class="nc" id="L790">                        int rgb =</span>
<span class="nc" id="L791">                            TexturePaintContext.blend(rgbs, xerr, yerr);</span>
<span class="nc" id="L792">                        data = colorModel.getDataElements(rgb, data);</span>
                    }
<span class="nc" id="L794">                    outRas.setDataElements(i, j, data);</span>
<span class="nc bnc" id="L795" title="All 2 branches missed.">                    if ((xerr += colincxerr) &lt; 0) {</span>
<span class="nc" id="L796">                        xerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L797">                        x++;</span>
                    }
<span class="nc bnc" id="L799" title="All 2 branches missed.">                    if ((x += colincx) &gt;= bWidth) {</span>
<span class="nc" id="L800">                        x -= bWidth;</span>
                    }
<span class="nc bnc" id="L802" title="All 2 branches missed.">                    if ((yerr += colincyerr) &lt; 0) {</span>
<span class="nc" id="L803">                        yerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L804">                        y++;</span>
                    }
<span class="nc bnc" id="L806" title="All 2 branches missed.">                    if ((y += colincy) &gt;= bHeight) {</span>
<span class="nc" id="L807">                        y -= bHeight;</span>
                    }
                }
<span class="nc bnc" id="L810" title="All 2 branches missed.">                if ((rowxerr += rowincxerr) &lt; 0) {</span>
<span class="nc" id="L811">                    rowxerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L812">                    rowx++;</span>
                }
<span class="nc bnc" id="L814" title="All 2 branches missed.">                if ((rowx += rowincx) &gt;= bWidth) {</span>
<span class="nc" id="L815">                    rowx -= bWidth;</span>
                }
<span class="nc bnc" id="L817" title="All 2 branches missed.">                if ((rowyerr += rowincyerr) &lt; 0) {</span>
<span class="nc" id="L818">                    rowyerr &amp;= Integer.MAX_VALUE;</span>
<span class="nc" id="L819">                    rowy++;</span>
                }
<span class="nc bnc" id="L821" title="All 2 branches missed.">                if ((rowy += rowincy) &gt;= bHeight) {</span>
<span class="nc" id="L822">                    rowy -= bHeight;</span>
                }
            }
<span class="nc" id="L825">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>