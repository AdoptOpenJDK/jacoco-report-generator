<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DefaultTableModel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.table</a> &gt; <span class="el_source">DefaultTableModel.java</span></div><h1>DefaultTableModel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.table;

import java.io.Serializable;
import java.util.Vector;
import java.util.Enumeration;
import javax.swing.event.TableModelEvent;


/**
 * This is an implementation of &lt;code&gt;TableModel&lt;/code&gt; that
 * uses a &lt;code&gt;Vector&lt;/code&gt; of &lt;code&gt;Vectors&lt;/code&gt; to store the
 * cell value objects.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt; &lt;code&gt;DefaultTableModel&lt;/code&gt; returns a
 * column class of &lt;code&gt;Object&lt;/code&gt;.  When
 * &lt;code&gt;DefaultTableModel&lt;/code&gt; is used with a
 * &lt;code&gt;TableRowSorter&lt;/code&gt; this will result in extensive use of
 * &lt;code&gt;toString&lt;/code&gt;, which for non-&lt;code&gt;String&lt;/code&gt; data types
 * is expensive.  If you use &lt;code&gt;DefaultTableModel&lt;/code&gt; with a
 * &lt;code&gt;TableRowSorter&lt;/code&gt; you are strongly encouraged to override
 * &lt;code&gt;getColumnClass&lt;/code&gt; to return the appropriate type.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author Philip Milne
 *
 * @see TableModel
 * @see #getDataVector
 */
public class DefaultTableModel extends AbstractTableModel implements Serializable {

//
// Instance Variables
//

    /**
     * The &lt;code&gt;Vector&lt;/code&gt; of &lt;code&gt;Vectors&lt;/code&gt; of
     * &lt;code&gt;Object&lt;/code&gt; values.
     */
    protected Vector    dataVector;

    /** The &lt;code&gt;Vector&lt;/code&gt; of column identifiers. */
    protected Vector    columnIdentifiers;

//
// Constructors
//

    /**
     *  Constructs a default &lt;code&gt;DefaultTableModel&lt;/code&gt;
     *  which is a table of zero columns and zero rows.
     */
    public DefaultTableModel() {
<span class="nc" id="L86">        this(0, 0);</span>
<span class="nc" id="L87">    }</span>

    private static Vector newVector(int size) {
<span class="nc" id="L90">        Vector v = new Vector(size);</span>
<span class="nc" id="L91">        v.setSize(size);</span>
<span class="nc" id="L92">        return v;</span>
    }

    /**
     *  Constructs a &lt;code&gt;DefaultTableModel&lt;/code&gt; with
     *  &lt;code&gt;rowCount&lt;/code&gt; and &lt;code&gt;columnCount&lt;/code&gt; of
     *  &lt;code&gt;null&lt;/code&gt; object values.
     *
     * @param rowCount           the number of rows the table holds
     * @param columnCount        the number of columns the table holds
     *
     * @see #setValueAt
     */
    public DefaultTableModel(int rowCount, int columnCount) {
<span class="nc" id="L106">        this(newVector(columnCount), rowCount);</span>
<span class="nc" id="L107">    }</span>

    /**
     *  Constructs a &lt;code&gt;DefaultTableModel&lt;/code&gt; with as many columns
     *  as there are elements in &lt;code&gt;columnNames&lt;/code&gt;
     *  and &lt;code&gt;rowCount&lt;/code&gt; of &lt;code&gt;null&lt;/code&gt;
     *  object values.  Each column's name will be taken from
     *  the &lt;code&gt;columnNames&lt;/code&gt; vector.
     *
     * @param columnNames       &lt;code&gt;vector&lt;/code&gt; containing the names
     *                          of the new columns; if this is
     *                          &lt;code&gt;null&lt;/code&gt; then the model has no columns
     * @param rowCount           the number of rows the table holds
     * @see #setDataVector
     * @see #setValueAt
     */
<span class="nc" id="L123">    public DefaultTableModel(Vector columnNames, int rowCount) {</span>
<span class="nc" id="L124">        setDataVector(newVector(rowCount), columnNames);</span>
<span class="nc" id="L125">    }</span>

    /**
     *  Constructs a &lt;code&gt;DefaultTableModel&lt;/code&gt; with as many
     *  columns as there are elements in &lt;code&gt;columnNames&lt;/code&gt;
     *  and &lt;code&gt;rowCount&lt;/code&gt; of &lt;code&gt;null&lt;/code&gt;
     *  object values.  Each column's name will be taken from
     *  the &lt;code&gt;columnNames&lt;/code&gt; array.
     *
     * @param columnNames       &lt;code&gt;array&lt;/code&gt; containing the names
     *                          of the new columns; if this is
     *                          &lt;code&gt;null&lt;/code&gt; then the model has no columns
     * @param rowCount           the number of rows the table holds
     * @see #setDataVector
     * @see #setValueAt
     */
    public DefaultTableModel(Object[] columnNames, int rowCount) {
<span class="nc" id="L142">        this(convertToVector(columnNames), rowCount);</span>
<span class="nc" id="L143">    }</span>

    /**
     *  Constructs a &lt;code&gt;DefaultTableModel&lt;/code&gt; and initializes the table
     *  by passing &lt;code&gt;data&lt;/code&gt; and &lt;code&gt;columnNames&lt;/code&gt;
     *  to the &lt;code&gt;setDataVector&lt;/code&gt; method.
     *
     * @param data              the data of the table, a &lt;code&gt;Vector&lt;/code&gt;
     *                          of &lt;code&gt;Vector&lt;/code&gt;s of &lt;code&gt;Object&lt;/code&gt;
     *                          values
     * @param columnNames       &lt;code&gt;vector&lt;/code&gt; containing the names
     *                          of the new columns
     * @see #getDataVector
     * @see #setDataVector
     */
<span class="nc" id="L158">    public DefaultTableModel(Vector data, Vector columnNames) {</span>
<span class="nc" id="L159">        setDataVector(data, columnNames);</span>
<span class="nc" id="L160">    }</span>

    /**
     *  Constructs a &lt;code&gt;DefaultTableModel&lt;/code&gt; and initializes the table
     *  by passing &lt;code&gt;data&lt;/code&gt; and &lt;code&gt;columnNames&lt;/code&gt;
     *  to the &lt;code&gt;setDataVector&lt;/code&gt;
     *  method. The first index in the &lt;code&gt;Object[][]&lt;/code&gt; array is
     *  the row index and the second is the column index.
     *
     * @param data              the data of the table
     * @param columnNames       the names of the columns
     * @see #getDataVector
     * @see #setDataVector
     */
<span class="nc" id="L174">    public DefaultTableModel(Object[][] data, Object[] columnNames) {</span>
<span class="nc" id="L175">        setDataVector(data, columnNames);</span>
<span class="nc" id="L176">    }</span>

    /**
     *  Returns the &lt;code&gt;Vector&lt;/code&gt; of &lt;code&gt;Vectors&lt;/code&gt;
     *  that contains the table's
     *  data values.  The vectors contained in the outer vector are
     *  each a single row of values.  In other words, to get to the cell
     *  at row 1, column 5: &lt;p&gt;
     *
     *  &lt;code&gt;((Vector)getDataVector().elementAt(1)).elementAt(5);&lt;/code&gt;&lt;p&gt;
     *
     * @return  the vector of vectors containing the tables data values
     *
     * @see #newDataAvailable
     * @see #newRowsAdded
     * @see #setDataVector
     */
    public Vector getDataVector() {
<span class="nc" id="L194">        return dataVector;</span>
    }

    private static Vector nonNullVector(Vector v) {
<span class="nc bnc" id="L198" title="All 2 branches missed.">        return (v != null) ? v : new Vector();</span>
    }

    /**
     *  Replaces the current &lt;code&gt;dataVector&lt;/code&gt; instance variable
     *  with the new &lt;code&gt;Vector&lt;/code&gt; of rows, &lt;code&gt;dataVector&lt;/code&gt;.
     *  Each row is represented in &lt;code&gt;dataVector&lt;/code&gt; as a
     *  &lt;code&gt;Vector&lt;/code&gt; of &lt;code&gt;Object&lt;/code&gt; values.
     *  &lt;code&gt;columnIdentifiers&lt;/code&gt; are the names of the new
     *  columns.  The first name in &lt;code&gt;columnIdentifiers&lt;/code&gt; is
     *  mapped to column 0 in &lt;code&gt;dataVector&lt;/code&gt;. Each row in
     *  &lt;code&gt;dataVector&lt;/code&gt; is adjusted to match the number of
     *  columns in &lt;code&gt;columnIdentifiers&lt;/code&gt;
     *  either by truncating the &lt;code&gt;Vector&lt;/code&gt; if it is too long,
     *  or adding &lt;code&gt;null&lt;/code&gt; values if it is too short.
     *  &lt;p&gt;Note that passing in a &lt;code&gt;null&lt;/code&gt; value for
     *  &lt;code&gt;dataVector&lt;/code&gt; results in unspecified behavior,
     *  an possibly an exception.
     *
     * @param   dataVector         the new data vector
     * @param   columnIdentifiers     the names of the columns
     * @see #getDataVector
     */
    public void setDataVector(Vector dataVector, Vector columnIdentifiers) {
<span class="nc" id="L222">        this.dataVector = nonNullVector(dataVector);</span>
<span class="nc" id="L223">        this.columnIdentifiers = nonNullVector(columnIdentifiers);</span>
<span class="nc" id="L224">        justifyRows(0, getRowCount());</span>
<span class="nc" id="L225">        fireTableStructureChanged();</span>
<span class="nc" id="L226">    }</span>

    /**
     *  Replaces the value in the &lt;code&gt;dataVector&lt;/code&gt; instance
     *  variable with the values in the array &lt;code&gt;dataVector&lt;/code&gt;.
     *  The first index in the &lt;code&gt;Object[][]&lt;/code&gt;
     *  array is the row index and the second is the column index.
     *  &lt;code&gt;columnIdentifiers&lt;/code&gt; are the names of the new columns.
     *
     * @param dataVector                the new data vector
     * @param columnIdentifiers the names of the columns
     * @see #setDataVector(Vector, Vector)
     */
    public void setDataVector(Object[][] dataVector, Object[] columnIdentifiers) {
<span class="nc" id="L240">        setDataVector(convertToVector(dataVector), convertToVector(columnIdentifiers));</span>
<span class="nc" id="L241">    }</span>

    /**
     *  Equivalent to &lt;code&gt;fireTableChanged&lt;/code&gt;.
     *
     * @param event  the change event
     *
     */
    public void newDataAvailable(TableModelEvent event) {
<span class="nc" id="L250">        fireTableChanged(event);</span>
<span class="nc" id="L251">    }</span>

//
// Manipulating rows
//

    private void justifyRows(int from, int to) {
        // Sometimes the DefaultTableModel is subclassed
        // instead of the AbstractTableModel by mistake.
        // Set the number of rows for the case when getRowCount
        // is overridden.
<span class="nc" id="L262">        dataVector.setSize(getRowCount());</span>

<span class="nc bnc" id="L264" title="All 2 branches missed.">        for (int i = from; i &lt; to; i++) {</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">            if (dataVector.elementAt(i) == null) {</span>
<span class="nc" id="L266">                dataVector.setElementAt(new Vector(), i);</span>
            }
<span class="nc" id="L268">            ((Vector)dataVector.elementAt(i)).setSize(getColumnCount());</span>
        }
<span class="nc" id="L270">    }</span>

    /**
     *  Ensures that the new rows have the correct number of columns.
     *  This is accomplished by  using the &lt;code&gt;setSize&lt;/code&gt; method in
     *  &lt;code&gt;Vector&lt;/code&gt; which truncates vectors
     *  which are too long, and appends &lt;code&gt;null&lt;/code&gt;s if they
     *  are too short.
     *  This method also sends out a &lt;code&gt;tableChanged&lt;/code&gt;
     *  notification message to all the listeners.
     *
     * @param e         this &lt;code&gt;TableModelEvent&lt;/code&gt; describes
     *                           where the rows were added.
     *                           If &lt;code&gt;null&lt;/code&gt; it assumes
     *                           all the rows were newly added
     * @see #getDataVector
     */
    public void newRowsAdded(TableModelEvent e) {
<span class="nc" id="L288">        justifyRows(e.getFirstRow(), e.getLastRow() + 1);</span>
<span class="nc" id="L289">        fireTableChanged(e);</span>
<span class="nc" id="L290">    }</span>

    /**
     *  Equivalent to &lt;code&gt;fireTableChanged&lt;/code&gt;.
     *
     *  @param event the change event
     *
     */
    public void rowsRemoved(TableModelEvent event) {
<span class="nc" id="L299">        fireTableChanged(event);</span>
<span class="nc" id="L300">    }</span>

    /**
     * Obsolete as of Java 2 platform v1.3.  Please use &lt;code&gt;setRowCount&lt;/code&gt; instead.
     */
    /*
     *  Sets the number of rows in the model.  If the new size is greater
     *  than the current size, new rows are added to the end of the model
     *  If the new size is less than the current size, all
     *  rows at index &lt;code&gt;rowCount&lt;/code&gt; and greater are discarded. &lt;p&gt;
     *
     * @param   rowCount   the new number of rows
     * @see #setRowCount
     */
    public void setNumRows(int rowCount) {
<span class="nc" id="L315">        int old = getRowCount();</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">        if (old == rowCount) {</span>
<span class="nc" id="L317">            return;</span>
        }
<span class="nc" id="L319">        dataVector.setSize(rowCount);</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">        if (rowCount &lt;= old) {</span>
<span class="nc" id="L321">            fireTableRowsDeleted(rowCount, old-1);</span>
        }
        else {
<span class="nc" id="L324">            justifyRows(old, rowCount);</span>
<span class="nc" id="L325">            fireTableRowsInserted(old, rowCount-1);</span>
        }
<span class="nc" id="L327">    }</span>

    /**
     *  Sets the number of rows in the model.  If the new size is greater
     *  than the current size, new rows are added to the end of the model
     *  If the new size is less than the current size, all
     *  rows at index &lt;code&gt;rowCount&lt;/code&gt; and greater are discarded. &lt;p&gt;
     *
     *  @see #setColumnCount
     * @since 1.3
     */
    public void setRowCount(int rowCount) {
<span class="nc" id="L339">        setNumRows(rowCount);</span>
<span class="nc" id="L340">    }</span>

    /**
     *  Adds a row to the end of the model.  The new row will contain
     *  &lt;code&gt;null&lt;/code&gt; values unless &lt;code&gt;rowData&lt;/code&gt; is specified.
     *  Notification of the row being added will be generated.
     *
     * @param   rowData          optional data of the row being added
     */
    public void addRow(Vector rowData) {
<span class="nc" id="L350">        insertRow(getRowCount(), rowData);</span>
<span class="nc" id="L351">    }</span>

    /**
     *  Adds a row to the end of the model.  The new row will contain
     *  &lt;code&gt;null&lt;/code&gt; values unless &lt;code&gt;rowData&lt;/code&gt; is specified.
     *  Notification of the row being added will be generated.
     *
     * @param   rowData          optional data of the row being added
     */
    public void addRow(Object[] rowData) {
<span class="nc" id="L361">        addRow(convertToVector(rowData));</span>
<span class="nc" id="L362">    }</span>

    /**
     *  Inserts a row at &lt;code&gt;row&lt;/code&gt; in the model.  The new row
     *  will contain &lt;code&gt;null&lt;/code&gt; values unless &lt;code&gt;rowData&lt;/code&gt;
     *  is specified.  Notification of the row being added will be generated.
     *
     * @param   row             the row index of the row to be inserted
     * @param   rowData         optional data of the row being added
     * @exception  ArrayIndexOutOfBoundsException  if the row was invalid
     */
    public void insertRow(int row, Vector rowData) {
<span class="nc" id="L374">        dataVector.insertElementAt(rowData, row);</span>
<span class="nc" id="L375">        justifyRows(row, row+1);</span>
<span class="nc" id="L376">        fireTableRowsInserted(row, row);</span>
<span class="nc" id="L377">    }</span>

    /**
     *  Inserts a row at &lt;code&gt;row&lt;/code&gt; in the model.  The new row
     *  will contain &lt;code&gt;null&lt;/code&gt; values unless &lt;code&gt;rowData&lt;/code&gt;
     *  is specified.  Notification of the row being added will be generated.
     *
     * @param   row      the row index of the row to be inserted
     * @param   rowData          optional data of the row being added
     * @exception  ArrayIndexOutOfBoundsException  if the row was invalid
     */
    public void insertRow(int row, Object[] rowData) {
<span class="nc" id="L389">        insertRow(row, convertToVector(rowData));</span>
<span class="nc" id="L390">    }</span>

    private static int gcd(int i, int j) {
<span class="nc bnc" id="L393" title="All 2 branches missed.">        return (j == 0) ? i : gcd(j, i%j);</span>
    }

    private static void rotate(Vector v, int a, int b, int shift) {
<span class="nc" id="L397">        int size = b - a;</span>
<span class="nc" id="L398">        int r = size - shift;</span>
<span class="nc" id="L399">        int g = gcd(size, r);</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">        for(int i = 0; i &lt; g; i++) {</span>
<span class="nc" id="L401">            int to = i;</span>
<span class="nc" id="L402">            Object tmp = v.elementAt(a + to);</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">            for(int from = (to + r) % size; from != i; from = (to + r) % size) {</span>
<span class="nc" id="L404">                v.setElementAt(v.elementAt(a + from), a + to);</span>
<span class="nc" id="L405">                to = from;</span>
            }
<span class="nc" id="L407">            v.setElementAt(tmp, a + to);</span>
        }
<span class="nc" id="L409">    }</span>

    /**
     *  Moves one or more rows from the inclusive range &lt;code&gt;start&lt;/code&gt; to
     *  &lt;code&gt;end&lt;/code&gt; to the &lt;code&gt;to&lt;/code&gt; position in the model.
     *  After the move, the row that was at index &lt;code&gt;start&lt;/code&gt;
     *  will be at index &lt;code&gt;to&lt;/code&gt;.
     *  This method will send a &lt;code&gt;tableChanged&lt;/code&gt; notification
     *  message to all the listeners. &lt;p&gt;
     *
     *  &lt;pre&gt;
     *  Examples of moves:
     *
     *  1. moveRow(1,3,5);
     *          a|B|C|D|e|f|g|h|i|j|k   - before
     *          a|e|f|g|h|B|C|D|i|j|k   - after
     *
     *  2. moveRow(6,7,1);
     *          a|b|c|d|e|f|G|H|i|j|k   - before
     *          a|G|H|b|c|d|e|f|i|j|k   - after
     *  &lt;/pre&gt;
     *
     * @param   start       the starting row index to be moved
     * @param   end         the ending row index to be moved
     * @param   to          the destination of the rows to be moved
     * @exception  ArrayIndexOutOfBoundsException  if any of the elements
     * would be moved out of the table's range
     *
     */
    public void moveRow(int start, int end, int to) {
<span class="nc" id="L439">        int shift = to - start;</span>
        int first, last;
<span class="nc bnc" id="L441" title="All 2 branches missed.">        if (shift &lt; 0) {</span>
<span class="nc" id="L442">            first = to;</span>
<span class="nc" id="L443">            last = end;</span>
        }
        else {
<span class="nc" id="L446">            first = start;</span>
<span class="nc" id="L447">            last = to + end - start;</span>
        }
<span class="nc" id="L449">        rotate(dataVector, first, last + 1, shift);</span>

<span class="nc" id="L451">        fireTableRowsUpdated(first, last);</span>
<span class="nc" id="L452">    }</span>

    /**
     *  Removes the row at &lt;code&gt;row&lt;/code&gt; from the model.  Notification
     *  of the row being removed will be sent to all the listeners.
     *
     * @param   row      the row index of the row to be removed
     * @exception  ArrayIndexOutOfBoundsException  if the row was invalid
     */
    public void removeRow(int row) {
<span class="nc" id="L462">        dataVector.removeElementAt(row);</span>
<span class="nc" id="L463">        fireTableRowsDeleted(row, row);</span>
<span class="nc" id="L464">    }</span>

//
// Manipulating columns
//

    /**
     * Replaces the column identifiers in the model.  If the number of
     * &lt;code&gt;newIdentifier&lt;/code&gt;s is greater than the current number
     * of columns, new columns are added to the end of each row in the model.
     * If the number of &lt;code&gt;newIdentifier&lt;/code&gt;s is less than the current
     * number of columns, all the extra columns at the end of a row are
     * discarded. &lt;p&gt;
     *
     * @param   columnIdentifiers  vector of column identifiers.  If
     *                          &lt;code&gt;null&lt;/code&gt;, set the model
     *                          to zero columns
     * @see #setNumRows
     */
    public void setColumnIdentifiers(Vector columnIdentifiers) {
<span class="nc" id="L484">        setDataVector(dataVector, columnIdentifiers);</span>
<span class="nc" id="L485">    }</span>

    /**
     * Replaces the column identifiers in the model.  If the number of
     * &lt;code&gt;newIdentifier&lt;/code&gt;s is greater than the current number
     * of columns, new columns are added to the end of each row in the model.
     * If the number of &lt;code&gt;newIdentifier&lt;/code&gt;s is less than the current
     * number of columns, all the extra columns at the end of a row are
     * discarded. &lt;p&gt;
     *
     * @param   newIdentifiers  array of column identifiers.
     *                          If &lt;code&gt;null&lt;/code&gt;, set
     *                          the model to zero columns
     * @see #setNumRows
     */
    public void setColumnIdentifiers(Object[] newIdentifiers) {
<span class="nc" id="L501">        setColumnIdentifiers(convertToVector(newIdentifiers));</span>
<span class="nc" id="L502">    }</span>

    /**
     *  Sets the number of columns in the model.  If the new size is greater
     *  than the current size, new columns are added to the end of the model
     *  with &lt;code&gt;null&lt;/code&gt; cell values.
     *  If the new size is less than the current size, all columns at index
     *  &lt;code&gt;columnCount&lt;/code&gt; and greater are discarded.
     *
     *  @param columnCount  the new number of columns in the model
     *
     *  @see #setColumnCount
     * @since 1.3
     */
    public void setColumnCount(int columnCount) {
<span class="nc" id="L517">        columnIdentifiers.setSize(columnCount);</span>
<span class="nc" id="L518">        justifyRows(0, getRowCount());</span>
<span class="nc" id="L519">        fireTableStructureChanged();</span>
<span class="nc" id="L520">    }</span>

    /**
     *  Adds a column to the model.  The new column will have the
     *  identifier &lt;code&gt;columnName&lt;/code&gt;, which may be null.  This method
     *  will send a
     *  &lt;code&gt;tableChanged&lt;/code&gt; notification message to all the listeners.
     *  This method is a cover for &lt;code&gt;addColumn(Object, Vector)&lt;/code&gt; which
     *  uses &lt;code&gt;null&lt;/code&gt; as the data vector.
     *
     * @param   columnName the identifier of the column being added
     */
    public void addColumn(Object columnName) {
<span class="nc" id="L533">        addColumn(columnName, (Vector)null);</span>
<span class="nc" id="L534">    }</span>

    /**
     *  Adds a column to the model.  The new column will have the
     *  identifier &lt;code&gt;columnName&lt;/code&gt;, which may be null.
     *  &lt;code&gt;columnData&lt;/code&gt; is the
     *  optional vector of data for the column.  If it is &lt;code&gt;null&lt;/code&gt;
     *  the column is filled with &lt;code&gt;null&lt;/code&gt; values.  Otherwise,
     *  the new data will be added to model starting with the first
     *  element going to row 0, etc.  This method will send a
     *  &lt;code&gt;tableChanged&lt;/code&gt; notification message to all the listeners.
     *
     * @param   columnName the identifier of the column being added
     * @param   columnData       optional data of the column being added
     */
    public void addColumn(Object columnName, Vector columnData) {
<span class="nc" id="L550">        columnIdentifiers.addElement(columnName);</span>
<span class="nc bnc" id="L551" title="All 2 branches missed.">        if (columnData != null) {</span>
<span class="nc" id="L552">            int columnSize = columnData.size();</span>
<span class="nc bnc" id="L553" title="All 2 branches missed.">            if (columnSize &gt; getRowCount()) {</span>
<span class="nc" id="L554">                dataVector.setSize(columnSize);</span>
            }
<span class="nc" id="L556">            justifyRows(0, getRowCount());</span>
<span class="nc" id="L557">            int newColumn = getColumnCount() - 1;</span>
<span class="nc bnc" id="L558" title="All 2 branches missed.">            for(int i = 0; i &lt; columnSize; i++) {</span>
<span class="nc" id="L559">                  Vector row = (Vector)dataVector.elementAt(i);</span>
<span class="nc" id="L560">                  row.setElementAt(columnData.elementAt(i), newColumn);</span>
            }
<span class="nc" id="L562">        }</span>
        else {
<span class="nc" id="L564">            justifyRows(0, getRowCount());</span>
        }

<span class="nc" id="L567">        fireTableStructureChanged();</span>
<span class="nc" id="L568">    }</span>

    /**
     *  Adds a column to the model.  The new column will have the
     *  identifier &lt;code&gt;columnName&lt;/code&gt;.  &lt;code&gt;columnData&lt;/code&gt; is the
     *  optional array of data for the column.  If it is &lt;code&gt;null&lt;/code&gt;
     *  the column is filled with &lt;code&gt;null&lt;/code&gt; values.  Otherwise,
     *  the new data will be added to model starting with the first
     *  element going to row 0, etc.  This method will send a
     *  &lt;code&gt;tableChanged&lt;/code&gt; notification message to all the listeners.
     *
     * @see #addColumn(Object, Vector)
     */
    public void addColumn(Object columnName, Object[] columnData) {
<span class="nc" id="L582">        addColumn(columnName, convertToVector(columnData));</span>
<span class="nc" id="L583">    }</span>

//
// Implementing the TableModel interface
//

    /**
     * Returns the number of rows in this data table.
     * @return the number of rows in the model
     */
    public int getRowCount() {
<span class="nc" id="L594">        return dataVector.size();</span>
    }

    /**
     * Returns the number of columns in this data table.
     * @return the number of columns in the model
     */
    public int getColumnCount() {
<span class="nc" id="L602">        return columnIdentifiers.size();</span>
    }

    /**
     * Returns the column name.
     *
     * @return a name for this column using the string value of the
     * appropriate member in &lt;code&gt;columnIdentifiers&lt;/code&gt;.
     * If &lt;code&gt;columnIdentifiers&lt;/code&gt; does not have an entry
     * for this index, returns the default
     * name provided by the superclass.
     */
    public String getColumnName(int column) {
<span class="nc" id="L615">        Object id = null;</span>
        // This test is to cover the case when
        // getColumnCount has been subclassed by mistake ...
<span class="nc bnc" id="L618" title="All 4 branches missed.">        if (column &lt; columnIdentifiers.size() &amp;&amp; (column &gt;= 0)) {</span>
<span class="nc" id="L619">            id = columnIdentifiers.elementAt(column);</span>
        }
<span class="nc bnc" id="L621" title="All 2 branches missed.">        return (id == null) ? super.getColumnName(column)</span>
<span class="nc" id="L622">                            : id.toString();</span>
    }

    /**
     * Returns true regardless of parameter values.
     *
     * @param   row             the row whose value is to be queried
     * @param   column          the column whose value is to be queried
     * @return                  true
     * @see #setValueAt
     */
    public boolean isCellEditable(int row, int column) {
<span class="nc" id="L634">        return true;</span>
    }

    /**
     * Returns an attribute value for the cell at &lt;code&gt;row&lt;/code&gt;
     * and &lt;code&gt;column&lt;/code&gt;.
     *
     * @param   row             the row whose value is to be queried
     * @param   column          the column whose value is to be queried
     * @return                  the value Object at the specified cell
     * @exception  ArrayIndexOutOfBoundsException  if an invalid row or
     *               column was given
     */
    public Object getValueAt(int row, int column) {
<span class="nc" id="L648">        Vector rowVector = (Vector)dataVector.elementAt(row);</span>
<span class="nc" id="L649">        return rowVector.elementAt(column);</span>
    }

    /**
     * Sets the object value for the cell at &lt;code&gt;column&lt;/code&gt; and
     * &lt;code&gt;row&lt;/code&gt;.  &lt;code&gt;aValue&lt;/code&gt; is the new value.  This method
     * will generate a &lt;code&gt;tableChanged&lt;/code&gt; notification.
     *
     * @param   aValue          the new value; this can be null
     * @param   row             the row whose value is to be changed
     * @param   column          the column whose value is to be changed
     * @exception  ArrayIndexOutOfBoundsException  if an invalid row or
     *               column was given
     */
    public void setValueAt(Object aValue, int row, int column) {
<span class="nc" id="L664">        Vector rowVector = (Vector)dataVector.elementAt(row);</span>
<span class="nc" id="L665">        rowVector.setElementAt(aValue, column);</span>
<span class="nc" id="L666">        fireTableCellUpdated(row, column);</span>
<span class="nc" id="L667">    }</span>

//
// Protected Methods
//

    /**
     * Returns a vector that contains the same objects as the array.
     * @param anArray  the array to be converted
     * @return  the new vector; if &lt;code&gt;anArray&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;,
     *                          returns &lt;code&gt;null&lt;/code&gt;
     */
    protected static Vector convertToVector(Object[] anArray) {
<span class="nc bnc" id="L680" title="All 2 branches missed.">        if (anArray == null) {</span>
<span class="nc" id="L681">            return null;</span>
        }
<span class="nc" id="L683">        Vector&lt;Object&gt; v = new Vector&lt;Object&gt;(anArray.length);</span>
<span class="nc bnc" id="L684" title="All 2 branches missed.">        for (Object o : anArray) {</span>
<span class="nc" id="L685">            v.addElement(o);</span>
        }
<span class="nc" id="L687">        return v;</span>
    }

    /**
     * Returns a vector of vectors that contains the same objects as the array.
     * @param anArray  the double array to be converted
     * @return the new vector of vectors; if &lt;code&gt;anArray&lt;/code&gt; is
     *                          &lt;code&gt;null&lt;/code&gt;, returns &lt;code&gt;null&lt;/code&gt;
     */
    protected static Vector convertToVector(Object[][] anArray) {
<span class="nc bnc" id="L697" title="All 2 branches missed.">        if (anArray == null) {</span>
<span class="nc" id="L698">            return null;</span>
        }
<span class="nc" id="L700">        Vector&lt;Vector&gt; v = new Vector&lt;Vector&gt;(anArray.length);</span>
<span class="nc bnc" id="L701" title="All 2 branches missed.">        for (Object[] o : anArray) {</span>
<span class="nc" id="L702">            v.addElement(convertToVector(o));</span>
        }
<span class="nc" id="L704">        return v;</span>
    }

} // End of class DefaultTableModel
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>