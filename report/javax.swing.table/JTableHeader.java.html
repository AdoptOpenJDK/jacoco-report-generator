<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>JTableHeader.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.table</a> &gt; <span class="el_source">JTableHeader.java</span></div><h1>JTableHeader.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.table;

import sun.swing.table.DefaultTableCellHeaderRenderer;

import java.util.*;
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.*;
import javax.swing.plaf.*;
import javax.accessibility.*;

import java.beans.PropertyChangeListener;
import java.beans.Transient;

import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;
import java.io.IOException;


/**
 * This is the object which manages the header of the &lt;code&gt;JTable&lt;/code&gt;.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author Alan Chung
 * @author Philip Milne
 * @see javax.swing.JTable
 */
public class JTableHeader extends JComponent implements TableColumnModelListener, Accessible
{
    /**
     * @see #getUIClassID
     * @see #readObject
     */
    private static final String uiClassID = &quot;TableHeaderUI&quot;;

//
// Instance Variables
//
    /**
     * The table for which this object is the header;
     * the default is &lt;code&gt;null&lt;/code&gt;.
     */
    protected JTable table;

    /**
     * The &lt;code&gt;TableColumnModel&lt;/code&gt; of the table header.
     */
    protected TableColumnModel  columnModel;

    /**
     * If true, reordering of columns are allowed by the user;
     * the default is true.
     */
    protected boolean   reorderingAllowed;

    /**
     * If true, resizing of columns are allowed by the user;
     * the default is true.
     */
    protected boolean   resizingAllowed;

    /**
     * Obsolete as of Java 2 platform v1.3.  Real time repaints, in response
     * to column dragging or resizing, are now unconditional.
     */
    /*
     * If this flag is true, then the header will repaint the table as
     * a column is dragged or resized; the default is true.
     */
    protected boolean   updateTableInRealTime;

    /** The index of the column being resized. &lt;code&gt;null&lt;/code&gt; if not resizing. */
    transient protected TableColumn     resizingColumn;

    /** The index of the column being dragged. &lt;code&gt;null&lt;/code&gt; if not dragging. */
    transient protected TableColumn     draggedColumn;

    /** The distance from its original position the column has been dragged. */
    transient protected int     draggedDistance;

    /**
      *  The default renderer to be used when a &lt;code&gt;TableColumn&lt;/code&gt;
      *  does not define a &lt;code&gt;headerRenderer&lt;/code&gt;.
      */
    private TableCellRenderer defaultRenderer;

//
// Constructors
//

    /**
     *  Constructs a &lt;code&gt;JTableHeader&lt;/code&gt; with a default
     *  &lt;code&gt;TableColumnModel&lt;/code&gt;.
     *
     * @see #createDefaultColumnModel
     */
    public JTableHeader() {
<span class="nc" id="L133">        this(null);</span>
<span class="nc" id="L134">    }</span>

    /**
     *  Constructs a &lt;code&gt;JTableHeader&lt;/code&gt; which is initialized with
     *  &lt;code&gt;cm&lt;/code&gt; as the column model.  If &lt;code&gt;cm&lt;/code&gt; is
     *  &lt;code&gt;null&lt;/code&gt; this method will initialize the table header
     *  with a default &lt;code&gt;TableColumnModel&lt;/code&gt;.
     *
     * @param cm        the column model for the table
     * @see #createDefaultColumnModel
     */
    public JTableHeader(TableColumnModel cm) {
<span class="nc" id="L146">        super();</span>

        //setFocusable(false); // for strict win/mac compatibility mode,
                               // this method should be invoked

<span class="nc bnc" id="L151" title="All 2 branches missed.">        if (cm == null)</span>
<span class="nc" id="L152">            cm = createDefaultColumnModel();</span>
<span class="nc" id="L153">        setColumnModel(cm);</span>

        // Initialize local ivars
<span class="nc" id="L156">        initializeLocalVars();</span>

        // Get UI going
<span class="nc" id="L159">        updateUI();</span>
<span class="nc" id="L160">    }</span>

//
// Local behavior attributes
//

    /**
     *  Sets the table associated with this header.
     *  @param  table   the new table
     *  @beaninfo
     *   bound: true
     *   description: The table associated with this header.
     */
    public void setTable(JTable table) {
<span class="nc" id="L174">        JTable old = this.table;</span>
<span class="nc" id="L175">        this.table = table;</span>
<span class="nc" id="L176">        firePropertyChange(&quot;table&quot;, old, table);</span>
<span class="nc" id="L177">    }</span>

    /**
      *  Returns the table associated with this header.
      *  @return  the &lt;code&gt;table&lt;/code&gt; property
      */
    public JTable getTable() {
<span class="nc" id="L184">        return table;</span>
    }

    /**
     *  Sets whether the user can drag column headers to reorder columns.
     *
     * @param   reorderingAllowed       true if the table view should allow
     *                                  reordering; otherwise false
     * @see     #getReorderingAllowed
     * @beaninfo
     *  bound: true
     *  description: Whether the user can drag column headers to reorder columns.
     */
    public void setReorderingAllowed(boolean reorderingAllowed) {
<span class="nc" id="L198">        boolean old = this.reorderingAllowed;</span>
<span class="nc" id="L199">        this.reorderingAllowed = reorderingAllowed;</span>
<span class="nc" id="L200">        firePropertyChange(&quot;reorderingAllowed&quot;, old, reorderingAllowed);</span>
<span class="nc" id="L201">    }</span>

    /**
     * Returns true if the user is allowed to rearrange columns by
     * dragging their headers, false otherwise. The default is true. You can
     * rearrange columns programmatically regardless of this setting.
     *
     * @return  the &lt;code&gt;reorderingAllowed&lt;/code&gt; property
     * @see     #setReorderingAllowed
     */
    public boolean getReorderingAllowed() {
<span class="nc" id="L212">        return reorderingAllowed;</span>
    }

    /**
     *  Sets whether the user can resize columns by dragging between headers.
     *
     * @param   resizingAllowed         true if table view should allow
     *                                  resizing
     * @see     #getResizingAllowed
     * @beaninfo
     *  bound: true
     *  description: Whether the user can resize columns by dragging between headers.
     */
    public void setResizingAllowed(boolean resizingAllowed) {
<span class="nc" id="L226">        boolean old = this.resizingAllowed;</span>
<span class="nc" id="L227">        this.resizingAllowed = resizingAllowed;</span>
<span class="nc" id="L228">        firePropertyChange(&quot;resizingAllowed&quot;, old, resizingAllowed);</span>
<span class="nc" id="L229">    }</span>

    /**
     * Returns true if the user is allowed to resize columns by dragging
     * between their headers, false otherwise. The default is true. You can
     * resize columns programmatically regardless of this setting.
     *
     * @return  the &lt;code&gt;resizingAllowed&lt;/code&gt; property
     * @see     #setResizingAllowed
     */
    public boolean getResizingAllowed() {
<span class="nc" id="L240">        return resizingAllowed;</span>
    }

    /**
     * Returns the the dragged column, if and only if, a drag is in
     * process, otherwise returns &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  the dragged column, if a drag is in
     *          process, otherwise returns &lt;code&gt;null&lt;/code&gt;
     * @see     #getDraggedDistance
     */
    public TableColumn getDraggedColumn() {
<span class="nc" id="L252">        return draggedColumn;</span>
    }

    /**
     * Returns the column's horizontal distance from its original
     * position, if and only if, a drag is in process. Otherwise, the
     * the return value is meaningless.
     *
     * @return  the column's horizontal distance from its original
     *          position, if a drag is in process, otherwise the return
     *          value is meaningless
     * @see     #getDraggedColumn
     */
    public int getDraggedDistance() {
<span class="nc" id="L266">        return draggedDistance;</span>
    }

    /**
     * Returns the resizing column.  If no column is being
     * resized this method returns &lt;code&gt;null&lt;/code&gt;.
     *
     * @return  the resizing column, if a resize is in process, otherwise
     *          returns &lt;code&gt;null&lt;/code&gt;
     */
    public TableColumn getResizingColumn() {
<span class="nc" id="L277">        return resizingColumn;</span>
    }

    /**
     * Obsolete as of Java 2 platform v1.3.  Real time repaints, in response to
     * column dragging or resizing, are now unconditional.
     */
    /*
     *  Sets whether the body of the table updates in real time when
     *  a column is resized or dragged.
     *
     * @param   flag                    true if tableView should update
     *                                  the body of the table in real time
     * @see #getUpdateTableInRealTime
     */
    public void setUpdateTableInRealTime(boolean flag) {
<span class="nc" id="L293">        updateTableInRealTime = flag;</span>
<span class="nc" id="L294">    }</span>

    /**
     * Obsolete as of Java 2 platform v1.3.  Real time repaints, in response to
     * column dragging or resizing, are now unconditional.
     */
    /*
     * Returns true if the body of the table view updates in real
     * time when a column is resized or dragged.  User can set this flag to
     * false to speed up the table's response to user resize or drag actions.
     * The default is true.
     *
     * @return  true if the table updates in real time
     * @see #setUpdateTableInRealTime
     */
    public boolean getUpdateTableInRealTime() {
<span class="nc" id="L310">        return updateTableInRealTime;</span>
    }

    /**
     * Sets the default renderer to be used when no &lt;code&gt;headerRenderer&lt;/code&gt;
     * is defined by a &lt;code&gt;TableColumn&lt;/code&gt;.
     * @param  defaultRenderer  the default renderer
     * @since 1.3
     */
    public void setDefaultRenderer(TableCellRenderer defaultRenderer) {
<span class="nc" id="L320">        this.defaultRenderer = defaultRenderer;</span>
<span class="nc" id="L321">    }</span>

    /**
     * Returns the default renderer used when no &lt;code&gt;headerRenderer&lt;/code&gt;
     * is defined by a &lt;code&gt;TableColumn&lt;/code&gt;.
     * @return the default renderer
     * @since 1.3
     */
    @Transient
    public TableCellRenderer getDefaultRenderer() {
<span class="nc" id="L331">        return defaultRenderer;</span>
    }

    /**
     * Returns the index of the column that &lt;code&gt;point&lt;/code&gt; lies in, or -1 if it
     * lies out of bounds.
     *
     * @return  the index of the column that &lt;code&gt;point&lt;/code&gt; lies in, or -1 if it
     *          lies out of bounds
     */
    public int columnAtPoint(Point point) {
<span class="nc" id="L342">        int x = point.x;</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">        if (!getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L344">            x = getWidthInRightToLeft() - x - 1;</span>
        }
<span class="nc" id="L346">        return getColumnModel().getColumnIndexAtX(x);</span>
    }

    /**
     * Returns the rectangle containing the header tile at &lt;code&gt;column&lt;/code&gt;.
     * When the &lt;code&gt;column&lt;/code&gt; parameter is out of bounds this method uses the
     * same conventions as the &lt;code&gt;JTable&lt;/code&gt; method &lt;code&gt;getCellRect&lt;/code&gt;.
     *
     * @return  the rectangle containing the header tile at &lt;code&gt;column&lt;/code&gt;
     * @see JTable#getCellRect
     */
    public Rectangle getHeaderRect(int column) {
<span class="nc" id="L358">        Rectangle r = new Rectangle();</span>
<span class="nc" id="L359">        TableColumnModel cm = getColumnModel();</span>

<span class="nc" id="L361">        r.height = getHeight();</span>

<span class="nc bnc" id="L363" title="All 2 branches missed.">        if (column &lt; 0) {</span>
            // x = width = 0;
<span class="nc bnc" id="L365" title="All 2 branches missed.">            if( !getComponentOrientation().isLeftToRight() ) {</span>
<span class="nc" id="L366">                r.x = getWidthInRightToLeft();</span>
            }
        }
<span class="nc bnc" id="L369" title="All 2 branches missed.">        else if (column &gt;= cm.getColumnCount()) {</span>
<span class="nc bnc" id="L370" title="All 2 branches missed.">            if( getComponentOrientation().isLeftToRight() ) {</span>
<span class="nc" id="L371">                r.x = getWidth();</span>
            }
        }
        else {
<span class="nc bnc" id="L375" title="All 2 branches missed.">            for(int i = 0; i &lt; column; i++) {</span>
<span class="nc" id="L376">                r.x += cm.getColumn(i).getWidth();</span>
            }
<span class="nc bnc" id="L378" title="All 2 branches missed.">            if( !getComponentOrientation().isLeftToRight() ) {</span>
<span class="nc" id="L379">                r.x = getWidthInRightToLeft() - r.x - cm.getColumn(column).getWidth();</span>
            }

<span class="nc" id="L382">            r.width = cm.getColumn(column).getWidth();</span>
        }
<span class="nc" id="L384">        return r;</span>
    }


    /**
     * Allows the renderer's tips to be used if there is text set.
     * @param  event  the location of the event identifies the proper
     *                          renderer and, therefore, the proper tip
     * @return the tool tip for this component
     */
    public String getToolTipText(MouseEvent event) {
<span class="nc" id="L395">        String tip = null;</span>
<span class="nc" id="L396">        Point p = event.getPoint();</span>
        int column;

        // Locate the renderer under the event location
<span class="nc bnc" id="L400" title="All 2 branches missed.">        if ((column = columnAtPoint(p)) != -1) {</span>
<span class="nc" id="L401">            TableColumn aColumn = columnModel.getColumn(column);</span>
<span class="nc" id="L402">            TableCellRenderer renderer = aColumn.getHeaderRenderer();</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">            if (renderer == null) {</span>
<span class="nc" id="L404">                renderer = defaultRenderer;</span>
            }
<span class="nc" id="L406">            Component component = renderer.getTableCellRendererComponent(</span>
<span class="nc" id="L407">                              getTable(), aColumn.getHeaderValue(), false, false,</span>
                              -1, column);

            // Now have to see if the component is a JComponent before
            // getting the tip
<span class="nc bnc" id="L412" title="All 2 branches missed.">            if (component instanceof JComponent) {</span>
                // Convert the event to the renderer's coordinate system
                MouseEvent newEvent;
<span class="nc" id="L415">                Rectangle cellRect = getHeaderRect(column);</span>

<span class="nc" id="L417">                p.translate(-cellRect.x, -cellRect.y);</span>
<span class="nc" id="L418">                newEvent = new MouseEvent(component, event.getID(),</span>
<span class="nc" id="L419">                                          event.getWhen(), event.getModifiers(),</span>
<span class="nc" id="L420">                                          p.x, p.y, event.getXOnScreen(), event.getYOnScreen(),</span>
<span class="nc" id="L421">                                          event.getClickCount(),</span>
<span class="nc" id="L422">                                          event.isPopupTrigger(), MouseEvent.NOBUTTON);</span>

<span class="nc" id="L424">                tip = ((JComponent)component).getToolTipText(newEvent);</span>
            }
        }

        // No tip from the renderer get our own tip
<span class="nc bnc" id="L429" title="All 2 branches missed.">        if (tip == null)</span>
<span class="nc" id="L430">            tip = getToolTipText();</span>

<span class="nc" id="L432">        return tip;</span>
    }

//
// Managing TableHeaderUI
//

    /**
     * Returns the look and feel (L&amp;amp;F) object that renders this component.
     *
     * @return the &lt;code&gt;TableHeaderUI&lt;/code&gt; object that renders this component
     */
    public TableHeaderUI getUI() {
<span class="nc" id="L445">        return (TableHeaderUI)ui;</span>
    }

    /**
     * Sets the look and feel (L&amp;amp;F) object that renders this component.
     *
     * @param ui  the &lt;code&gt;TableHeaderUI&lt;/code&gt; L&amp;amp;F object
     * @see UIDefaults#getUI
     */
    public void setUI(TableHeaderUI ui){
<span class="nc bnc" id="L455" title="All 2 branches missed.">        if (this.ui != ui) {</span>
<span class="nc" id="L456">            super.setUI(ui);</span>
<span class="nc" id="L457">            repaint();</span>
        }
<span class="nc" id="L459">    }</span>

    /**
     * Notification from the &lt;code&gt;UIManager&lt;/code&gt; that the look and feel
     * (L&amp;amp;F) has changed.
     * Replaces the current UI object with the latest version from the
     * &lt;code&gt;UIManager&lt;/code&gt;.
     *
     * @see JComponent#updateUI
     */
    public void updateUI(){
<span class="nc" id="L470">        setUI((TableHeaderUI)UIManager.getUI(this));</span>

<span class="nc" id="L472">        TableCellRenderer renderer = getDefaultRenderer();</span>
<span class="nc bnc" id="L473" title="All 2 branches missed.">        if (renderer instanceof Component) {</span>
<span class="nc" id="L474">            SwingUtilities.updateComponentTreeUI((Component)renderer);</span>
        }
<span class="nc" id="L476">    }</span>


    /**
     * Returns the suffix used to construct the name of the look and feel
     * (L&amp;amp;F) class used to render this component.
     * @return the string &quot;TableHeaderUI&quot;
     *
     * @return &quot;TableHeaderUI&quot;
     * @see JComponent#getUIClassID
     * @see UIDefaults#getUI
     */
    public String getUIClassID() {
<span class="nc" id="L489">        return uiClassID;</span>
    }


//
// Managing models
//


    /**
     *  Sets the column model for this table to &lt;code&gt;newModel&lt;/code&gt; and registers
     *  for listener notifications from the new column model.
     *
     * @param   columnModel     the new data source for this table
     * @exception IllegalArgumentException
     *                          if &lt;code&gt;newModel&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;
     * @see     #getColumnModel
     * @beaninfo
     *  bound: true
     *  description: The object governing the way columns appear in the view.
     */
    public void setColumnModel(TableColumnModel columnModel) {
<span class="nc bnc" id="L511" title="All 2 branches missed.">        if (columnModel == null) {</span>
<span class="nc" id="L512">            throw new IllegalArgumentException(&quot;Cannot set a null ColumnModel&quot;);</span>
        }
<span class="nc" id="L514">        TableColumnModel old = this.columnModel;</span>
<span class="nc bnc" id="L515" title="All 2 branches missed.">        if (columnModel != old) {</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">            if (old != null) {</span>
<span class="nc" id="L517">                old.removeColumnModelListener(this);</span>
            }
<span class="nc" id="L519">            this.columnModel = columnModel;</span>
<span class="nc" id="L520">            columnModel.addColumnModelListener(this);</span>

<span class="nc" id="L522">            firePropertyChange(&quot;columnModel&quot;, old, columnModel);</span>
<span class="nc" id="L523">            resizeAndRepaint();</span>
        }
<span class="nc" id="L525">    }</span>

    /**
     * Returns the &lt;code&gt;TableColumnModel&lt;/code&gt; that contains all column information
     * of this table header.
     *
     * @return  the &lt;code&gt;columnModel&lt;/code&gt; property
     * @see     #setColumnModel
     */
    public TableColumnModel getColumnModel() {
<span class="nc" id="L535">        return columnModel;</span>
    }

//
// Implementing TableColumnModelListener interface
//

    /**
     * Invoked when a column is added to the table column model.
     * &lt;p&gt;
     * Application code will not use these methods explicitly, they
     * are used internally by &lt;code&gt;JTable&lt;/code&gt;.
     *
     * @param e  the event received
     * @see TableColumnModelListener
     */
<span class="nc" id="L551">    public void columnAdded(TableColumnModelEvent e) { resizeAndRepaint(); }</span>


    /**
     * Invoked when a column is removed from the table column model.
     * &lt;p&gt;
     * Application code will not use these methods explicitly, they
     * are used internally by &lt;code&gt;JTable&lt;/code&gt;.
     *
     * @param e  the event received
     * @see TableColumnModelListener
     */
<span class="nc" id="L563">    public void columnRemoved(TableColumnModelEvent e) { resizeAndRepaint(); }</span>


    /**
     * Invoked when a column is repositioned.
     * &lt;p&gt;
     * Application code will not use these methods explicitly, they
     * are used internally by &lt;code&gt;JTable&lt;/code&gt;.
     *
     * @param e the event received
     * @see TableColumnModelListener
     */
<span class="nc" id="L575">    public void columnMoved(TableColumnModelEvent e) { repaint(); }</span>


    /**
     * Invoked when a column is moved due to a margin change.
     * &lt;p&gt;
     * Application code will not use these methods explicitly, they
     * are used internally by &lt;code&gt;JTable&lt;/code&gt;.
     *
     * @param e the event received
     * @see TableColumnModelListener
     */
<span class="nc" id="L587">    public void columnMarginChanged(ChangeEvent e) { resizeAndRepaint(); }</span>


    // --Redrawing the header is slow in cell selection mode.
    // --Since header selection is ugly and it is always clear from the
    // --view which columns are selected, don't redraw the header.
    /**
     * Invoked when the selection model of the &lt;code&gt;TableColumnModel&lt;/code&gt;
     * is changed.  This method currently has no effect (the header is not
     * redrawn).
     * &lt;p&gt;
     * Application code will not use these methods explicitly, they
     * are used internally by &lt;code&gt;JTable&lt;/code&gt;.
     *
     * @param e the event received
     * @see TableColumnModelListener
     */
<span class="nc" id="L604">    public void columnSelectionChanged(ListSelectionEvent e) { } // repaint(); }</span>

//
//  Package Methods
//

    /**
     *  Returns the default column model object which is
     *  a &lt;code&gt;DefaultTableColumnModel&lt;/code&gt;.  A subclass can override this
     *  method to return a different column model object
     *
     * @return the default column model object
     */
    protected TableColumnModel createDefaultColumnModel() {
<span class="nc" id="L618">        return new DefaultTableColumnModel();</span>
    }

    /**
     *  Returns a default renderer to be used when no header renderer
     *  is defined by a &lt;code&gt;TableColumn&lt;/code&gt;.
     *
     *  @return the default table column renderer
     * @since 1.3
     */
    protected TableCellRenderer createDefaultRenderer() {
<span class="nc" id="L629">        return new DefaultTableCellHeaderRenderer();</span>
    }


    /**
     * Initializes the local variables and properties with default values.
     * Used by the constructor methods.
     */
    protected void initializeLocalVars() {
<span class="nc" id="L638">        setOpaque(true);</span>
<span class="nc" id="L639">        table = null;</span>
<span class="nc" id="L640">        reorderingAllowed = true;</span>
<span class="nc" id="L641">        resizingAllowed = true;</span>
<span class="nc" id="L642">        draggedColumn = null;</span>
<span class="nc" id="L643">        draggedDistance = 0;</span>
<span class="nc" id="L644">        resizingColumn = null;</span>
<span class="nc" id="L645">        updateTableInRealTime = true;</span>

        // I'm registered to do tool tips so we can draw tips for the
        // renderers
<span class="nc" id="L649">        ToolTipManager toolTipManager = ToolTipManager.sharedInstance();</span>
<span class="nc" id="L650">        toolTipManager.registerComponent(this);</span>
<span class="nc" id="L651">        setDefaultRenderer(createDefaultRenderer());</span>
<span class="nc" id="L652">    }</span>

    /**
     * Sizes the header and marks it as needing display.  Equivalent
     * to &lt;code&gt;revalidate&lt;/code&gt; followed by &lt;code&gt;repaint&lt;/code&gt;.
     */
    public void resizeAndRepaint() {
<span class="nc" id="L659">        revalidate();</span>
<span class="nc" id="L660">        repaint();</span>
<span class="nc" id="L661">    }</span>

    /**
      *  Sets the header's &lt;code&gt;draggedColumn&lt;/code&gt; to &lt;code&gt;aColumn&lt;/code&gt;.
      *  &lt;p&gt;
      *  Application code will not use this method explicitly, it is used
      *  internally by the column dragging mechanism.
      *
      *  @param  aColumn  the column being dragged, or &lt;code&gt;null&lt;/code&gt; if
      *                 no column is being dragged
      */
    public void setDraggedColumn(TableColumn aColumn) {
<span class="nc" id="L673">        draggedColumn = aColumn;</span>
<span class="nc" id="L674">    }</span>

    /**
      *  Sets the header's &lt;code&gt;draggedDistance&lt;/code&gt; to &lt;code&gt;distance&lt;/code&gt;.
      *  @param distance  the distance dragged
      */
    public void setDraggedDistance(int distance) {
<span class="nc" id="L681">        draggedDistance = distance;</span>
<span class="nc" id="L682">    }</span>

    /**
      *  Sets the header's &lt;code&gt;resizingColumn&lt;/code&gt; to &lt;code&gt;aColumn&lt;/code&gt;.
      *  &lt;p&gt;
      *  Application code will not use this method explicitly, it
      *  is used internally by the column sizing mechanism.
      *
      *  @param  aColumn  the column being resized, or &lt;code&gt;null&lt;/code&gt; if
      *                 no column is being resized
      */
    public void setResizingColumn(TableColumn aColumn) {
<span class="nc" id="L694">        resizingColumn = aColumn;</span>
<span class="nc" id="L695">    }</span>

    /**
     * See &lt;code&gt;readObject&lt;/code&gt; and &lt;code&gt;writeObject&lt;/code&gt; in
     * &lt;code&gt;JComponent&lt;/code&gt; for more
     * information about serialization in Swing.
     */
    private void writeObject(ObjectOutputStream s) throws IOException {
<span class="nc" id="L703">        s.defaultWriteObject();</span>
<span class="nc bnc" id="L704" title="All 4 branches missed.">        if ((ui != null) &amp;&amp; (getUIClassID().equals(uiClassID))) {</span>
<span class="nc" id="L705">            ui.installUI(this);</span>
        }
<span class="nc" id="L707">    }</span>

    private int getWidthInRightToLeft() {
<span class="nc bnc" id="L710" title="All 2 branches missed.">        if ((table != null) &amp;&amp;</span>
<span class="nc bnc" id="L711" title="All 2 branches missed.">            (table.getAutoResizeMode() != JTable.AUTO_RESIZE_OFF)) {</span>
<span class="nc" id="L712">            return table.getWidth();</span>
        }
<span class="nc" id="L714">        return super.getWidth();</span>
    }

    /**
     * Returns a string representation of this &lt;code&gt;JTableHeader&lt;/code&gt;. This method
     * is intended to be used only for debugging purposes, and the
     * content and format of the returned string may vary between
     * implementations. The returned string may be empty but may not
     * be &lt;code&gt;null&lt;/code&gt;.
     * &lt;P&gt;
     * Overriding &lt;code&gt;paramString&lt;/code&gt; to provide information about the
     * specific new aspects of the JFC components.
     *
     * @return  a string representation of this &lt;code&gt;JTableHeader&lt;/code&gt;
     */
    protected String paramString() {
<span class="nc bnc" id="L730" title="All 2 branches missed.">        String reorderingAllowedString = (reorderingAllowed ?</span>
                                          &quot;true&quot; : &quot;false&quot;);
<span class="nc bnc" id="L732" title="All 2 branches missed.">        String resizingAllowedString = (resizingAllowed ?</span>
                                        &quot;true&quot; : &quot;false&quot;);
<span class="nc bnc" id="L734" title="All 2 branches missed.">        String updateTableInRealTimeString = (updateTableInRealTime ?</span>
                                              &quot;true&quot; : &quot;false&quot;);

<span class="nc" id="L737">        return super.paramString() +</span>
        &quot;,draggedDistance=&quot; + draggedDistance +
        &quot;,reorderingAllowed=&quot; + reorderingAllowedString +
        &quot;,resizingAllowed=&quot; + resizingAllowedString +
        &quot;,updateTableInRealTime=&quot; + updateTableInRealTimeString;
    }

/////////////////
// Accessibility support
////////////////

    /**
     * Gets the AccessibleContext associated with this JTableHeader.
     * For JTableHeaders, the AccessibleContext takes the form of an
     * AccessibleJTableHeader.
     * A new AccessibleJTableHeader instance is created if necessary.
     *
     * @return an AccessibleJTableHeader that serves as the
     *         AccessibleContext of this JTableHeader
     */
    public AccessibleContext getAccessibleContext() {
<span class="nc bnc" id="L758" title="All 2 branches missed.">        if (accessibleContext == null) {</span>
<span class="nc" id="L759">            accessibleContext = new AccessibleJTableHeader();</span>
        }
<span class="nc" id="L761">        return accessibleContext;</span>
    }

    //
    // *** should also implement AccessibleSelection?
    // *** and what's up with keyboard navigation/manipulation?
    //
    /**
     * This class implements accessibility support for the
     * &lt;code&gt;JTableHeader&lt;/code&gt; class.  It provides an implementation of the
     * Java Accessibility API appropriate to table header user-interface
     * elements.
     * &lt;p&gt;
     * &lt;strong&gt;Warning:&lt;/strong&gt;
     * Serialized objects of this class will not be compatible with
     * future Swing releases. The current serialization support is
     * appropriate for short term storage or RMI between applications running
     * the same version of Swing.  As of 1.4, support for long term storage
     * of all JavaBeans&amp;trade;
     * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
     * Please see {@link java.beans.XMLEncoder}.
     */
<span class="nc" id="L783">    protected class AccessibleJTableHeader extends AccessibleJComponent {</span>

        /**
         * Get the role of this object.
         *
         * @return an instance of AccessibleRole describing the role of the
         * object
         * @see AccessibleRole
         */
        public AccessibleRole getAccessibleRole() {
<span class="nc" id="L793">            return AccessibleRole.PANEL;</span>
        }

        /**
         * Returns the Accessible child, if one exists, contained at the local
         * coordinate Point.
         *
         * @param p The point defining the top-left corner of the Accessible,
         * given in the coordinate space of the object's parent.
         * @return the Accessible, if it exists, at the specified location;
         * else null
         */
        public Accessible getAccessibleAt(Point p) {
            int column;

            // Locate the renderer under the Point
<span class="nc bnc" id="L809" title="All 2 branches missed.">            if ((column = JTableHeader.this.columnAtPoint(p)) != -1) {</span>
<span class="nc" id="L810">                TableColumn aColumn = JTableHeader.this.columnModel.getColumn(column);</span>
<span class="nc" id="L811">                TableCellRenderer renderer = aColumn.getHeaderRenderer();</span>
<span class="nc bnc" id="L812" title="All 2 branches missed.">                if (renderer == null) {</span>
<span class="nc bnc" id="L813" title="All 2 branches missed.">                    if (defaultRenderer != null) {</span>
<span class="nc" id="L814">                        renderer = defaultRenderer;</span>
                    } else {
<span class="nc" id="L816">                        return null;</span>
                    }
                }
<span class="nc" id="L819">                Component component = renderer.getTableCellRendererComponent(</span>
<span class="nc" id="L820">                                  JTableHeader.this.getTable(),</span>
<span class="nc" id="L821">                                  aColumn.getHeaderValue(), false, false,</span>
                                  -1, column);

<span class="nc" id="L824">                return new AccessibleJTableHeaderEntry(column, JTableHeader.this, JTableHeader.this.table);</span>
            } else {
<span class="nc" id="L826">                return null;</span>
            }
        }

        /**
         * Returns the number of accessible children in the object.  If all
         * of the children of this object implement Accessible, than this
         * method should return the number of children of this object.
         *
         * @return the number of accessible children in the object.
         */
        public int getAccessibleChildrenCount() {
<span class="nc" id="L838">            return JTableHeader.this.columnModel.getColumnCount();</span>
        }

        /**
         * Return the nth Accessible child of the object.
         *
         * @param i zero-based index of child
         * @return the nth Accessible child of the object
         */
        public Accessible getAccessibleChild(int i) {
<span class="nc bnc" id="L848" title="All 4 branches missed.">            if (i &lt; 0 || i &gt;= getAccessibleChildrenCount()) {</span>
<span class="nc" id="L849">                return null;</span>
            } else {
<span class="nc" id="L851">                TableColumn aColumn = JTableHeader.this.columnModel.getColumn(i)</span>
;
<span class="nc" id="L853">                TableCellRenderer renderer = aColumn.getHeaderRenderer();</span>
<span class="nc bnc" id="L854" title="All 2 branches missed.">                if (renderer == null) {</span>
<span class="nc bnc" id="L855" title="All 2 branches missed.">                    if (defaultRenderer != null) {</span>
<span class="nc" id="L856">                        renderer = defaultRenderer;</span>
                    } else {
<span class="nc" id="L858">                        return null;</span>
                    }
                }
<span class="nc" id="L861">                Component component = renderer.getTableCellRendererComponent(</span>
<span class="nc" id="L862">                                  JTableHeader.this.getTable(),</span>
<span class="nc" id="L863">                                  aColumn.getHeaderValue(), false, false,</span>
                                  -1, i);

<span class="nc" id="L866">                return new AccessibleJTableHeaderEntry(i, JTableHeader.this, JTableHeader.this.table);</span>
            }
        }

      /**
       * This class provides an implementation of the Java Accessibility
       * API appropriate for JTableHeader entries.
       */
<span class="nc" id="L874">        protected class AccessibleJTableHeaderEntry extends AccessibleContext</span>
            implements Accessible, AccessibleComponent  {

            private JTableHeader parent;
            private int column;
            private JTable table;

            /**
             *  Constructs an AccessiblJTableHeaaderEntry
             * @since 1.4
             */
<span class="nc" id="L885">            public AccessibleJTableHeaderEntry(int c, JTableHeader p, JTable t) {</span>
<span class="nc" id="L886">                parent = p;</span>
<span class="nc" id="L887">                column = c;</span>
<span class="nc" id="L888">                table = t;</span>
<span class="nc" id="L889">                this.setAccessibleParent(parent);</span>
<span class="nc" id="L890">            }</span>

            /**
             * Get the AccessibleContext associated with this object.
             * In the implementation of the Java Accessibility API
             * for this class, returns this object, which serves as
             * its own AccessibleContext.
             *
             * @return this object
             */
            public AccessibleContext getAccessibleContext() {
<span class="nc" id="L901">                return this;</span>
            }

            private AccessibleContext getCurrentAccessibleContext() {
<span class="nc" id="L905">                TableColumnModel tcm = table.getColumnModel();</span>
<span class="nc bnc" id="L906" title="All 2 branches missed.">                if (tcm != null) {</span>
                    // Fixes 4772355 - ArrayOutOfBoundsException in
                    // JTableHeader
<span class="nc bnc" id="L909" title="All 4 branches missed.">                    if (column &lt; 0 || column &gt;= tcm.getColumnCount()) {</span>
<span class="nc" id="L910">                        return null;</span>
                    }
<span class="nc" id="L912">                    TableColumn aColumn = tcm.getColumn(column);</span>
<span class="nc" id="L913">                    TableCellRenderer renderer = aColumn.getHeaderRenderer();</span>
<span class="nc bnc" id="L914" title="All 2 branches missed.">                    if (renderer == null) {</span>
<span class="nc bnc" id="L915" title="All 2 branches missed.">                        if (defaultRenderer != null) {</span>
<span class="nc" id="L916">                            renderer = defaultRenderer;</span>
                        } else {
<span class="nc" id="L918">                            return null;</span>
                        }
                    }
<span class="nc" id="L921">                    Component c = renderer.getTableCellRendererComponent(</span>
<span class="nc" id="L922">                                      JTableHeader.this.getTable(),</span>
<span class="nc" id="L923">                                      aColumn.getHeaderValue(), false, false,</span>
                                      -1, column);
<span class="nc bnc" id="L925" title="All 2 branches missed.">                    if (c instanceof Accessible) {</span>
<span class="nc" id="L926">                        return ((Accessible) c).getAccessibleContext();</span>
                    }
                }
<span class="nc" id="L929">                return null;</span>
            }

            private Component getCurrentComponent() {
<span class="nc" id="L933">                TableColumnModel tcm = table.getColumnModel();</span>
<span class="nc bnc" id="L934" title="All 2 branches missed.">                if (tcm != null) {</span>
                    // Fixes 4772355 - ArrayOutOfBoundsException in
                    // JTableHeader
<span class="nc bnc" id="L937" title="All 4 branches missed.">                    if (column &lt; 0 || column &gt;= tcm.getColumnCount()) {</span>
<span class="nc" id="L938">                        return null;</span>
                    }
<span class="nc" id="L940">                    TableColumn aColumn = tcm.getColumn(column);</span>
<span class="nc" id="L941">                    TableCellRenderer renderer = aColumn.getHeaderRenderer();</span>
<span class="nc bnc" id="L942" title="All 2 branches missed.">                    if (renderer == null) {</span>
<span class="nc bnc" id="L943" title="All 2 branches missed.">                        if (defaultRenderer != null) {</span>
<span class="nc" id="L944">                            renderer = defaultRenderer;</span>
                        } else {
<span class="nc" id="L946">                            return null;</span>
                        }
                    }
<span class="nc" id="L949">                    return renderer.getTableCellRendererComponent(</span>
<span class="nc" id="L950">                                      JTableHeader.this.getTable(),</span>
<span class="nc" id="L951">                                      aColumn.getHeaderValue(), false, false,</span>
                                      -1, column);
                } else {
<span class="nc" id="L954">                    return null;</span>
                }
            }

        // AccessibleContext methods

            public String getAccessibleName() {
<span class="nc" id="L961">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L962" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L963">                    String name = ac.getAccessibleName();</span>
<span class="nc bnc" id="L964" title="All 4 branches missed.">                    if ((name != null) &amp;&amp; (name != &quot;&quot;)) {</span>
                        // return the cell renderer's AccessibleName
<span class="nc" id="L966">                        return name;</span>
                    }
                }
<span class="nc bnc" id="L969" title="All 4 branches missed.">                if ((accessibleName != null) &amp;&amp; (accessibleName != &quot;&quot;)) {</span>
<span class="nc" id="L970">                    return accessibleName;</span>
                } else {
                    // fall back to the client property
<span class="nc" id="L973">                    String name = (String)getClientProperty(AccessibleContext.ACCESSIBLE_NAME_PROPERTY);</span>
<span class="nc bnc" id="L974" title="All 2 branches missed.">                    if (name != null) {</span>
<span class="nc" id="L975">                        return name;</span>
                    } else {
<span class="nc" id="L977">                        return table.getColumnName(column);</span>
                    }
                }
            }

            public void setAccessibleName(String s) {
<span class="nc" id="L983">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L984" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L985">                    ac.setAccessibleName(s);</span>
                } else {
<span class="nc" id="L987">                    super.setAccessibleName(s);</span>
                }
<span class="nc" id="L989">            }</span>

            //
            // *** should check toolTip text for desc. (needs MouseEvent)
            //
            public String getAccessibleDescription() {
<span class="nc" id="L995">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L996" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L997">                    return ac.getAccessibleDescription();</span>
                } else {
<span class="nc" id="L999">                    return super.getAccessibleDescription();</span>
                }
            }

            public void setAccessibleDescription(String s) {
<span class="nc" id="L1004">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1005" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1006">                    ac.setAccessibleDescription(s);</span>
                } else {
<span class="nc" id="L1008">                    super.setAccessibleDescription(s);</span>
                }
<span class="nc" id="L1010">            }</span>

            public AccessibleRole getAccessibleRole() {
<span class="nc" id="L1013">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1014" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1015">                    return ac.getAccessibleRole();</span>
                } else {
<span class="nc" id="L1017">                    return AccessibleRole.COLUMN_HEADER;</span>
                }
            }

            public AccessibleStateSet getAccessibleStateSet() {
<span class="nc" id="L1022">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1023" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1024">                    AccessibleStateSet states = ac.getAccessibleStateSet();</span>
<span class="nc bnc" id="L1025" title="All 2 branches missed.">                    if (isShowing()) {</span>
<span class="nc" id="L1026">                        states.add(AccessibleState.SHOWING);</span>
                    }
<span class="nc" id="L1028">                    return states;</span>
                } else {
<span class="nc" id="L1030">                    return new AccessibleStateSet();  // must be non null?</span>
                }
            }

            public int getAccessibleIndexInParent() {
<span class="nc" id="L1035">                return column;</span>
            }

            public int getAccessibleChildrenCount() {
<span class="nc" id="L1039">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1040" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1041">                    return ac.getAccessibleChildrenCount();</span>
                } else {
<span class="nc" id="L1043">                    return 0;</span>
                }
            }

            public Accessible getAccessibleChild(int i) {
<span class="nc" id="L1048">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1049" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1050">                    Accessible accessibleChild = ac.getAccessibleChild(i);</span>
<span class="nc" id="L1051">                    ac.setAccessibleParent(this);</span>
<span class="nc" id="L1052">                    return accessibleChild;</span>
                } else {
<span class="nc" id="L1054">                    return null;</span>
                }
            }

            public Locale getLocale() {
<span class="nc" id="L1059">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1060" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1061">                    return ac.getLocale();</span>
                } else {
<span class="nc" id="L1063">                    return null;</span>
                }
            }

            public void addPropertyChangeListener(PropertyChangeListener l) {
<span class="nc" id="L1068">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1069" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1070">                    ac.addPropertyChangeListener(l);</span>
                } else {
<span class="nc" id="L1072">                    super.addPropertyChangeListener(l);</span>
                }
<span class="nc" id="L1074">            }</span>

            public void removePropertyChangeListener(PropertyChangeListener l) {
<span class="nc" id="L1077">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1078" title="All 2 branches missed.">                if (ac != null) {</span>
<span class="nc" id="L1079">                    ac.removePropertyChangeListener(l);</span>
                } else {
<span class="nc" id="L1081">                    super.removePropertyChangeListener(l);</span>
                }
<span class="nc" id="L1083">            }</span>

            public AccessibleAction getAccessibleAction() {
<span class="nc" id="L1086">                return getCurrentAccessibleContext().getAccessibleAction();</span>
            }

           /**
            * Get the AccessibleComponent associated with this object.  In the
            * implementation of the Java Accessibility API for this class,
            * return this object, which is responsible for implementing the
            * AccessibleComponent interface on behalf of itself.
            *
            * @return this object
            */
            public AccessibleComponent getAccessibleComponent() {
<span class="nc" id="L1098">                return this; // to override getBounds()</span>
            }

            public AccessibleSelection getAccessibleSelection() {
<span class="nc" id="L1102">                return getCurrentAccessibleContext().getAccessibleSelection();</span>
            }

            public AccessibleText getAccessibleText() {
<span class="nc" id="L1106">                return getCurrentAccessibleContext().getAccessibleText();</span>
            }

            public AccessibleValue getAccessibleValue() {
<span class="nc" id="L1110">                return getCurrentAccessibleContext().getAccessibleValue();</span>
            }


        // AccessibleComponent methods

            public Color getBackground() {
<span class="nc" id="L1117">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1118" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1119">                    return ((AccessibleComponent) ac).getBackground();</span>
                } else {
<span class="nc" id="L1121">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1122" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1123">                        return c.getBackground();</span>
                    } else {
<span class="nc" id="L1125">                        return null;</span>
                    }
                }
            }

            public void setBackground(Color c) {
<span class="nc" id="L1131">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1132" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1133">                    ((AccessibleComponent) ac).setBackground(c);</span>
                } else {
<span class="nc" id="L1135">                    Component cp = getCurrentComponent();</span>
<span class="nc bnc" id="L1136" title="All 2 branches missed.">                    if (cp != null) {</span>
<span class="nc" id="L1137">                        cp.setBackground(c);</span>
                    }
                }
<span class="nc" id="L1140">            }</span>

            public Color getForeground() {
<span class="nc" id="L1143">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1144" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1145">                    return ((AccessibleComponent) ac).getForeground();</span>
                } else {
<span class="nc" id="L1147">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1148" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1149">                        return c.getForeground();</span>
                    } else {
<span class="nc" id="L1151">                        return null;</span>
                    }
                }
            }

            public void setForeground(Color c) {
<span class="nc" id="L1157">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1158" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1159">                    ((AccessibleComponent) ac).setForeground(c);</span>
                } else {
<span class="nc" id="L1161">                    Component cp = getCurrentComponent();</span>
<span class="nc bnc" id="L1162" title="All 2 branches missed.">                    if (cp != null) {</span>
<span class="nc" id="L1163">                        cp.setForeground(c);</span>
                    }
                }
<span class="nc" id="L1166">            }</span>

            public Cursor getCursor() {
<span class="nc" id="L1169">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1170" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1171">                    return ((AccessibleComponent) ac).getCursor();</span>
                } else {
<span class="nc" id="L1173">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1174" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1175">                        return c.getCursor();</span>
                    } else {
<span class="nc" id="L1177">                        Accessible ap = getAccessibleParent();</span>
<span class="nc bnc" id="L1178" title="All 2 branches missed.">                        if (ap instanceof AccessibleComponent) {</span>
<span class="nc" id="L1179">                            return ((AccessibleComponent) ap).getCursor();</span>
                        } else {
<span class="nc" id="L1181">                            return null;</span>
                        }
                    }
                }
            }

            public void setCursor(Cursor c) {
<span class="nc" id="L1188">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1189" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1190">                    ((AccessibleComponent) ac).setCursor(c);</span>
                } else {
<span class="nc" id="L1192">                    Component cp = getCurrentComponent();</span>
<span class="nc bnc" id="L1193" title="All 2 branches missed.">                    if (cp != null) {</span>
<span class="nc" id="L1194">                        cp.setCursor(c);</span>
                    }
                }
<span class="nc" id="L1197">            }</span>

            public Font getFont() {
<span class="nc" id="L1200">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1201" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1202">                    return ((AccessibleComponent) ac).getFont();</span>
                } else {
<span class="nc" id="L1204">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1205" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1206">                        return c.getFont();</span>
                    } else {
<span class="nc" id="L1208">                        return null;</span>
                    }
                }
            }

            public void setFont(Font f) {
<span class="nc" id="L1214">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1215" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1216">                    ((AccessibleComponent) ac).setFont(f);</span>
                } else {
<span class="nc" id="L1218">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1219" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1220">                        c.setFont(f);</span>
                    }
                }
<span class="nc" id="L1223">            }</span>

            public FontMetrics getFontMetrics(Font f) {
<span class="nc" id="L1226">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1227" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1228">                    return ((AccessibleComponent) ac).getFontMetrics(f);</span>
                } else {
<span class="nc" id="L1230">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1231" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1232">                        return c.getFontMetrics(f);</span>
                    } else {
<span class="nc" id="L1234">                        return null;</span>
                    }
                }
            }

            public boolean isEnabled() {
<span class="nc" id="L1240">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1241" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1242">                    return ((AccessibleComponent) ac).isEnabled();</span>
                } else {
<span class="nc" id="L1244">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1245" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1246">                        return c.isEnabled();</span>
                    } else {
<span class="nc" id="L1248">                        return false;</span>
                    }
                }
            }

            public void setEnabled(boolean b) {
<span class="nc" id="L1254">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1255" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1256">                    ((AccessibleComponent) ac).setEnabled(b);</span>
                } else {
<span class="nc" id="L1258">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1259" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1260">                        c.setEnabled(b);</span>
                    }
                }
<span class="nc" id="L1263">            }</span>

            public boolean isVisible() {
<span class="nc" id="L1266">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1267" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1268">                    return ((AccessibleComponent) ac).isVisible();</span>
                } else {
<span class="nc" id="L1270">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1271" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1272">                        return c.isVisible();</span>
                    } else {
<span class="nc" id="L1274">                        return false;</span>
                    }
                }
            }

            public void setVisible(boolean b) {
<span class="nc" id="L1280">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1281" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1282">                    ((AccessibleComponent) ac).setVisible(b);</span>
                } else {
<span class="nc" id="L1284">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1285" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1286">                        c.setVisible(b);</span>
                    }
                }
<span class="nc" id="L1289">            }</span>

            public boolean isShowing() {
<span class="nc bnc" id="L1292" title="All 4 branches missed.">                if (isVisible() &amp;&amp; JTableHeader.this.isShowing()) {</span>
<span class="nc" id="L1293">                    return true;</span>
                } else {
<span class="nc" id="L1295">                    return false;</span>
                }
            }

            public boolean contains(Point p) {
<span class="nc" id="L1300">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1301" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1302">                    Rectangle r = ((AccessibleComponent) ac).getBounds();</span>
<span class="nc" id="L1303">                    return r.contains(p);</span>
                } else {
<span class="nc" id="L1305">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1306" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1307">                        Rectangle r = c.getBounds();</span>
<span class="nc" id="L1308">                        return r.contains(p);</span>
                    } else {
<span class="nc" id="L1310">                        return getBounds().contains(p);</span>
                    }
                }
            }

            public Point getLocationOnScreen() {
<span class="nc bnc" id="L1316" title="All 2 branches missed.">                if (parent != null) {</span>
<span class="nc" id="L1317">                    Point parentLocation = parent.getLocationOnScreen();</span>
<span class="nc" id="L1318">                    Point componentLocation = getLocation();</span>
<span class="nc" id="L1319">                    componentLocation.translate(parentLocation.x, parentLocation.y);</span>
<span class="nc" id="L1320">                    return componentLocation;</span>
                } else {
<span class="nc" id="L1322">                    return null;</span>
                }
            }

            public Point getLocation() {
<span class="nc" id="L1327">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1328" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1329">                    Rectangle r = ((AccessibleComponent) ac).getBounds();</span>
<span class="nc" id="L1330">                    return r.getLocation();</span>
                } else {
<span class="nc" id="L1332">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1333" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1334">                        Rectangle r = c.getBounds();</span>
<span class="nc" id="L1335">                        return r.getLocation();</span>
                    } else {
<span class="nc" id="L1337">                        return getBounds().getLocation();</span>
                    }
                }
            }

            public void setLocation(Point p) {
//                if ((parent != null)  &amp;&amp; (parent.contains(p))) {
//                    ensureIndexIsVisible(indexInParent);
//                }
<span class="nc" id="L1346">            }</span>

            public Rectangle getBounds() {
<span class="nc" id="L1349">                  Rectangle r = table.getCellRect(-1, column, false);</span>
<span class="nc" id="L1350">                  r.y = 0;</span>
<span class="nc" id="L1351">                  return r;</span>

//                AccessibleContext ac = getCurrentAccessibleContext();
//                if (ac instanceof AccessibleComponent) {
//                    return ((AccessibleComponent) ac).getBounds();
//                } else {
//                  Component c = getCurrentComponent();
//                  if (c != null) {
//                      return c.getBounds();
//                  } else {
//                      Rectangle r = table.getCellRect(-1, column, false);
//                      r.y = 0;
//                      return r;
//                  }
//              }
            }

            public void setBounds(Rectangle r) {
<span class="nc" id="L1369">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1370" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1371">                    ((AccessibleComponent) ac).setBounds(r);</span>
                } else {
<span class="nc" id="L1373">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1374" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1375">                        c.setBounds(r);</span>
                    }
                }
<span class="nc" id="L1378">            }</span>

            public Dimension getSize() {
<span class="nc" id="L1381">                return getBounds().getSize();</span>
//                AccessibleContext ac = getCurrentAccessibleContext();
//                if (ac instanceof AccessibleComponent) {
//                    Rectangle r = ((AccessibleComponent) ac).getBounds();
//                    return r.getSize();
//                } else {
//                    Component c = getCurrentComponent();
//                    if (c != null) {
//                        Rectangle r = c.getBounds();
//                        return r.getSize();
//                    } else {
//                        return getBounds().getSize();
//                    }
//                }
            }

            public void setSize (Dimension d) {
<span class="nc" id="L1398">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1399" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1400">                    ((AccessibleComponent) ac).setSize(d);</span>
                } else {
<span class="nc" id="L1402">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1403" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1404">                        c.setSize(d);</span>
                    }
                }
<span class="nc" id="L1407">            }</span>

            public Accessible getAccessibleAt(Point p) {
<span class="nc" id="L1410">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1411" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1412">                    return ((AccessibleComponent) ac).getAccessibleAt(p);</span>
                } else {
<span class="nc" id="L1414">                    return null;</span>
                }
            }

            public boolean isFocusTraversable() {
<span class="nc" id="L1419">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1420" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1421">                    return ((AccessibleComponent) ac).isFocusTraversable();</span>
                } else {
<span class="nc" id="L1423">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1424" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1425">                        return c.isFocusTraversable();</span>
                    } else {
<span class="nc" id="L1427">                        return false;</span>
                    }
                }
            }

            public void requestFocus() {
<span class="nc" id="L1433">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1434" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1435">                    ((AccessibleComponent) ac).requestFocus();</span>
                } else {
<span class="nc" id="L1437">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1438" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1439">                        c.requestFocus();</span>
                    }
                }
<span class="nc" id="L1442">            }</span>

            public void addFocusListener(FocusListener l) {
<span class="nc" id="L1445">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1446" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1447">                    ((AccessibleComponent) ac).addFocusListener(l);</span>
                } else {
<span class="nc" id="L1449">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1450" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1451">                        c.addFocusListener(l);</span>
                    }
                }
<span class="nc" id="L1454">            }</span>

            public void removeFocusListener(FocusListener l) {
<span class="nc" id="L1457">                AccessibleContext ac = getCurrentAccessibleContext();</span>
<span class="nc bnc" id="L1458" title="All 2 branches missed.">                if (ac instanceof AccessibleComponent) {</span>
<span class="nc" id="L1459">                    ((AccessibleComponent) ac).removeFocusListener(l);</span>
                } else {
<span class="nc" id="L1461">                    Component c = getCurrentComponent();</span>
<span class="nc bnc" id="L1462" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L1463">                        c.removeFocusListener(l);</span>
                    }
                }
<span class="nc" id="L1466">            }</span>

        } // inner class AccessibleJTableHeaderElement

    }  // inner class AccessibleJTableHeader

}  // End of Class JTableHeader
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>