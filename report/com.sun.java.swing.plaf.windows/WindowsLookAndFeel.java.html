<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>WindowsLookAndFeel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">com.sun.java.swing.plaf.windows</a> &gt; <span class="el_source">WindowsLookAndFeel.java</span></div><h1>WindowsLookAndFeel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2012, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

/*
 * &lt;p&gt;These classes are designed to be used while the
 * corresponding &lt;code&gt;LookAndFeel&lt;/code&gt; class has been installed
 * (&lt;code&gt;UIManager.setLookAndFeel(new &lt;i&gt;XXX&lt;/i&gt;LookAndFeel())&lt;/code&gt;).
 * Using them while a different &lt;code&gt;LookAndFeel&lt;/code&gt; is installed
 * may produce unexpected results, including exceptions.
 * Additionally, changing the &lt;code&gt;LookAndFeel&lt;/code&gt;
 * maintained by the &lt;code&gt;UIManager&lt;/code&gt; without updating the
 * corresponding &lt;code&gt;ComponentUI&lt;/code&gt; of any
 * &lt;code&gt;JComponent&lt;/code&gt;s may also produce unexpected results,
 * such as the wrong colors showing up, and is generally not
 * encouraged.
 *
 */

package com.sun.java.swing.plaf.windows;

import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.ImageFilter;
import java.awt.image.ImageProducer;
import java.awt.image.FilteredImageSource;
import java.awt.image.RGBImageFilter;

import javax.swing.plaf.*;
import javax.swing.*;
import javax.swing.plaf.basic.*;
import javax.swing.border.*;
import javax.swing.text.DefaultEditorKit;

import java.awt.Font;
import java.awt.Color;
import java.awt.event.ActionEvent;

import java.security.AccessController;

import sun.awt.SunToolkit;
import sun.awt.OSInfo;
import sun.awt.shell.ShellFolder;
import sun.font.FontUtilities;
import sun.security.action.GetPropertyAction;

import sun.swing.DefaultLayoutStyle;
import sun.swing.ImageIconUIResource;
import sun.swing.SwingLazyValue;
import sun.swing.SwingUtilities2;
import sun.swing.StringUIClientPropertyKey;

import static com.sun.java.swing.plaf.windows.TMSchema.*;
import static com.sun.java.swing.plaf.windows.XPStyle.Skin;

import com.sun.java.swing.plaf.windows.WindowsIconFactory.VistaMenuItemCheckIconFactory;

/**
 * Implements the Windows95/98/NT/2000 Look and Feel.
 * UI classes not implemented specifically for Windows will
 * default to those implemented in Basic.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases.  The current serialization support is appropriate
 * for short term storage or RMI between applications running the same
 * version of Swing.  A future release of Swing will provide support for
 * long term persistence.
 *
 * @author unattributed
 */
<span class="nc bnc" id="L93" title="All 2 branches missed.">public class WindowsLookAndFeel extends BasicLookAndFeel</span>
{
    /**
     * A client property that can be used with any JComponent that will end up
     * calling the LookAndFeel.getDisabledIcon method. This client property,
     * when set to Boolean.TRUE, will cause getDisabledIcon to use an
     * alternate algorithm for creating disabled icons to produce icons
     * that appear similar to the native Windows file chooser
     */
<span class="nc" id="L102">    static final Object HI_RES_DISABLED_ICON_CLIENT_KEY =</span>
        new StringUIClientPropertyKey(
            &quot;WindowsLookAndFeel.generateHiResDisabledIcon&quot;);

<span class="nc" id="L106">    private boolean updatePending = false;</span>

<span class="nc" id="L108">    private boolean useSystemFontSettings = true;</span>
    private boolean useSystemFontSizeSettings;

    // These properties are not used directly, but are kept as
    // private members to avoid being GC'd.
    private DesktopProperty themeActive, dllName, colorName, sizeName;
    private DesktopProperty aaSettings;

    private transient LayoutStyle style;

    /**
     * Base dialog units along the horizontal axis.
     */
    private int baseUnitX;

    /**
     * Base dialog units along the vertical axis.
     */
    private int baseUnitY;

    public String getName() {
<span class="nc" id="L129">        return &quot;Windows&quot;;</span>
    }

    public String getDescription() {
<span class="nc" id="L133">        return &quot;The Microsoft Windows Look and Feel&quot;;</span>
    }

    public String getID() {
<span class="nc" id="L137">        return &quot;Windows&quot;;</span>
    }

    public boolean isNativeLookAndFeel() {
<span class="nc bnc" id="L141" title="All 2 branches missed.">        return OSInfo.getOSType() == OSInfo.OSType.WINDOWS;</span>
    }

    public boolean isSupportedLookAndFeel() {
<span class="nc" id="L145">        return isNativeLookAndFeel();</span>
    }

    public void initialize() {
<span class="nc" id="L149">        super.initialize();</span>

        // Set the flag which determines which version of Windows should
        // be rendered. This flag only need to be set once.
        // if version &lt;= 4.0 then the classic LAF should be loaded.
<span class="nc bnc" id="L154" title="All 2 branches missed.">        if (OSInfo.getWindowsVersion().compareTo(OSInfo.WINDOWS_95) &lt;= 0) {</span>
<span class="nc" id="L155">            isClassicWindows = true;</span>
        } else {
<span class="nc" id="L157">            isClassicWindows = false;</span>
<span class="nc" id="L158">            XPStyle.invalidateStyle();</span>
        }

        // Using the fonts set by the user can potentially cause
        // performance and compatibility issues, so allow this feature
        // to be switched off either at runtime or programmatically
        //
<span class="nc" id="L165">        String systemFonts = java.security.AccessController.doPrivileged(</span>
               new GetPropertyAction(&quot;swing.useSystemFontSettings&quot;));
<span class="nc bnc" id="L167" title="All 2 branches missed.">        useSystemFontSettings = (systemFonts == null ||</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">                                 Boolean.valueOf(systemFonts).booleanValue());</span>

<span class="nc bnc" id="L170" title="All 2 branches missed.">        if (useSystemFontSettings) {</span>
<span class="nc" id="L171">            Object value = UIManager.get(&quot;Application.useSystemFontSettings&quot;);</span>

<span class="nc bnc" id="L173" title="All 2 branches missed.">            useSystemFontSettings = (value == null ||</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">                                     Boolean.TRUE.equals(value));</span>
        }
<span class="nc" id="L176">        KeyboardFocusManager.getCurrentKeyboardFocusManager().</span>
<span class="nc" id="L177">            addKeyEventPostProcessor(WindowsRootPaneUI.altProcessor);</span>

<span class="nc" id="L179">    }</span>

    /**
     * Initialize the uiClassID to BasicComponentUI mapping.
     * The JComponent classes define their own uiClassID constants
     * (see AbstractComponent.getUIClassID).  This table must
     * map those constants to a BasicComponentUI class of the
     * appropriate type.
     *
     * @see BasicLookAndFeel#getDefaults
     */
    protected void initClassDefaults(UIDefaults table)
    {
<span class="nc" id="L192">        super.initClassDefaults(table);</span>

        final String windowsPackageName = &quot;com.sun.java.swing.plaf.windows.&quot;;

<span class="nc" id="L196">        Object[] uiDefaults = {</span>
              &quot;ButtonUI&quot;, windowsPackageName + &quot;WindowsButtonUI&quot;,
            &quot;CheckBoxUI&quot;, windowsPackageName + &quot;WindowsCheckBoxUI&quot;,
    &quot;CheckBoxMenuItemUI&quot;, windowsPackageName + &quot;WindowsCheckBoxMenuItemUI&quot;,
               &quot;LabelUI&quot;, windowsPackageName + &quot;WindowsLabelUI&quot;,
         &quot;RadioButtonUI&quot;, windowsPackageName + &quot;WindowsRadioButtonUI&quot;,
 &quot;RadioButtonMenuItemUI&quot;, windowsPackageName + &quot;WindowsRadioButtonMenuItemUI&quot;,
        &quot;ToggleButtonUI&quot;, windowsPackageName + &quot;WindowsToggleButtonUI&quot;,
         &quot;ProgressBarUI&quot;, windowsPackageName + &quot;WindowsProgressBarUI&quot;,
              &quot;SliderUI&quot;, windowsPackageName + &quot;WindowsSliderUI&quot;,
           &quot;SeparatorUI&quot;, windowsPackageName + &quot;WindowsSeparatorUI&quot;,
           &quot;SplitPaneUI&quot;, windowsPackageName + &quot;WindowsSplitPaneUI&quot;,
             &quot;SpinnerUI&quot;, windowsPackageName + &quot;WindowsSpinnerUI&quot;,
          &quot;TabbedPaneUI&quot;, windowsPackageName + &quot;WindowsTabbedPaneUI&quot;,
            &quot;TextAreaUI&quot;, windowsPackageName + &quot;WindowsTextAreaUI&quot;,
           &quot;TextFieldUI&quot;, windowsPackageName + &quot;WindowsTextFieldUI&quot;,
       &quot;PasswordFieldUI&quot;, windowsPackageName + &quot;WindowsPasswordFieldUI&quot;,
            &quot;TextPaneUI&quot;, windowsPackageName + &quot;WindowsTextPaneUI&quot;,
          &quot;EditorPaneUI&quot;, windowsPackageName + &quot;WindowsEditorPaneUI&quot;,
                &quot;TreeUI&quot;, windowsPackageName + &quot;WindowsTreeUI&quot;,
             &quot;ToolBarUI&quot;, windowsPackageName + &quot;WindowsToolBarUI&quot;,
    &quot;ToolBarSeparatorUI&quot;, windowsPackageName + &quot;WindowsToolBarSeparatorUI&quot;,
            &quot;ComboBoxUI&quot;, windowsPackageName + &quot;WindowsComboBoxUI&quot;,
         &quot;TableHeaderUI&quot;, windowsPackageName + &quot;WindowsTableHeaderUI&quot;,
       &quot;InternalFrameUI&quot;, windowsPackageName + &quot;WindowsInternalFrameUI&quot;,
         &quot;DesktopPaneUI&quot;, windowsPackageName + &quot;WindowsDesktopPaneUI&quot;,
         &quot;DesktopIconUI&quot;, windowsPackageName + &quot;WindowsDesktopIconUI&quot;,
         &quot;FileChooserUI&quot;, windowsPackageName + &quot;WindowsFileChooserUI&quot;,
                &quot;MenuUI&quot;, windowsPackageName + &quot;WindowsMenuUI&quot;,
            &quot;MenuItemUI&quot;, windowsPackageName + &quot;WindowsMenuItemUI&quot;,
             &quot;MenuBarUI&quot;, windowsPackageName + &quot;WindowsMenuBarUI&quot;,
           &quot;PopupMenuUI&quot;, windowsPackageName + &quot;WindowsPopupMenuUI&quot;,
  &quot;PopupMenuSeparatorUI&quot;, windowsPackageName + &quot;WindowsPopupMenuSeparatorUI&quot;,
           &quot;ScrollBarUI&quot;, windowsPackageName + &quot;WindowsScrollBarUI&quot;,
            &quot;RootPaneUI&quot;, windowsPackageName + &quot;WindowsRootPaneUI&quot;
        };

<span class="nc" id="L233">        table.putDefaults(uiDefaults);</span>
<span class="nc" id="L234">    }</span>

    /**
     * Load the SystemColors into the defaults table.  The keys
     * for SystemColor defaults are the same as the names of
     * the public fields in SystemColor.  If the table is being
     * created on a native Windows platform we use the SystemColor
     * values, otherwise we create color objects whose values match
     * the defaults Windows95 colors.
     */
    protected void initSystemColorDefaults(UIDefaults table)
    {
<span class="nc" id="L246">        String[] defaultSystemColors = {</span>
                &quot;desktop&quot;, &quot;#005C5C&quot;, /* Color of the desktop background */
          &quot;activeCaption&quot;, &quot;#000080&quot;, /* Color for captions (title bars) when they are active. */
      &quot;activeCaptionText&quot;, &quot;#FFFFFF&quot;, /* Text color for text in captions (title bars). */
    &quot;activeCaptionBorder&quot;, &quot;#C0C0C0&quot;, /* Border color for caption (title bar) window borders. */
        &quot;inactiveCaption&quot;, &quot;#808080&quot;, /* Color for captions (title bars) when not active. */
    &quot;inactiveCaptionText&quot;, &quot;#C0C0C0&quot;, /* Text color for text in inactive captions (title bars). */
  &quot;inactiveCaptionBorder&quot;, &quot;#C0C0C0&quot;, /* Border color for inactive caption (title bar) window borders. */
                 &quot;window&quot;, &quot;#FFFFFF&quot;, /* Default color for the interior of windows */
           &quot;windowBorder&quot;, &quot;#000000&quot;, /* ??? */
             &quot;windowText&quot;, &quot;#000000&quot;, /* ??? */
                   &quot;menu&quot;, &quot;#C0C0C0&quot;, /* Background color for menus */
       &quot;menuPressedItemB&quot;, &quot;#000080&quot;, /* LightShadow of menubutton highlight */
       &quot;menuPressedItemF&quot;, &quot;#FFFFFF&quot;, /* Default color for foreground &quot;text&quot; in menu item */
               &quot;menuText&quot;, &quot;#000000&quot;, /* Text color for menus  */
                   &quot;text&quot;, &quot;#C0C0C0&quot;, /* Text background color */
               &quot;textText&quot;, &quot;#000000&quot;, /* Text foreground color */
          &quot;textHighlight&quot;, &quot;#000080&quot;, /* Text background color when selected */
      &quot;textHighlightText&quot;, &quot;#FFFFFF&quot;, /* Text color when selected */
       &quot;textInactiveText&quot;, &quot;#808080&quot;, /* Text color when disabled */
                &quot;control&quot;, &quot;#C0C0C0&quot;, /* Default color for controls (buttons, sliders, etc) */
            &quot;controlText&quot;, &quot;#000000&quot;, /* Default color for text in controls */
       &quot;controlHighlight&quot;, &quot;#C0C0C0&quot;,

  /*&quot;controlHighlight&quot;, &quot;#E0E0E0&quot;,*/ /* Specular highlight (opposite of the shadow) */
     &quot;controlLtHighlight&quot;, &quot;#FFFFFF&quot;, /* Highlight color for controls */
          &quot;controlShadow&quot;, &quot;#808080&quot;, /* Shadow color for controls */
        &quot;controlDkShadow&quot;, &quot;#000000&quot;, /* Dark shadow color for controls */
              &quot;scrollbar&quot;, &quot;#E0E0E0&quot;, /* Scrollbar background (usually the &quot;track&quot;) */
                   &quot;info&quot;, &quot;#FFFFE1&quot;, /* ??? */
               &quot;infoText&quot;, &quot;#000000&quot;  /* ??? */
        };

<span class="nc" id="L279">        loadSystemColors(table, defaultSystemColors, isNativeLookAndFeel());</span>
<span class="nc" id="L280">    }</span>

   /**
     * Initialize the defaults table with the name of the ResourceBundle
     * used for getting localized defaults.
     */
    private void initResourceBundle(UIDefaults table) {
<span class="nc" id="L287">        table.addResourceBundle( &quot;com.sun.java.swing.plaf.windows.resources.windows&quot; );</span>
<span class="nc" id="L288">    }</span>

    // XXX - there are probably a lot of redundant values that could be removed.
    // ie. Take a look at RadioButtonBorder, etc...
    protected void initComponentDefaults(UIDefaults table)
    {
<span class="nc" id="L294">        super.initComponentDefaults( table );</span>

<span class="nc" id="L296">        initResourceBundle(table);</span>

        // *** Shared Fonts
<span class="nc" id="L299">        Integer twelve = Integer.valueOf(12);</span>
<span class="nc" id="L300">        Integer fontPlain = Integer.valueOf(Font.PLAIN);</span>
<span class="nc" id="L301">        Integer fontBold = Integer.valueOf(Font.BOLD);</span>

<span class="nc" id="L303">        Object dialogPlain12 = new SwingLazyValue(</span>
                               &quot;javax.swing.plaf.FontUIResource&quot;,
                               null,
                               new Object[] {Font.DIALOG, fontPlain, twelve});

<span class="nc" id="L308">        Object sansSerifPlain12 =  new SwingLazyValue(</span>
                          &quot;javax.swing.plaf.FontUIResource&quot;,
                          null,
                          new Object[] {Font.SANS_SERIF, fontPlain, twelve});
<span class="nc" id="L312">        Object monospacedPlain12 = new SwingLazyValue(</span>
                          &quot;javax.swing.plaf.FontUIResource&quot;,
                          null,
                          new Object[] {Font.MONOSPACED, fontPlain, twelve});
<span class="nc" id="L316">        Object dialogBold12 = new SwingLazyValue(</span>
                          &quot;javax.swing.plaf.FontUIResource&quot;,
                          null,
                          new Object[] {Font.DIALOG, fontBold, twelve});

        // *** Colors
        // XXX - some of these doens't seem to be used
<span class="nc" id="L323">        ColorUIResource red = new ColorUIResource(Color.red);</span>
<span class="nc" id="L324">        ColorUIResource black = new ColorUIResource(Color.black);</span>
<span class="nc" id="L325">        ColorUIResource white = new ColorUIResource(Color.white);</span>
<span class="nc" id="L326">        ColorUIResource gray = new ColorUIResource(Color.gray);</span>
<span class="nc" id="L327">        ColorUIResource darkGray = new ColorUIResource(Color.darkGray);</span>
<span class="nc" id="L328">        ColorUIResource scrollBarTrackHighlight = darkGray;</span>

        // Set the flag which determines which version of Windows should
        // be rendered. This flag only need to be set once.
        // if version &lt;= 4.0 then the classic LAF should be loaded.
<span class="nc bnc" id="L333" title="All 2 branches missed.">        isClassicWindows = OSInfo.getWindowsVersion().compareTo(OSInfo.WINDOWS_95) &lt;= 0;</span>

        // *** Tree
<span class="nc" id="L336">        Object treeExpandedIcon = WindowsTreeUI.ExpandedIcon.createExpandedIcon();</span>

<span class="nc" id="L338">        Object treeCollapsedIcon = WindowsTreeUI.CollapsedIcon.createCollapsedIcon();</span>


        // *** Text
<span class="nc" id="L342">        Object fieldInputMap = new UIDefaults.LazyInputMap(new Object[] {</span>
                      &quot;control C&quot;, DefaultEditorKit.copyAction,
                      &quot;control V&quot;, DefaultEditorKit.pasteAction,
                      &quot;control X&quot;, DefaultEditorKit.cutAction,
                           &quot;COPY&quot;, DefaultEditorKit.copyAction,
                          &quot;PASTE&quot;, DefaultEditorKit.pasteAction,
                            &quot;CUT&quot;, DefaultEditorKit.cutAction,
                 &quot;control INSERT&quot;, DefaultEditorKit.copyAction,
                   &quot;shift INSERT&quot;, DefaultEditorKit.pasteAction,
                   &quot;shift DELETE&quot;, DefaultEditorKit.cutAction,
                      &quot;control A&quot;, DefaultEditorKit.selectAllAction,
             &quot;control BACK_SLASH&quot;, &quot;unselect&quot;/*DefaultEditorKit.unselectAction*/,
                     &quot;shift LEFT&quot;, DefaultEditorKit.selectionBackwardAction,
                    &quot;shift RIGHT&quot;, DefaultEditorKit.selectionForwardAction,
                   &quot;control LEFT&quot;, DefaultEditorKit.previousWordAction,
                  &quot;control RIGHT&quot;, DefaultEditorKit.nextWordAction,
             &quot;control shift LEFT&quot;, DefaultEditorKit.selectionPreviousWordAction,
            &quot;control shift RIGHT&quot;, DefaultEditorKit.selectionNextWordAction,
                           &quot;HOME&quot;, DefaultEditorKit.beginLineAction,
                            &quot;END&quot;, DefaultEditorKit.endLineAction,
                     &quot;shift HOME&quot;, DefaultEditorKit.selectionBeginLineAction,
                      &quot;shift END&quot;, DefaultEditorKit.selectionEndLineAction,
                     &quot;BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
               &quot;shift BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;ctrl H&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;DELETE&quot;, DefaultEditorKit.deleteNextCharAction,
                    &quot;ctrl DELETE&quot;, DefaultEditorKit.deleteNextWordAction,
                &quot;ctrl BACK_SPACE&quot;, DefaultEditorKit.deletePrevWordAction,
                          &quot;RIGHT&quot;, DefaultEditorKit.forwardAction,
                           &quot;LEFT&quot;, DefaultEditorKit.backwardAction,
                       &quot;KP_RIGHT&quot;, DefaultEditorKit.forwardAction,
                        &quot;KP_LEFT&quot;, DefaultEditorKit.backwardAction,
                          &quot;ENTER&quot;, JTextField.notifyAction,
                &quot;control shift O&quot;, &quot;toggle-componentOrientation&quot;/*DefaultEditorKit.toggleComponentOrientation*/
        });

<span class="nc" id="L378">        Object passwordInputMap = new UIDefaults.LazyInputMap(new Object[] {</span>
                      &quot;control C&quot;, DefaultEditorKit.copyAction,
                      &quot;control V&quot;, DefaultEditorKit.pasteAction,
                      &quot;control X&quot;, DefaultEditorKit.cutAction,
                           &quot;COPY&quot;, DefaultEditorKit.copyAction,
                          &quot;PASTE&quot;, DefaultEditorKit.pasteAction,
                            &quot;CUT&quot;, DefaultEditorKit.cutAction,
                 &quot;control INSERT&quot;, DefaultEditorKit.copyAction,
                   &quot;shift INSERT&quot;, DefaultEditorKit.pasteAction,
                   &quot;shift DELETE&quot;, DefaultEditorKit.cutAction,
                      &quot;control A&quot;, DefaultEditorKit.selectAllAction,
             &quot;control BACK_SLASH&quot;, &quot;unselect&quot;/*DefaultEditorKit.unselectAction*/,
                     &quot;shift LEFT&quot;, DefaultEditorKit.selectionBackwardAction,
                    &quot;shift RIGHT&quot;, DefaultEditorKit.selectionForwardAction,
                   &quot;control LEFT&quot;, DefaultEditorKit.beginLineAction,
                  &quot;control RIGHT&quot;, DefaultEditorKit.endLineAction,
             &quot;control shift LEFT&quot;, DefaultEditorKit.selectionBeginLineAction,
            &quot;control shift RIGHT&quot;, DefaultEditorKit.selectionEndLineAction,
                           &quot;HOME&quot;, DefaultEditorKit.beginLineAction,
                            &quot;END&quot;, DefaultEditorKit.endLineAction,
                     &quot;shift HOME&quot;, DefaultEditorKit.selectionBeginLineAction,
                      &quot;shift END&quot;, DefaultEditorKit.selectionEndLineAction,
                     &quot;BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
               &quot;shift BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;ctrl H&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;DELETE&quot;, DefaultEditorKit.deleteNextCharAction,
                          &quot;RIGHT&quot;, DefaultEditorKit.forwardAction,
                           &quot;LEFT&quot;, DefaultEditorKit.backwardAction,
                       &quot;KP_RIGHT&quot;, DefaultEditorKit.forwardAction,
                        &quot;KP_LEFT&quot;, DefaultEditorKit.backwardAction,
                          &quot;ENTER&quot;, JTextField.notifyAction,
                &quot;control shift O&quot;, &quot;toggle-componentOrientation&quot;/*DefaultEditorKit.toggleComponentOrientation*/
        });

<span class="nc" id="L412">        Object multilineInputMap = new UIDefaults.LazyInputMap(new Object[] {</span>
                      &quot;control C&quot;, DefaultEditorKit.copyAction,
                      &quot;control V&quot;, DefaultEditorKit.pasteAction,
                      &quot;control X&quot;, DefaultEditorKit.cutAction,
                           &quot;COPY&quot;, DefaultEditorKit.copyAction,
                          &quot;PASTE&quot;, DefaultEditorKit.pasteAction,
                            &quot;CUT&quot;, DefaultEditorKit.cutAction,
                 &quot;control INSERT&quot;, DefaultEditorKit.copyAction,
                   &quot;shift INSERT&quot;, DefaultEditorKit.pasteAction,
                   &quot;shift DELETE&quot;, DefaultEditorKit.cutAction,
                     &quot;shift LEFT&quot;, DefaultEditorKit.selectionBackwardAction,
                    &quot;shift RIGHT&quot;, DefaultEditorKit.selectionForwardAction,
                   &quot;control LEFT&quot;, DefaultEditorKit.previousWordAction,
                  &quot;control RIGHT&quot;, DefaultEditorKit.nextWordAction,
             &quot;control shift LEFT&quot;, DefaultEditorKit.selectionPreviousWordAction,
            &quot;control shift RIGHT&quot;, DefaultEditorKit.selectionNextWordAction,
                      &quot;control A&quot;, DefaultEditorKit.selectAllAction,
             &quot;control BACK_SLASH&quot;, &quot;unselect&quot;/*DefaultEditorKit.unselectAction*/,
                           &quot;HOME&quot;, DefaultEditorKit.beginLineAction,
                            &quot;END&quot;, DefaultEditorKit.endLineAction,
                     &quot;shift HOME&quot;, DefaultEditorKit.selectionBeginLineAction,
                      &quot;shift END&quot;, DefaultEditorKit.selectionEndLineAction,
                   &quot;control HOME&quot;, DefaultEditorKit.beginAction,
                    &quot;control END&quot;, DefaultEditorKit.endAction,
             &quot;control shift HOME&quot;, DefaultEditorKit.selectionBeginAction,
              &quot;control shift END&quot;, DefaultEditorKit.selectionEndAction,
                             &quot;UP&quot;, DefaultEditorKit.upAction,
                           &quot;DOWN&quot;, DefaultEditorKit.downAction,
                     &quot;BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
               &quot;shift BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;ctrl H&quot;, DefaultEditorKit.deletePrevCharAction,
                         &quot;DELETE&quot;, DefaultEditorKit.deleteNextCharAction,
                    &quot;ctrl DELETE&quot;, DefaultEditorKit.deleteNextWordAction,
                &quot;ctrl BACK_SPACE&quot;, DefaultEditorKit.deletePrevWordAction,
                          &quot;RIGHT&quot;, DefaultEditorKit.forwardAction,
                           &quot;LEFT&quot;, DefaultEditorKit.backwardAction,
                       &quot;KP_RIGHT&quot;, DefaultEditorKit.forwardAction,
                        &quot;KP_LEFT&quot;, DefaultEditorKit.backwardAction,
                        &quot;PAGE_UP&quot;, DefaultEditorKit.pageUpAction,
                      &quot;PAGE_DOWN&quot;, DefaultEditorKit.pageDownAction,
                  &quot;shift PAGE_UP&quot;, &quot;selection-page-up&quot;,
                &quot;shift PAGE_DOWN&quot;, &quot;selection-page-down&quot;,
             &quot;ctrl shift PAGE_UP&quot;, &quot;selection-page-left&quot;,
           &quot;ctrl shift PAGE_DOWN&quot;, &quot;selection-page-right&quot;,
                       &quot;shift UP&quot;, DefaultEditorKit.selectionUpAction,
                     &quot;shift DOWN&quot;, DefaultEditorKit.selectionDownAction,
                          &quot;ENTER&quot;, DefaultEditorKit.insertBreakAction,
                            &quot;TAB&quot;, DefaultEditorKit.insertTabAction,
                      &quot;control T&quot;, &quot;next-link-action&quot;,
                &quot;control shift T&quot;, &quot;previous-link-action&quot;,
                  &quot;control SPACE&quot;, &quot;activate-link-action&quot;,
                &quot;control shift O&quot;, &quot;toggle-componentOrientation&quot;/*DefaultEditorKit.toggleComponentOrientation*/
        });

<span class="nc" id="L466">        Object menuItemAcceleratorDelimiter = &quot;+&quot;;</span>

<span class="nc" id="L468">        Object ControlBackgroundColor = new DesktopProperty(</span>
                                                       &quot;win.3d.backgroundColor&quot;,
<span class="nc" id="L470">                                                        table.get(&quot;control&quot;));</span>
<span class="nc" id="L471">        Object ControlLightColor      = new DesktopProperty(</span>
                                                       &quot;win.3d.lightColor&quot;,
<span class="nc" id="L473">                                                        table.get(&quot;controlHighlight&quot;));</span>
<span class="nc" id="L474">        Object ControlHighlightColor  = new DesktopProperty(</span>
                                                       &quot;win.3d.highlightColor&quot;,
<span class="nc" id="L476">                                                        table.get(&quot;controlLtHighlight&quot;));</span>
<span class="nc" id="L477">        Object ControlShadowColor     = new DesktopProperty(</span>
                                                       &quot;win.3d.shadowColor&quot;,
<span class="nc" id="L479">                                                        table.get(&quot;controlShadow&quot;));</span>
<span class="nc" id="L480">        Object ControlDarkShadowColor = new DesktopProperty(</span>
                                                       &quot;win.3d.darkShadowColor&quot;,
<span class="nc" id="L482">                                                        table.get(&quot;controlDkShadow&quot;));</span>
<span class="nc" id="L483">        Object ControlTextColor       = new DesktopProperty(</span>
                                                       &quot;win.button.textColor&quot;,
<span class="nc" id="L485">                                                        table.get(&quot;controlText&quot;));</span>
<span class="nc" id="L486">        Object MenuBackgroundColor    = new DesktopProperty(</span>
                                                       &quot;win.menu.backgroundColor&quot;,
<span class="nc" id="L488">                                                        table.get(&quot;menu&quot;));</span>
<span class="nc" id="L489">        Object MenuBarBackgroundColor = new DesktopProperty(</span>
                                                       &quot;win.menubar.backgroundColor&quot;,
<span class="nc" id="L491">                                                        table.get(&quot;menu&quot;));</span>
<span class="nc" id="L492">        Object MenuTextColor          = new DesktopProperty(</span>
                                                       &quot;win.menu.textColor&quot;,
<span class="nc" id="L494">                                                        table.get(&quot;menuText&quot;));</span>
<span class="nc" id="L495">        Object SelectionBackgroundColor = new DesktopProperty(</span>
                                                       &quot;win.item.highlightColor&quot;,
<span class="nc" id="L497">                                                        table.get(&quot;textHighlight&quot;));</span>
<span class="nc" id="L498">        Object SelectionTextColor     = new DesktopProperty(</span>
                                                       &quot;win.item.highlightTextColor&quot;,
<span class="nc" id="L500">                                                        table.get(&quot;textHighlightText&quot;));</span>
<span class="nc" id="L501">        Object WindowBackgroundColor  = new DesktopProperty(</span>
                                                       &quot;win.frame.backgroundColor&quot;,
<span class="nc" id="L503">                                                        table.get(&quot;window&quot;));</span>
<span class="nc" id="L504">        Object WindowTextColor        = new DesktopProperty(</span>
                                                       &quot;win.frame.textColor&quot;,
<span class="nc" id="L506">                                                        table.get(&quot;windowText&quot;));</span>
<span class="nc" id="L507">        Object WindowBorderWidth      = new DesktopProperty(</span>
                                                       &quot;win.frame.sizingBorderWidth&quot;,
<span class="nc" id="L509">                                                       Integer.valueOf(1));</span>
<span class="nc" id="L510">        Object TitlePaneHeight        = new DesktopProperty(</span>
                                                       &quot;win.frame.captionHeight&quot;,
<span class="nc" id="L512">                                                       Integer.valueOf(18));</span>
<span class="nc" id="L513">        Object TitleButtonWidth       = new DesktopProperty(</span>
                                                       &quot;win.frame.captionButtonWidth&quot;,
<span class="nc" id="L515">                                                       Integer.valueOf(16));</span>
<span class="nc" id="L516">        Object TitleButtonHeight      = new DesktopProperty(</span>
                                                       &quot;win.frame.captionButtonHeight&quot;,
<span class="nc" id="L518">                                                       Integer.valueOf(16));</span>
<span class="nc" id="L519">        Object InactiveTextColor      = new DesktopProperty(</span>
                                                       &quot;win.text.grayedTextColor&quot;,
<span class="nc" id="L521">                                                        table.get(&quot;textInactiveText&quot;));</span>
<span class="nc" id="L522">        Object ScrollbarBackgroundColor = new DesktopProperty(</span>
                                                       &quot;win.scrollbar.backgroundColor&quot;,
<span class="nc" id="L524">                                                        table.get(&quot;scrollbar&quot;));</span>
<span class="nc" id="L525">        Object buttonFocusColor = new FocusColorProperty();</span>

<span class="nc" id="L527">        Object TextBackground         = new XPColorValue(Part.EP_EDIT, null, Prop.FILLCOLOR,</span>
                                                         WindowBackgroundColor);
        //The following four lines were commented out as part of bug 4991597
        //This code *is* correct, however it differs from WindowsXP and is, apparently
        //a Windows XP bug. Until Windows fixes this bug, we shall also exhibit the same
        //behavior
        //Object ReadOnlyTextBackground = new XPColorValue(Part.EP_EDITTEXT, State.READONLY, Prop.FILLCOLOR,
        //                                                 ControlBackgroundColor);
        //Object DisabledTextBackground = new XPColorValue(Part.EP_EDITTEXT, State.DISABLED, Prop.FILLCOLOR,
        //                                                 ControlBackgroundColor);
<span class="nc" id="L537">        Object ReadOnlyTextBackground = ControlBackgroundColor;</span>
<span class="nc" id="L538">        Object DisabledTextBackground = ControlBackgroundColor;</span>

<span class="nc" id="L540">        Object MenuFont = dialogPlain12;</span>
<span class="nc" id="L541">        Object FixedControlFont = monospacedPlain12;</span>
<span class="nc" id="L542">        Object ControlFont = dialogPlain12;</span>
<span class="nc" id="L543">        Object MessageFont = dialogPlain12;</span>
<span class="nc" id="L544">        Object WindowFont = dialogBold12;</span>
<span class="nc" id="L545">        Object ToolTipFont = sansSerifPlain12;</span>
<span class="nc" id="L546">        Object IconFont = ControlFont;</span>

<span class="nc" id="L548">        Object scrollBarWidth = new DesktopProperty(&quot;win.scrollbar.width&quot;, Integer.valueOf(16));</span>

<span class="nc" id="L550">        Object menuBarHeight = new DesktopProperty(&quot;win.menu.height&quot;, null);</span>

<span class="nc" id="L552">        Object hotTrackingOn = new DesktopProperty(&quot;win.item.hotTrackingOn&quot;, true);</span>

<span class="nc" id="L554">        Object showMnemonics = new DesktopProperty(&quot;win.menu.keyboardCuesOn&quot;, Boolean.TRUE);</span>

<span class="nc bnc" id="L556" title="All 2 branches missed.">        if (useSystemFontSettings) {</span>
<span class="nc" id="L557">            MenuFont = getDesktopFontValue(&quot;win.menu.font&quot;, MenuFont);</span>
<span class="nc" id="L558">            FixedControlFont = getDesktopFontValue(&quot;win.ansiFixed.font&quot;, FixedControlFont);</span>
<span class="nc" id="L559">            ControlFont = getDesktopFontValue(&quot;win.defaultGUI.font&quot;, ControlFont);</span>
<span class="nc" id="L560">            MessageFont = getDesktopFontValue(&quot;win.messagebox.font&quot;, MessageFont);</span>
<span class="nc" id="L561">            WindowFont = getDesktopFontValue(&quot;win.frame.captionFont&quot;, WindowFont);</span>
<span class="nc" id="L562">            IconFont    = getDesktopFontValue(&quot;win.icon.font&quot;, IconFont);</span>
<span class="nc" id="L563">            ToolTipFont = getDesktopFontValue(&quot;win.tooltip.font&quot;, ToolTipFont);</span>

            /* Put the desktop AA settings in the defaults.
             * JComponent.setUI() retrieves this and makes it available
             * as a client property on the JComponent. Use the same key name
             * for both client property and UIDefaults.
             * Also need to set up listeners for changes in these settings.
             */
<span class="nc" id="L571">            Object aaTextInfo = SwingUtilities2.AATextInfo.getAATextInfo(true);</span>
<span class="nc" id="L572">            table.put(SwingUtilities2.AA_TEXT_PROPERTY_KEY, aaTextInfo);</span>
<span class="nc" id="L573">            this.aaSettings =</span>
                new FontDesktopProperty(SunToolkit.DESKTOPFONTHINTS);
        }
<span class="nc bnc" id="L576" title="All 2 branches missed.">        if (useSystemFontSizeSettings) {</span>
<span class="nc" id="L577">            MenuFont = new WindowsFontSizeProperty(&quot;win.menu.font.height&quot;, Font.DIALOG, Font.PLAIN, 12);</span>
<span class="nc" id="L578">            FixedControlFont = new WindowsFontSizeProperty(&quot;win.ansiFixed.font.height&quot;, Font.MONOSPACED,</span>
                       Font.PLAIN, 12);
<span class="nc" id="L580">            ControlFont = new WindowsFontSizeProperty(&quot;win.defaultGUI.font.height&quot;, Font.DIALOG, Font.PLAIN, 12);</span>
<span class="nc" id="L581">            MessageFont = new WindowsFontSizeProperty(&quot;win.messagebox.font.height&quot;, Font.DIALOG, Font.PLAIN, 12);</span>
<span class="nc" id="L582">            WindowFont = new WindowsFontSizeProperty(&quot;win.frame.captionFont.height&quot;, Font.DIALOG, Font.BOLD, 12);</span>
<span class="nc" id="L583">            ToolTipFont = new WindowsFontSizeProperty(&quot;win.tooltip.font.height&quot;, Font.SANS_SERIF, Font.PLAIN, 12);</span>
<span class="nc" id="L584">            IconFont    = new WindowsFontSizeProperty(&quot;win.icon.font.height&quot;, Font.DIALOG, Font.PLAIN, 12);</span>
        }


<span class="nc bnc" id="L588" title="All 2 branches missed.">        if (!(this instanceof WindowsClassicLookAndFeel) &amp;&amp;</span>
<span class="nc bnc" id="L589" title="All 2 branches missed.">            (OSInfo.getOSType() == OSInfo.OSType.WINDOWS &amp;&amp;</span>
<span class="nc bnc" id="L590" title="All 2 branches missed.">             OSInfo.getWindowsVersion().compareTo(OSInfo.WINDOWS_XP) &gt;= 0) &amp;&amp;</span>
<span class="nc bnc" id="L591" title="All 2 branches missed.">            AccessController.doPrivileged(new GetPropertyAction(&quot;swing.noxp&quot;)) == null) {</span>

            // These desktop properties are not used directly, but are needed to
            // trigger realoading of UI's.
<span class="nc" id="L595">            this.themeActive = new TriggerDesktopProperty(&quot;win.xpstyle.themeActive&quot;);</span>
<span class="nc" id="L596">            this.dllName     = new TriggerDesktopProperty(&quot;win.xpstyle.dllName&quot;);</span>
<span class="nc" id="L597">            this.colorName   = new TriggerDesktopProperty(&quot;win.xpstyle.colorName&quot;);</span>
<span class="nc" id="L598">            this.sizeName    = new TriggerDesktopProperty(&quot;win.xpstyle.sizeName&quot;);</span>
        }


<span class="nc" id="L602">        Object[] defaults = {</span>
            // *** Auditory Feedback
            // this key defines which of the various cues to render
            // Overridden from BasicL&amp;F. This L&amp;F should play all sounds
            // all the time. The infrastructure decides what to play.
            // This is disabled until sound bugs can be resolved.
            &quot;AuditoryCues.playList&quot;, null, // table.get(&quot;AuditoryCues.cueList&quot;),

<span class="nc" id="L610">            &quot;Application.useSystemFontSettings&quot;, Boolean.valueOf(useSystemFontSettings),</span>

            &quot;TextField.focusInputMap&quot;, fieldInputMap,
            &quot;PasswordField.focusInputMap&quot;, passwordInputMap,
            &quot;TextArea.focusInputMap&quot;, multilineInputMap,
            &quot;TextPane.focusInputMap&quot;, multilineInputMap,
            &quot;EditorPane.focusInputMap&quot;, multilineInputMap,

            // Buttons
            &quot;Button.font&quot;, ControlFont,
            &quot;Button.background&quot;, ControlBackgroundColor,
            // Button.foreground, Button.shadow, Button.darkShadow,
            // Button.disabledForground, and Button.disabledShadow are only
            // used for Windows Classic. Windows XP will use colors
            // from the current visual style.
            &quot;Button.foreground&quot;, ControlTextColor,
            &quot;Button.shadow&quot;, ControlShadowColor,
            &quot;Button.darkShadow&quot;, ControlDarkShadowColor,
            &quot;Button.light&quot;, ControlLightColor,
            &quot;Button.highlight&quot;, ControlHighlightColor,
            &quot;Button.disabledForeground&quot;, InactiveTextColor,
            &quot;Button.disabledShadow&quot;, ControlHighlightColor,
            &quot;Button.focus&quot;, buttonFocusColor,
<span class="nc" id="L633">            &quot;Button.dashedRectGapX&quot;, new XPValue(Integer.valueOf(3), Integer.valueOf(5)),</span>
<span class="nc" id="L634">            &quot;Button.dashedRectGapY&quot;, new XPValue(Integer.valueOf(3), Integer.valueOf(4)),</span>
<span class="nc" id="L635">            &quot;Button.dashedRectGapWidth&quot;, new XPValue(Integer.valueOf(6), Integer.valueOf(10)),</span>
<span class="nc" id="L636">            &quot;Button.dashedRectGapHeight&quot;, new XPValue(Integer.valueOf(6), Integer.valueOf(8)),</span>
<span class="nc" id="L637">            &quot;Button.textShiftOffset&quot;, new XPValue(Integer.valueOf(0),</span>
<span class="nc" id="L638">                                                  Integer.valueOf(1)),</span>
            // W2K keyboard navigation hidding.
            &quot;Button.showMnemonics&quot;, showMnemonics,
            &quot;Button.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                            &quot;SPACE&quot;, &quot;pressed&quot;,
                   &quot;released SPACE&quot;, &quot;released&quot;
                 }),

            &quot;Caret.width&quot;,
                  new DesktopProperty(&quot;win.caret.width&quot;, null),

            &quot;CheckBox.font&quot;, ControlFont,
            &quot;CheckBox.interiorBackground&quot;, WindowBackgroundColor,
            &quot;CheckBox.background&quot;, ControlBackgroundColor,
            &quot;CheckBox.foreground&quot;, WindowTextColor,
            &quot;CheckBox.shadow&quot;, ControlShadowColor,
            &quot;CheckBox.darkShadow&quot;, ControlDarkShadowColor,
            &quot;CheckBox.light&quot;, ControlLightColor,
            &quot;CheckBox.highlight&quot;, ControlHighlightColor,
            &quot;CheckBox.focus&quot;, buttonFocusColor,
            &quot;CheckBox.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                            &quot;SPACE&quot;, &quot;pressed&quot;,
                   &quot;released SPACE&quot;, &quot;released&quot;
                 }),
            // margin is 2 all the way around, BasicBorders.RadioButtonBorder
            // (checkbox uses RadioButtonBorder) is 2 all the way around too.
            &quot;CheckBox.totalInsets&quot;, new Insets(4, 4, 4, 4),

            &quot;CheckBoxMenuItem.font&quot;, MenuFont,
            &quot;CheckBoxMenuItem.background&quot;, MenuBackgroundColor,
            &quot;CheckBoxMenuItem.foreground&quot;, MenuTextColor,
            &quot;CheckBoxMenuItem.selectionForeground&quot;, SelectionTextColor,
            &quot;CheckBoxMenuItem.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;CheckBoxMenuItem.acceleratorForeground&quot;, MenuTextColor,
            &quot;CheckBoxMenuItem.acceleratorSelectionForeground&quot;, SelectionTextColor,
            &quot;CheckBoxMenuItem.commandSound&quot;, &quot;win.sound.menuCommand&quot;,

            &quot;ComboBox.font&quot;, ControlFont,
            &quot;ComboBox.background&quot;, WindowBackgroundColor,
            &quot;ComboBox.foreground&quot;, WindowTextColor,
            &quot;ComboBox.buttonBackground&quot;, ControlBackgroundColor,
            &quot;ComboBox.buttonShadow&quot;, ControlShadowColor,
            &quot;ComboBox.buttonDarkShadow&quot;, ControlDarkShadowColor,
            &quot;ComboBox.buttonHighlight&quot;, ControlHighlightColor,
            &quot;ComboBox.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;ComboBox.selectionForeground&quot;, SelectionTextColor,
            &quot;ComboBox.editorBorder&quot;, new XPValue(new EmptyBorder(1,2,1,1),
                                                 new EmptyBorder(1,4,1,4)),
            &quot;ComboBox.disabledBackground&quot;,
                        new XPColorValue(Part.CP_COMBOBOX, State.DISABLED,
                        Prop.FILLCOLOR, DisabledTextBackground),
            &quot;ComboBox.disabledForeground&quot;,
                        new XPColorValue(Part.CP_COMBOBOX, State.DISABLED,
                        Prop.TEXTCOLOR, InactiveTextColor),
            &quot;ComboBox.ancestorInputMap&quot;, new UIDefaults.LazyInputMap(new Object[] {
                   &quot;ESCAPE&quot;, &quot;hidePopup&quot;,
                  &quot;PAGE_UP&quot;, &quot;pageUpPassThrough&quot;,
                &quot;PAGE_DOWN&quot;, &quot;pageDownPassThrough&quot;,
                     &quot;HOME&quot;, &quot;homePassThrough&quot;,
                      &quot;END&quot;, &quot;endPassThrough&quot;,
                     &quot;DOWN&quot;, &quot;selectNext2&quot;,
                  &quot;KP_DOWN&quot;, &quot;selectNext2&quot;,
                       &quot;UP&quot;, &quot;selectPrevious2&quot;,
                    &quot;KP_UP&quot;, &quot;selectPrevious2&quot;,
                    &quot;ENTER&quot;, &quot;enterPressed&quot;,
                       &quot;F4&quot;, &quot;togglePopup&quot;,
                 &quot;alt DOWN&quot;, &quot;togglePopup&quot;,
              &quot;alt KP_DOWN&quot;, &quot;togglePopup&quot;,
                   &quot;alt UP&quot;, &quot;togglePopup&quot;,
                &quot;alt KP_UP&quot;, &quot;togglePopup&quot;
              }),

            // DeskTop.
            &quot;Desktop.background&quot;, new DesktopProperty(
                                                 &quot;win.desktop.backgroundColor&quot;,
<span class="nc" id="L715">                                                  table.get(&quot;desktop&quot;)),</span>
            &quot;Desktop.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                   &quot;ctrl F5&quot;, &quot;restore&quot;,
                   &quot;ctrl F4&quot;, &quot;close&quot;,
                   &quot;ctrl F7&quot;, &quot;move&quot;,
                   &quot;ctrl F8&quot;, &quot;resize&quot;,
                   &quot;RIGHT&quot;, &quot;right&quot;,
                   &quot;KP_RIGHT&quot;, &quot;right&quot;,
                   &quot;LEFT&quot;, &quot;left&quot;,
                   &quot;KP_LEFT&quot;, &quot;left&quot;,
                   &quot;UP&quot;, &quot;up&quot;,
                   &quot;KP_UP&quot;, &quot;up&quot;,
                   &quot;DOWN&quot;, &quot;down&quot;,
                   &quot;KP_DOWN&quot;, &quot;down&quot;,
                   &quot;ESCAPE&quot;, &quot;escape&quot;,
                   &quot;ctrl F9&quot;, &quot;minimize&quot;,
                   &quot;ctrl F10&quot;, &quot;maximize&quot;,
                   &quot;ctrl F6&quot;, &quot;selectNextFrame&quot;,
                   &quot;ctrl TAB&quot;, &quot;selectNextFrame&quot;,
                   &quot;ctrl alt F6&quot;, &quot;selectNextFrame&quot;,
                   &quot;shift ctrl alt F6&quot;, &quot;selectPreviousFrame&quot;,
                   &quot;ctrl F12&quot;, &quot;navigateNext&quot;,
                   &quot;shift ctrl F12&quot;, &quot;navigatePrevious&quot;
               }),

            // DesktopIcon
<span class="nc" id="L742">            &quot;DesktopIcon.width&quot;, Integer.valueOf(160),</span>

            &quot;EditorPane.font&quot;, ControlFont,
            &quot;EditorPane.background&quot;, WindowBackgroundColor,
            &quot;EditorPane.foreground&quot;, WindowTextColor,
            &quot;EditorPane.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;EditorPane.selectionForeground&quot;, SelectionTextColor,
            &quot;EditorPane.caretForeground&quot;, WindowTextColor,
            &quot;EditorPane.inactiveForeground&quot;, InactiveTextColor,
            &quot;EditorPane.inactiveBackground&quot;, WindowBackgroundColor,
            &quot;EditorPane.disabledBackground&quot;, DisabledTextBackground,

            &quot;FileChooser.homeFolderIcon&quot;,  new LazyWindowsIcon(null,
                                                               &quot;icons/HomeFolder.gif&quot;),
            &quot;FileChooser.listFont&quot;, IconFont,
            &quot;FileChooser.listViewBackground&quot;, new XPColorValue(Part.LVP_LISTVIEW, null, Prop.FILLCOLOR,
                                                               WindowBackgroundColor),
            &quot;FileChooser.listViewBorder&quot;, new XPBorderValue(Part.LVP_LISTVIEW,
                                                  new SwingLazyValue(
                                                        &quot;javax.swing.plaf.BorderUIResource&quot;,
                                                        &quot;getLoweredBevelBorderUIResource&quot;)),
            &quot;FileChooser.listViewIcon&quot;,    new LazyWindowsIcon(&quot;fileChooserIcon ListView&quot;,
                                                               &quot;icons/ListView.gif&quot;),
            &quot;FileChooser.listViewWindowsStyle&quot;, Boolean.TRUE,
            &quot;FileChooser.detailsViewIcon&quot;, new LazyWindowsIcon(&quot;fileChooserIcon DetailsView&quot;,
                                                               &quot;icons/DetailsView.gif&quot;),
            &quot;FileChooser.viewMenuIcon&quot;, new LazyWindowsIcon(&quot;fileChooserIcon ViewMenu&quot;,
                                                            &quot;icons/ListView.gif&quot;),
            &quot;FileChooser.upFolderIcon&quot;,    new LazyWindowsIcon(&quot;fileChooserIcon UpFolder&quot;,
                                                               &quot;icons/UpFolder.gif&quot;),
            &quot;FileChooser.newFolderIcon&quot;,   new LazyWindowsIcon(&quot;fileChooserIcon NewFolder&quot;,
                                                               &quot;icons/NewFolder.gif&quot;),
            &quot;FileChooser.useSystemExtensionHiding&quot;, Boolean.TRUE,

            &quot;FileChooser.usesSingleFilePane&quot;, Boolean.TRUE,
            &quot;FileChooser.noPlacesBar&quot;, new DesktopProperty(&quot;win.comdlg.noPlacesBar&quot;,
                                                           Boolean.FALSE),
            &quot;FileChooser.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                     &quot;ESCAPE&quot;, &quot;cancelSelection&quot;,
                     &quot;F2&quot;, &quot;editFileName&quot;,
                     &quot;F5&quot;, &quot;refresh&quot;,
                     &quot;BACK_SPACE&quot;, &quot;Go Up&quot;
                 }),

<span class="nc" id="L787">            &quot;FileView.directoryIcon&quot;, SwingUtilities2.makeIcon(getClass(),</span>
                                                               WindowsLookAndFeel.class,
                                                               &quot;icons/Directory.gif&quot;),
<span class="nc" id="L790">            &quot;FileView.fileIcon&quot;, SwingUtilities2.makeIcon(getClass(),</span>
                                                          WindowsLookAndFeel.class,
                                                          &quot;icons/File.gif&quot;),
<span class="nc" id="L793">            &quot;FileView.computerIcon&quot;, SwingUtilities2.makeIcon(getClass(),</span>
                                                              WindowsLookAndFeel.class,
                                                              &quot;icons/Computer.gif&quot;),
<span class="nc" id="L796">            &quot;FileView.hardDriveIcon&quot;, SwingUtilities2.makeIcon(getClass(),</span>
                                                               WindowsLookAndFeel.class,
                                                               &quot;icons/HardDrive.gif&quot;),
<span class="nc" id="L799">            &quot;FileView.floppyDriveIcon&quot;, SwingUtilities2.makeIcon(getClass(),</span>
                                                                 WindowsLookAndFeel.class,
                                                                 &quot;icons/FloppyDrive.gif&quot;),

            &quot;FormattedTextField.font&quot;, ControlFont,
            &quot;InternalFrame.titleFont&quot;, WindowFont,
            &quot;InternalFrame.titlePaneHeight&quot;,   TitlePaneHeight,
            &quot;InternalFrame.titleButtonWidth&quot;,  TitleButtonWidth,
            &quot;InternalFrame.titleButtonHeight&quot;, TitleButtonHeight,
            &quot;InternalFrame.titleButtonToolTipsOn&quot;, hotTrackingOn,
            &quot;InternalFrame.borderColor&quot;, ControlBackgroundColor,
            &quot;InternalFrame.borderShadow&quot;, ControlShadowColor,
            &quot;InternalFrame.borderDarkShadow&quot;, ControlDarkShadowColor,
            &quot;InternalFrame.borderHighlight&quot;, ControlHighlightColor,
            &quot;InternalFrame.borderLight&quot;, ControlLightColor,
            &quot;InternalFrame.borderWidth&quot;, WindowBorderWidth,
            &quot;InternalFrame.minimizeIconBackground&quot;, ControlBackgroundColor,
            &quot;InternalFrame.resizeIconHighlight&quot;, ControlLightColor,
            &quot;InternalFrame.resizeIconShadow&quot;, ControlShadowColor,
            &quot;InternalFrame.activeBorderColor&quot;, new DesktopProperty(
                                                       &quot;win.frame.activeBorderColor&quot;,
<span class="nc" id="L820">                                                       table.get(&quot;windowBorder&quot;)),</span>
            &quot;InternalFrame.inactiveBorderColor&quot;, new DesktopProperty(
                                                       &quot;win.frame.inactiveBorderColor&quot;,
<span class="nc" id="L823">                                                       table.get(&quot;windowBorder&quot;)),</span>
            &quot;InternalFrame.activeTitleBackground&quot;, new DesktopProperty(
                                                        &quot;win.frame.activeCaptionColor&quot;,
<span class="nc" id="L826">                                                         table.get(&quot;activeCaption&quot;)),</span>
            &quot;InternalFrame.activeTitleGradient&quot;, new DesktopProperty(
                                                        &quot;win.frame.activeCaptionGradientColor&quot;,
<span class="nc" id="L829">                                                         table.get(&quot;activeCaption&quot;)),</span>
            &quot;InternalFrame.activeTitleForeground&quot;, new DesktopProperty(
                                                        &quot;win.frame.captionTextColor&quot;,
<span class="nc" id="L832">                                                         table.get(&quot;activeCaptionText&quot;)),</span>
            &quot;InternalFrame.inactiveTitleBackground&quot;, new DesktopProperty(
                                                        &quot;win.frame.inactiveCaptionColor&quot;,
<span class="nc" id="L835">                                                         table.get(&quot;inactiveCaption&quot;)),</span>
            &quot;InternalFrame.inactiveTitleGradient&quot;, new DesktopProperty(
                                                        &quot;win.frame.inactiveCaptionGradientColor&quot;,
<span class="nc" id="L838">                                                         table.get(&quot;inactiveCaption&quot;)),</span>
            &quot;InternalFrame.inactiveTitleForeground&quot;, new DesktopProperty(
                                                        &quot;win.frame.inactiveCaptionTextColor&quot;,
<span class="nc" id="L841">                                                         table.get(&quot;inactiveCaptionText&quot;)),</span>

            &quot;InternalFrame.maximizeIcon&quot;,
<span class="nc" id="L844">                WindowsIconFactory.createFrameMaximizeIcon(),</span>
            &quot;InternalFrame.minimizeIcon&quot;,
<span class="nc" id="L846">                WindowsIconFactory.createFrameMinimizeIcon(),</span>
            &quot;InternalFrame.iconifyIcon&quot;,
<span class="nc" id="L848">                WindowsIconFactory.createFrameIconifyIcon(),</span>
            &quot;InternalFrame.closeIcon&quot;,
<span class="nc" id="L850">                WindowsIconFactory.createFrameCloseIcon(),</span>
            &quot;InternalFrame.icon&quot;,
                new SwingLazyValue(
        &quot;com.sun.java.swing.plaf.windows.WindowsInternalFrameTitlePane$ScalableIconUIResource&quot;,
                    // The constructor takes one arg: an array of UIDefaults.LazyValue
                    // representing the icons
                    new Object[][] { {
<span class="nc" id="L857">                        SwingUtilities2.makeIcon(getClass(), BasicLookAndFeel.class, &quot;icons/JavaCup16.png&quot;),</span>
<span class="nc" id="L858">                        SwingUtilities2.makeIcon(getClass(), WindowsLookAndFeel.class, &quot;icons/JavaCup32.png&quot;)</span>
                    } }),

            // Internal Frame Auditory Cue Mappings
            &quot;InternalFrame.closeSound&quot;, &quot;win.sound.close&quot;,
            &quot;InternalFrame.maximizeSound&quot;, &quot;win.sound.maximize&quot;,
            &quot;InternalFrame.minimizeSound&quot;, &quot;win.sound.minimize&quot;,
            &quot;InternalFrame.restoreDownSound&quot;, &quot;win.sound.restoreDown&quot;,
            &quot;InternalFrame.restoreUpSound&quot;, &quot;win.sound.restoreUp&quot;,

            &quot;InternalFrame.windowBindings&quot;, new Object[] {
                &quot;shift ESCAPE&quot;, &quot;showSystemMenu&quot;,
                  &quot;ctrl SPACE&quot;, &quot;showSystemMenu&quot;,
                      &quot;ESCAPE&quot;, &quot;hideSystemMenu&quot;},

            // Label
            &quot;Label.font&quot;, ControlFont,
            &quot;Label.background&quot;, ControlBackgroundColor,
            &quot;Label.foreground&quot;, WindowTextColor,
            &quot;Label.disabledForeground&quot;, InactiveTextColor,
            &quot;Label.disabledShadow&quot;, ControlHighlightColor,

            // List.
            &quot;List.font&quot;, ControlFont,
            &quot;List.background&quot;, WindowBackgroundColor,
            &quot;List.foreground&quot;, WindowTextColor,
            &quot;List.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;List.selectionForeground&quot;, SelectionTextColor,
            &quot;List.lockToPositionOnScroll&quot;, Boolean.TRUE,
            &quot;List.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                           &quot;ctrl C&quot;, &quot;copy&quot;,
                           &quot;ctrl V&quot;, &quot;paste&quot;,
                           &quot;ctrl X&quot;, &quot;cut&quot;,
                             &quot;COPY&quot;, &quot;copy&quot;,
                            &quot;PASTE&quot;, &quot;paste&quot;,
                              &quot;CUT&quot;, &quot;cut&quot;,
                   &quot;control INSERT&quot;, &quot;copy&quot;,
                     &quot;shift INSERT&quot;, &quot;paste&quot;,
                     &quot;shift DELETE&quot;, &quot;cut&quot;,
                               &quot;UP&quot;, &quot;selectPreviousRow&quot;,
                            &quot;KP_UP&quot;, &quot;selectPreviousRow&quot;,
                         &quot;shift UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                      &quot;shift KP_UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                    &quot;ctrl shift UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                 &quot;ctrl shift KP_UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                          &quot;ctrl UP&quot;, &quot;selectPreviousRowChangeLead&quot;,
                       &quot;ctrl KP_UP&quot;, &quot;selectPreviousRowChangeLead&quot;,
                             &quot;DOWN&quot;, &quot;selectNextRow&quot;,
                          &quot;KP_DOWN&quot;, &quot;selectNextRow&quot;,
                       &quot;shift DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                    &quot;shift KP_DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                  &quot;ctrl shift DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
               &quot;ctrl shift KP_DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                        &quot;ctrl DOWN&quot;, &quot;selectNextRowChangeLead&quot;,
                     &quot;ctrl KP_DOWN&quot;, &quot;selectNextRowChangeLead&quot;,
                             &quot;LEFT&quot;, &quot;selectPreviousColumn&quot;,
                          &quot;KP_LEFT&quot;, &quot;selectPreviousColumn&quot;,
                       &quot;shift LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                    &quot;shift KP_LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                  &quot;ctrl shift LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
               &quot;ctrl shift KP_LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                        &quot;ctrl LEFT&quot;, &quot;selectPreviousColumnChangeLead&quot;,
                     &quot;ctrl KP_LEFT&quot;, &quot;selectPreviousColumnChangeLead&quot;,
                            &quot;RIGHT&quot;, &quot;selectNextColumn&quot;,
                         &quot;KP_RIGHT&quot;, &quot;selectNextColumn&quot;,
                      &quot;shift RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                   &quot;shift KP_RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                 &quot;ctrl shift RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
              &quot;ctrl shift KP_RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                       &quot;ctrl RIGHT&quot;, &quot;selectNextColumnChangeLead&quot;,
                    &quot;ctrl KP_RIGHT&quot;, &quot;selectNextColumnChangeLead&quot;,
                             &quot;HOME&quot;, &quot;selectFirstRow&quot;,
                       &quot;shift HOME&quot;, &quot;selectFirstRowExtendSelection&quot;,
                  &quot;ctrl shift HOME&quot;, &quot;selectFirstRowExtendSelection&quot;,
                        &quot;ctrl HOME&quot;, &quot;selectFirstRowChangeLead&quot;,
                              &quot;END&quot;, &quot;selectLastRow&quot;,
                        &quot;shift END&quot;, &quot;selectLastRowExtendSelection&quot;,
                   &quot;ctrl shift END&quot;, &quot;selectLastRowExtendSelection&quot;,
                         &quot;ctrl END&quot;, &quot;selectLastRowChangeLead&quot;,
                          &quot;PAGE_UP&quot;, &quot;scrollUp&quot;,
                    &quot;shift PAGE_UP&quot;, &quot;scrollUpExtendSelection&quot;,
               &quot;ctrl shift PAGE_UP&quot;, &quot;scrollUpExtendSelection&quot;,
                     &quot;ctrl PAGE_UP&quot;, &quot;scrollUpChangeLead&quot;,
                        &quot;PAGE_DOWN&quot;, &quot;scrollDown&quot;,
                  &quot;shift PAGE_DOWN&quot;, &quot;scrollDownExtendSelection&quot;,
             &quot;ctrl shift PAGE_DOWN&quot;, &quot;scrollDownExtendSelection&quot;,
                   &quot;ctrl PAGE_DOWN&quot;, &quot;scrollDownChangeLead&quot;,
                           &quot;ctrl A&quot;, &quot;selectAll&quot;,
                       &quot;ctrl SLASH&quot;, &quot;selectAll&quot;,
                  &quot;ctrl BACK_SLASH&quot;, &quot;clearSelection&quot;,
                            &quot;SPACE&quot;, &quot;addToSelection&quot;,
                       &quot;ctrl SPACE&quot;, &quot;toggleAndAnchor&quot;,
                      &quot;shift SPACE&quot;, &quot;extendTo&quot;,
                 &quot;ctrl shift SPACE&quot;, &quot;moveSelectionTo&quot;
                 }),

            // PopupMenu
            &quot;PopupMenu.font&quot;, MenuFont,
            &quot;PopupMenu.background&quot;, MenuBackgroundColor,
            &quot;PopupMenu.foreground&quot;, MenuTextColor,
            &quot;PopupMenu.popupSound&quot;, &quot;win.sound.menuPopup&quot;,
            &quot;PopupMenu.consumeEventOnClose&quot;, Boolean.TRUE,

            // Menus
            &quot;Menu.font&quot;, MenuFont,
            &quot;Menu.foreground&quot;, MenuTextColor,
            &quot;Menu.background&quot;, MenuBackgroundColor,
            &quot;Menu.useMenuBarBackgroundForTopLevel&quot;, Boolean.TRUE,
            &quot;Menu.selectionForeground&quot;, SelectionTextColor,
            &quot;Menu.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;Menu.acceleratorForeground&quot;, MenuTextColor,
            &quot;Menu.acceleratorSelectionForeground&quot;, SelectionTextColor,
<span class="nc" id="L971">            &quot;Menu.menuPopupOffsetX&quot;, Integer.valueOf(0),</span>
<span class="nc" id="L972">            &quot;Menu.menuPopupOffsetY&quot;, Integer.valueOf(0),</span>
<span class="nc" id="L973">            &quot;Menu.submenuPopupOffsetX&quot;, Integer.valueOf(-4),</span>
<span class="nc" id="L974">            &quot;Menu.submenuPopupOffsetY&quot;, Integer.valueOf(-3),</span>
            &quot;Menu.crossMenuMnemonic&quot;, Boolean.FALSE,
            &quot;Menu.preserveTopLevelSelection&quot;, Boolean.TRUE,

            // MenuBar.
            &quot;MenuBar.font&quot;, MenuFont,
            &quot;MenuBar.background&quot;, new XPValue(MenuBarBackgroundColor,
                                              MenuBackgroundColor),
            &quot;MenuBar.foreground&quot;, MenuTextColor,
            &quot;MenuBar.shadow&quot;, ControlShadowColor,
            &quot;MenuBar.highlight&quot;, ControlHighlightColor,
            &quot;MenuBar.height&quot;, menuBarHeight,
            &quot;MenuBar.rolloverEnabled&quot;, hotTrackingOn,
            &quot;MenuBar.windowBindings&quot;, new Object[] {
                &quot;F10&quot;, &quot;takeFocus&quot; },

            &quot;MenuItem.font&quot;, MenuFont,
            &quot;MenuItem.acceleratorFont&quot;, MenuFont,
            &quot;MenuItem.foreground&quot;, MenuTextColor,
            &quot;MenuItem.background&quot;, MenuBackgroundColor,
            &quot;MenuItem.selectionForeground&quot;, SelectionTextColor,
            &quot;MenuItem.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;MenuItem.disabledForeground&quot;, InactiveTextColor,
            &quot;MenuItem.acceleratorForeground&quot;, MenuTextColor,
            &quot;MenuItem.acceleratorSelectionForeground&quot;, SelectionTextColor,
            &quot;MenuItem.acceleratorDelimiter&quot;, menuItemAcceleratorDelimiter,
                 // Menu Item Auditory Cue Mapping
            &quot;MenuItem.commandSound&quot;, &quot;win.sound.menuCommand&quot;,
             // indicates that keyboard navigation won't skip disabled menu items
            &quot;MenuItem.disabledAreNavigable&quot;, Boolean.TRUE,

            &quot;RadioButton.font&quot;, ControlFont,
            &quot;RadioButton.interiorBackground&quot;, WindowBackgroundColor,
            &quot;RadioButton.background&quot;, ControlBackgroundColor,
            &quot;RadioButton.foreground&quot;, WindowTextColor,
            &quot;RadioButton.shadow&quot;, ControlShadowColor,
            &quot;RadioButton.darkShadow&quot;, ControlDarkShadowColor,
            &quot;RadioButton.light&quot;, ControlLightColor,
            &quot;RadioButton.highlight&quot;, ControlHighlightColor,
            &quot;RadioButton.focus&quot;, buttonFocusColor,
            &quot;RadioButton.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                          &quot;SPACE&quot;, &quot;pressed&quot;,
                 &quot;released SPACE&quot;, &quot;released&quot;
              }),
            // margin is 2 all the way around, BasicBorders.RadioButtonBorder
            // is 2 all the way around too.
            &quot;RadioButton.totalInsets&quot;, new Insets(4, 4, 4, 4),


            &quot;RadioButtonMenuItem.font&quot;, MenuFont,
            &quot;RadioButtonMenuItem.foreground&quot;, MenuTextColor,
            &quot;RadioButtonMenuItem.background&quot;, MenuBackgroundColor,
            &quot;RadioButtonMenuItem.selectionForeground&quot;, SelectionTextColor,
            &quot;RadioButtonMenuItem.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;RadioButtonMenuItem.disabledForeground&quot;, InactiveTextColor,
            &quot;RadioButtonMenuItem.acceleratorForeground&quot;, MenuTextColor,
            &quot;RadioButtonMenuItem.acceleratorSelectionForeground&quot;, SelectionTextColor,
            &quot;RadioButtonMenuItem.commandSound&quot;, &quot;win.sound.menuCommand&quot;,

            // OptionPane.
            &quot;OptionPane.font&quot;, MessageFont,
            &quot;OptionPane.messageFont&quot;, MessageFont,
            &quot;OptionPane.buttonFont&quot;, MessageFont,
            &quot;OptionPane.background&quot;, ControlBackgroundColor,
            &quot;OptionPane.foreground&quot;, WindowTextColor,
            &quot;OptionPane.buttonMinimumWidth&quot;, new XPDLUValue(50, 50, SwingConstants.EAST),
            &quot;OptionPane.messageForeground&quot;, ControlTextColor,
            &quot;OptionPane.errorIcon&quot;,       new LazyWindowsIcon(&quot;optionPaneIcon Error&quot;,
                                                              &quot;icons/Error.gif&quot;),
            &quot;OptionPane.informationIcon&quot;, new LazyWindowsIcon(&quot;optionPaneIcon Information&quot;,
                                                              &quot;icons/Inform.gif&quot;),
            &quot;OptionPane.questionIcon&quot;,    new LazyWindowsIcon(&quot;optionPaneIcon Question&quot;,
                                                              &quot;icons/Question.gif&quot;),
            &quot;OptionPane.warningIcon&quot;,     new LazyWindowsIcon(&quot;optionPaneIcon Warning&quot;,
                                                              &quot;icons/Warn.gif&quot;),
            &quot;OptionPane.windowBindings&quot;, new Object[] {
                &quot;ESCAPE&quot;, &quot;close&quot; },
                 // Option Pane Auditory Cue Mappings
            &quot;OptionPane.errorSound&quot;, &quot;win.sound.hand&quot;, // Error
            &quot;OptionPane.informationSound&quot;, &quot;win.sound.asterisk&quot;, // Info Plain
            &quot;OptionPane.questionSound&quot;, &quot;win.sound.question&quot;, // Question
            &quot;OptionPane.warningSound&quot;, &quot;win.sound.exclamation&quot;, // Warning

            &quot;FormattedTextField.focusInputMap&quot;,
              new UIDefaults.LazyInputMap(new Object[] {
                           &quot;ctrl C&quot;, DefaultEditorKit.copyAction,
                           &quot;ctrl V&quot;, DefaultEditorKit.pasteAction,
                           &quot;ctrl X&quot;, DefaultEditorKit.cutAction,
                             &quot;COPY&quot;, DefaultEditorKit.copyAction,
                            &quot;PASTE&quot;, DefaultEditorKit.pasteAction,
                              &quot;CUT&quot;, DefaultEditorKit.cutAction,
                   &quot;control INSERT&quot;, DefaultEditorKit.copyAction,
                     &quot;shift INSERT&quot;, DefaultEditorKit.pasteAction,
                     &quot;shift DELETE&quot;, DefaultEditorKit.cutAction,
                       &quot;shift LEFT&quot;, DefaultEditorKit.selectionBackwardAction,
                    &quot;shift KP_LEFT&quot;, DefaultEditorKit.selectionBackwardAction,
                      &quot;shift RIGHT&quot;, DefaultEditorKit.selectionForwardAction,
                   &quot;shift KP_RIGHT&quot;, DefaultEditorKit.selectionForwardAction,
                        &quot;ctrl LEFT&quot;, DefaultEditorKit.previousWordAction,
                     &quot;ctrl KP_LEFT&quot;, DefaultEditorKit.previousWordAction,
                       &quot;ctrl RIGHT&quot;, DefaultEditorKit.nextWordAction,
                    &quot;ctrl KP_RIGHT&quot;, DefaultEditorKit.nextWordAction,
                  &quot;ctrl shift LEFT&quot;, DefaultEditorKit.selectionPreviousWordAction,
               &quot;ctrl shift KP_LEFT&quot;, DefaultEditorKit.selectionPreviousWordAction,
                 &quot;ctrl shift RIGHT&quot;, DefaultEditorKit.selectionNextWordAction,
              &quot;ctrl shift KP_RIGHT&quot;, DefaultEditorKit.selectionNextWordAction,
                           &quot;ctrl A&quot;, DefaultEditorKit.selectAllAction,
                             &quot;HOME&quot;, DefaultEditorKit.beginLineAction,
                              &quot;END&quot;, DefaultEditorKit.endLineAction,
                       &quot;shift HOME&quot;, DefaultEditorKit.selectionBeginLineAction,
                        &quot;shift END&quot;, DefaultEditorKit.selectionEndLineAction,
                       &quot;BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
                 &quot;shift BACK_SPACE&quot;, DefaultEditorKit.deletePrevCharAction,
                           &quot;ctrl H&quot;, DefaultEditorKit.deletePrevCharAction,
                           &quot;DELETE&quot;, DefaultEditorKit.deleteNextCharAction,
                      &quot;ctrl DELETE&quot;, DefaultEditorKit.deleteNextWordAction,
                  &quot;ctrl BACK_SPACE&quot;, DefaultEditorKit.deletePrevWordAction,
                            &quot;RIGHT&quot;, DefaultEditorKit.forwardAction,
                             &quot;LEFT&quot;, DefaultEditorKit.backwardAction,
                         &quot;KP_RIGHT&quot;, DefaultEditorKit.forwardAction,
                          &quot;KP_LEFT&quot;, DefaultEditorKit.backwardAction,
                            &quot;ENTER&quot;, JTextField.notifyAction,
                  &quot;ctrl BACK_SLASH&quot;, &quot;unselect&quot;,
                   &quot;control shift O&quot;, &quot;toggle-componentOrientation&quot;,
                           &quot;ESCAPE&quot;, &quot;reset-field-edit&quot;,
                               &quot;UP&quot;, &quot;increment&quot;,
                            &quot;KP_UP&quot;, &quot;increment&quot;,
                             &quot;DOWN&quot;, &quot;decrement&quot;,
                          &quot;KP_DOWN&quot;, &quot;decrement&quot;,
              }),
            &quot;FormattedTextField.inactiveBackground&quot;, ReadOnlyTextBackground,
            &quot;FormattedTextField.disabledBackground&quot;, DisabledTextBackground,

            // *** Panel
            &quot;Panel.font&quot;, ControlFont,
            &quot;Panel.background&quot;, ControlBackgroundColor,
            &quot;Panel.foreground&quot;, WindowTextColor,

            // *** PasswordField
            &quot;PasswordField.font&quot;, ControlFont,
            &quot;PasswordField.background&quot;, TextBackground,
            &quot;PasswordField.foreground&quot;, WindowTextColor,
            &quot;PasswordField.inactiveForeground&quot;, InactiveTextColor,      // for disabled
            &quot;PasswordField.inactiveBackground&quot;, ReadOnlyTextBackground, // for readonly
            &quot;PasswordField.disabledBackground&quot;, DisabledTextBackground, // for disabled
            &quot;PasswordField.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;PasswordField.selectionForeground&quot;, SelectionTextColor,
            &quot;PasswordField.caretForeground&quot;,WindowTextColor,
            &quot;PasswordField.echoChar&quot;, new XPValue(new Character((char)0x25CF),
                                                  new Character('*')),

            // *** ProgressBar
            &quot;ProgressBar.font&quot;, ControlFont,
            &quot;ProgressBar.foreground&quot;,  SelectionBackgroundColor,
            &quot;ProgressBar.background&quot;, ControlBackgroundColor,
            &quot;ProgressBar.shadow&quot;, ControlShadowColor,
            &quot;ProgressBar.highlight&quot;, ControlHighlightColor,
            &quot;ProgressBar.selectionForeground&quot;, ControlBackgroundColor,
            &quot;ProgressBar.selectionBackground&quot;, SelectionBackgroundColor,
<span class="nc" id="L1134">            &quot;ProgressBar.cellLength&quot;, Integer.valueOf(7),</span>
<span class="nc" id="L1135">            &quot;ProgressBar.cellSpacing&quot;, Integer.valueOf(2),</span>
            &quot;ProgressBar.indeterminateInsets&quot;, new Insets(3, 3, 3, 3),

            // *** RootPane.
            // These bindings are only enabled when there is a default
            // button set on the rootpane.
            &quot;RootPane.defaultButtonWindowKeyBindings&quot;, new Object[] {
                             &quot;ENTER&quot;, &quot;press&quot;,
                    &quot;released ENTER&quot;, &quot;release&quot;,
                        &quot;ctrl ENTER&quot;, &quot;press&quot;,
               &quot;ctrl released ENTER&quot;, &quot;release&quot;
              },

            // *** ScrollBar.
            &quot;ScrollBar.background&quot;, ScrollbarBackgroundColor,
            &quot;ScrollBar.foreground&quot;, ControlBackgroundColor,
            &quot;ScrollBar.track&quot;, white,
            &quot;ScrollBar.trackForeground&quot;, ScrollbarBackgroundColor,
            &quot;ScrollBar.trackHighlight&quot;, black,
            &quot;ScrollBar.trackHighlightForeground&quot;, scrollBarTrackHighlight,
            &quot;ScrollBar.thumb&quot;, ControlBackgroundColor,
            &quot;ScrollBar.thumbHighlight&quot;, ControlHighlightColor,
            &quot;ScrollBar.thumbDarkShadow&quot;, ControlDarkShadowColor,
            &quot;ScrollBar.thumbShadow&quot;, ControlShadowColor,
            &quot;ScrollBar.width&quot;, scrollBarWidth,
            &quot;ScrollBar.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                       &quot;RIGHT&quot;, &quot;positiveUnitIncrement&quot;,
                    &quot;KP_RIGHT&quot;, &quot;positiveUnitIncrement&quot;,
                        &quot;DOWN&quot;, &quot;positiveUnitIncrement&quot;,
                     &quot;KP_DOWN&quot;, &quot;positiveUnitIncrement&quot;,
                   &quot;PAGE_DOWN&quot;, &quot;positiveBlockIncrement&quot;,
              &quot;ctrl PAGE_DOWN&quot;, &quot;positiveBlockIncrement&quot;,
                        &quot;LEFT&quot;, &quot;negativeUnitIncrement&quot;,
                     &quot;KP_LEFT&quot;, &quot;negativeUnitIncrement&quot;,
                          &quot;UP&quot;, &quot;negativeUnitIncrement&quot;,
                       &quot;KP_UP&quot;, &quot;negativeUnitIncrement&quot;,
                     &quot;PAGE_UP&quot;, &quot;negativeBlockIncrement&quot;,
                &quot;ctrl PAGE_UP&quot;, &quot;negativeBlockIncrement&quot;,
                        &quot;HOME&quot;, &quot;minScroll&quot;,
                         &quot;END&quot;, &quot;maxScroll&quot;
                 }),

            // *** ScrollPane.
            &quot;ScrollPane.font&quot;, ControlFont,
            &quot;ScrollPane.background&quot;, ControlBackgroundColor,
            &quot;ScrollPane.foreground&quot;, ControlTextColor,
            &quot;ScrollPane.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                           &quot;RIGHT&quot;, &quot;unitScrollRight&quot;,
                        &quot;KP_RIGHT&quot;, &quot;unitScrollRight&quot;,
                            &quot;DOWN&quot;, &quot;unitScrollDown&quot;,
                         &quot;KP_DOWN&quot;, &quot;unitScrollDown&quot;,
                            &quot;LEFT&quot;, &quot;unitScrollLeft&quot;,
                         &quot;KP_LEFT&quot;, &quot;unitScrollLeft&quot;,
                              &quot;UP&quot;, &quot;unitScrollUp&quot;,
                           &quot;KP_UP&quot;, &quot;unitScrollUp&quot;,
                         &quot;PAGE_UP&quot;, &quot;scrollUp&quot;,
                       &quot;PAGE_DOWN&quot;, &quot;scrollDown&quot;,
                    &quot;ctrl PAGE_UP&quot;, &quot;scrollLeft&quot;,
                  &quot;ctrl PAGE_DOWN&quot;, &quot;scrollRight&quot;,
                       &quot;ctrl HOME&quot;, &quot;scrollHome&quot;,
                        &quot;ctrl END&quot;, &quot;scrollEnd&quot;
                 }),

            // *** Separator
            &quot;Separator.background&quot;, ControlHighlightColor,
            &quot;Separator.foreground&quot;, ControlShadowColor,

            // *** Slider.
            &quot;Slider.font&quot;, ControlFont,
            &quot;Slider.foreground&quot;, ControlBackgroundColor,
            &quot;Slider.background&quot;, ControlBackgroundColor,
            &quot;Slider.highlight&quot;, ControlHighlightColor,
            &quot;Slider.shadow&quot;, ControlShadowColor,
            &quot;Slider.focus&quot;, ControlDarkShadowColor,
            &quot;Slider.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                       &quot;RIGHT&quot;, &quot;positiveUnitIncrement&quot;,
                    &quot;KP_RIGHT&quot;, &quot;positiveUnitIncrement&quot;,
                        &quot;DOWN&quot;, &quot;negativeUnitIncrement&quot;,
                     &quot;KP_DOWN&quot;, &quot;negativeUnitIncrement&quot;,
                   &quot;PAGE_DOWN&quot;, &quot;negativeBlockIncrement&quot;,
                        &quot;LEFT&quot;, &quot;negativeUnitIncrement&quot;,
                     &quot;KP_LEFT&quot;, &quot;negativeUnitIncrement&quot;,
                          &quot;UP&quot;, &quot;positiveUnitIncrement&quot;,
                       &quot;KP_UP&quot;, &quot;positiveUnitIncrement&quot;,
                     &quot;PAGE_UP&quot;, &quot;positiveBlockIncrement&quot;,
                        &quot;HOME&quot;, &quot;minScroll&quot;,
                         &quot;END&quot;, &quot;maxScroll&quot;
                 }),

            // Spinner
            &quot;Spinner.font&quot;, ControlFont,
            &quot;Spinner.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                               &quot;UP&quot;, &quot;increment&quot;,
                            &quot;KP_UP&quot;, &quot;increment&quot;,
                             &quot;DOWN&quot;, &quot;decrement&quot;,
                          &quot;KP_DOWN&quot;, &quot;decrement&quot;,
               }),

            // *** SplitPane
            &quot;SplitPane.background&quot;, ControlBackgroundColor,
            &quot;SplitPane.highlight&quot;, ControlHighlightColor,
            &quot;SplitPane.shadow&quot;, ControlShadowColor,
            &quot;SplitPane.darkShadow&quot;, ControlDarkShadowColor,
<span class="nc" id="L1242">            &quot;SplitPane.dividerSize&quot;, Integer.valueOf(5),</span>
            &quot;SplitPane.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                        &quot;UP&quot;, &quot;negativeIncrement&quot;,
                      &quot;DOWN&quot;, &quot;positiveIncrement&quot;,
                      &quot;LEFT&quot;, &quot;negativeIncrement&quot;,
                     &quot;RIGHT&quot;, &quot;positiveIncrement&quot;,
                     &quot;KP_UP&quot;, &quot;negativeIncrement&quot;,
                   &quot;KP_DOWN&quot;, &quot;positiveIncrement&quot;,
                   &quot;KP_LEFT&quot;, &quot;negativeIncrement&quot;,
                  &quot;KP_RIGHT&quot;, &quot;positiveIncrement&quot;,
                      &quot;HOME&quot;, &quot;selectMin&quot;,
                       &quot;END&quot;, &quot;selectMax&quot;,
                        &quot;F8&quot;, &quot;startResize&quot;,
                        &quot;F6&quot;, &quot;toggleFocus&quot;,
                  &quot;ctrl TAB&quot;, &quot;focusOutForward&quot;,
            &quot;ctrl shift TAB&quot;, &quot;focusOutBackward&quot;
               }),

            // *** TabbedPane
            &quot;TabbedPane.tabsOverlapBorder&quot;, new XPValue(Boolean.TRUE, Boolean.FALSE),
            &quot;TabbedPane.tabInsets&quot;,         new XPValue(new InsetsUIResource(1, 4, 1, 4),
                                                        new InsetsUIResource(0, 4, 1, 4)),
            &quot;TabbedPane.tabAreaInsets&quot;,     new XPValue(new InsetsUIResource(3, 2, 2, 2),
                                                        new InsetsUIResource(3, 2, 0, 2)),
            &quot;TabbedPane.font&quot;, ControlFont,
            &quot;TabbedPane.background&quot;, ControlBackgroundColor,
            &quot;TabbedPane.foreground&quot;, ControlTextColor,
            &quot;TabbedPane.highlight&quot;, ControlHighlightColor,
            &quot;TabbedPane.light&quot;, ControlLightColor,
            &quot;TabbedPane.shadow&quot;, ControlShadowColor,
            &quot;TabbedPane.darkShadow&quot;, ControlDarkShadowColor,
            &quot;TabbedPane.focus&quot;, ControlTextColor,
            &quot;TabbedPane.focusInputMap&quot;,
              new UIDefaults.LazyInputMap(new Object[] {
                         &quot;RIGHT&quot;, &quot;navigateRight&quot;,
                      &quot;KP_RIGHT&quot;, &quot;navigateRight&quot;,
                          &quot;LEFT&quot;, &quot;navigateLeft&quot;,
                       &quot;KP_LEFT&quot;, &quot;navigateLeft&quot;,
                            &quot;UP&quot;, &quot;navigateUp&quot;,
                         &quot;KP_UP&quot;, &quot;navigateUp&quot;,
                          &quot;DOWN&quot;, &quot;navigateDown&quot;,
                       &quot;KP_DOWN&quot;, &quot;navigateDown&quot;,
                     &quot;ctrl DOWN&quot;, &quot;requestFocusForVisibleComponent&quot;,
                  &quot;ctrl KP_DOWN&quot;, &quot;requestFocusForVisibleComponent&quot;,
                }),
            &quot;TabbedPane.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                         &quot;ctrl TAB&quot;, &quot;navigateNext&quot;,
                   &quot;ctrl shift TAB&quot;, &quot;navigatePrevious&quot;,
                   &quot;ctrl PAGE_DOWN&quot;, &quot;navigatePageDown&quot;,
                     &quot;ctrl PAGE_UP&quot;, &quot;navigatePageUp&quot;,
                          &quot;ctrl UP&quot;, &quot;requestFocus&quot;,
                       &quot;ctrl KP_UP&quot;, &quot;requestFocus&quot;,
                 }),

            // *** Table
            &quot;Table.font&quot;, ControlFont,
            &quot;Table.foreground&quot;, ControlTextColor,  // cell text color
            &quot;Table.background&quot;, WindowBackgroundColor,  // cell background color
            &quot;Table.highlight&quot;, ControlHighlightColor,
            &quot;Table.light&quot;, ControlLightColor,
            &quot;Table.shadow&quot;, ControlShadowColor,
            &quot;Table.darkShadow&quot;, ControlDarkShadowColor,
            &quot;Table.selectionForeground&quot;, SelectionTextColor,
            &quot;Table.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;Table.gridColor&quot;, gray,  // grid line color
            &quot;Table.focusCellBackground&quot;, WindowBackgroundColor,
            &quot;Table.focusCellForeground&quot;, ControlTextColor,
            &quot;Table.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                               &quot;ctrl C&quot;, &quot;copy&quot;,
                               &quot;ctrl V&quot;, &quot;paste&quot;,
                               &quot;ctrl X&quot;, &quot;cut&quot;,
                                 &quot;COPY&quot;, &quot;copy&quot;,
                                &quot;PASTE&quot;, &quot;paste&quot;,
                                  &quot;CUT&quot;, &quot;cut&quot;,
                       &quot;control INSERT&quot;, &quot;copy&quot;,
                         &quot;shift INSERT&quot;, &quot;paste&quot;,
                         &quot;shift DELETE&quot;, &quot;cut&quot;,
                                &quot;RIGHT&quot;, &quot;selectNextColumn&quot;,
                             &quot;KP_RIGHT&quot;, &quot;selectNextColumn&quot;,
                          &quot;shift RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                       &quot;shift KP_RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                     &quot;ctrl shift RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                  &quot;ctrl shift KP_RIGHT&quot;, &quot;selectNextColumnExtendSelection&quot;,
                           &quot;ctrl RIGHT&quot;, &quot;selectNextColumnChangeLead&quot;,
                        &quot;ctrl KP_RIGHT&quot;, &quot;selectNextColumnChangeLead&quot;,
                                 &quot;LEFT&quot;, &quot;selectPreviousColumn&quot;,
                              &quot;KP_LEFT&quot;, &quot;selectPreviousColumn&quot;,
                           &quot;shift LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                        &quot;shift KP_LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                      &quot;ctrl shift LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                   &quot;ctrl shift KP_LEFT&quot;, &quot;selectPreviousColumnExtendSelection&quot;,
                            &quot;ctrl LEFT&quot;, &quot;selectPreviousColumnChangeLead&quot;,
                         &quot;ctrl KP_LEFT&quot;, &quot;selectPreviousColumnChangeLead&quot;,
                                 &quot;DOWN&quot;, &quot;selectNextRow&quot;,
                              &quot;KP_DOWN&quot;, &quot;selectNextRow&quot;,
                           &quot;shift DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                        &quot;shift KP_DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                      &quot;ctrl shift DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                   &quot;ctrl shift KP_DOWN&quot;, &quot;selectNextRowExtendSelection&quot;,
                            &quot;ctrl DOWN&quot;, &quot;selectNextRowChangeLead&quot;,
                         &quot;ctrl KP_DOWN&quot;, &quot;selectNextRowChangeLead&quot;,
                                   &quot;UP&quot;, &quot;selectPreviousRow&quot;,
                                &quot;KP_UP&quot;, &quot;selectPreviousRow&quot;,
                             &quot;shift UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                          &quot;shift KP_UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                        &quot;ctrl shift UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                     &quot;ctrl shift KP_UP&quot;, &quot;selectPreviousRowExtendSelection&quot;,
                              &quot;ctrl UP&quot;, &quot;selectPreviousRowChangeLead&quot;,
                           &quot;ctrl KP_UP&quot;, &quot;selectPreviousRowChangeLead&quot;,
                                 &quot;HOME&quot;, &quot;selectFirstColumn&quot;,
                           &quot;shift HOME&quot;, &quot;selectFirstColumnExtendSelection&quot;,
                      &quot;ctrl shift HOME&quot;, &quot;selectFirstRowExtendSelection&quot;,
                            &quot;ctrl HOME&quot;, &quot;selectFirstRow&quot;,
                                  &quot;END&quot;, &quot;selectLastColumn&quot;,
                            &quot;shift END&quot;, &quot;selectLastColumnExtendSelection&quot;,
                       &quot;ctrl shift END&quot;, &quot;selectLastRowExtendSelection&quot;,
                             &quot;ctrl END&quot;, &quot;selectLastRow&quot;,
                              &quot;PAGE_UP&quot;, &quot;scrollUpChangeSelection&quot;,
                        &quot;shift PAGE_UP&quot;, &quot;scrollUpExtendSelection&quot;,
                   &quot;ctrl shift PAGE_UP&quot;, &quot;scrollLeftExtendSelection&quot;,
                         &quot;ctrl PAGE_UP&quot;, &quot;scrollLeftChangeSelection&quot;,
                            &quot;PAGE_DOWN&quot;, &quot;scrollDownChangeSelection&quot;,
                      &quot;shift PAGE_DOWN&quot;, &quot;scrollDownExtendSelection&quot;,
                 &quot;ctrl shift PAGE_DOWN&quot;, &quot;scrollRightExtendSelection&quot;,
                       &quot;ctrl PAGE_DOWN&quot;, &quot;scrollRightChangeSelection&quot;,
                                  &quot;TAB&quot;, &quot;selectNextColumnCell&quot;,
                            &quot;shift TAB&quot;, &quot;selectPreviousColumnCell&quot;,
                                &quot;ENTER&quot;, &quot;selectNextRowCell&quot;,
                          &quot;shift ENTER&quot;, &quot;selectPreviousRowCell&quot;,
                               &quot;ctrl A&quot;, &quot;selectAll&quot;,
                           &quot;ctrl SLASH&quot;, &quot;selectAll&quot;,
                      &quot;ctrl BACK_SLASH&quot;, &quot;clearSelection&quot;,
                               &quot;ESCAPE&quot;, &quot;cancel&quot;,
                                   &quot;F2&quot;, &quot;startEditing&quot;,
                                &quot;SPACE&quot;, &quot;addToSelection&quot;,
                           &quot;ctrl SPACE&quot;, &quot;toggleAndAnchor&quot;,
                          &quot;shift SPACE&quot;, &quot;extendTo&quot;,
                     &quot;ctrl shift SPACE&quot;, &quot;moveSelectionTo&quot;,
                                   &quot;F8&quot;, &quot;focusHeader&quot;
                 }),
            &quot;Table.sortIconHighlight&quot;, ControlShadowColor,
            &quot;Table.sortIconLight&quot;, white,

            &quot;TableHeader.font&quot;, ControlFont,
            &quot;TableHeader.foreground&quot;, ControlTextColor, // header text color
            &quot;TableHeader.background&quot;, ControlBackgroundColor, // header background
            &quot;TableHeader.focusCellBackground&quot;,
<span class="nc" id="L1392">                new XPValue(XPValue.NULL_VALUE,     // use default bg from XP styles</span>
                            WindowBackgroundColor), // or white bg otherwise

            // *** TextArea
            &quot;TextArea.font&quot;, FixedControlFont,
            &quot;TextArea.background&quot;, WindowBackgroundColor,
            &quot;TextArea.foreground&quot;, WindowTextColor,
            &quot;TextArea.inactiveForeground&quot;, InactiveTextColor,
            &quot;TextArea.inactiveBackground&quot;, WindowBackgroundColor,
            &quot;TextArea.disabledBackground&quot;, DisabledTextBackground,
            &quot;TextArea.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;TextArea.selectionForeground&quot;, SelectionTextColor,
            &quot;TextArea.caretForeground&quot;, WindowTextColor,

            // *** TextField
            &quot;TextField.font&quot;, ControlFont,
            &quot;TextField.background&quot;, TextBackground,
            &quot;TextField.foreground&quot;, WindowTextColor,
            &quot;TextField.shadow&quot;, ControlShadowColor,
            &quot;TextField.darkShadow&quot;, ControlDarkShadowColor,
            &quot;TextField.light&quot;, ControlLightColor,
            &quot;TextField.highlight&quot;, ControlHighlightColor,
            &quot;TextField.inactiveForeground&quot;, InactiveTextColor,      // for disabled
            &quot;TextField.inactiveBackground&quot;, ReadOnlyTextBackground, // for readonly
            &quot;TextField.disabledBackground&quot;, DisabledTextBackground, // for disabled
            &quot;TextField.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;TextField.selectionForeground&quot;, SelectionTextColor,
            &quot;TextField.caretForeground&quot;, WindowTextColor,

            // *** TextPane
            &quot;TextPane.font&quot;, ControlFont,
            &quot;TextPane.background&quot;, WindowBackgroundColor,
            &quot;TextPane.foreground&quot;, WindowTextColor,
            &quot;TextPane.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;TextPane.selectionForeground&quot;, SelectionTextColor,
            &quot;TextPane.inactiveBackground&quot;, WindowBackgroundColor,
            &quot;TextPane.disabledBackground&quot;, DisabledTextBackground,
            &quot;TextPane.caretForeground&quot;, WindowTextColor,

            // *** TitledBorder
            &quot;TitledBorder.font&quot;, ControlFont,
            &quot;TitledBorder.titleColor&quot;,
                        new XPColorValue(Part.BP_GROUPBOX, null, Prop.TEXTCOLOR,
                                         WindowTextColor),

            // *** ToggleButton
            &quot;ToggleButton.font&quot;, ControlFont,
            &quot;ToggleButton.background&quot;, ControlBackgroundColor,
            &quot;ToggleButton.foreground&quot;, ControlTextColor,
            &quot;ToggleButton.shadow&quot;, ControlShadowColor,
            &quot;ToggleButton.darkShadow&quot;, ControlDarkShadowColor,
            &quot;ToggleButton.light&quot;, ControlLightColor,
            &quot;ToggleButton.highlight&quot;, ControlHighlightColor,
            &quot;ToggleButton.focus&quot;, ControlTextColor,
<span class="nc" id="L1446">            &quot;ToggleButton.textShiftOffset&quot;, Integer.valueOf(1),</span>
            &quot;ToggleButton.focusInputMap&quot;,
              new UIDefaults.LazyInputMap(new Object[] {
                            &quot;SPACE&quot;, &quot;pressed&quot;,
                   &quot;released SPACE&quot;, &quot;released&quot;
                }),

            // *** ToolBar
            &quot;ToolBar.font&quot;, MenuFont,
            &quot;ToolBar.background&quot;, ControlBackgroundColor,
            &quot;ToolBar.foreground&quot;, ControlTextColor,
            &quot;ToolBar.shadow&quot;, ControlShadowColor,
            &quot;ToolBar.darkShadow&quot;, ControlDarkShadowColor,
            &quot;ToolBar.light&quot;, ControlLightColor,
            &quot;ToolBar.highlight&quot;, ControlHighlightColor,
            &quot;ToolBar.dockingBackground&quot;, ControlBackgroundColor,
            &quot;ToolBar.dockingForeground&quot;, red,
            &quot;ToolBar.floatingBackground&quot;, ControlBackgroundColor,
            &quot;ToolBar.floatingForeground&quot;, darkGray,
            &quot;ToolBar.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                        &quot;UP&quot;, &quot;navigateUp&quot;,
                     &quot;KP_UP&quot;, &quot;navigateUp&quot;,
                      &quot;DOWN&quot;, &quot;navigateDown&quot;,
                   &quot;KP_DOWN&quot;, &quot;navigateDown&quot;,
                      &quot;LEFT&quot;, &quot;navigateLeft&quot;,
                   &quot;KP_LEFT&quot;, &quot;navigateLeft&quot;,
                     &quot;RIGHT&quot;, &quot;navigateRight&quot;,
                  &quot;KP_RIGHT&quot;, &quot;navigateRight&quot;
                 }),
            &quot;ToolBar.separatorSize&quot;, null,

            // *** ToolTip
            &quot;ToolTip.font&quot;, ToolTipFont,
<span class="nc" id="L1480">            &quot;ToolTip.background&quot;, new DesktopProperty(&quot;win.tooltip.backgroundColor&quot;, table.get(&quot;info&quot;)),</span>
<span class="nc" id="L1481">            &quot;ToolTip.foreground&quot;, new DesktopProperty(&quot;win.tooltip.textColor&quot;, table.get(&quot;infoText&quot;)),</span>

        // *** ToolTipManager
            &quot;ToolTipManager.enableToolTipMode&quot;, &quot;activeApplication&quot;,

        // *** Tree
            &quot;Tree.selectionBorderColor&quot;, black,
            &quot;Tree.drawDashedFocusIndicator&quot;, Boolean.TRUE,
            &quot;Tree.lineTypeDashed&quot;, Boolean.TRUE,
            &quot;Tree.font&quot;, ControlFont,
            &quot;Tree.background&quot;, WindowBackgroundColor,
            &quot;Tree.foreground&quot;, WindowTextColor,
            &quot;Tree.hash&quot;, gray,
<span class="nc" id="L1494">            &quot;Tree.leftChildIndent&quot;, Integer.valueOf(8),</span>
<span class="nc" id="L1495">            &quot;Tree.rightChildIndent&quot;, Integer.valueOf(11),</span>
            &quot;Tree.textForeground&quot;, WindowTextColor,
            &quot;Tree.textBackground&quot;, WindowBackgroundColor,
            &quot;Tree.selectionForeground&quot;, SelectionTextColor,
            &quot;Tree.selectionBackground&quot;, SelectionBackgroundColor,
            &quot;Tree.expandedIcon&quot;, treeExpandedIcon,
            &quot;Tree.collapsedIcon&quot;, treeCollapsedIcon,
            &quot;Tree.openIcon&quot;,   new ActiveWindowsIcon(&quot;win.icon.shellIconBPP&quot;,
                                   &quot;shell32Icon 5&quot;, &quot;icons/TreeOpen.gif&quot;),
            &quot;Tree.closedIcon&quot;, new ActiveWindowsIcon(&quot;win.icon.shellIconBPP&quot;,
                                   &quot;shell32Icon 4&quot;, &quot;icons/TreeClosed.gif&quot;),
            &quot;Tree.focusInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                                    &quot;ADD&quot;, &quot;expand&quot;,
                               &quot;SUBTRACT&quot;, &quot;collapse&quot;,
                                 &quot;ctrl C&quot;, &quot;copy&quot;,
                                 &quot;ctrl V&quot;, &quot;paste&quot;,
                                 &quot;ctrl X&quot;, &quot;cut&quot;,
                                   &quot;COPY&quot;, &quot;copy&quot;,
                                  &quot;PASTE&quot;, &quot;paste&quot;,
                                    &quot;CUT&quot;, &quot;cut&quot;,
                         &quot;control INSERT&quot;, &quot;copy&quot;,
                           &quot;shift INSERT&quot;, &quot;paste&quot;,
                           &quot;shift DELETE&quot;, &quot;cut&quot;,
                                     &quot;UP&quot;, &quot;selectPrevious&quot;,
                                  &quot;KP_UP&quot;, &quot;selectPrevious&quot;,
                               &quot;shift UP&quot;, &quot;selectPreviousExtendSelection&quot;,
                            &quot;shift KP_UP&quot;, &quot;selectPreviousExtendSelection&quot;,
                          &quot;ctrl shift UP&quot;, &quot;selectPreviousExtendSelection&quot;,
                       &quot;ctrl shift KP_UP&quot;, &quot;selectPreviousExtendSelection&quot;,
                                &quot;ctrl UP&quot;, &quot;selectPreviousChangeLead&quot;,
                             &quot;ctrl KP_UP&quot;, &quot;selectPreviousChangeLead&quot;,
                                   &quot;DOWN&quot;, &quot;selectNext&quot;,
                                &quot;KP_DOWN&quot;, &quot;selectNext&quot;,
                             &quot;shift DOWN&quot;, &quot;selectNextExtendSelection&quot;,
                          &quot;shift KP_DOWN&quot;, &quot;selectNextExtendSelection&quot;,
                        &quot;ctrl shift DOWN&quot;, &quot;selectNextExtendSelection&quot;,
                     &quot;ctrl shift KP_DOWN&quot;, &quot;selectNextExtendSelection&quot;,
                              &quot;ctrl DOWN&quot;, &quot;selectNextChangeLead&quot;,
                           &quot;ctrl KP_DOWN&quot;, &quot;selectNextChangeLead&quot;,
                                  &quot;RIGHT&quot;, &quot;selectChild&quot;,
                               &quot;KP_RIGHT&quot;, &quot;selectChild&quot;,
                                   &quot;LEFT&quot;, &quot;selectParent&quot;,
                                &quot;KP_LEFT&quot;, &quot;selectParent&quot;,
                                &quot;PAGE_UP&quot;, &quot;scrollUpChangeSelection&quot;,
                          &quot;shift PAGE_UP&quot;, &quot;scrollUpExtendSelection&quot;,
                     &quot;ctrl shift PAGE_UP&quot;, &quot;scrollUpExtendSelection&quot;,
                           &quot;ctrl PAGE_UP&quot;, &quot;scrollUpChangeLead&quot;,
                              &quot;PAGE_DOWN&quot;, &quot;scrollDownChangeSelection&quot;,
                        &quot;shift PAGE_DOWN&quot;, &quot;scrollDownExtendSelection&quot;,
                   &quot;ctrl shift PAGE_DOWN&quot;, &quot;scrollDownExtendSelection&quot;,
                         &quot;ctrl PAGE_DOWN&quot;, &quot;scrollDownChangeLead&quot;,
                                   &quot;HOME&quot;, &quot;selectFirst&quot;,
                             &quot;shift HOME&quot;, &quot;selectFirstExtendSelection&quot;,
                        &quot;ctrl shift HOME&quot;, &quot;selectFirstExtendSelection&quot;,
                              &quot;ctrl HOME&quot;, &quot;selectFirstChangeLead&quot;,
                                    &quot;END&quot;, &quot;selectLast&quot;,
                              &quot;shift END&quot;, &quot;selectLastExtendSelection&quot;,
                         &quot;ctrl shift END&quot;, &quot;selectLastExtendSelection&quot;,
                               &quot;ctrl END&quot;, &quot;selectLastChangeLead&quot;,
                                     &quot;F2&quot;, &quot;startEditing&quot;,
                                 &quot;ctrl A&quot;, &quot;selectAll&quot;,
                             &quot;ctrl SLASH&quot;, &quot;selectAll&quot;,
                        &quot;ctrl BACK_SLASH&quot;, &quot;clearSelection&quot;,
                              &quot;ctrl LEFT&quot;, &quot;scrollLeft&quot;,
                           &quot;ctrl KP_LEFT&quot;, &quot;scrollLeft&quot;,
                             &quot;ctrl RIGHT&quot;, &quot;scrollRight&quot;,
                          &quot;ctrl KP_RIGHT&quot;, &quot;scrollRight&quot;,
                                  &quot;SPACE&quot;, &quot;addToSelection&quot;,
                             &quot;ctrl SPACE&quot;, &quot;toggleAndAnchor&quot;,
                            &quot;shift SPACE&quot;, &quot;extendTo&quot;,
                       &quot;ctrl shift SPACE&quot;, &quot;moveSelectionTo&quot;
                 }),
            &quot;Tree.ancestorInputMap&quot;,
               new UIDefaults.LazyInputMap(new Object[] {
                     &quot;ESCAPE&quot;, &quot;cancel&quot;
                 }),

            // *** Viewport
            &quot;Viewport.font&quot;, ControlFont,
            &quot;Viewport.background&quot;, ControlBackgroundColor,
            &quot;Viewport.foreground&quot;, WindowTextColor,


        };

<span class="nc" id="L1581">        table.putDefaults(defaults);</span>
<span class="nc" id="L1582">        table.putDefaults(getLazyValueDefaults());</span>
<span class="nc" id="L1583">        initVistaComponentDefaults(table);</span>
<span class="nc" id="L1584">    }</span>

    static boolean isOnVista() {
<span class="nc bnc" id="L1587" title="All 2 branches missed.">        return OSInfo.getOSType() == OSInfo.OSType.WINDOWS</span>
<span class="nc bnc" id="L1588" title="All 2 branches missed.">                &amp;&amp; OSInfo.getWindowsVersion().compareTo(OSInfo.WINDOWS_VISTA) &gt;= 0;</span>
    }

    private void initVistaComponentDefaults(UIDefaults table) {
<span class="nc bnc" id="L1592" title="All 2 branches missed.">        if (! isOnVista()) {</span>
<span class="nc" id="L1593">            return;</span>
        }
        /* START handling menus for Vista */
<span class="nc" id="L1596">        String[] menuClasses = { &quot;MenuItem&quot;, &quot;Menu&quot;,</span>
                &quot;CheckBoxMenuItem&quot;, &quot;RadioButtonMenuItem&quot;,
        };

<span class="nc" id="L1600">        Object menuDefaults[] = new Object[menuClasses.length * 2];</span>

        /* all the menus need to be non opaque. */
<span class="nc bnc" id="L1603" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1604">            String key = menuClasses[i] + &quot;.opaque&quot;;</span>
<span class="nc" id="L1605">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1606">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1607">            menuDefaults[j++] =</span>
                new XPValue(Boolean.FALSE, oldValue);
        }
<span class="nc" id="L1610">        table.putDefaults(menuDefaults);</span>

        /*
         * acceleratorSelectionForeground color is the same as
         * acceleratorForeground
         */
<span class="nc bnc" id="L1616" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1617">            String key = menuClasses[i] + &quot;.acceleratorSelectionForeground&quot;;</span>
<span class="nc" id="L1618">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1619">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1620">            menuDefaults[j++] =</span>
                new XPValue(
<span class="nc" id="L1622">                    table.getColor(</span>
                        menuClasses[i] + &quot;.acceleratorForeground&quot;),
                        oldValue);
        }
<span class="nc" id="L1626">        table.putDefaults(menuDefaults);</span>

        /* they have the same MenuItemCheckIconFactory */
        VistaMenuItemCheckIconFactory menuItemCheckIconFactory =
<span class="nc" id="L1630">            WindowsIconFactory.getMenuItemCheckIconFactory();</span>
<span class="nc bnc" id="L1631" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1632">            String key = menuClasses[i] + &quot;.checkIconFactory&quot;;</span>
<span class="nc" id="L1633">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1634">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1635">            menuDefaults[j++] =</span>
                new XPValue(menuItemCheckIconFactory, oldValue);
        }
<span class="nc" id="L1638">        table.putDefaults(menuDefaults);</span>

<span class="nc bnc" id="L1640" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1641">            String key = menuClasses[i] + &quot;.checkIcon&quot;;</span>
<span class="nc" id="L1642">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1643">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1644">            menuDefaults[j++] =</span>
<span class="nc" id="L1645">                new XPValue(menuItemCheckIconFactory.getIcon(menuClasses[i]),</span>
                    oldValue);
        }
<span class="nc" id="L1648">        table.putDefaults(menuDefaults);</span>


        /* height can be even */
<span class="nc bnc" id="L1652" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1653">            String key = menuClasses[i] + &quot;.evenHeight&quot;;</span>
<span class="nc" id="L1654">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1655">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1656">            menuDefaults[j++] = new XPValue(Boolean.TRUE, oldValue);</span>
        }
<span class="nc" id="L1658">        table.putDefaults(menuDefaults);</span>

        /* no margins */
<span class="nc" id="L1661">        InsetsUIResource insets = new InsetsUIResource(0, 0, 0, 0);</span>
<span class="nc bnc" id="L1662" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1663">            String key = menuClasses[i] + &quot;.margin&quot;;</span>
<span class="nc" id="L1664">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1665">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1666">            menuDefaults[j++] = new XPValue(insets, oldValue);</span>
        }
<span class="nc" id="L1668">        table.putDefaults(menuDefaults);</span>

        /* set checkIcon offset */
<span class="nc" id="L1671">        Integer checkIconOffsetInteger =</span>
<span class="nc" id="L1672">            Integer.valueOf(0);</span>
<span class="nc bnc" id="L1673" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1674">            String key = menuClasses[i] + &quot;.checkIconOffset&quot;;</span>
<span class="nc" id="L1675">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1676">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1677">            menuDefaults[j++] =</span>
                new XPValue(checkIconOffsetInteger, oldValue);
        }
<span class="nc" id="L1680">        table.putDefaults(menuDefaults);</span>

        /* set width of the gap after check icon */
<span class="nc" id="L1683">        Integer afterCheckIconGap = WindowsPopupMenuUI.getSpanBeforeGutter()</span>
<span class="nc" id="L1684">                + WindowsPopupMenuUI.getGutterWidth()</span>
<span class="nc" id="L1685">                + WindowsPopupMenuUI.getSpanAfterGutter();</span>
<span class="nc bnc" id="L1686" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1687">            String key = menuClasses[i] + &quot;.afterCheckIconGap&quot;;</span>
<span class="nc" id="L1688">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1689">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1690">            menuDefaults[j++] =</span>
                new XPValue(afterCheckIconGap, oldValue);
        }
<span class="nc" id="L1693">        table.putDefaults(menuDefaults);</span>

        /* text is started after this position */
<span class="nc" id="L1696">        Object minimumTextOffset = new UIDefaults.ActiveValue() {</span>
            public Object createValue(UIDefaults table) {
<span class="nc" id="L1698">                return VistaMenuItemCheckIconFactory.getIconWidth()</span>
<span class="nc" id="L1699">                + WindowsPopupMenuUI.getSpanBeforeGutter()</span>
<span class="nc" id="L1700">                + WindowsPopupMenuUI.getGutterWidth()</span>
<span class="nc" id="L1701">                + WindowsPopupMenuUI.getSpanAfterGutter();</span>
            }
        };
<span class="nc bnc" id="L1704" title="All 2 branches missed.">        for (int i = 0, j = 0; i &lt; menuClasses.length; i++) {</span>
<span class="nc" id="L1705">            String key = menuClasses[i] + &quot;.minimumTextOffset&quot;;</span>
<span class="nc" id="L1706">            Object oldValue = table.get(key);</span>
<span class="nc" id="L1707">            menuDefaults[j++] = key;</span>
<span class="nc" id="L1708">            menuDefaults[j++] = new XPValue(minimumTextOffset, oldValue);</span>
        }
<span class="nc" id="L1710">        table.putDefaults(menuDefaults);</span>

        /*
         * JPopupMenu has a bit of free space around menu items
         */
<span class="nc" id="L1715">        String POPUP_MENU_BORDER = &quot;PopupMenu.border&quot;;</span>

<span class="nc" id="L1717">        Object popupMenuBorder = new XPBorderValue(Part.MENU,</span>
                new SwingLazyValue(
                  &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                  &quot;getInternalFrameBorder&quot;),
<span class="nc" id="L1721">                  BorderFactory.createEmptyBorder(2, 2, 2, 2));</span>
<span class="nc" id="L1722">        table.put(POPUP_MENU_BORDER, popupMenuBorder);</span>
        /* END handling menus for Vista */

        /* START table handling for Vista */
<span class="nc" id="L1726">        table.put(&quot;Table.ascendingSortIcon&quot;, new XPValue(</span>
            new SkinIcon(Part.HP_HEADERSORTARROW, State.SORTEDDOWN),
            new SwingLazyValue(
                &quot;sun.swing.plaf.windows.ClassicSortArrowIcon&quot;,
                null, new Object[] { Boolean.TRUE })));
<span class="nc" id="L1731">        table.put(&quot;Table.descendingSortIcon&quot;, new XPValue(</span>
            new SkinIcon(Part.HP_HEADERSORTARROW, State.SORTEDUP),
            new SwingLazyValue(
                &quot;sun.swing.plaf.windows.ClassicSortArrowIcon&quot;,
                null, new Object[] { Boolean.FALSE })));
        /* END table handling for Vista */
<span class="nc" id="L1737">    }</span>

    /**
     * If we support loading of fonts from the desktop this will return
     * a DesktopProperty representing the font. If the font can't be
     * represented in the current encoding this will return null and
     * turn off the use of system fonts.
     */
    private Object getDesktopFontValue(String fontName, Object backup) {
<span class="nc bnc" id="L1746" title="All 2 branches missed.">        if (useSystemFontSettings) {</span>
<span class="nc" id="L1747">            return new WindowsFontProperty(fontName, backup);</span>
        }
<span class="nc" id="L1749">        return null;</span>
    }

    // When a desktop property change is detected, these classes must be
    // reinitialized in the defaults table to ensure the classes reference
    // the updated desktop property values (colors mostly)
    //
    private Object[] getLazyValueDefaults() {

<span class="nc" id="L1758">        Object buttonBorder =</span>
            new XPBorderValue(Part.BP_PUSHBUTTON,
                              new SwingLazyValue(
                               &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                               &quot;getButtonBorder&quot;));

<span class="nc" id="L1764">        Object textFieldBorder =</span>
            new XPBorderValue(Part.EP_EDIT,
                              new SwingLazyValue(
                               &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                               &quot;getTextFieldBorder&quot;));

<span class="nc" id="L1770">        Object textFieldMargin =</span>
            new XPValue(new InsetsUIResource(2, 2, 2, 2),
                        new InsetsUIResource(1, 1, 1, 1));

<span class="nc" id="L1774">        Object spinnerBorder =</span>
            new XPBorderValue(Part.EP_EDIT, textFieldBorder,
                              new EmptyBorder(2, 2, 2, 2));

<span class="nc" id="L1778">        Object spinnerArrowInsets =</span>
            new XPValue(new InsetsUIResource(1, 1, 1, 1),
                        null);

<span class="nc" id="L1782">        Object comboBoxBorder = new XPBorderValue(Part.CP_COMBOBOX, textFieldBorder);</span>

        // For focus rectangle for cells and trees.
<span class="nc" id="L1785">        Object focusCellHighlightBorder = new SwingLazyValue(</span>
                          &quot;com.sun.java.swing.plaf.windows.WindowsBorders&quot;,
                          &quot;getFocusCellHighlightBorder&quot;);

<span class="nc" id="L1789">        Object etchedBorder = new SwingLazyValue(</span>
                          &quot;javax.swing.plaf.BorderUIResource&quot;,
                          &quot;getEtchedBorderUIResource&quot;);

<span class="nc" id="L1793">        Object internalFrameBorder = new SwingLazyValue(</span>
                &quot;com.sun.java.swing.plaf.windows.WindowsBorders&quot;,
                &quot;getInternalFrameBorder&quot;);

<span class="nc" id="L1797">        Object loweredBevelBorder = new SwingLazyValue(</span>
                          &quot;javax.swing.plaf.BorderUIResource&quot;,
                          &quot;getLoweredBevelBorderUIResource&quot;);


<span class="nc" id="L1802">        Object marginBorder = new SwingLazyValue(</span>
                            &quot;javax.swing.plaf.basic.BasicBorders$MarginBorder&quot;);

<span class="nc" id="L1805">        Object menuBarBorder = new SwingLazyValue(</span>
                &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                &quot;getMenuBarBorder&quot;);


<span class="nc" id="L1810">        Object popupMenuBorder = new XPBorderValue(Part.MENU,</span>
                        new SwingLazyValue(
                          &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                          &quot;getInternalFrameBorder&quot;));

        // *** ProgressBar
<span class="nc" id="L1816">        Object progressBarBorder = new SwingLazyValue(</span>
                              &quot;com.sun.java.swing.plaf.windows.WindowsBorders&quot;,
                              &quot;getProgressBarBorder&quot;);

<span class="nc" id="L1820">        Object radioButtonBorder = new SwingLazyValue(</span>
                               &quot;javax.swing.plaf.basic.BasicBorders&quot;,
                               &quot;getRadioButtonBorder&quot;);

<span class="nc" id="L1824">        Object scrollPaneBorder =</span>
            new XPBorderValue(Part.LBP_LISTBOX, textFieldBorder);

<span class="nc" id="L1827">        Object tableScrollPaneBorder =</span>
            new XPBorderValue(Part.LBP_LISTBOX, loweredBevelBorder);

<span class="nc" id="L1830">        Object tableHeaderBorder = new SwingLazyValue(</span>
                          &quot;com.sun.java.swing.plaf.windows.WindowsBorders&quot;,
                          &quot;getTableHeaderBorder&quot;);

        // *** ToolBar
<span class="nc" id="L1835">        Object toolBarBorder = new SwingLazyValue(</span>
                              &quot;com.sun.java.swing.plaf.windows.WindowsBorders&quot;,
                              &quot;getToolBarBorder&quot;);

        // *** ToolTips
<span class="nc" id="L1840">        Object toolTipBorder = new SwingLazyValue(</span>
                              &quot;javax.swing.plaf.BorderUIResource&quot;,
                              &quot;getBlackLineBorderUIResource&quot;);



<span class="nc" id="L1846">        Object checkBoxIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getCheckBoxIcon&quot;);

<span class="nc" id="L1850">        Object radioButtonIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getRadioButtonIcon&quot;);

<span class="nc" id="L1854">        Object radioButtonMenuItemIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getRadioButtonMenuItemIcon&quot;);

<span class="nc" id="L1858">        Object menuItemCheckIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getMenuItemCheckIcon&quot;);

<span class="nc" id="L1862">        Object menuItemArrowIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getMenuItemArrowIcon&quot;);

<span class="nc" id="L1866">        Object menuArrowIcon = new SwingLazyValue(</span>
                     &quot;com.sun.java.swing.plaf.windows.WindowsIconFactory&quot;,
                     &quot;getMenuArrowIcon&quot;);


<span class="nc" id="L1871">        Object[] lazyDefaults = {</span>
            &quot;Button.border&quot;, buttonBorder,
            &quot;CheckBox.border&quot;, radioButtonBorder,
            &quot;ComboBox.border&quot;, comboBoxBorder,
            &quot;DesktopIcon.border&quot;, internalFrameBorder,
            &quot;FormattedTextField.border&quot;, textFieldBorder,
            &quot;FormattedTextField.margin&quot;, textFieldMargin,
            &quot;InternalFrame.border&quot;, internalFrameBorder,
            &quot;List.focusCellHighlightBorder&quot;, focusCellHighlightBorder,
            &quot;Table.focusCellHighlightBorder&quot;, focusCellHighlightBorder,
            &quot;Menu.border&quot;, marginBorder,
            &quot;MenuBar.border&quot;, menuBarBorder,
            &quot;MenuItem.border&quot;, marginBorder,
            &quot;PasswordField.border&quot;, textFieldBorder,
            &quot;PasswordField.margin&quot;, textFieldMargin,
            &quot;PopupMenu.border&quot;, popupMenuBorder,
            &quot;ProgressBar.border&quot;, progressBarBorder,
            &quot;RadioButton.border&quot;, radioButtonBorder,
            &quot;ScrollPane.border&quot;, scrollPaneBorder,
            &quot;Spinner.border&quot;, spinnerBorder,
            &quot;Spinner.arrowButtonInsets&quot;, spinnerArrowInsets,
            &quot;Spinner.arrowButtonSize&quot;, new Dimension(17, 9),
            &quot;Table.scrollPaneBorder&quot;, tableScrollPaneBorder,
            &quot;TableHeader.cellBorder&quot;, tableHeaderBorder,
            &quot;TextArea.margin&quot;, textFieldMargin,
            &quot;TextField.border&quot;, textFieldBorder,
            &quot;TextField.margin&quot;, textFieldMargin,
            &quot;TitledBorder.border&quot;,
                        new XPBorderValue(Part.BP_GROUPBOX, etchedBorder),
            &quot;ToggleButton.border&quot;, radioButtonBorder,
            &quot;ToolBar.border&quot;, toolBarBorder,
            &quot;ToolTip.border&quot;, toolTipBorder,

            &quot;CheckBox.icon&quot;, checkBoxIcon,
            &quot;Menu.arrowIcon&quot;, menuArrowIcon,
            &quot;MenuItem.checkIcon&quot;, menuItemCheckIcon,
            &quot;MenuItem.arrowIcon&quot;, menuItemArrowIcon,
            &quot;RadioButton.icon&quot;, radioButtonIcon,
            &quot;RadioButtonMenuItem.checkIcon&quot;, radioButtonMenuItemIcon,
            &quot;InternalFrame.layoutTitlePaneAtOrigin&quot;,
                        new XPValue(Boolean.TRUE, Boolean.FALSE),
            &quot;Table.ascendingSortIcon&quot;, new XPValue(
                  new SwingLazyValue(
                     &quot;sun.swing.icon.SortArrowIcon&quot;,
                     null, new Object[] { Boolean.TRUE,
                                          &quot;Table.sortIconColor&quot; }),
                  new SwingLazyValue(
                      &quot;sun.swing.plaf.windows.ClassicSortArrowIcon&quot;,
                      null, new Object[] { Boolean.TRUE })),
            &quot;Table.descendingSortIcon&quot;, new XPValue(
                  new SwingLazyValue(
                     &quot;sun.swing.icon.SortArrowIcon&quot;,
                     null, new Object[] { Boolean.FALSE,
                                          &quot;Table.sortIconColor&quot; }),
                  new SwingLazyValue(
                     &quot;sun.swing.plaf.windows.ClassicSortArrowIcon&quot;,
                     null, new Object[] { Boolean.FALSE })),
        };

<span class="nc" id="L1930">        return lazyDefaults;</span>
    }

    public void uninitialize() {
<span class="nc" id="L1934">        super.uninitialize();</span>

<span class="nc bnc" id="L1936" title="All 2 branches missed.">        if (WindowsPopupMenuUI.mnemonicListener != null) {</span>
<span class="nc" id="L1937">            MenuSelectionManager.defaultManager().</span>
<span class="nc" id="L1938">                removeChangeListener(WindowsPopupMenuUI.mnemonicListener);</span>
        }
<span class="nc" id="L1940">        KeyboardFocusManager.getCurrentKeyboardFocusManager().</span>
<span class="nc" id="L1941">            removeKeyEventPostProcessor(WindowsRootPaneUI.altProcessor);</span>
<span class="nc" id="L1942">        DesktopProperty.flushUnreferencedProperties();</span>
<span class="nc" id="L1943">    }</span>


    // Toggle flag for drawing the mnemonic state
<span class="nc" id="L1947">    private static boolean isMnemonicHidden = true;</span>

    // Flag which indicates that the Win98/Win2k/WinME features
    // should be disabled.
<span class="nc" id="L1951">    private static boolean isClassicWindows = false;</span>

    /**
     * Sets the state of the hide mnemonic flag. This flag is used by the
     * component UI delegates to determine if the mnemonic should be rendered.
     * This method is a non operation if the underlying operating system
     * does not support the mnemonic hiding feature.
     *
     * @param hide true if mnemonics should be hidden
     * @since 1.4
     */
    public static void setMnemonicHidden(boolean hide) {
<span class="nc bnc" id="L1963" title="All 2 branches missed.">        if (UIManager.getBoolean(&quot;Button.showMnemonics&quot;) == true) {</span>
            // Do not hide mnemonics if the UI defaults do not support this
<span class="nc" id="L1965">            isMnemonicHidden = false;</span>
        } else {
<span class="nc" id="L1967">            isMnemonicHidden = hide;</span>
        }
<span class="nc" id="L1969">    }</span>

    /**
     * Gets the state of the hide mnemonic flag. This only has meaning
     * if this feature is supported by the underlying OS.
     *
     * @return true if mnemonics are hidden, otherwise, false
     * @see #setMnemonicHidden
     * @since 1.4
     */
    public static boolean isMnemonicHidden() {
<span class="nc bnc" id="L1980" title="All 2 branches missed.">        if (UIManager.getBoolean(&quot;Button.showMnemonics&quot;) == true) {</span>
            // Do not hide mnemonics if the UI defaults do not support this
<span class="nc" id="L1982">            isMnemonicHidden = false;</span>
        }
<span class="nc" id="L1984">        return isMnemonicHidden;</span>
    }

    /**
     * Gets the state of the flag which indicates if the old Windows
     * look and feel should be rendered. This flag is used by the
     * component UI delegates as a hint to determine which style the component
     * should be rendered.
     *
     * @return true if Windows 95 and Windows NT 4 look and feel should
     *         be rendered
     * @since 1.4
     */
    public static boolean isClassicWindows() {
<span class="nc" id="L1998">        return isClassicWindows;</span>
    }

    /**
     * &lt;p&gt;
     * Invoked when the user attempts an invalid operation,
     * such as pasting into an uneditable &lt;code&gt;JTextField&lt;/code&gt;
     * that has focus.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If the user has enabled visual error indication on
     * the desktop, this method will flash the caption bar
     * of the active window. The user can also set the
     * property awt.visualbell=true to achieve the same
     * results.
     * &lt;/p&gt;
     *
     * @param component Component the error occurred in, may be
     *                  null indicating the error condition is
     *                  not directly associated with a
     *                  &lt;code&gt;Component&lt;/code&gt;.
     *
     * @see javax.swing.LookAndFeel#provideErrorFeedback
     */
     public void provideErrorFeedback(Component component) {
<span class="nc" id="L2023">         super.provideErrorFeedback(component);</span>
<span class="nc" id="L2024">     }</span>

    /**
     * {@inheritDoc}
     */
    public LayoutStyle getLayoutStyle() {
<span class="nc" id="L2030">        LayoutStyle style = this.style;</span>
<span class="nc bnc" id="L2031" title="All 2 branches missed.">        if (style == null) {</span>
<span class="nc" id="L2032">            style = new WindowsLayoutStyle();</span>
<span class="nc" id="L2033">            this.style = style;</span>
        }
<span class="nc" id="L2035">        return style;</span>
    }

    // ********* Auditory Cue support methods and objects *********

    /**
     * Returns an &lt;code&gt;Action&lt;/code&gt;.
     * &lt;P&gt;
     * This Action contains the information and logic to render an
     * auditory cue. The &lt;code&gt;Object&lt;/code&gt; that is passed to this
     * method contains the information needed to render the auditory
     * cue. Normally, this &lt;code&gt;Object&lt;/code&gt; is a &lt;code&gt;String&lt;/code&gt;
     * that points to a &lt;code&gt;Toolkit&lt;/code&gt; &lt;code&gt;desktopProperty&lt;/code&gt;.
     * This &lt;code&gt;desktopProperty&lt;/code&gt; is resolved by AWT and the
     * Windows OS.
     * &lt;P&gt;
     * This &lt;code&gt;Action&lt;/code&gt;'s &lt;code&gt;actionPerformed&lt;/code&gt; method
     * is fired by the &lt;code&gt;playSound&lt;/code&gt; method.
     *
     * @return      an Action which knows how to render the auditory
     *              cue for one particular system or user activity
     * @see #playSound(Action)
     * @since 1.4
     */
    protected Action createAudioAction(Object key) {
<span class="nc bnc" id="L2060" title="All 2 branches missed.">        if (key != null) {</span>
<span class="nc" id="L2061">            String audioKey = (String)key;</span>
<span class="nc" id="L2062">            String audioValue = (String)UIManager.get(key);</span>
<span class="nc" id="L2063">            return new AudioAction(audioKey, audioValue);</span>
        } else {
<span class="nc" id="L2065">            return null;</span>
        }
    }

    static void repaintRootPane(Component c) {
<span class="nc" id="L2070">        JRootPane root = null;</span>
<span class="nc bnc" id="L2071" title="All 2 branches missed.">        for (; c != null; c = c.getParent()) {</span>
<span class="nc bnc" id="L2072" title="All 2 branches missed.">            if (c instanceof JRootPane) {</span>
<span class="nc" id="L2073">                root = (JRootPane)c;</span>
            }
        }

<span class="nc bnc" id="L2077" title="All 2 branches missed.">        if (root != null) {</span>
<span class="nc" id="L2078">            root.repaint();</span>
        } else {
<span class="nc" id="L2080">            c.repaint();</span>
        }
<span class="nc" id="L2082">    }</span>

    /**
     * Pass the name String to the super constructor. This is used
     * later to identify the Action and decide whether to play it or
     * not. Store the resource String. It is used to get the audio
     * resource. In this case, the resource is a &lt;code&gt;Runnable&lt;/code&gt;
     * supplied by &lt;code&gt;Toolkit&lt;/code&gt;. This &lt;code&gt;Runnable&lt;/code&gt; is
     * effectively a pointer down into the Win32 OS that knows how to
     * play the right sound.
     *
     * @since 1.4
     */
    private static class AudioAction extends AbstractAction {
        private Runnable audioRunnable;
        private String audioResource;
        /**
         * We use the String as the name of the Action and as a pointer to
         * the underlying OSes audio resource.
         */
        public AudioAction(String name, String resource) {
<span class="nc" id="L2103">            super(name);</span>
<span class="nc" id="L2104">            audioResource = resource;</span>
<span class="nc" id="L2105">        }</span>
        public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L2107" title="All 2 branches missed.">            if (audioRunnable == null) {</span>
<span class="nc" id="L2108">                audioRunnable = (Runnable)Toolkit.getDefaultToolkit().getDesktopProperty(audioResource);</span>
            }
<span class="nc bnc" id="L2110" title="All 2 branches missed.">            if (audioRunnable != null) {</span>
                // Runnable appears to block until completed playing, hence
                // start up another thread to handle playing.
<span class="nc" id="L2113">                new Thread(audioRunnable).start();</span>
            }
<span class="nc" id="L2115">        }</span>
    }

    /**
     * Gets an &lt;code&gt;Icon&lt;/code&gt; from the native libraries if available,
     * otherwise gets it from an image resource file.
     */
    private static class LazyWindowsIcon implements UIDefaults.LazyValue {
        private String nativeImage;
        private String resource;

<span class="nc" id="L2126">        LazyWindowsIcon(String nativeImage, String resource) {</span>
<span class="nc" id="L2127">            this.nativeImage = nativeImage;</span>
<span class="nc" id="L2128">            this.resource = resource;</span>
<span class="nc" id="L2129">        }</span>

        public Object createValue(UIDefaults table) {
<span class="nc bnc" id="L2132" title="All 2 branches missed.">            if (nativeImage != null) {</span>
<span class="nc" id="L2133">                Image image = (Image)ShellFolder.get(nativeImage);</span>
<span class="nc bnc" id="L2134" title="All 2 branches missed.">                if (image != null) {</span>
<span class="nc" id="L2135">                    return new ImageIcon(image);</span>
                }
            }
<span class="nc" id="L2138">            return SwingUtilities2.makeIcon(getClass(),</span>
                                            WindowsLookAndFeel.class,
                                            resource);
        }
    }


    /**
     * Gets an &lt;code&gt;Icon&lt;/code&gt; from the native libraries if available.
     * A desktop property is used to trigger reloading the icon when needed.
     */
    private class ActiveWindowsIcon implements UIDefaults.ActiveValue {
        private Icon icon;
        private String nativeImageName;
        private String fallbackName;
        private DesktopProperty desktopProperty;

        ActiveWindowsIcon(String desktopPropertyName,
<span class="nc" id="L2156">                            String nativeImageName, String fallbackName) {</span>
<span class="nc" id="L2157">            this.nativeImageName = nativeImageName;</span>
<span class="nc" id="L2158">            this.fallbackName = fallbackName;</span>

<span class="nc bnc" id="L2160" title="All 2 branches missed.">            if (OSInfo.getOSType() == OSInfo.OSType.WINDOWS &amp;&amp;</span>
<span class="nc bnc" id="L2161" title="All 2 branches missed.">                    OSInfo.getWindowsVersion().compareTo(OSInfo.WINDOWS_XP) &lt; 0) {</span>
                // This desktop property is needed to trigger reloading the icon.
                // It is kept in member variable to avoid GC.
<span class="nc" id="L2164">                this.desktopProperty = new TriggerDesktopProperty(desktopPropertyName) {</span>
                    @Override protected void updateUI() {
<span class="nc" id="L2166">                        icon = null;</span>
<span class="nc" id="L2167">                        super.updateUI();</span>
<span class="nc" id="L2168">                    }</span>
                };
            }
<span class="nc" id="L2171">        }</span>

        @Override
        public Object createValue(UIDefaults table) {
<span class="nc bnc" id="L2175" title="All 2 branches missed.">            if (icon == null) {</span>
<span class="nc" id="L2176">                Image image = (Image)ShellFolder.get(nativeImageName);</span>
<span class="nc bnc" id="L2177" title="All 2 branches missed.">                if (image != null) {</span>
<span class="nc" id="L2178">                    icon = new ImageIconUIResource(image);</span>
                }
            }
<span class="nc bnc" id="L2181" title="All 4 branches missed.">            if (icon == null &amp;&amp; fallbackName != null) {</span>
<span class="nc" id="L2182">                UIDefaults.LazyValue fallback = (UIDefaults.LazyValue)</span>
<span class="nc" id="L2183">                        SwingUtilities2.makeIcon(WindowsLookAndFeel.class,</span>
                            BasicLookAndFeel.class, fallbackName);
<span class="nc" id="L2185">                icon = (Icon) fallback.createValue(table);</span>
            }
<span class="nc" id="L2187">            return icon;</span>
        }
    }

    /**
     * Icon backed-up by XP Skin.
     */
<span class="nc bnc" id="L2194" title="All 2 branches missed.">    private static class SkinIcon implements Icon, UIResource {</span>
        private final Part part;
        private final State state;
<span class="nc" id="L2197">        SkinIcon(Part part, State state) {</span>
<span class="nc" id="L2198">            this.part = part;</span>
<span class="nc" id="L2199">            this.state = state;</span>
<span class="nc" id="L2200">        }</span>

        /**
         * Draw the icon at the specified location.  Icon implementations
         * may use the Component argument to get properties useful for
         * painting, e.g. the foreground or background color.
         */
        public void paintIcon(Component c, Graphics g, int x, int y) {
<span class="nc" id="L2208">            XPStyle xp = XPStyle.getXP();</span>
<span class="nc bnc" id="L2209" title="All 4 branches missed.">            assert xp != null;</span>
<span class="nc bnc" id="L2210" title="All 2 branches missed.">            if (xp != null) {</span>
<span class="nc" id="L2211">                Skin skin = xp.getSkin(null, part);</span>
<span class="nc" id="L2212">                skin.paintSkin(g, x, y, state);</span>
            }
<span class="nc" id="L2214">        }</span>

        /**
         * Returns the icon's width.
         *
         * @return an int specifying the fixed width of the icon.
         */
        public int getIconWidth() {
<span class="nc" id="L2222">            int width = 0;</span>
<span class="nc" id="L2223">            XPStyle xp = XPStyle.getXP();</span>
<span class="nc bnc" id="L2224" title="All 4 branches missed.">            assert xp != null;</span>
<span class="nc bnc" id="L2225" title="All 2 branches missed.">            if (xp != null) {</span>
<span class="nc" id="L2226">                Skin skin = xp.getSkin(null, part);</span>
<span class="nc" id="L2227">                width = skin.getWidth();</span>
            }
<span class="nc" id="L2229">            return width;</span>
        }

        /**
         * Returns the icon's height.
         *
         * @return an int specifying the fixed height of the icon.
         */
        public int getIconHeight() {
<span class="nc" id="L2238">            int height = 0;</span>
<span class="nc" id="L2239">            XPStyle xp = XPStyle.getXP();</span>
<span class="nc bnc" id="L2240" title="All 2 branches missed.">            if (xp != null) {</span>
<span class="nc" id="L2241">                Skin skin = xp.getSkin(null, part);</span>
<span class="nc" id="L2242">                height = skin.getHeight();</span>
            }
<span class="nc" id="L2244">            return height;</span>
        }

    }

    /**
     * DesktopProperty for fonts. If a font with the name 'MS Sans Serif'
     * is returned, it is mapped to 'Microsoft Sans Serif'.
     */
    private static class WindowsFontProperty extends DesktopProperty {
        WindowsFontProperty(String key, Object backup) {
<span class="nc" id="L2255">            super(key, backup);</span>
<span class="nc" id="L2256">        }</span>

        public void invalidate(LookAndFeel laf) {
<span class="nc bnc" id="L2259" title="All 2 branches missed.">            if (&quot;win.defaultGUI.font.height&quot;.equals(getKey())) {</span>
<span class="nc" id="L2260">                ((WindowsLookAndFeel)laf).style = null;</span>
            }
<span class="nc" id="L2262">            super.invalidate(laf);</span>
<span class="nc" id="L2263">        }</span>

        protected Object configureValue(Object value) {
<span class="nc bnc" id="L2266" title="All 2 branches missed.">            if (value instanceof Font) {</span>
<span class="nc" id="L2267">                Font font = (Font)value;</span>
<span class="nc bnc" id="L2268" title="All 2 branches missed.">                if (&quot;MS Sans Serif&quot;.equals(font.getName())) {</span>
<span class="nc" id="L2269">                    int size = font.getSize();</span>
                    // 4950968: Workaround to mimic the way Windows maps the default
                    // font size of 6 pts to the smallest available bitmap font size.
                    // This happens mostly on Win 98/Me &amp; NT.
                    int dpi;
                    try {
<span class="nc" id="L2275">                        dpi = Toolkit.getDefaultToolkit().getScreenResolution();</span>
<span class="nc" id="L2276">                    } catch (HeadlessException ex) {</span>
<span class="nc" id="L2277">                        dpi = 96;</span>
<span class="nc" id="L2278">                    }</span>
<span class="nc bnc" id="L2279" title="All 2 branches missed.">                    if (Math.round(size * 72F / dpi) &lt; 8) {</span>
<span class="nc" id="L2280">                        size = Math.round(8 * dpi / 72F);</span>
                    }
<span class="nc" id="L2282">                    Font msFont = new FontUIResource(&quot;Microsoft Sans Serif&quot;,</span>
<span class="nc" id="L2283">                                          font.getStyle(), size);</span>
<span class="nc bnc" id="L2284" title="All 2 branches missed.">                    if (msFont.getName() != null &amp;&amp;</span>
<span class="nc bnc" id="L2285" title="All 2 branches missed.">                        msFont.getName().equals(msFont.getFamily())) {</span>
<span class="nc" id="L2286">                        font = msFont;</span>
<span class="nc bnc" id="L2287" title="All 2 branches missed.">                    } else if (size != font.getSize()) {</span>
<span class="nc" id="L2288">                        font = new FontUIResource(&quot;MS Sans Serif&quot;,</span>
<span class="nc" id="L2289">                                                  font.getStyle(), size);</span>
                    }
                }

<span class="nc bnc" id="L2293" title="All 2 branches missed.">                if (FontUtilities.fontSupportsDefaultEncoding(font)) {</span>
<span class="nc bnc" id="L2294" title="All 2 branches missed.">                    if (!(font instanceof UIResource)) {</span>
<span class="nc" id="L2295">                        font = new FontUIResource(font);</span>
                    }
                }
                else {
<span class="nc" id="L2299">                    font = FontUtilities.getCompositeFontUIResource(font);</span>
                }
<span class="nc" id="L2301">                return font;</span>

            }
<span class="nc" id="L2304">            return super.configureValue(value);</span>
        }
    }


    /**
     * DesktopProperty for fonts that only gets sizes from the desktop,
     * font name and style are passed into the constructor
     */
    private static class WindowsFontSizeProperty extends DesktopProperty {
        private String fontName;
        private int fontSize;
        private int fontStyle;

        WindowsFontSizeProperty(String key, String fontName,
                                int fontStyle, int fontSize) {
<span class="nc" id="L2320">            super(key, null);</span>
<span class="nc" id="L2321">            this.fontName = fontName;</span>
<span class="nc" id="L2322">            this.fontSize = fontSize;</span>
<span class="nc" id="L2323">            this.fontStyle = fontStyle;</span>
<span class="nc" id="L2324">        }</span>

        protected Object configureValue(Object value) {
<span class="nc bnc" id="L2327" title="All 2 branches missed.">            if (value == null) {</span>
<span class="nc" id="L2328">                value = new FontUIResource(fontName, fontStyle, fontSize);</span>
            }
<span class="nc bnc" id="L2330" title="All 2 branches missed.">            else if (value instanceof Integer) {</span>
<span class="nc" id="L2331">                value = new FontUIResource(fontName, fontStyle,</span>
<span class="nc" id="L2332">                                           ((Integer)value).intValue());</span>
            }
<span class="nc" id="L2334">            return value;</span>
        }
    }


    /**
     * A value wrapper that actively retrieves values from xp or falls back
     * to the classic value if not running XP styles.
     */
    private static class XPValue implements UIDefaults.ActiveValue {
        protected Object classicValue, xpValue;

        // A constant that lets you specify null when using XP styles.
<span class="nc" id="L2347">        private final static Object NULL_VALUE = new Object();</span>

<span class="nc" id="L2349">        XPValue(Object xpValue, Object classicValue) {</span>
<span class="nc" id="L2350">            this.xpValue = xpValue;</span>
<span class="nc" id="L2351">            this.classicValue = classicValue;</span>
<span class="nc" id="L2352">        }</span>

        public Object createValue(UIDefaults table) {
<span class="nc" id="L2355">            Object value = null;</span>
<span class="nc bnc" id="L2356" title="All 2 branches missed.">            if (XPStyle.getXP() != null) {</span>
<span class="nc" id="L2357">                value = getXPValue(table);</span>
            }

<span class="nc bnc" id="L2360" title="All 2 branches missed.">            if (value == null) {</span>
<span class="nc" id="L2361">                value = getClassicValue(table);</span>
<span class="nc bnc" id="L2362" title="All 2 branches missed.">            } else if (value == NULL_VALUE) {</span>
<span class="nc" id="L2363">                value = null;</span>
            }

<span class="nc" id="L2366">            return value;</span>
        }

        protected Object getXPValue(UIDefaults table) {
<span class="nc" id="L2370">            return recursiveCreateValue(xpValue, table);</span>
        }

        protected Object getClassicValue(UIDefaults table) {
<span class="nc" id="L2374">            return recursiveCreateValue(classicValue, table);</span>
        }

        private Object recursiveCreateValue(Object value, UIDefaults table) {
<span class="nc bnc" id="L2378" title="All 2 branches missed.">            if (value instanceof UIDefaults.LazyValue) {</span>
<span class="nc" id="L2379">                value = ((UIDefaults.LazyValue)value).createValue(table);</span>
            }
<span class="nc bnc" id="L2381" title="All 2 branches missed.">            if (value instanceof UIDefaults.ActiveValue) {</span>
<span class="nc" id="L2382">                return ((UIDefaults.ActiveValue)value).createValue(table);</span>
            } else {
<span class="nc" id="L2384">                return value;</span>
            }
        }
    }

    private static class XPBorderValue extends XPValue {
        private final Border extraMargin;

        XPBorderValue(Part xpValue, Object classicValue) {
<span class="nc" id="L2393">            this(xpValue, classicValue, null);</span>
<span class="nc" id="L2394">        }</span>

        XPBorderValue(Part xpValue, Object classicValue, Border extraMargin) {
<span class="nc" id="L2397">            super(xpValue, classicValue);</span>
<span class="nc" id="L2398">            this.extraMargin = extraMargin;</span>
<span class="nc" id="L2399">        }</span>

        public Object getXPValue(UIDefaults table) {
<span class="nc" id="L2402">            Border xpBorder = XPStyle.getXP().getBorder(null, (Part)xpValue);</span>
<span class="nc bnc" id="L2403" title="All 2 branches missed.">            if (extraMargin != null) {</span>
<span class="nc" id="L2404">                return new BorderUIResource.</span>
                        CompoundBorderUIResource(xpBorder, extraMargin);
            } else {
<span class="nc" id="L2407">                return xpBorder;</span>
            }
        }
    }

    private static class XPColorValue extends XPValue {
        XPColorValue(Part part, State state, Prop prop, Object classicValue) {
<span class="nc" id="L2414">            super(new XPColorValueKey(part, state, prop), classicValue);</span>
<span class="nc" id="L2415">        }</span>

        public Object getXPValue(UIDefaults table) {
<span class="nc" id="L2418">            XPColorValueKey key = (XPColorValueKey)xpValue;</span>
<span class="nc" id="L2419">            return XPStyle.getXP().getColor(key.skin, key.prop, null);</span>
        }

        private static class XPColorValueKey {
            Skin skin;
            Prop prop;

<span class="nc" id="L2426">            XPColorValueKey(Part part, State state, Prop prop) {</span>
<span class="nc" id="L2427">                this.skin = new Skin(part, state);</span>
<span class="nc" id="L2428">                this.prop = prop;</span>
<span class="nc" id="L2429">            }</span>
        }
    }

    private class XPDLUValue extends XPValue {
        private int direction;

<span class="nc" id="L2436">        XPDLUValue(int xpdlu, int classicdlu, int direction) {</span>
<span class="nc" id="L2437">            super(Integer.valueOf(xpdlu), Integer.valueOf(classicdlu));</span>
<span class="nc" id="L2438">            this.direction = direction;</span>
<span class="nc" id="L2439">        }</span>

        public Object getXPValue(UIDefaults table) {
<span class="nc" id="L2442">            int px = dluToPixels(((Integer)xpValue).intValue(), direction);</span>
<span class="nc" id="L2443">            return Integer.valueOf(px);</span>
        }

        public Object getClassicValue(UIDefaults table) {
<span class="nc" id="L2447">            int px = dluToPixels(((Integer)classicValue).intValue(), direction);</span>
<span class="nc" id="L2448">            return Integer.valueOf(px);</span>
        }
    }

    private class TriggerDesktopProperty extends DesktopProperty {
<span class="nc" id="L2453">        TriggerDesktopProperty(String key) {</span>
<span class="nc" id="L2454">            super(key, null);</span>
            // This call adds a property change listener for the property,
            // which triggers a call to updateUI(). The value returned
            // is not interesting here.
<span class="nc" id="L2458">            getValueFromDesktop();</span>
<span class="nc" id="L2459">        }</span>

        protected void updateUI() {
<span class="nc" id="L2462">            super.updateUI();</span>

            // Make sure property change listener is readded each time
<span class="nc" id="L2465">            getValueFromDesktop();</span>
<span class="nc" id="L2466">        }</span>
    }

    private class FontDesktopProperty extends TriggerDesktopProperty {
<span class="nc" id="L2470">        FontDesktopProperty(String key) {</span>
<span class="nc" id="L2471">            super(key);</span>
<span class="nc" id="L2472">        }</span>

        protected void updateUI() {
<span class="nc" id="L2475">            Object aaTextInfo = SwingUtilities2.AATextInfo.getAATextInfo(true);</span>
<span class="nc" id="L2476">            UIDefaults defaults = UIManager.getLookAndFeelDefaults();</span>
<span class="nc" id="L2477">            defaults.put(SwingUtilities2.AA_TEXT_PROPERTY_KEY, aaTextInfo);</span>
<span class="nc" id="L2478">            super.updateUI();</span>
<span class="nc" id="L2479">        }</span>
    }

    // Windows LayoutStyle.  From:
    // http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnwue/html/ch14e.asp
<span class="nc" id="L2484">    private class WindowsLayoutStyle extends DefaultLayoutStyle {</span>
        @Override
        public int getPreferredGap(JComponent component1,
                JComponent component2, ComponentPlacement type, int position,
                Container parent) {
            // Checks args
<span class="nc" id="L2490">            super.getPreferredGap(component1, component2, type, position,</span>
                                  parent);

<span class="nc bnc" id="L2493" title="All 4 branches missed.">            switch(type) {</span>
            case INDENT:
                // Windows doesn't spec this
<span class="nc bnc" id="L2496" title="All 4 branches missed.">                if (position == SwingConstants.EAST ||</span>
                        position == SwingConstants.WEST) {
<span class="nc" id="L2498">                    int indent = getIndent(component1, position);</span>
<span class="nc bnc" id="L2499" title="All 2 branches missed.">                    if (indent &gt; 0) {</span>
<span class="nc" id="L2500">                        return indent;</span>
                    }
<span class="nc" id="L2502">                    return 10;</span>
                }
                // Fall through to related.
            case RELATED:
<span class="nc bnc" id="L2506" title="All 2 branches missed.">                if (isLabelAndNonlabel(component1, component2, position)) {</span>
                    // Between text labels and their associated controls (for
                    // example, text boxes and list boxes): 3
                    // NOTE: We're not honoring:
                    // 'Text label beside a button 3 down from the top of
                    // the button,' but I suspect that is an attempt to
                    // enforce a baseline layout which will be handled
                    // separately.  In order to enforce this we would need
                    // this API to return a more complicated type (Insets,
                    // or something else).
<span class="nc" id="L2516">                    return getButtonGap(component1, component2, position,</span>
<span class="nc" id="L2517">                                        dluToPixels(3, position));</span>
                }
                // Between related controls: 4
<span class="nc" id="L2520">                return getButtonGap(component1, component2, position,</span>
<span class="nc" id="L2521">                                    dluToPixels(4, position));</span>
            case UNRELATED:
                // Between unrelated controls: 7
<span class="nc" id="L2524">                return getButtonGap(component1, component2, position,</span>
<span class="nc" id="L2525">                                    dluToPixels(7, position));</span>
            }
<span class="nc" id="L2527">            return 0;</span>
        }

        @Override
        public int getContainerGap(JComponent component, int position,
                                   Container parent) {
            // Checks args
<span class="nc" id="L2534">            super.getContainerGap(component, position, parent);</span>
<span class="nc" id="L2535">            return getButtonGap(component, position, dluToPixels(7, position));</span>
        }

    }

    /**
     * Converts the dialog unit argument to pixels along the specified
     * axis.
     */
    private int dluToPixels(int dlu, int direction) {
<span class="nc bnc" id="L2545" title="All 2 branches missed.">        if (baseUnitX == 0) {</span>
<span class="nc" id="L2546">            calculateBaseUnits();</span>
        }
<span class="nc bnc" id="L2548" title="All 4 branches missed.">        if (direction == SwingConstants.EAST ||</span>
            direction == SwingConstants.WEST) {
<span class="nc" id="L2550">            return dlu * baseUnitX / 4;</span>
        }
<span class="nc bnc" id="L2552" title="All 6 branches missed.">        assert (direction == SwingConstants.NORTH ||</span>
                direction == SwingConstants.SOUTH);
<span class="nc" id="L2554">        return dlu * baseUnitY / 8;</span>
    }

    /**
     * Calculates the dialog unit mapping.
     */
    private void calculateBaseUnits() {
        // This calculation comes from:
        // http://support.microsoft.com/default.aspx?scid=kb;EN-US;125681
<span class="nc" id="L2563">        FontMetrics metrics = Toolkit.getDefaultToolkit().getFontMetrics(</span>
<span class="nc" id="L2564">                UIManager.getFont(&quot;Button.font&quot;));</span>
<span class="nc" id="L2565">        baseUnitX = metrics.stringWidth(</span>
                &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;);
<span class="nc" id="L2567">        baseUnitX = (baseUnitX / 26 + 1) / 2;</span>
        // The -1 comes from experimentation.
<span class="nc" id="L2569">        baseUnitY = metrics.getAscent() + metrics.getDescent() - 1;</span>
<span class="nc" id="L2570">    }</span>

    /**
     * {@inheritDoc}
     *
     * @since 1.6
     */
    public Icon getDisabledIcon(JComponent component, Icon icon) {
        // if the component has a HI_RES_DISABLED_ICON_CLIENT_KEY
        // client property set to Boolean.TRUE, then use the new
        // hi res algorithm for creating the disabled icon (used
        // in particular by the WindowsFileChooserUI class)
<span class="nc bnc" id="L2582" title="All 4 branches missed.">        if (icon != null</span>
                &amp;&amp; component != null
<span class="nc bnc" id="L2584" title="All 2 branches missed.">                &amp;&amp; Boolean.TRUE.equals(component.getClientProperty(HI_RES_DISABLED_ICON_CLIENT_KEY))</span>
<span class="nc bnc" id="L2585" title="All 2 branches missed.">                &amp;&amp; icon.getIconWidth() &gt; 0</span>
<span class="nc bnc" id="L2586" title="All 2 branches missed.">                &amp;&amp; icon.getIconHeight() &gt; 0) {</span>
<span class="nc" id="L2587">            BufferedImage img = new BufferedImage(icon.getIconWidth(),</span>
<span class="nc" id="L2588">                    icon.getIconWidth(), BufferedImage.TYPE_INT_ARGB);</span>
<span class="nc" id="L2589">            icon.paintIcon(component, img.getGraphics(), 0, 0);</span>
<span class="nc" id="L2590">            ImageFilter filter = new RGBGrayFilter();</span>
<span class="nc" id="L2591">            ImageProducer producer = new FilteredImageSource(img.getSource(), filter);</span>
<span class="nc" id="L2592">            Image resultImage = component.createImage(producer);</span>
<span class="nc" id="L2593">            return new ImageIconUIResource(resultImage);</span>
        }
<span class="nc" id="L2595">        return super.getDisabledIcon(component, icon);</span>
    }

    private static class RGBGrayFilter extends RGBImageFilter {
<span class="nc" id="L2599">        public RGBGrayFilter() {</span>
<span class="nc" id="L2600">            canFilterIndexColorModel = true;</span>
<span class="nc" id="L2601">        }</span>
        public int filterRGB(int x, int y, int rgb) {
            // find the average of red, green, and blue
<span class="nc" id="L2604">            float avg = (((rgb &gt;&gt; 16) &amp; 0xff) / 255f +</span>
                          ((rgb &gt;&gt;  8) &amp; 0xff) / 255f +
                           (rgb        &amp; 0xff) / 255f) / 3;
            // pull out the alpha channel
<span class="nc" id="L2608">            float alpha = (((rgb&gt;&gt;24)&amp;0xff)/255f);</span>
            // calc the average
<span class="nc" id="L2610">            avg = Math.min(1.0f, (1f-avg)/(100.0f/35.0f) + avg);</span>
            // turn back into rgb
<span class="nc" id="L2612">            int rgbval = (int)(alpha * 255f) &lt;&lt; 24 |</span>
                         (int)(avg   * 255f) &lt;&lt; 16 |
                         (int)(avg   * 255f) &lt;&lt;  8 |
                         (int)(avg   * 255f);
<span class="nc" id="L2616">            return rgbval;</span>
        }
    }

<span class="nc" id="L2620">    private static class FocusColorProperty extends DesktopProperty {</span>
        public FocusColorProperty () {
            // Fallback value is never used because of the configureValue method doesn't return null
<span class="nc" id="L2623">            super(&quot;win.3d.backgroundColor&quot;, Color.BLACK);</span>
<span class="nc" id="L2624">        }</span>

        @Override
        protected Object configureValue(Object value) {
<span class="nc" id="L2628">            Object highContrastOn = Toolkit.getDefaultToolkit().</span>
<span class="nc" id="L2629">                    getDesktopProperty(&quot;win.highContrast.on&quot;);</span>
<span class="nc bnc" id="L2630" title="All 4 branches missed.">            if (highContrastOn == null || !((Boolean) highContrastOn).booleanValue()) {</span>
<span class="nc" id="L2631">                return Color.BLACK;</span>
            }
<span class="nc bnc" id="L2633" title="All 2 branches missed.">            return Color.BLACK.equals(value) ? Color.WHITE : Color.BLACK;</span>
        }
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>