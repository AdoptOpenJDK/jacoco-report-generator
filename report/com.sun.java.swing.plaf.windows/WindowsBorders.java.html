<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>WindowsBorders.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">com.sun.java.swing.plaf.windows</a> &gt; <span class="el_source">WindowsBorders.java</span></div><h1>WindowsBorders.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1998, 2010, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package com.sun.java.swing.plaf.windows;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.plaf.*;
import javax.swing.plaf.basic.*;

import java.awt.Component;
import java.awt.Insets;
import java.awt.Color;
import java.awt.Graphics;

import static com.sun.java.swing.plaf.windows.TMSchema.*;
import static com.sun.java.swing.plaf.windows.XPStyle.Skin;

/**
 * Factory object that can vend Borders appropriate for the Windows 95 L &amp; F.
 * @author Rich Schiavi
 */

<span class="nc" id="L46">public class WindowsBorders {</span>

    /**
     * Returns a  border instance for a Windows Progress Bar
     * @since 1.4
     */
    public static Border getProgressBarBorder() {
<span class="nc" id="L53">        UIDefaults table = UIManager.getLookAndFeelDefaults();</span>
<span class="nc" id="L54">        Border progressBarBorder = new BorderUIResource.CompoundBorderUIResource(</span>
                                         new WindowsBorders.ProgressBarBorder(
<span class="nc" id="L56">                                              table.getColor(&quot;ProgressBar.shadow&quot;),</span>
<span class="nc" id="L57">                                              table.getColor(&quot;ProgressBar.highlight&quot;)),</span>
                                              new EmptyBorder(1,1,1,1)
                                        );
<span class="nc" id="L60">        return progressBarBorder;</span>
    }

    /**
     * Returns a border instance for a Windows ToolBar
     *
     * @return a border used for the toolbar
     * @since 1.4
     */
    public static Border getToolBarBorder() {
<span class="nc" id="L70">        UIDefaults table = UIManager.getLookAndFeelDefaults();</span>
<span class="nc" id="L71">        Border toolBarBorder = new WindowsBorders.ToolBarBorder(</span>
<span class="nc" id="L72">                                        table.getColor(&quot;ToolBar.shadow&quot;),</span>
<span class="nc" id="L73">                                        table.getColor(&quot;ToolBar.highlight&quot;));</span>
<span class="nc" id="L74">        return toolBarBorder;</span>
    }

    /**
     * Returns an new instance of a border used to indicate which cell item
     * has focus.
     *
     * @return a border to indicate which cell item has focus
     * @since 1.4
     */
    public static Border getFocusCellHighlightBorder() {
<span class="nc" id="L85">        return new ComplementDashedBorder();</span>
    }

    public static Border getTableHeaderBorder() {
<span class="nc" id="L89">        UIDefaults table = UIManager.getLookAndFeelDefaults();</span>
<span class="nc" id="L90">        Border tableHeaderBorder = new BorderUIResource.CompoundBorderUIResource(</span>
                           new BasicBorders.ButtonBorder(
<span class="nc" id="L92">                                           table.getColor(&quot;Table.shadow&quot;),</span>
<span class="nc" id="L93">                                           table.getColor(&quot;Table.darkShadow&quot;),</span>
<span class="nc" id="L94">                                           table.getColor(&quot;Table.light&quot;),</span>
<span class="nc" id="L95">                                           table.getColor(&quot;Table.highlight&quot;)),</span>
                                     new BasicBorders.MarginBorder());
<span class="nc" id="L97">        return tableHeaderBorder;</span>
    }

    public static Border getInternalFrameBorder() {
<span class="nc" id="L101">        UIDefaults table = UIManager.getLookAndFeelDefaults();</span>
<span class="nc" id="L102">        Border internalFrameBorder = new</span>
            BorderUIResource.CompoundBorderUIResource(
<span class="nc" id="L104">                BorderFactory.createBevelBorder(BevelBorder.RAISED,</span>
<span class="nc" id="L105">                    table.getColor(&quot;InternalFrame.borderColor&quot;),</span>
<span class="nc" id="L106">                    table.getColor(&quot;InternalFrame.borderHighlight&quot;),</span>
<span class="nc" id="L107">                    table.getColor(&quot;InternalFrame.borderDarkShadow&quot;),</span>
<span class="nc" id="L108">                    table.getColor(&quot;InternalFrame.borderShadow&quot;)),</span>
                new WindowsBorders.InternalFrameLineBorder(
<span class="nc" id="L110">                    table.getColor(&quot;InternalFrame.activeBorderColor&quot;),</span>
<span class="nc" id="L111">                    table.getColor(&quot;InternalFrame.inactiveBorderColor&quot;),</span>
<span class="nc" id="L112">                    table.getInt(&quot;InternalFrame.borderWidth&quot;)));</span>

<span class="nc" id="L114">        return internalFrameBorder;</span>
    }

    public static class ProgressBarBorder extends AbstractBorder implements UIResource {
        protected Color shadow;
        protected Color highlight;

<span class="nc" id="L121">        public ProgressBarBorder(Color shadow, Color highlight) {</span>
<span class="nc" id="L122">            this.highlight = highlight;</span>
<span class="nc" id="L123">            this.shadow = shadow;</span>
<span class="nc" id="L124">        }</span>

        public void paintBorder(Component c, Graphics g, int x, int y,
                                int width, int height) {
<span class="nc" id="L128">            g.setColor(shadow);</span>
<span class="nc" id="L129">            g.drawLine(x,y, width-1,y); // draw top</span>
<span class="nc" id="L130">            g.drawLine(x,y, x,height-1); // draw left</span>
<span class="nc" id="L131">            g.setColor(highlight);</span>
<span class="nc" id="L132">            g.drawLine(x,height-1, width-1,height-1); // draw bottom</span>
<span class="nc" id="L133">            g.drawLine(width-1,y, width-1,height-1); // draw right</span>
<span class="nc" id="L134">        }</span>

        public Insets getBorderInsets(Component c, Insets insets) {
<span class="nc" id="L137">            insets.set(1,1,1,1);</span>
<span class="nc" id="L138">            return insets;</span>
        }
    }

    /**
     * A border for the ToolBar. If the ToolBar is floatable then the handle grip is drawn
     * &lt;p&gt;
     * @since 1.4
     */
    public static class ToolBarBorder extends AbstractBorder implements UIResource, SwingConstants {
        protected Color shadow;
        protected Color highlight;

<span class="nc" id="L151">        public ToolBarBorder(Color shadow, Color highlight) {</span>
<span class="nc" id="L152">            this.highlight = highlight;</span>
<span class="nc" id="L153">            this.shadow = shadow;</span>
<span class="nc" id="L154">        }</span>

        public void paintBorder(Component c, Graphics g, int x, int y,
                                int width, int height) {
<span class="nc bnc" id="L158" title="All 2 branches missed.">            if (!(c instanceof JToolBar)) {</span>
<span class="nc" id="L159">                return;</span>
            }
<span class="nc" id="L161">            g.translate(x, y);</span>

<span class="nc" id="L163">            XPStyle xp = XPStyle.getXP();</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">            if (xp != null) {</span>
<span class="nc" id="L165">                Border xpBorder = xp.getBorder(c, Part.TP_TOOLBAR);</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">                if (xpBorder != null) {</span>
<span class="nc" id="L167">                    xpBorder.paintBorder(c, g, 0, 0, width, height);</span>
                }
            }
<span class="nc bnc" id="L170" title="All 2 branches missed.">            if (((JToolBar)c).isFloatable()) {</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">                boolean vertical = ((JToolBar)c).getOrientation() == VERTICAL;</span>

<span class="nc bnc" id="L173" title="All 2 branches missed.">                if (xp != null) {</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">                    Part part = vertical ? Part.RP_GRIPPERVERT : Part.RP_GRIPPER;</span>
<span class="nc" id="L175">                    Skin skin = xp.getSkin(c, part);</span>
                    int dx, dy, dw, dh;
<span class="nc bnc" id="L177" title="All 2 branches missed.">                    if (vertical) {</span>
<span class="nc" id="L178">                        dx = 0;</span>
<span class="nc" id="L179">                        dy = 2;</span>
<span class="nc" id="L180">                        dw = width - 1;</span>
<span class="nc" id="L181">                        dh = skin.getHeight();</span>
                    } else {
<span class="nc" id="L183">                        dw = skin.getWidth();</span>
<span class="nc" id="L184">                        dh = height - 1;</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">                        dx = c.getComponentOrientation().isLeftToRight() ? 2 : (width-dw-2);</span>
<span class="nc" id="L186">                        dy = 0;</span>
                    }
<span class="nc" id="L188">                    skin.paintSkin(g, dx, dy, dw, dh, State.NORMAL);</span>

<span class="nc" id="L190">                } else {</span>

<span class="nc bnc" id="L192" title="All 2 branches missed.">                    if (!vertical) {</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">                        if (c.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L194">                            g.setColor(shadow);</span>
<span class="nc" id="L195">                            g.drawLine(4, 3, 4, height - 4);</span>
<span class="nc" id="L196">                            g.drawLine(4, height - 4, 2, height - 4);</span>

<span class="nc" id="L198">                            g.setColor(highlight);</span>
<span class="nc" id="L199">                            g.drawLine(2, 3, 3, 3);</span>
<span class="nc" id="L200">                            g.drawLine(2, 3, 2, height - 5);</span>
                        } else {
<span class="nc" id="L202">                            g.setColor(shadow);</span>
<span class="nc" id="L203">                            g.drawLine(width - 3, 3, width - 3, height - 4);</span>
<span class="nc" id="L204">                            g.drawLine(width - 4, height - 4, width - 4, height - 4);</span>

<span class="nc" id="L206">                            g.setColor(highlight);</span>
<span class="nc" id="L207">                            g.drawLine(width - 5, 3, width - 4, 3);</span>
<span class="nc" id="L208">                            g.drawLine(width - 5, 3, width - 5, height - 5);</span>
                        }
                    } else { // Vertical
<span class="nc" id="L211">                        g.setColor(shadow);</span>
<span class="nc" id="L212">                        g.drawLine(3, 4, width - 4, 4);</span>
<span class="nc" id="L213">                        g.drawLine(width - 4, 2, width - 4, 4);</span>

<span class="nc" id="L215">                        g.setColor(highlight);</span>
<span class="nc" id="L216">                        g.drawLine(3, 2, width - 4, 2);</span>
<span class="nc" id="L217">                        g.drawLine(3, 2, 3, 3);</span>
                    }
                }
            }

<span class="nc" id="L222">            g.translate(-x, -y);</span>
<span class="nc" id="L223">        }</span>

        public Insets getBorderInsets(Component c, Insets insets) {
<span class="nc" id="L226">            insets.set(1,1,1,1);</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">            if (!(c instanceof JToolBar)) {</span>
<span class="nc" id="L228">                return insets;</span>
            }
<span class="nc bnc" id="L230" title="All 2 branches missed.">            if (((JToolBar)c).isFloatable()) {</span>
<span class="nc bnc" id="L231" title="All 2 branches missed.">                int gripInset = (XPStyle.getXP() != null) ? 12 : 9;</span>
<span class="nc bnc" id="L232" title="All 2 branches missed.">                if (((JToolBar)c).getOrientation() == HORIZONTAL) {</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">                    if (c.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L234">                        insets.left = gripInset;</span>
                    } else {
<span class="nc" id="L236">                        insets.right = gripInset;</span>
                    }
                } else {
<span class="nc" id="L239">                    insets.top = gripInset;</span>
                }
            }
<span class="nc" id="L242">            return insets;</span>
        }
    }

    /**
     * This class is an implementation of a dashed border.
     * @since 1.4
     */
    public static class DashedBorder extends LineBorder implements UIResource {
        public DashedBorder(Color color) {
<span class="nc" id="L252">            super(color);</span>
<span class="nc" id="L253">        }</span>

        public DashedBorder(Color color, int thickness)  {
<span class="nc" id="L256">            super(color, thickness);</span>
<span class="nc" id="L257">        }</span>

        public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
<span class="nc" id="L260">            Color oldColor = g.getColor();</span>
            int i;

<span class="nc" id="L263">            g.setColor(lineColor);</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">            for(i = 0; i &lt; thickness; i++)  {</span>
<span class="nc" id="L265">                BasicGraphicsUtils.drawDashedRect(g, x+i, y+i, width-i-i, height-i-i);</span>
            }
<span class="nc" id="L267">            g.setColor(oldColor);</span>
<span class="nc" id="L268">        }</span>
    }

    /**
     * A dashed border that paints itself in the complementary color
     * of the component's background color.
     */
    static class ComplementDashedBorder extends LineBorder implements UIResource {
        private Color origColor;
        private Color paintColor;

        public ComplementDashedBorder() {
<span class="nc" id="L280">            super(null);</span>
<span class="nc" id="L281">        }</span>

        public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
<span class="nc" id="L284">            Color color = c.getBackground();</span>

<span class="nc bnc" id="L286" title="All 2 branches missed.">            if (origColor != color) {</span>
<span class="nc" id="L287">                origColor = color;</span>
<span class="nc" id="L288">                paintColor = new Color(~origColor.getRGB());</span>
            }

<span class="nc" id="L291">            g.setColor(paintColor);</span>
<span class="nc" id="L292">            BasicGraphicsUtils.drawDashedRect(g, x, y, width, height);</span>
<span class="nc" id="L293">        }</span>
    }

    /**
     * This class is an implementation of the InternalFrameLine border.
     * @since 1.4
     */
<span class="nc" id="L300">    public static class InternalFrameLineBorder extends LineBorder implements</span>
            UIResource {
        protected Color activeColor;
        protected Color inactiveColor;

        public InternalFrameLineBorder(Color activeBorderColor,
                                       Color inactiveBorderColor,
                                       int thickness) {
<span class="nc" id="L308">            super(activeBorderColor, thickness);</span>
<span class="nc" id="L309">            activeColor = activeBorderColor;</span>
<span class="nc" id="L310">            inactiveColor = inactiveBorderColor;</span>
<span class="nc" id="L311">        }</span>

        public void paintBorder(Component c, Graphics g, int x, int y,
                int width, int height) {

<span class="nc" id="L316">            JInternalFrame jif = null;</span>
<span class="nc bnc" id="L317" title="All 2 branches missed.">            if (c instanceof JInternalFrame) {</span>
<span class="nc" id="L318">                jif = (JInternalFrame)c;</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">            } else if (c instanceof JInternalFrame.JDesktopIcon) {</span>
<span class="nc" id="L320">                jif = ((JInternalFrame.JDesktopIcon)c).getInternalFrame();</span>
            } else {
<span class="nc" id="L322">                return;</span>
            }

<span class="nc bnc" id="L325" title="All 2 branches missed.">            if (jif.isSelected()) {</span>
                // Set the line color so the line border gets the correct
                // color.
<span class="nc" id="L328">                lineColor = activeColor;</span>
<span class="nc" id="L329">                super.paintBorder(c, g, x, y, width, height);</span>
            } else {
<span class="nc" id="L331">                lineColor = inactiveColor;</span>
<span class="nc" id="L332">                super.paintBorder(c, g, x, y, width, height);</span>
            }
<span class="nc" id="L334">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>