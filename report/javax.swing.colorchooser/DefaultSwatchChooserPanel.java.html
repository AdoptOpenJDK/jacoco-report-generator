<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>DefaultSwatchChooserPanel.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.swing.colorchooser</a> &gt; <span class="el_source">DefaultSwatchChooserPanel.java</span></div><h1>DefaultSwatchChooserPanel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1998, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.colorchooser;

import javax.swing.*;
import javax.swing.border.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.Serializable;
import javax.accessibility.*;


/**
 * The standard color swatch chooser.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author Steve Wilson
 */
class DefaultSwatchChooserPanel extends AbstractColorChooserPanel {

    SwatchPanel swatchPanel;
    RecentSwatchPanel recentSwatchPanel;
    MouseListener mainSwatchListener;
    MouseListener recentSwatchListener;
    private KeyListener mainSwatchKeyListener;
    private KeyListener recentSwatchKeyListener;

    public DefaultSwatchChooserPanel() {
<span class="nc" id="L64">        super();</span>
<span class="nc" id="L65">        setInheritsPopupMenu(true);</span>
<span class="nc" id="L66">    }</span>

    public String getDisplayName() {
<span class="nc" id="L69">        return UIManager.getString(&quot;ColorChooser.swatchesNameText&quot;, getLocale());</span>
    }

    /**
     * Provides a hint to the look and feel as to the
     * &lt;code&gt;KeyEvent.VK&lt;/code&gt; constant that can be used as a mnemonic to
     * access the panel. A return value &lt;= 0 indicates there is no mnemonic.
     * &lt;p&gt;
     * The return value here is a hint, it is ultimately up to the look
     * and feel to honor the return value in some meaningful way.
     * &lt;p&gt;
     * This implementation looks up the value from the default
     * &lt;code&gt;ColorChooser.swatchesMnemonic&lt;/code&gt;, or if it
     * isn't available (or not an &lt;code&gt;Integer&lt;/code&gt;) returns -1.
     * The lookup for the default is done through the &lt;code&gt;UIManager&lt;/code&gt;:
     * &lt;code&gt;UIManager.get(&quot;ColorChooser.swatchesMnemonic&quot;);&lt;/code&gt;.
     *
     * @return KeyEvent.VK constant identifying the mnemonic; &lt;= 0 for no
     *         mnemonic
     * @see #getDisplayedMnemonicIndex
     * @since 1.4
     */
    public int getMnemonic() {
<span class="nc" id="L92">        return getInt(&quot;ColorChooser.swatchesMnemonic&quot;, -1);</span>
    }

    /**
     * Provides a hint to the look and feel as to the index of the character in
     * &lt;code&gt;getDisplayName&lt;/code&gt; that should be visually identified as the
     * mnemonic. The look and feel should only use this if
     * &lt;code&gt;getMnemonic&lt;/code&gt; returns a value &gt; 0.
     * &lt;p&gt;
     * The return value here is a hint, it is ultimately up to the look
     * and feel to honor the return value in some meaningful way. For example,
     * a look and feel may wish to render each
     * &lt;code&gt;AbstractColorChooserPanel&lt;/code&gt; in a &lt;code&gt;JTabbedPane&lt;/code&gt;,
     * and further use this return value to underline a character in
     * the &lt;code&gt;getDisplayName&lt;/code&gt;.
     * &lt;p&gt;
     * This implementation looks up the value from the default
     * &lt;code&gt;ColorChooser.rgbDisplayedMnemonicIndex&lt;/code&gt;, or if it
     * isn't available (or not an &lt;code&gt;Integer&lt;/code&gt;) returns -1.
     * The lookup for the default is done through the &lt;code&gt;UIManager&lt;/code&gt;:
     * &lt;code&gt;UIManager.get(&quot;ColorChooser.swatchesDisplayedMnemonicIndex&quot;);&lt;/code&gt;.
     *
     * @return Character index to render mnemonic for; -1 to provide no
     *                   visual identifier for this panel.
     * @see #getMnemonic
     * @since 1.4
     */
    public int getDisplayedMnemonicIndex() {
<span class="nc" id="L120">        return getInt(&quot;ColorChooser.swatchesDisplayedMnemonicIndex&quot;, -1);</span>
    }

    public Icon getSmallDisplayIcon() {
<span class="nc" id="L124">        return null;</span>
    }

    public Icon getLargeDisplayIcon() {
<span class="nc" id="L128">        return null;</span>
    }

    /**
     * The background color, foreground color, and font are already set to the
     * defaults from the defaults table before this method is called.
     */
    public void installChooserPanel(JColorChooser enclosingChooser) {
<span class="nc" id="L136">        super.installChooserPanel(enclosingChooser);</span>
<span class="nc" id="L137">    }</span>

    protected void buildChooser() {

<span class="nc" id="L141">        String recentStr = UIManager.getString(&quot;ColorChooser.swatchesRecentText&quot;, getLocale());</span>

<span class="nc" id="L143">        GridBagLayout gb = new GridBagLayout();</span>
<span class="nc" id="L144">        GridBagConstraints gbc = new GridBagConstraints();</span>
<span class="nc" id="L145">        JPanel superHolder = new JPanel(gb);</span>

<span class="nc" id="L147">        swatchPanel =  new MainSwatchPanel();</span>
<span class="nc" id="L148">        swatchPanel.putClientProperty(AccessibleContext.ACCESSIBLE_NAME_PROPERTY,</span>
<span class="nc" id="L149">                                      getDisplayName());</span>
<span class="nc" id="L150">        swatchPanel.setInheritsPopupMenu(true);</span>

<span class="nc" id="L152">        recentSwatchPanel = new RecentSwatchPanel();</span>
<span class="nc" id="L153">        recentSwatchPanel.putClientProperty(AccessibleContext.ACCESSIBLE_NAME_PROPERTY,</span>
                                            recentStr);

<span class="nc" id="L156">        mainSwatchKeyListener = new MainSwatchKeyListener();</span>
<span class="nc" id="L157">        mainSwatchListener = new MainSwatchListener();</span>
<span class="nc" id="L158">        swatchPanel.addMouseListener(mainSwatchListener);</span>
<span class="nc" id="L159">        swatchPanel.addKeyListener(mainSwatchKeyListener);</span>
<span class="nc" id="L160">        recentSwatchListener = new RecentSwatchListener();</span>
<span class="nc" id="L161">        recentSwatchKeyListener = new RecentSwatchKeyListener();</span>
<span class="nc" id="L162">        recentSwatchPanel.addMouseListener(recentSwatchListener);</span>
<span class="nc" id="L163">        recentSwatchPanel.addKeyListener(recentSwatchKeyListener);</span>

<span class="nc" id="L165">        JPanel mainHolder = new JPanel(new BorderLayout());</span>
<span class="nc" id="L166">        Border border = new CompoundBorder( new LineBorder(Color.black),</span>
                                            new LineBorder(Color.white) );
<span class="nc" id="L168">        mainHolder.setBorder(border);</span>
<span class="nc" id="L169">        mainHolder.add(swatchPanel, BorderLayout.CENTER);</span>

<span class="nc" id="L171">        gbc.anchor = GridBagConstraints.LAST_LINE_START;</span>
<span class="nc" id="L172">        gbc.gridwidth = 1;</span>
<span class="nc" id="L173">        gbc.gridheight = 2;</span>
<span class="nc" id="L174">        Insets oldInsets = gbc.insets;</span>
<span class="nc" id="L175">        gbc.insets = new Insets(0, 0, 0, 10);</span>
<span class="nc" id="L176">        superHolder.add(mainHolder, gbc);</span>
<span class="nc" id="L177">        gbc.insets = oldInsets;</span>

<span class="nc" id="L179">        recentSwatchPanel.setInheritsPopupMenu(true);</span>
<span class="nc" id="L180">        JPanel recentHolder = new JPanel( new BorderLayout() );</span>
<span class="nc" id="L181">        recentHolder.setBorder(border);</span>
<span class="nc" id="L182">        recentHolder.setInheritsPopupMenu(true);</span>
<span class="nc" id="L183">        recentHolder.add(recentSwatchPanel, BorderLayout.CENTER);</span>

<span class="nc" id="L185">        JLabel l = new JLabel(recentStr);</span>
<span class="nc" id="L186">        l.setLabelFor(recentSwatchPanel);</span>

<span class="nc" id="L188">        gbc.gridwidth = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L189">        gbc.gridheight = 1;</span>
<span class="nc" id="L190">        gbc.weighty = 1.0;</span>
<span class="nc" id="L191">        superHolder.add(l, gbc);</span>

<span class="nc" id="L193">        gbc.weighty = 0;</span>
<span class="nc" id="L194">        gbc.gridheight = GridBagConstraints.REMAINDER;</span>
<span class="nc" id="L195">        gbc.insets = new Insets(0, 0, 0, 2);</span>
<span class="nc" id="L196">        superHolder.add(recentHolder, gbc);</span>
<span class="nc" id="L197">        superHolder.setInheritsPopupMenu(true);</span>

<span class="nc" id="L199">        add(superHolder);</span>
<span class="nc" id="L200">    }</span>

    public void uninstallChooserPanel(JColorChooser enclosingChooser) {
<span class="nc" id="L203">        super.uninstallChooserPanel(enclosingChooser);</span>
<span class="nc" id="L204">        swatchPanel.removeMouseListener(mainSwatchListener);</span>
<span class="nc" id="L205">        swatchPanel.removeKeyListener(mainSwatchKeyListener);</span>
<span class="nc" id="L206">        recentSwatchPanel.removeMouseListener(recentSwatchListener);</span>
<span class="nc" id="L207">        recentSwatchPanel.removeKeyListener(recentSwatchKeyListener);</span>

<span class="nc" id="L209">        swatchPanel = null;</span>
<span class="nc" id="L210">        recentSwatchPanel = null;</span>
<span class="nc" id="L211">        mainSwatchListener = null;</span>
<span class="nc" id="L212">        mainSwatchKeyListener = null;</span>
<span class="nc" id="L213">        recentSwatchListener = null;</span>
<span class="nc" id="L214">        recentSwatchKeyListener = null;</span>

<span class="nc" id="L216">        removeAll();  // strip out all the sub-components</span>
<span class="nc" id="L217">    }</span>

    public void updateChooser() {

<span class="nc" id="L221">    }</span>


<span class="nc" id="L224">    private class RecentSwatchKeyListener extends KeyAdapter {</span>
        public void keyPressed(KeyEvent e) {
<span class="nc bnc" id="L226" title="All 2 branches missed.">            if (KeyEvent.VK_SPACE == e.getKeyCode()) {</span>
<span class="nc" id="L227">                Color color = recentSwatchPanel.getSelectedColor();</span>
<span class="nc" id="L228">                setSelectedColor(color);</span>
            }
<span class="nc" id="L230">        }</span>
    }

<span class="nc" id="L233">    private class MainSwatchKeyListener extends KeyAdapter {</span>
        public void keyPressed(KeyEvent e) {
<span class="nc bnc" id="L235" title="All 2 branches missed.">            if (KeyEvent.VK_SPACE == e.getKeyCode()) {</span>
<span class="nc" id="L236">                Color color = swatchPanel.getSelectedColor();</span>
<span class="nc" id="L237">                setSelectedColor(color);</span>
<span class="nc" id="L238">                recentSwatchPanel.setMostRecentColor(color);</span>
            }
<span class="nc" id="L240">        }</span>
    }

<span class="nc" id="L243">    class RecentSwatchListener extends MouseAdapter implements Serializable {</span>
        public void mousePressed(MouseEvent e) {
<span class="nc bnc" id="L245" title="All 2 branches missed.">            if (isEnabled()) {</span>
<span class="nc" id="L246">                Color color = recentSwatchPanel.getColorForLocation(e.getX(), e.getY());</span>
<span class="nc" id="L247">                recentSwatchPanel.setSelectedColorFromLocation(e.getX(), e.getY());</span>
<span class="nc" id="L248">                setSelectedColor(color);</span>
<span class="nc" id="L249">                recentSwatchPanel.requestFocusInWindow();</span>
            }
<span class="nc" id="L251">        }</span>
    }

<span class="nc" id="L254">    class MainSwatchListener extends MouseAdapter implements Serializable {</span>
        public void mousePressed(MouseEvent e) {
<span class="nc bnc" id="L256" title="All 2 branches missed.">            if (isEnabled()) {</span>
<span class="nc" id="L257">                Color color = swatchPanel.getColorForLocation(e.getX(), e.getY());</span>
<span class="nc" id="L258">                setSelectedColor(color);</span>
<span class="nc" id="L259">                swatchPanel.setSelectedColorFromLocation(e.getX(), e.getY());</span>
<span class="nc" id="L260">                recentSwatchPanel.setMostRecentColor(color);</span>
<span class="nc" id="L261">                swatchPanel.requestFocusInWindow();</span>
            }
<span class="nc" id="L263">        }</span>
    }

}



class SwatchPanel extends JPanel {

    protected Color[] colors;
    protected Dimension swatchSize;
    protected Dimension numSwatches;
    protected Dimension gap;

    private int selRow;
    private int selCol;

<span class="nc" id="L280">    public SwatchPanel() {</span>
<span class="nc" id="L281">        initValues();</span>
<span class="nc" id="L282">        initColors();</span>
<span class="nc" id="L283">        setToolTipText(&quot;&quot;); // register for events</span>
<span class="nc" id="L284">        setOpaque(true);</span>
<span class="nc" id="L285">        setBackground(Color.white);</span>
<span class="nc" id="L286">        setFocusable(true);</span>
<span class="nc" id="L287">        setInheritsPopupMenu(true);</span>

<span class="nc" id="L289">        addFocusListener(new FocusAdapter() {</span>
            public void focusGained(FocusEvent e) {
<span class="nc" id="L291">                repaint();</span>
<span class="nc" id="L292">            }</span>

            public void focusLost(FocusEvent e) {
<span class="nc" id="L295">                repaint();</span>
<span class="nc" id="L296">            }</span>
        });

<span class="nc" id="L299">        addKeyListener(new KeyAdapter() {</span>
            public void keyPressed(KeyEvent e) {
<span class="nc" id="L301">                int typed = e.getKeyCode();</span>
<span class="nc bnc" id="L302" title="All 7 branches missed.">                switch (typed) {</span>
                    case KeyEvent.VK_UP:
<span class="nc bnc" id="L304" title="All 2 branches missed.">                        if (selRow &gt; 0) {</span>
<span class="nc" id="L305">                            selRow--;</span>
<span class="nc" id="L306">                            repaint();</span>
                        }
                        break;
                    case KeyEvent.VK_DOWN:
<span class="nc bnc" id="L310" title="All 2 branches missed.">                        if (selRow &lt; numSwatches.height - 1) {</span>
<span class="nc" id="L311">                            selRow++;</span>
<span class="nc" id="L312">                            repaint();</span>
                        }
                        break;
                    case KeyEvent.VK_LEFT:
<span class="nc bnc" id="L316" title="All 4 branches missed.">                        if (selCol &gt; 0 &amp;&amp; SwatchPanel.this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L317">                            selCol--;</span>
<span class="nc" id="L318">                            repaint();</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">                        } else if (selCol &lt; numSwatches.width - 1</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">                                &amp;&amp; !SwatchPanel.this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L321">                            selCol++;</span>
<span class="nc" id="L322">                            repaint();</span>
                        }
                        break;
                    case KeyEvent.VK_RIGHT:
<span class="nc bnc" id="L326" title="All 2 branches missed.">                        if (selCol &lt; numSwatches.width - 1</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                                &amp;&amp; SwatchPanel.this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L328">                            selCol++;</span>
<span class="nc" id="L329">                            repaint();</span>
<span class="nc bnc" id="L330" title="All 4 branches missed.">                        } else if (selCol &gt; 0 &amp;&amp; !SwatchPanel.this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L331">                            selCol--;</span>
<span class="nc" id="L332">                            repaint();</span>
                        }
                        break;
                    case KeyEvent.VK_HOME:
<span class="nc" id="L336">                        selCol = 0;</span>
<span class="nc" id="L337">                        selRow = 0;</span>
<span class="nc" id="L338">                        repaint();</span>
<span class="nc" id="L339">                        break;</span>
                    case KeyEvent.VK_END:
<span class="nc" id="L341">                        selCol = numSwatches.width - 1;</span>
<span class="nc" id="L342">                        selRow = numSwatches.height - 1;</span>
<span class="nc" id="L343">                        repaint();</span>
                        break;
                }
<span class="nc" id="L346">            }</span>
        });
<span class="nc" id="L348">    }</span>

    public Color getSelectedColor() {
<span class="nc" id="L351">        return getColorForCell(selCol, selRow);</span>
    }

    protected void initValues() {

<span class="nc" id="L356">    }</span>

    public void paintComponent(Graphics g) {
<span class="nc" id="L359">         g.setColor(getBackground());</span>
<span class="nc" id="L360">         g.fillRect(0,0,getWidth(), getHeight());</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">         for (int row = 0; row &lt; numSwatches.height; row++) {</span>
<span class="nc" id="L362">            int y = row * (swatchSize.height + gap.height);</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">            for (int column = 0; column &lt; numSwatches.width; column++) {</span>
<span class="nc" id="L364">                Color c = getColorForCell(column, row);</span>
<span class="nc" id="L365">                g.setColor(c);</span>
                int x;
<span class="nc bnc" id="L367" title="All 2 branches missed.">                if (!this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L368">                    x = (numSwatches.width - column - 1) * (swatchSize.width + gap.width);</span>
                } else {
<span class="nc" id="L370">                    x = column * (swatchSize.width + gap.width);</span>
                }
<span class="nc" id="L372">                g.fillRect( x, y, swatchSize.width, swatchSize.height);</span>
<span class="nc" id="L373">                g.setColor(Color.black);</span>
<span class="nc" id="L374">                g.drawLine( x+swatchSize.width-1, y, x+swatchSize.width-1, y+swatchSize.height-1);</span>
<span class="nc" id="L375">                g.drawLine( x, y+swatchSize.height-1, x+swatchSize.width-1, y+swatchSize.height-1);</span>

<span class="nc bnc" id="L377" title="All 6 branches missed.">                if (selRow == row &amp;&amp; selCol == column &amp;&amp; this.isFocusOwner()) {</span>
<span class="nc bnc" id="L378" title="All 2 branches missed.">                    Color c2 = new Color(c.getRed() &lt; 125 ? 255 : 0,</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">                            c.getGreen() &lt; 125 ? 255 : 0,</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">                            c.getBlue() &lt; 125 ? 255 : 0);</span>
<span class="nc" id="L381">                    g.setColor(c2);</span>

<span class="nc" id="L383">                    g.drawLine(x, y, x + swatchSize.width - 1, y);</span>
<span class="nc" id="L384">                    g.drawLine(x, y, x, y + swatchSize.height - 1);</span>
<span class="nc" id="L385">                    g.drawLine(x + swatchSize.width - 1, y, x + swatchSize.width - 1, y + swatchSize.height - 1);</span>
<span class="nc" id="L386">                    g.drawLine(x, y + swatchSize.height - 1, x + swatchSize.width - 1, y + swatchSize.height - 1);</span>
<span class="nc" id="L387">                    g.drawLine(x, y, x + swatchSize.width - 1, y + swatchSize.height - 1);</span>
<span class="nc" id="L388">                    g.drawLine(x, y + swatchSize.height - 1, x + swatchSize.width - 1, y);</span>
                }
            }
         }
<span class="nc" id="L392">    }</span>

    public Dimension getPreferredSize() {
<span class="nc" id="L395">        int x = numSwatches.width * (swatchSize.width + gap.width) - 1;</span>
<span class="nc" id="L396">        int y = numSwatches.height * (swatchSize.height + gap.height) - 1;</span>
<span class="nc" id="L397">        return new Dimension( x, y );</span>
    }

    protected void initColors() {


<span class="nc" id="L403">    }</span>

    public String getToolTipText(MouseEvent e) {
<span class="nc" id="L406">        Color color = getColorForLocation(e.getX(), e.getY());</span>
<span class="nc" id="L407">        return color.getRed()+&quot;, &quot;+ color.getGreen() + &quot;, &quot; + color.getBlue();</span>
    }

    public void setSelectedColorFromLocation(int x, int y) {
<span class="nc bnc" id="L411" title="All 2 branches missed.">        if (!this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L412">            selCol = numSwatches.width - x / (swatchSize.width + gap.width) - 1;</span>
        } else {
<span class="nc" id="L414">            selCol = x / (swatchSize.width + gap.width);</span>
        }
<span class="nc" id="L416">        selRow = y / (swatchSize.height + gap.height);</span>
<span class="nc" id="L417">        repaint();</span>
<span class="nc" id="L418">    }</span>

    public Color getColorForLocation( int x, int y ) {
        int column;
<span class="nc bnc" id="L422" title="All 2 branches missed.">        if (!this.getComponentOrientation().isLeftToRight()) {</span>
<span class="nc" id="L423">            column = numSwatches.width - x / (swatchSize.width + gap.width) - 1;</span>
        } else {
<span class="nc" id="L425">            column = x / (swatchSize.width + gap.width);</span>
        }
<span class="nc" id="L427">        int row = y / (swatchSize.height + gap.height);</span>
<span class="nc" id="L428">        return getColorForCell(column, row);</span>
    }

    private Color getColorForCell( int column, int row) {
<span class="nc" id="L432">        return colors[ (row * numSwatches.width) + column ]; // (STEVE) - change data orientation here</span>
    }




}

<span class="nc" id="L440">class RecentSwatchPanel extends SwatchPanel {</span>
    protected void initValues() {
<span class="nc" id="L442">        swatchSize = UIManager.getDimension(&quot;ColorChooser.swatchesRecentSwatchSize&quot;, getLocale());</span>
<span class="nc" id="L443">        numSwatches = new Dimension( 5, 7 );</span>
<span class="nc" id="L444">        gap = new Dimension(1, 1);</span>
<span class="nc" id="L445">    }</span>


    protected void initColors() {
<span class="nc" id="L449">        Color defaultRecentColor = UIManager.getColor(&quot;ColorChooser.swatchesDefaultRecentColor&quot;, getLocale());</span>
<span class="nc" id="L450">        int numColors = numSwatches.width * numSwatches.height;</span>

<span class="nc" id="L452">        colors = new Color[numColors];</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">        for (int i = 0; i &lt; numColors ; i++) {</span>
<span class="nc" id="L454">            colors[i] = defaultRecentColor;</span>
        }
<span class="nc" id="L456">    }</span>

    public void setMostRecentColor(Color c) {

<span class="nc" id="L460">        System.arraycopy( colors, 0, colors, 1, colors.length-1);</span>
<span class="nc" id="L461">        colors[0] = c;</span>
<span class="nc" id="L462">        repaint();</span>
<span class="nc" id="L463">    }</span>

}

<span class="nc" id="L467">class MainSwatchPanel extends SwatchPanel {</span>


    protected void initValues() {
<span class="nc" id="L471">        swatchSize = UIManager.getDimension(&quot;ColorChooser.swatchesSwatchSize&quot;, getLocale());</span>
<span class="nc" id="L472">        numSwatches = new Dimension( 31, 9 );</span>
<span class="nc" id="L473">        gap = new Dimension(1, 1);</span>
<span class="nc" id="L474">    }</span>

    protected void initColors() {
<span class="nc" id="L477">        int[] rawValues = initRawValues();</span>
<span class="nc" id="L478">        int numColors = rawValues.length / 3;</span>

<span class="nc" id="L480">        colors = new Color[numColors];</span>
<span class="nc bnc" id="L481" title="All 2 branches missed.">        for (int i = 0; i &lt; numColors ; i++) {</span>
<span class="nc" id="L482">            colors[i] = new Color( rawValues[(i*3)], rawValues[(i*3)+1], rawValues[(i*3)+2] );</span>
        }
<span class="nc" id="L484">    }</span>

    private int[] initRawValues() {

<span class="nc" id="L488">        int[] rawValues = {</span>
255, 255, 255, // first row.
204, 255, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
204, 204, 255,
255, 204, 255,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 204, 204,
255, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 255, 204,
204, 204, 204,  // second row.
153, 255, 255,
153, 204, 255,
153, 153, 255,
153, 153, 255,
153, 153, 255,
153, 153, 255,
153, 153, 255,
153, 153, 255,
153, 153, 255,
204, 153, 255,
255, 153, 255,
255, 153, 204,
255, 153, 153,
255, 153, 153,
255, 153, 153,
255, 153, 153,
255, 153, 153,
255, 153, 153,
255, 153, 153,
255, 204, 153,
255, 255, 153,
204, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 153,
153, 255, 204,
204, 204, 204,  // third row
102, 255, 255,
102, 204, 255,
102, 153, 255,
102, 102, 255,
102, 102, 255,
102, 102, 255,
102, 102, 255,
102, 102, 255,
153, 102, 255,
204, 102, 255,
255, 102, 255,
255, 102, 204,
255, 102, 153,
255, 102, 102,
255, 102, 102,
255, 102, 102,
255, 102, 102,
255, 102, 102,
255, 153, 102,
255, 204, 102,
255, 255, 102,
204, 255, 102,
153, 255, 102,
102, 255, 102,
102, 255, 102,
102, 255, 102,
102, 255, 102,
102, 255, 102,
102, 255, 153,
102, 255, 204,
153, 153, 153, // fourth row
51, 255, 255,
51, 204, 255,
51, 153, 255,
51, 102, 255,
51, 51, 255,
51, 51, 255,
51, 51, 255,
102, 51, 255,
153, 51, 255,
204, 51, 255,
255, 51, 255,
255, 51, 204,
255, 51, 153,
255, 51, 102,
255, 51, 51,
255, 51, 51,
255, 51, 51,
255, 102, 51,
255, 153, 51,
255, 204, 51,
255, 255, 51,
204, 255, 51,
153, 255, 51,
102, 255, 51,
51, 255, 51,
51, 255, 51,
51, 255, 51,
51, 255, 102,
51, 255, 153,
51, 255, 204,
153, 153, 153, // Fifth row
0, 255, 255,
0, 204, 255,
0, 153, 255,
0, 102, 255,
0, 51, 255,
0, 0, 255,
51, 0, 255,
102, 0, 255,
153, 0, 255,
204, 0, 255,
255, 0, 255,
255, 0, 204,
255, 0, 153,
255, 0, 102,
255, 0, 51,
255, 0 , 0,
255, 51, 0,
255, 102, 0,
255, 153, 0,
255, 204, 0,
255, 255, 0,
204, 255, 0,
153, 255, 0,
102, 255, 0,
51, 255, 0,
0, 255, 0,
0, 255, 51,
0, 255, 102,
0, 255, 153,
0, 255, 204,
102, 102, 102, // sixth row
0, 204, 204,
0, 204, 204,
0, 153, 204,
0, 102, 204,
0, 51, 204,
0, 0, 204,
51, 0, 204,
102, 0, 204,
153, 0, 204,
204, 0, 204,
204, 0, 204,
204, 0, 204,
204, 0, 153,
204, 0, 102,
204, 0, 51,
204, 0, 0,
204, 51, 0,
204, 102, 0,
204, 153, 0,
204, 204, 0,
204, 204, 0,
204, 204, 0,
153, 204, 0,
102, 204, 0,
51, 204, 0,
0, 204, 0,
0, 204, 51,
0, 204, 102,
0, 204, 153,
0, 204, 204,
102, 102, 102, // seventh row
0, 153, 153,
0, 153, 153,
0, 153, 153,
0, 102, 153,
0, 51, 153,
0, 0, 153,
51, 0, 153,
102, 0, 153,
153, 0, 153,
153, 0, 153,
153, 0, 153,
153, 0, 153,
153, 0, 153,
153, 0, 102,
153, 0, 51,
153, 0, 0,
153, 51, 0,
153, 102, 0,
153, 153, 0,
153, 153, 0,
153, 153, 0,
153, 153, 0,
153, 153, 0,
102, 153, 0,
51, 153, 0,
0, 153, 0,
0, 153, 51,
0, 153, 102,
0, 153, 153,
0, 153, 153,
51, 51, 51, // eigth row
0, 102, 102,
0, 102, 102,
0, 102, 102,
0, 102, 102,
0, 51, 102,
0, 0, 102,
51, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 102,
102, 0, 51,
102, 0, 0,
102, 51, 0,
102, 102, 0,
102, 102, 0,
102, 102, 0,
102, 102, 0,
102, 102, 0,
102, 102, 0,
102, 102, 0,
51, 102, 0,
0, 102, 0,
0, 102, 51,
0, 102, 102,
0, 102, 102,
0, 102, 102,
0, 0, 0, // ninth row
0, 51, 51,
0, 51, 51,
0, 51, 51,
0, 51, 51,
0, 51, 51,
0, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 51,
51, 0, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
51, 51, 0,
0, 51, 0,
0, 51, 51,
0, 51, 51,
0, 51, 51,
0, 51, 51,
51, 51, 51 };
<span class="nc" id="L768">        return rawValues;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>