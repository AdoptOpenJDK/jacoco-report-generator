<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>AbstractColorChooserPanel.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">javax.swing.colorchooser</a> &gt; <span class="el_source">AbstractColorChooserPanel.java</span></div><h1>AbstractColorChooserPanel.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1998, 2008, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.swing.colorchooser;

import java.awt.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.*;

/**
 * This is the abstract superclass for color choosers.  If you want to add
 * a new color chooser panel into a &lt;code&gt;JColorChooser&lt;/code&gt;, subclass
 * this class.
 * &lt;p&gt;
 * &lt;strong&gt;Warning:&lt;/strong&gt;
 * Serialized objects of this class will not be compatible with
 * future Swing releases. The current serialization support is
 * appropriate for short term storage or RMI between applications running
 * the same version of Swing.  As of 1.4, support for long term storage
 * of all JavaBeans&amp;trade;
 * has been added to the &lt;code&gt;java.beans&lt;/code&gt; package.
 * Please see {@link java.beans.XMLEncoder}.
 *
 * @author Tom Santos
 * @author Steve Wilson
 */
<span class="nc" id="L50">public abstract class AbstractColorChooserPanel extends JPanel {</span>

<span class="nc" id="L52">    private final PropertyChangeListener enabledListener = new PropertyChangeListener() {</span>
        public void propertyChange(PropertyChangeEvent event) {
<span class="nc" id="L54">            Object value = event.getNewValue();</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">            if (value instanceof Boolean) {</span>
<span class="nc" id="L56">                setEnabled((Boolean) value);</span>
            }
<span class="nc" id="L58">        }</span>
    };

    /**
     *
     */
    private JColorChooser chooser;

    /**
      * Invoked automatically when the model's state changes.
      * It is also called by &lt;code&gt;installChooserPanel&lt;/code&gt; to allow
      * you to set up the initial state of your chooser.
      * Override this method to update your &lt;code&gt;ChooserPanel&lt;/code&gt;.
      */
    public abstract void updateChooser();

    /**
     * Builds a new chooser panel.
     */
    protected abstract void buildChooser();

    /**
     * Returns a string containing the display name of the panel.
     * @return the name of the display panel
     */
    public abstract String getDisplayName();

    /**
     * Provides a hint to the look and feel as to the
     * &lt;code&gt;KeyEvent.VK&lt;/code&gt; constant that can be used as a mnemonic to
     * access the panel. A return value &amp;lt;= 0 indicates there is no mnemonic.
     * &lt;p&gt;
     * The return value here is a hint, it is ultimately up to the look
     * and feel to honor the return value in some meaningful way.
     * &lt;p&gt;
     * This implementation returns 0, indicating the
     * &lt;code&gt;AbstractColorChooserPanel&lt;/code&gt; does not support a mnemonic,
     * subclasses wishing a mnemonic will need to override this.
     *
     * @return KeyEvent.VK constant identifying the mnemonic; &amp;lt;= 0 for no
     *         mnemonic
     * @see #getDisplayedMnemonicIndex
     * @since 1.4
     */
    public int getMnemonic() {
<span class="nc" id="L103">        return 0;</span>
    }

    /**
     * Provides a hint to the look and feel as to the index of the character in
     * &lt;code&gt;getDisplayName&lt;/code&gt; that should be visually identified as the
     * mnemonic. The look and feel should only use this if
     * &lt;code&gt;getMnemonic&lt;/code&gt; returns a value &amp;gt; 0.
     * &lt;p&gt;
     * The return value here is a hint, it is ultimately up to the look
     * and feel to honor the return value in some meaningful way. For example,
     * a look and feel may wish to render each
     * &lt;code&gt;AbstractColorChooserPanel&lt;/code&gt; in a &lt;code&gt;JTabbedPane&lt;/code&gt;,
     * and further use this return value to underline a character in
     * the &lt;code&gt;getDisplayName&lt;/code&gt;.
     * &lt;p&gt;
     * This implementation returns -1, indicating the
     * &lt;code&gt;AbstractColorChooserPanel&lt;/code&gt; does not support a mnemonic,
     * subclasses wishing a mnemonic will need to override this.
     *
     * @return Character index to render mnemonic for; -1 to provide no
     *                   visual identifier for this panel.
     * @see #getMnemonic
     * @since 1.4
     */
    public int getDisplayedMnemonicIndex() {
<span class="nc" id="L129">        return -1;</span>
    }

    /**
     * Returns the small display icon for the panel.
     * @return the small display icon
     */
    public abstract Icon getSmallDisplayIcon();

    /**
     * Returns the large display icon for the panel.
     * @return the large display icon
     */
    public abstract Icon getLargeDisplayIcon();

    /**
     * Invoked when the panel is added to the chooser.
     * If you override this, be sure to call &lt;code&gt;super&lt;/code&gt;.
     * @param enclosingChooser  the panel to be added
     * @exception RuntimeException  if the chooser panel has already been
     *                          installed
     */
    public void installChooserPanel(JColorChooser enclosingChooser) {
<span class="nc bnc" id="L152" title="All 2 branches missed.">        if (chooser != null) {</span>
<span class="nc" id="L153">            throw new RuntimeException (&quot;This chooser panel is already installed&quot;);</span>
        }
<span class="nc" id="L155">        chooser = enclosingChooser;</span>
<span class="nc" id="L156">        chooser.addPropertyChangeListener(&quot;enabled&quot;, enabledListener);</span>
<span class="nc" id="L157">        setEnabled(chooser.isEnabled());</span>
<span class="nc" id="L158">        buildChooser();</span>
<span class="nc" id="L159">        updateChooser();</span>
<span class="nc" id="L160">    }</span>

    /**
     * Invoked when the panel is removed from the chooser.
     * If override this, be sure to call &lt;code&gt;super&lt;/code&gt;.
     */
  public void uninstallChooserPanel(JColorChooser enclosingChooser) {
<span class="nc" id="L167">        chooser.removePropertyChangeListener(&quot;enabled&quot;, enabledListener);</span>
<span class="nc" id="L168">        chooser = null;</span>
<span class="nc" id="L169">    }</span>

    /**
      * Returns the model that the chooser panel is editing.
      * @return the &lt;code&gt;ColorSelectionModel&lt;/code&gt; model this panel
      *         is editing
      */
    public ColorSelectionModel getColorSelectionModel() {
<span class="nc bnc" id="L177" title="All 2 branches missed.">        return (this.chooser != null)</span>
<span class="nc" id="L178">                ? this.chooser.getSelectionModel()</span>
                : null;
    }

    /**
     * Returns the color that is currently selected.
     * @return the &lt;code&gt;Color&lt;/code&gt; that is selected
     */
    protected Color getColorFromModel() {
<span class="nc" id="L187">        ColorSelectionModel model = getColorSelectionModel();</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">        return (model != null)</span>
<span class="nc" id="L189">                ? model.getSelectedColor()</span>
                : null;
    }

    void setSelectedColor(Color color) {
<span class="nc" id="L194">        ColorSelectionModel model = getColorSelectionModel();</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">        if (model != null) {</span>
<span class="nc" id="L196">            model.setSelectedColor(color);</span>
        }
<span class="nc" id="L198">    }</span>

    /**
     * Draws the panel.
     * @param g  the &lt;code&gt;Graphics&lt;/code&gt; object
     */
    public void paint(Graphics g) {
<span class="nc" id="L205">        super.paint(g);</span>
<span class="nc" id="L206">    }</span>

    /**
     * Returns an integer from the defaults table. If &lt;code&gt;key&lt;/code&gt; does
     * not map to a valid &lt;code&gt;Integer&lt;/code&gt;, &lt;code&gt;default&lt;/code&gt; is
     * returned.
     *
     * @param key  an &lt;code&gt;Object&lt;/code&gt; specifying the int
     * @param defaultValue Returned value if &lt;code&gt;key&lt;/code&gt; is not available,
     *                     or is not an Integer
     * @return the int
     */
    int getInt(Object key, int defaultValue) {
<span class="nc" id="L219">        Object value = UIManager.get(key, getLocale());</span>

<span class="nc bnc" id="L221" title="All 2 branches missed.">        if (value instanceof Integer) {</span>
<span class="nc" id="L222">            return ((Integer)value).intValue();</span>
        }
<span class="nc bnc" id="L224" title="All 2 branches missed.">        if (value instanceof String) {</span>
            try {
<span class="nc" id="L226">                return Integer.parseInt((String)value);</span>
<span class="nc" id="L227">            } catch (NumberFormatException nfe) {}</span>
        }
<span class="nc" id="L229">        return defaultValue;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>