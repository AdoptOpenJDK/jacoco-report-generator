<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Activatable.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JDK</a> &gt; <a href="index.html" class="el_package">java.rmi.activation</a> &gt; <span class="el_source">Activatable.java</span></div><h1>Activatable.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1997, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package java.rmi.activation;

import java.rmi.MarshalledObject;
import java.rmi.NoSuchObjectException;
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.rmi.activation.UnknownGroupException;
import java.rmi.activation.UnknownObjectException;
import java.rmi.server.RMIClientSocketFactory;
import java.rmi.server.RMIServerSocketFactory;
import java.rmi.server.RemoteServer;
import sun.rmi.server.ActivatableServerRef;

/**
 * The &lt;code&gt;Activatable&lt;/code&gt; class provides support for remote
 * objects that require persistent access over time and that
 * can be activated by the system.
 *
 * &lt;p&gt;For the constructors and static &lt;code&gt;exportObject&lt;/code&gt; methods,
 * the stub for a remote object being exported is obtained as described in
 * {@link java.rmi.server.UnicastRemoteObject}.
 *
 * &lt;p&gt;An attempt to serialize explicitly an instance of this class will
 * fail.
 *
 * @author      Ann Wollrath
 * @since       1.2
 * @serial      exclude
 */
public abstract class Activatable extends RemoteServer {

    private ActivationID id;
    /** indicate compatibility with the Java 2 SDK v1.2 version of class */
    private static final long serialVersionUID = -3120617863591563455L;

    /**
     * Constructs an activatable remote object by registering
     * an activation descriptor (with the specified location, data, and
     * restart mode) for this object, and exporting the object with the
     * specified port.
     *
     * &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Using the &lt;code&gt;Activatable&lt;/code&gt;
     * constructors that both register and export an activatable remote
     * object is strongly discouraged because the actions of registering
     * and exporting the remote object are &lt;i&gt;not&lt;/i&gt; guaranteed to be
     * atomic.  Instead, an application should register an activation
     * descriptor and export a remote object separately, so that exceptions
     * can be handled properly.
     *
     * &lt;p&gt;This method invokes the {@link
     * #exportObject(Remote,String,MarshalledObject,boolean,int)
     * exportObject} method with this object, and the specified location,
     * data, restart mode, and port.  Subsequent calls to {@link #getID}
     * will return the activation identifier returned from the call to
     * &lt;code&gt;exportObject&lt;/code&gt;.
     *
     * @param location the location for classes for this object
     * @param data the object's initialization data
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @param restart if true, the object is restarted (reactivated) when
     * either the activator is restarted or the object's activation group
     * is restarted after an unexpected crash; if false, the object is only
     * activated on demand.  Specifying &lt;code&gt;restart&lt;/code&gt; to be
     * &lt;code&gt;true&lt;/code&gt; does not force an initial immediate activation of
     * a newly registered object;  initial activation is lazy.
     * @exception ActivationException if object registration fails.
     * @exception RemoteException if either of the following fails:
     * a) registering the object with the activation system or b) exporting
     * the object to the RMI runtime.
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation.
     * @since 1.2
     **/
    protected Activatable(String location,
                          MarshalledObject&lt;?&gt; data,
                          boolean restart,
                          int port)
        throws ActivationException, RemoteException
    {
<span class="nc" id="L106">        super();</span>
<span class="nc" id="L107">        id = exportObject(this, location, data, restart, port);</span>
<span class="nc" id="L108">    }</span>

    /**
     * Constructs an activatable remote object by registering
     * an activation descriptor (with the specified location, data, and
     * restart mode) for this object, and exporting the object with the
     * specified port, and specified client and server socket factories.
     *
     * &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Using the &lt;code&gt;Activatable&lt;/code&gt;
     * constructors that both register and export an activatable remote
     * object is strongly discouraged because the actions of registering
     * and exporting the remote object are &lt;i&gt;not&lt;/i&gt; guaranteed to be
     * atomic.  Instead, an application should register an activation
     * descriptor and export a remote object separately, so that exceptions
     * can be handled properly.
     *
     * &lt;p&gt;This method invokes the {@link
     * #exportObject(Remote,String,MarshalledObject,boolean,int,RMIClientSocketFactory,RMIServerSocketFactory)
     * exportObject} method with this object, and the specified location,
     * data, restart mode, port, and client and server socket factories.
     * Subsequent calls to {@link #getID} will return the activation
     * identifier returned from the call to &lt;code&gt;exportObject&lt;/code&gt;.
     *
     * @param location the location for classes for this object
     * @param data the object's initialization data
     * @param restart if true, the object is restarted (reactivated) when
     * either the activator is restarted or the object's activation group
     * is restarted after an unexpected crash; if false, the object is only
     * activated on demand.  Specifying &lt;code&gt;restart&lt;/code&gt; to be
     * &lt;code&gt;true&lt;/code&gt; does not force an initial immediate activation of
     * a newly registered object;  initial activation is lazy.
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @param csf the client-side socket factory for making calls to the
     * remote object
     * @param ssf the server-side socket factory for receiving remote calls
     * @exception ActivationException if object registration fails.
     * @exception RemoteException if either of the following fails:
     * a) registering the object with the activation system or b) exporting
     * the object to the RMI runtime.
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation.
     * @since 1.2
     **/
    protected Activatable(String location,
                          MarshalledObject&lt;?&gt; data,
                          boolean restart,
                          int port,
                          RMIClientSocketFactory csf,
                          RMIServerSocketFactory ssf)
        throws ActivationException, RemoteException
    {
<span class="fc" id="L160">        super();</span>
<span class="fc" id="L161">        id = exportObject(this, location, data, restart, port, csf, ssf);</span>
<span class="fc" id="L162">    }</span>

    /**
     * Constructor used to activate/export the object on a specified
     * port. An &quot;activatable&quot; remote object must have a constructor that
     * takes two arguments: &lt;ul&gt;
     * &lt;li&gt;the object's activation identifier (&lt;code&gt;ActivationID&lt;/code&gt;), and
     * &lt;li&gt;the object's initialization data (a &lt;code&gt;MarshalledObject&lt;/code&gt;).
     * &lt;/ul&gt;&lt;p&gt;
     *
     * A concrete subclass of this class must call this constructor when it is
     * &lt;i&gt;activated&lt;/i&gt; via the two parameter constructor described above. As
     * a side-effect of construction, the remote object is &quot;exported&quot;
     * to the RMI runtime (on the specified &lt;code&gt;port&lt;/code&gt;) and is
     * available to accept incoming calls from clients.
     *
     * @param id activation identifier for the object
     * @param port the port number on which the object is exported
     * @exception RemoteException if exporting the object to the RMI
     * runtime fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    protected Activatable(ActivationID id, int port)
        throws RemoteException
    {
<span class="fc" id="L189">        super();</span>
<span class="fc" id="L190">        this.id = id;</span>
<span class="fc" id="L191">        exportObject(this, id, port);</span>
<span class="fc" id="L192">    }</span>

    /**
     * Constructor used to activate/export the object on a specified
     * port. An &quot;activatable&quot; remote object must have a constructor that
     * takes two arguments: &lt;ul&gt;
     * &lt;li&gt;the object's activation identifier (&lt;code&gt;ActivationID&lt;/code&gt;), and
     * &lt;li&gt;the object's initialization data (a &lt;code&gt;MarshalledObject&lt;/code&gt;).
     * &lt;/ul&gt;&lt;p&gt;
     *
     * A concrete subclass of this class must call this constructor when it is
     * &lt;i&gt;activated&lt;/i&gt; via the two parameter constructor described above. As
     * a side-effect of construction, the remote object is &quot;exported&quot;
     * to the RMI runtime (on the specified &lt;code&gt;port&lt;/code&gt;) and is
     * available to accept incoming calls from clients.
     *
     * @param id activation identifier for the object
     * @param port the port number on which the object is exported
     * @param csf the client-side socket factory for making calls to the
     * remote object
     * @param ssf the server-side socket factory for receiving remote calls
     * @exception RemoteException if exporting the object to the RMI
     * runtime fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    protected Activatable(ActivationID id, int port,
                          RMIClientSocketFactory csf,
                          RMIServerSocketFactory ssf)
        throws RemoteException
    {
<span class="fc" id="L224">        super();</span>
<span class="fc" id="L225">        this.id = id;</span>
<span class="fc" id="L226">        exportObject(this, id, port, csf, ssf);</span>
<span class="fc" id="L227">    }</span>

    /**
     * Returns the object's activation identifier.  The method is
     * protected so that only subclasses can obtain an object's
     * identifier.
     * @return the object's activation identifier
     * @since 1.2
     */
    protected ActivationID getID() {
<span class="fc" id="L237">        return id;</span>
    }

    /**
     * Register an object descriptor for an activatable remote
     * object so that is can be activated on demand.
     *
     * @param desc  the object's descriptor
     * @return the stub for the activatable remote object
     * @exception UnknownGroupException if group id in &lt;code&gt;desc&lt;/code&gt;
     * is not registered with the activation system
     * @exception ActivationException if activation system is not running
     * @exception RemoteException if remote call fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static Remote register(ActivationDesc desc)
        throws UnknownGroupException, ActivationException, RemoteException
    {
        // register object with activator.
        ActivationID id =
<span class="fc" id="L259">            ActivationGroup.getSystem().registerObject(desc);</span>
<span class="fc" id="L260">        return sun.rmi.server.ActivatableRef.getStub(desc, id);</span>
    }

    /**
     * Informs the system that the object with the corresponding activation
     * &lt;code&gt;id&lt;/code&gt; is currently inactive. If the object is currently
     * active, the object is &quot;unexported&quot; from the RMI runtime (only if
     * there are no pending or in-progress calls)
     * so the that it can no longer receive incoming calls. This call
     * informs this VM's ActivationGroup that the object is inactive,
     * that, in turn, informs its ActivationMonitor. If this call
     * completes successfully, a subsequent activate request to the activator
     * will cause the object to reactivate. The operation may still
     * succeed if the object is considered active but has already
     * unexported itself.
     *
     * @param id the object's activation identifier
     * @return true if the operation succeeds (the operation will
     * succeed if the object in currently known to be active and is
     * either already unexported or is currently exported and has no
     * pending/executing calls); false is returned if the object has
     * pending/executing calls in which case it cannot be deactivated
     * @exception UnknownObjectException if object is not known (it may
     * already be inactive)
     * @exception ActivationException if group is not active
     * @exception RemoteException if call informing monitor fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static boolean inactive(ActivationID id)
        throws UnknownObjectException, ActivationException, RemoteException
    {
<span class="fc" id="L293">        return ActivationGroup.currentGroup().inactiveObject(id);</span>
    }

    /**
     * Revokes previous registration for the activation descriptor
     * associated with &lt;code&gt;id&lt;/code&gt;. An object can no longer be
     * activated via that &lt;code&gt;id&lt;/code&gt;.
     *
     * @param id the object's activation identifier
     * @exception UnknownObjectException if object (&lt;code&gt;id&lt;/code&gt;) is unknown
     * @exception ActivationException if activation system is not running
     * @exception RemoteException if remote call to activation system fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static void unregister(ActivationID id)
        throws UnknownObjectException, ActivationException, RemoteException
    {
<span class="fc" id="L312">        ActivationGroup.getSystem().unregisterObject(id);</span>
<span class="fc" id="L313">    }</span>

    /**
     * Registers an activation descriptor (with the specified location,
     * data, and restart mode) for the specified object, and exports that
     * object with the specified port.
     *
     * &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Using this method (as well as the
     * &lt;code&gt;Activatable&lt;/code&gt; constructors that both register and export
     * an activatable remote object) is strongly discouraged because the
     * actions of registering and exporting the remote object are
     * &lt;i&gt;not&lt;/i&gt; guaranteed to be atomic.  Instead, an application should
     * register an activation descriptor and export a remote object
     * separately, so that exceptions can be handled properly.
     *
     * &lt;p&gt;This method invokes the {@link
     * #exportObject(Remote,String,MarshalledObject,boolean,int,RMIClientSocketFactory,RMIServerSocketFactory)
     * exportObject} method with the specified object, location, data,
     * restart mode, and port, and &lt;code&gt;null&lt;/code&gt; for both client and
     * server socket factories, and then returns the resulting activation
     * identifier.
     *
     * @param obj the object being exported
     * @param location the object's code location
     * @param data the object's bootstrapping data
     * @param restart if true, the object is restarted (reactivated) when
     * either the activator is restarted or the object's activation group
     * is restarted after an unexpected crash; if false, the object is only
     * activated on demand.  Specifying &lt;code&gt;restart&lt;/code&gt; to be
     * &lt;code&gt;true&lt;/code&gt; does not force an initial immediate activation of
     * a newly registered object;  initial activation is lazy.
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @return the activation identifier obtained from registering the
     * descriptor, &lt;code&gt;desc&lt;/code&gt;, with the activation system
     * the wrong group
     * @exception ActivationException if activation group is not active
     * @exception RemoteException if object registration or export fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     **/
    public static ActivationID exportObject(Remote obj,
                                            String location,
                                            MarshalledObject&lt;?&gt; data,
                                            boolean restart,
                                            int port)
        throws ActivationException, RemoteException
    {
<span class="nc" id="L362">        return exportObject(obj, location, data, restart, port, null, null);</span>
    }

    /**
     * Registers an activation descriptor (with the specified location,
     * data, and restart mode) for the specified object, and exports that
     * object with the specified port, and the specified client and server
     * socket factories.
     *
     * &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Using this method (as well as the
     * &lt;code&gt;Activatable&lt;/code&gt; constructors that both register and export
     * an activatable remote object) is strongly discouraged because the
     * actions of registering and exporting the remote object are
     * &lt;i&gt;not&lt;/i&gt; guaranteed to be atomic.  Instead, an application should
     * register an activation descriptor and export a remote object
     * separately, so that exceptions can be handled properly.
     *
     * &lt;p&gt;This method first registers an activation descriptor for the
     * specified object as follows. It obtains the activation system by
     * invoking the method {@link ActivationGroup#getSystem
     * ActivationGroup.getSystem}.  This method then obtains an {@link
     * ActivationID} for the object by invoking the activation system's
     * {@link ActivationSystem#registerObject registerObject} method with
     * an {@link ActivationDesc} constructed with the specified object's
     * class name, and the specified location, data, and restart mode.  If
     * an exception occurs obtaining the activation system or registering
     * the activation descriptor, that exception is thrown to the caller.
     *
     * &lt;p&gt;Next, this method exports the object by invoking the {@link
     * #exportObject(Remote,ActivationID,int,RMIClientSocketFactory,RMIServerSocketFactory)
     * exportObject} method with the specified remote object, the
     * activation identifier obtained from registration, the specified
     * port, and the specified client and server socket factories.  If an
     * exception occurs exporting the object, this method attempts to
     * unregister the activation identifier (obtained from registration) by
     * invoking the activation system's {@link
     * ActivationSystem#unregisterObject unregisterObject} method with the
     * activation identifier.  If an exception occurs unregistering the
     * identifier, that exception is ignored, and the original exception
     * that occurred exporting the object is thrown to the caller.
     *
     * &lt;p&gt;Finally, this method invokes the {@link
     * ActivationGroup#activeObject activeObject} method on the activation
     * group in this VM with the activation identifier and the specified
     * remote object, and returns the activation identifier to the caller.
     *
     * @param obj the object being exported
     * @param location the object's code location
     * @param data the object's bootstrapping data
     * @param restart if true, the object is restarted (reactivated) when
     * either the activator is restarted or the object's activation group
     * is restarted after an unexpected crash; if false, the object is only
     * activated on demand.  Specifying &lt;code&gt;restart&lt;/code&gt; to be
     * &lt;code&gt;true&lt;/code&gt; does not force an initial immediate activation of
     * a newly registered object;  initial activation is lazy.
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @param csf the client-side socket factory for making calls to the
     * remote object
     * @param ssf the server-side socket factory for receiving remote calls
     * @return the activation identifier obtained from registering the
     * descriptor with the activation system
     * @exception ActivationException if activation group is not active
     * @exception RemoteException if object registration or export fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     **/
    public static ActivationID exportObject(Remote obj,
                                            String location,
                                            MarshalledObject&lt;?&gt; data,
                                            boolean restart,
                                            int port,
                                            RMIClientSocketFactory csf,
                                            RMIServerSocketFactory ssf)
        throws ActivationException, RemoteException
    {
<span class="fc" id="L439">        ActivationDesc desc = new ActivationDesc(obj.getClass().getName(),</span>
                                                 location, data, restart);
        /*
         * Register descriptor.
         */
<span class="fc" id="L444">        ActivationSystem system =  ActivationGroup.getSystem();</span>
<span class="fc" id="L445">        ActivationID id = system.registerObject(desc);</span>

        /*
         * Export object.
         */
        try {
<span class="fc" id="L451">            exportObject(obj, id, port, csf, ssf);</span>
<span class="nc" id="L452">        } catch (RemoteException e) {</span>
            /*
             * Attempt to unregister activation descriptor because export
             * failed and register/export should be atomic (see 4323621).
             */
            try {
<span class="nc" id="L458">                system.unregisterObject(id);</span>
<span class="nc" id="L459">            } catch (Exception ex) {</span>
<span class="nc" id="L460">            }</span>
            /*
             * Report original exception.
             */
<span class="nc" id="L464">            throw e;</span>
<span class="fc" id="L465">        }</span>

        /*
         * This call can't fail (it is a local call, and the only possible
         * exception, thrown if the group is inactive, will not be thrown
         * because the group is not inactive).
         */
<span class="fc" id="L472">        ActivationGroup.currentGroup().activeObject(id, obj);</span>

<span class="fc" id="L474">        return id;</span>
    }

    /**
     * Export the activatable remote object to the RMI runtime to make
     * the object available to receive incoming calls. The object is
     * exported on an anonymous port, if &lt;code&gt;port&lt;/code&gt; is zero. &lt;p&gt;
     *
     * During activation, this &lt;code&gt;exportObject&lt;/code&gt; method should
     * be invoked explicitly by an &quot;activatable&quot; object, that does not
     * extend the &lt;code&gt;Activatable&lt;/code&gt; class. There is no need for objects
     * that do extend the &lt;code&gt;Activatable&lt;/code&gt; class to invoke this
     * method directly because the object is exported during construction.
     *
     * @return the stub for the activatable remote object
     * @param obj the remote object implementation
     * @param id the object's  activation identifier
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @exception RemoteException if object export fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static Remote exportObject(Remote obj,
                                      ActivationID id,
                                      int port)
        throws RemoteException
    {
<span class="fc" id="L503">        return exportObject(obj, new ActivatableServerRef(id, port));</span>
    }

    /**
     * Export the activatable remote object to the RMI runtime to make
     * the object available to receive incoming calls. The object is
     * exported on an anonymous port, if &lt;code&gt;port&lt;/code&gt; is zero. &lt;p&gt;
     *
     * During activation, this &lt;code&gt;exportObject&lt;/code&gt; method should
     * be invoked explicitly by an &quot;activatable&quot; object, that does not
     * extend the &lt;code&gt;Activatable&lt;/code&gt; class. There is no need for objects
     * that do extend the &lt;code&gt;Activatable&lt;/code&gt; class to invoke this
     * method directly because the object is exported during construction.
     *
     * @return the stub for the activatable remote object
     * @param obj the remote object implementation
     * @param id the object's  activation identifier
     * @param port the port on which the object is exported (an anonymous
     * port is used if port=0)
     * @param csf the client-side socket factory for making calls to the
     * remote object
     * @param ssf the server-side socket factory for receiving remote calls
     * @exception RemoteException if object export fails
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static Remote exportObject(Remote obj,
                                      ActivationID id,
                                      int port,
                                      RMIClientSocketFactory csf,
                                      RMIServerSocketFactory ssf)
        throws RemoteException
    {
<span class="fc" id="L537">        return exportObject(obj, new ActivatableServerRef(id, port, csf, ssf));</span>
    }

    /**
     * Remove the remote object, obj, from the RMI runtime. If
     * successful, the object can no longer accept incoming RMI calls.
     * If the force parameter is true, the object is forcibly unexported
     * even if there are pending calls to the remote object or the
     * remote object still has calls in progress.  If the force
     * parameter is false, the object is only unexported if there are
     * no pending or in progress calls to the object.
     *
     * @param obj the remote object to be unexported
     * @param force if true, unexports the object even if there are
     * pending or in-progress calls; if false, only unexports the object
     * if there are no pending or in-progress calls
     * @return true if operation is successful, false otherwise
     * @exception NoSuchObjectException if the remote object is not
     * currently exported
     * @exception UnsupportedOperationException if and only if activation is
     * not supported by this implementation
     * @since 1.2
     */
    public static boolean unexportObject(Remote obj, boolean force)
        throws NoSuchObjectException
    {
<span class="fc" id="L563">        return sun.rmi.transport.ObjectTable.unexportObject(obj, force);</span>
    }

    /**
     * Exports the specified object using the specified server ref.
     */
    private static Remote exportObject(Remote obj, ActivatableServerRef sref)
        throws RemoteException
    {
        // if obj extends Activatable, set its ref.
<span class="fc bfc" id="L573" title="All 2 branches covered.">        if (obj instanceof Activatable) {</span>
<span class="fc" id="L574">            ((Activatable) obj).ref = sref;</span>

        }
<span class="fc" id="L577">        return sref.exportObject(obj, null, false);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>