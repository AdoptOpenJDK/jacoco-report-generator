<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>LineEvent.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Foo</a> &gt; <a href="index.html" class="el_package">javax.sound.sampled</a> &gt; <span class="el_source">LineEvent.java</span></div><h1>LineEvent.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 1999, 2003, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.sound.sampled;

/**
 * The &lt;code&gt;LineEvent&lt;/code&gt; class encapsulates information that a line
 * sends its listeners whenever the line opens, closes, starts, or stops.
 * Each of these four state changes is represented by a corresponding
 * type of event.  A listener receives the event as a parameter to its
 * {@link LineListener#update update} method.  By querying the event,
 * the listener can learn the type of event, the line responsible for
 * the event, and how much data the line had processed when the event occurred.
 *
 * &lt;p&gt;Although this class implements Serializable, attempts to
 * serialize a &lt;code&gt;LineEvent&lt;/code&gt; object will fail.
 *
 * @author Kara Kytle
 *
 * @see Line
 * @see LineListener#update
 * @since 1.3
 *
 * @serial exclude
 */
public class LineEvent extends java.util.EventObject {

    // INSTANCE VARIABLES

    /**
     * The kind of line event (&lt;code&gt;OPEN&lt;/code&gt;, &lt;code&gt;CLOSE&lt;/code&gt;,
     * &lt;code&gt;START&lt;/code&gt;, or &lt;code&gt;STOP&lt;/code&gt;).
     * @see #getType
     * @serial
     */
    private final Type type;

    /**
     * The media position when the event occurred, expressed in sample frames.
     * Note that this field is only relevant to certain events generated by
     * data lines, such as &lt;code&gt;START&lt;/code&gt; and &lt;code&gt;STOP&lt;/code&gt;.  For
     * events generated by lines that do not count sample frames, and for any
     * other events for which this value is not known, the position value
     * should be {@link AudioSystem#NOT_SPECIFIED}.
     * @serial
     * @see #getFramePosition
     */
    private final long position;


    /**
     * Constructs a new event of the specified type, originating from the specified line.
     * @param line the source of this event
     * @param type the event type (&lt;code&gt;OPEN&lt;/code&gt;, &lt;code&gt;CLOSE&lt;/code&gt;, &lt;code&gt;START&lt;/code&gt;, or &lt;code&gt;STOP&lt;/code&gt;)
     * @param position the number of sample frames that the line had already processed when the event occurred,
     * or {@link AudioSystem#NOT_SPECIFIED}
     *
     * @throws IllegalArgumentException if &lt;code&gt;line&lt;/code&gt; is
     * &lt;code&gt;null&lt;/code&gt;.
     */
    public LineEvent(Line line, Type type, long position) {

<span class="nc" id="L85">        super(line);</span>
<span class="nc" id="L86">        this.type = type;</span>
<span class="nc" id="L87">        this.position = position;</span>
<span class="nc" id="L88">    }</span>

    /**
     * Obtains the audio line that is the source of this event.
     * @return the line responsible for this event
     */
    public final Line getLine() {

<span class="nc" id="L96">        return (Line)getSource();</span>
    }


    /**
     * Obtains the event's type.
     * @return this event's type ({@link Type#OPEN}, {@link Type#CLOSE},
     * {@link Type#START}, or {@link Type#STOP})
     */
    public final Type getType() {

<span class="nc" id="L107">        return type;</span>
    }

    /**
     * Obtains the position in the line's audio data when the event occurred, expressed in sample frames.
     * For example, if a source line had already played back 14 sample frames at the time it was
     * paused, the pause event would report the line's position as 14.  The next frame to be processed
     * would be frame number 14 using zero-based numbering, or 15 using one-based numbering.
     * &lt;p&gt;
     * Note that this field is relevant only to certain events generated by
     * data lines, such as &lt;code&gt;START&lt;/code&gt; and &lt;code&gt;STOP&lt;/code&gt;.  For
     * events generated by lines that do not count sample frames, and for any
     * other events for which this value is not known, the position value
     * should be {@link AudioSystem#NOT_SPECIFIED}.
     *
     * @return the line's position as a sample frame number
     */
    /*
     * $$kk: 04.20.99: note to myself: should make sure our implementation is consistent with this.
     * which is a reasonable definition....
     */
    public final long getFramePosition() {

<span class="nc" id="L130">        return position;</span>
    }

    /**
     * Obtains a string representation of the event.  The contents of the string may vary
     * between implementations of Java Sound.
     * @return a string describing the event.
     */
    public String toString() {
<span class="nc" id="L139">        String sType = &quot;&quot;;</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">        if (type != null) sType = type.toString()+&quot; &quot;;</span>
        String sLine;
<span class="nc bnc" id="L142" title="All 2 branches missed.">        if (getLine() == null) {</span>
<span class="nc" id="L143">            sLine = &quot;null&quot;;</span>
        } else {
<span class="nc" id="L145">            sLine = getLine().toString();</span>
        }
<span class="nc" id="L147">        return new String(sType + &quot;event from line &quot; + sLine);</span>
    }


    /**
     * The LineEvent.Type inner class identifies what kind of event occurred on a line.
     * Static instances are provided for the common types (OPEN, CLOSE, START, and STOP).
     *
     * @see LineEvent#getType()
     */
    public static class Type {


        /**
         * Type name.
         */
        // $$kk: 03.25.99: why can't this be final??
        private /*final*/ String name;

        /**
         * Constructs a new event type.
         * @param name name of the type
         */
<span class="nc" id="L170">        protected Type(String name) {</span>
<span class="nc" id="L171">            this.name = name;</span>
<span class="nc" id="L172">        }</span>


        //$$fb 2002-11-26: fix for 4695001: SPEC: description of equals() method contains typo
        /**
         * Indicates whether the specified object is equal to this event type,
         * returning &lt;code&gt;true&lt;/code&gt; if the objects are identical.
         * @param obj the reference object with which to compare
         * @return &lt;code&gt;true&lt;/code&gt; if this event type is the same as
         * &lt;code&gt;obj&lt;/code&gt;; &lt;code&gt;false&lt;/code&gt; otherwise
         */
        public final boolean equals(Object obj) {
<span class="nc" id="L184">            return super.equals(obj);</span>
        }


        /**
         * Finalizes the hashcode method.
         */
        public final int hashCode() {
<span class="nc" id="L192">            return super.hashCode();</span>
        }


        /**
         * Returns the type name as the string representation.
         */
        public String toString() {
<span class="nc" id="L200">            return name;</span>
        }


        // LINE EVENT TYPE DEFINES

        /**
         * A type of event that is sent when a line opens, reserving system
         * resources for itself.
         * @see #CLOSE
         * @see Line#open
         */
<span class="nc" id="L212">        public static final Type OPEN   = new Type(&quot;Open&quot;);</span>


        /**
         * A type of event that is sent when a line closes, freeing the system
         * resources it had obtained when it was opened.
         * @see #OPEN
         * @see Line#close
         */
<span class="nc" id="L221">        public static final Type CLOSE  = new Type(&quot;Close&quot;);</span>


        /**
         * A type of event that is sent when a line begins to engage in active
         * input or output of audio data in response to a
         * {@link DataLine#start start} request.
         * @see #STOP
         * @see DataLine#start
         */
<span class="nc" id="L231">        public static final Type START  = new Type(&quot;Start&quot;);</span>


        /**
         * A type of event that is sent when a line ceases active input or output
         * of audio data in response to a {@link DataLine#stop stop} request,
         * or because the end of media has been reached.
         * @see #START
         * @see DataLine#stop
         */
<span class="nc" id="L241">        public static final Type STOP   = new Type(&quot;Stop&quot;);</span>


        /**
         * A type of event that is sent when a line ceases to engage in active
         * input or output of audio data because the end of media has been reached.
         */
        /*
         * ISSUE: we may want to get rid of this.  Is JavaSound
         * responsible for reporting this??
         *
         * [If it's decided to keep this API, the docs will need to be updated to include mention
         * of EOM events elsewhere.]
         */
        //public static final Type EOM  = new Type(&quot;EOM&quot;);


        /**
         * A type of event that is sent when a line begins to engage in active
         * input or output of audio data.  Examples of when this happens are
         * when a source line begins or resumes writing data to its mixer, and
         * when a target line begins or resumes reading data from its mixer.
         * @see #STOP
         * @see SourceDataLine#write
         * @see TargetDataLine#read
         * @see DataLine#start
         */
        //public static final Type ACTIVE       = new Type(&quot;ACTIVE&quot;);


        /**
         * A type of event that is sent when a line ceases active input or output
         * of audio data.
         * @see #START
         * @see DataLine#stop
         */
        //public static final Type INACTIVE     = new Type(&quot;INACTIVE&quot;);

    } // class Type

} // class LineEvent
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312031056</span></div></body></html>